import{f as Z,r as X,c as Y,B as oe,J as se,a as T,b as c,d as C,h as L,w as s,e as u,F as K,g as ee,t as G,u as m,j as U,a3 as _e,s as P,l as _,a4 as re,k as Q,D as we,v as fe,x as ve,z as q,o as ue,a5 as ge,a6 as he,n as ae,a7 as Ce,a8 as be,R as de,O as ne,P as ke,i as xe,m as pe,C as Be,y as De,E as Ae,M as $e,G as ie,a9 as Te,W as Se,V as me,L as ce}from"./index.2b72f3d0.js";import{_ as Ve}from"./headTools.vue_vue_type_script_setup_true_lang.2d938dcb.js";import{_ as Ie}from"./aceDrawer.vue_vue_type_script_setup_true_lang.3bccbfa4.js";const Le={class:"main-right"},Ue={key:0},Oe=P("\u9009\u62E9\u56FE\u7247"),Re=P("\u56FE\u8868\u7F16\u8F91"),ze=P("\u7F16\u8F91\u66F4\u591A\u5185\u8054\u6837\u5F0F"),je=P("\u8868\u683C\u5C5E\u6027"),Me=P("Table-column"),Xe=P("\u9759\u6001"),Ye=P("\u52A8\u6001"),qe=P("\u7F16\u8F91\u6570\u636E"),He=_("h3",null,"\u63A5\u53E3\u6570\u636E\u5904\u7406\u4E8B\u4EF6",-1),Pe=P("beforeRequest"),Ne=P("afterResponse"),We=P("\u4E0A\u4F20"),Ke=P("\u7F16\u8F91\u6837\u5F0F"),Je=Z({__name:"configControl",props:{config:null},emits:["update:config","openDrawer"],setup(d,{expose:n,emit:i}){const e=d,l=X({}),F=Y(()=>l.value.type),k=t=>{i("update:config",Object.assign({},e.config,t))},y=oe({bgColor:"",bgLinear:"",bgAngle:0,bgUpload:"",bgSelect:""});se(()=>e.config,t=>{if(!Object.keys(l.value).length){const o=t.background||"";if(o.indexOf("url")!==-1){const v=new RegExp("(?<=url\\()(.*?)(?=\\))","g"),g=o.match(v);Object.assign(y,{bgUpload:g,bgSelect:3})}else if(o.indexOf("linear")!==-1){const g=o.substring(o.indexOf("(")+1,o.lastIndexOf(")")).split(/,(?![^(]*\))(?![^"']*["'](?:[^"']*["'][^"']*["'])*[^"']*$)/);Object.assign(y,{bgColor:g[1].trim(),bgLinear:g[2].trim(),bgAngle:Number(g[0].replace("deg","")),bgSelect:2})}else Object.assign(y,{bgColor:o,bgSelect:1})}},{immediate:!0});const S=()=>{let t="";switch(y.bgSelect){case 1:t=y.bgColor;break;case 2:t=`linear-gradient(${y.bgAngle}deg, ${y.bgColor}, ${y.bgLinear})`;break;case 3:t=`url(${y.bgUpload})`;break}D("background",t)},D=(t,o)=>{k({[t]:o})},O=t=>{y.bgUpload=t.path},x=t=>{l.value=t},w=Y(()=>{var t,o,v;if(Object.keys(l.value).length){const{config:g={},position:j,type:$}=l.value;return[{type:"group",title:"\u4F4D\u7F6E\u4FE1\u606F"},{type:"number",label:"width",value:j.width,placeholder:"\u8BF7\u8F93\u5165\u5BBD\u5EA6",key:"width",path:"position"},{type:"number",label:"height",value:j.height,placeholder:"\u8BF7\u8F93\u5165\u9AD8\u5EA6",key:"height",path:"position"},{type:"number",label:"left",value:j.left,key:"left",path:"position"},{type:"number",label:"top",value:j.top,key:"top",path:"position"},{type:"number",label:"zIndex",value:j.zIndex,placeholder:"\u8BF7\u8F93\u5165\u5C42\u7EA7",key:"zIndex",path:"position"},{type:"group",title:"\u5C5E\u6027\u4FE1\u606F"},{type:"switch",label:"\u9501\u5B9A",value:g.lock,key:"lock"},{type:"switch",label:"\u9690\u85CF",value:j.display,key:"display",path:"position"},{type:"input",label:"\u6837\u5F0F\u7C7B\u540D",placeholder:"\u65B9\u4FBF\u5F15\u7528\u4E2A\u6027\u5316\u6837\u5F0F",value:g.class,key:"class"},{label:"\u6587\u672C\u5185\u5BB9",placeholder:"\u8BF7\u8F93\u5165\u6587\u672C\u5185\u5BB9",value:g.text,key:"text",vShow:["text"]},{type:"select",label:"\u6EDA\u52A8\u65B9\u5411",placeholder:"\u8BF7\u9009\u62E9\u6EDA\u52A8\u65B9\u5411",value:g.direction,key:"direction",vShow:["sText"],options:{left:"\u4ECE\u5DE6\u5230\u53F3",right:"\u4ECE\u53F3\u5230\u5DE6",top:"\u4ECE\u4E0A\u5230\u4E0B",bottom:"\u4ECE\u4E0B\u5230\u4E0A"}},{type:"number",label:"\u6EDA\u52A8\u901F\u5EA6",placeholder:"\u6EDA\u52A8\u901F\u5EA6\uFF0C\u6570\u5B57\u8D8A\u5927\u901F\u5EA6\u8D8A\u6162",value:g.speed,key:"speed",vShow:["sText"]},{type:"number",label:"\u6EDA\u52A8\u6B65\u957F",placeholder:"\u6BCF\u5355\u4F4D\u65F6\u95F4\u6EDA\u52A8\u7684\u8DDD\u79BB\uFF0C\u9ED8\u8BA41",value:g.step,key:"step",vShow:["sText"]},{type:"textarea",label:"\u6587\u672C\u5185\u5BB9",placeholder:"\u8BF7\u8F93\u5165\u6587\u672C\u5185\u5BB9\uFF0C\u652F\u6301html",value:g.text,key:"text",vShow:["sText"]},{label:"\u5B57\u4F53\u5927\u5C0F",placeholder:"\u6587\u672C\u5B57\u4F53\u5927\u5C0F,\u598214px",value:(t=g.style)==null?void 0:t.fontSize,key:"fontSize",path:"style",vShow:["text","clock"]},{label:"\u8FB9\u6846",placeholder:"\u59821px solid #000",value:(o=g.style)==null?void 0:o.border,key:"border",path:"style",vShow:["border"]},{type:"color",label:"\u5B57\u4F53\u989C\u8272",value:(v=g.style)==null?void 0:v.color,key:"color",path:"style",vShow:["text","clock"]},{type:"select",label:"\u65F6\u95F4\u683C\u5F0F",value:g.dateTime,key:"dateTime",allowCreate:!0,filterable:!0,placeholder:"\u9009\u62E9\u6216\u521B\u5EFA\u65F6\u95F4\u683C\u5F0F",vShow:["clock"],options:{"{y}-{m}-{d}":"{y}-{m}-{d}","{h}:{i}:{s}":"{h}:{i}:{s}","{y}-{m}-{d} {h}:{i}:{s}":"{y}-{m}-{d} {h}:{i}:{s}","{y}\u5E74{m}\u6708{d}\u65E5 {h}:{i}:{s} \u661F\u671F{a}":"{y}\u5E74{m}\u6708{d}\u65E5 {h}:{i}:{s} \u661F\u671F{a}"}},{label:"\u7EC4\u4EF6\u540D\u79F0",value:g.component,placeholder:"\u5168\u5C40\u6CE8\u518C\u7684\u7EC4\u4EF6\u540D\u79F0",key:"component",vShow:["component"]},{type:"switch",label:"\u662F\u5426\u8F6E\u64AD",value:g.carousel,key:"carousel",vShow:["table"]},{type:"number",label:"\u6EDA\u52A8\u901F\u5EA6",placeholder:"\u5F00\u542F\u8F6E\u64AD\u6709\u6548",value:g.speed,key:"speed",vShow:["table"]}].filter(V=>{let b=!0;return V.vShow&&(b=V.vShow.includes($)),V.vHide&&(b=!V.vHide.includes($)),b})}return[]}),E=(t,o)=>{var v;t.path==="position"?l.value.position[t.key]=o:t.path==="style"?((v=l.value.config)!=null&&v.style||(l.value.config.style={}),l.value.config.style[t.key]=o):(t.type==="number"&&(o=parseInt(o)),l.value.config[t.key]=o)},H=()=>{i("openDrawer",{codeType:"css",type:"css",title:"\u5F53\u524D\u5E94\u7528\u9875\u7684\u6837\u5F0F\uFF0C\u7C7B\u4F3C\u4E8E.vue\u6587\u4EF6\u4E2D\u7684style scoped\u4E2D\u7684\u6837\u5F0F"})},W=()=>{i("openDrawer",{content:l.value.option,title:"\u53EF\u53C2\u8003echarts\u76F8\u5173\u4F8B\u5B50\u7F16\u8F91",callback:t=>{l.value.option=t}})},f=()=>{var t;i("openDrawer",{codeType:"json",content:((t=l.value.config)==null?void 0:t.style)||{},title:"\u53EF\u8F93\u5165\u66F4\u591A\u7684css\u6837\u5F0F\uFF0C\u987B\u4E3Ajson\u683C\u5F0F",callback:o=>{l.value.config.style=o}})},B=()=>{var t;i("openDrawer",{codeType:"json",content:((t=l.value.config)==null?void 0:t.props)||{},title:"\u652F\u6301\u6240\u6709\u8868\u683Cprops\u5C5E\u6027\uFF0C\u53EF\u53C2\u8003el-table\u3002json\u683C\u5F0F",callback:o=>{l.value.config.props=o}})},R=()=>{let t=l.value.columns;(!t||!t.length)&&(t=[{prop:"",label:""}]),i("openDrawer",{codeType:"json",content:t,title:"\u8868\u683C\u5217\u8BBE\u7F6E\uFF0C\u53EF\u53C2\u8003table-column\u5C5E\u6027",callback:o=>{l.value.columns=o}})},z=t=>{let o=l.value.events&&l.value.events[t];o||(t==="beforeRequest"?o=v=>(console.log("beforeRequest",v),v):o=(v,g)=>(console.log("afterResponse",v,g),g)),i("openDrawer",{content:o,title:t==="beforeRequest"?"\u8FD9\u91CC\u53EF\u5904\u7406\u8BF7\u6C42\u524D\u7684\u53C2\u6570\uFF0C\u8FD4\u56DE\u76F8\u5E94\u53C2\u6570\u7ED9\u63A5\u53E3":"\u63A5\u53E3\u6570\u636E\u5904\u7406\u3002\u4E5F\u53EF\u4E3A\u5B57\u7B26\u4E32\uFF0C\u5982opt=formatTest",callback:v=>{l.value.events||(l.value.events={}),l.value.events[t]=v}})},A=()=>{F.value==="table"?i("openDrawer",{content:l.value.tableData,title:"\u8868\u683C\u5217\u8868\u6570\u636E\u3002\u6839\u636E\u8BBE\u5B9A\u7684table-column\u5217\u6570\u636E\u8BBE\u7F6E\u5BF9\u5E94\u7684\u6570\u636E",callback:t=>{l.value.tableData=t}}):W()};return n({setCurrent:x}),(t,o)=>{const v=T("el-switch"),g=T("el-color-picker"),j=T("el-input"),$=T("el-option"),V=T("el-select"),b=T("el-form-item"),a=T("el-button"),p=T("el-upload"),h=T("el-form"),M=T("el-tab-pane"),J=T("el-radio"),te=T("el-radio-group"),I=T("el-tabs"),le=T("el-slider");return c(),C("div",Le,[Object.keys(l.value).length?(c(),L(I,{key:0,class:"tabs","model-value":"data"},{default:s(()=>[u(M,{label:"\u4F4D\u7F6E\u5C5E\u6027",name:"screen"},{default:s(()=>[u(h,{size:"small"},{default:s(()=>[(c(!0),C(K,null,ee(m(w),(r,Fe)=>(c(),L(b,{label:r.label,key:Fe},{default:s(()=>[r.type==="group"?(c(),C("h3",Ue,G(r.title),1)):r.type==="switch"?(c(),L(v,{key:1,"model-value":r.value,onChange:N=>E(r,N)},null,8,["model-value","onChange"])):r.type==="color"?(c(),L(g,{key:2,"show-alpha":"",onChange:N=>E(r,N),"model-value":r.value},null,8,["onChange","model-value"])):r.type==="textarea"?(c(),L(j,{key:3,type:"textarea",placeholder:r.placeholder,onChange:N=>E(r,N),"model-value":r.value},null,8,["placeholder","onChange","model-value"])):r.type==="select"?(c(),L(V,{key:4,allowCreate:r.allowCreate,filterable:r.filterable,placeholder:r.placeholder,onChange:N=>E(r,N),"model-value":r.value},{default:s(()=>[(c(!0),C(K,null,ee(r.options,(N,Ee)=>(c(),L($,{key:N,label:N,value:Ee},null,8,["label","value"]))),128))]),_:2},1032,["allowCreate","filterable","placeholder","onChange","model-value"])):(c(),L(j,{key:5,placeholder:r.placeholder,"model-value":r.value,onInput:N=>E(r,N)},null,8,["placeholder","model-value","onInput"]))]),_:2},1032,["label"]))),128)),["image","background"].includes(m(F))?(c(),L(b,{key:0},{default:s(()=>[u(p,null,{default:s(()=>[u(a,{type:"primary"},{default:s(()=>[Oe]),_:1})]),_:1})]),_:1})):U("",!0),["line","bar","pie","echarts"].includes(m(F))?(c(),L(b,{key:1},{default:s(()=>[u(a,{type:"primary",onClick:W},{default:s(()=>[Re]),_:1})]),_:1})):U("",!0),["text","sText","image","background","border","clock"].includes(m(F))?(c(),L(b,{key:2},{default:s(()=>[u(a,{type:"primary",onClick:f},{default:s(()=>[ze]),_:1})]),_:1})):U("",!0),["table"].includes(m(F))?(c(),L(b,{key:3},{default:s(()=>[u(a,{type:"primary",onClick:B},{default:s(()=>[je]),_:1}),u(a,{type:"primary",onClick:R},{default:s(()=>[Me]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1}),u(M,{label:"\u6570\u636E",name:"data"},{default:s(()=>[u(h,{size:"small"},{default:s(()=>[u(b,{label:"\u6570\u636E\u7C7B\u578B"},{default:s(()=>[u(te,{modelValue:l.value.config.optionsType,"onUpdate:modelValue":o[0]||(o[0]=r=>l.value.config.optionsType=r)},{default:s(()=>[u(J,{label:0},{default:s(()=>[Xe]),_:1}),u(J,{label:1},{default:s(()=>[Ye]),_:1})]),_:1},8,["modelValue"])]),_:1}),l.value.config.optionsType===0?(c(),L(b,{key:0},{default:s(()=>[u(a,{type:"primary",onClick:A},{default:s(()=>[qe]),_:1})]),_:1})):U("",!0),["line","bar","pie","echarts","text","sText","table"].includes(m(F))&&l.value.config.optionsType===1?(c(),C(K,{key:1},[u(b,null,{default:s(()=>[u(j,{modelValue:l.value.config.requestUrl,"onUpdate:modelValue":o[2]||(o[2]=r=>l.value.config.requestUrl=r),placeholder:"\u63A5\u53E3URL\u6216api\u4E2D\u7684key"},{prepend:s(()=>[u(V,{modelValue:l.value.config.method,"onUpdate:modelValue":o[1]||(o[1]=r=>l.value.config.method=r),style:{width:"60px"}},{default:s(()=>[u($,{label:"get",value:"get"}),u($,{label:"post",value:"post"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),u(b,null,{default:s(()=>[He]),_:1}),u(b,null,{default:s(()=>[u(a,{onClick:o[3]||(o[3]=r=>z("beforeRequest"))},{default:s(()=>[Pe]),_:1})]),_:1}),u(b,null,{default:s(()=>[u(a,{onClick:o[4]||(o[4]=r=>z("afterResponse"))},{default:s(()=>[Ne]),_:1})]),_:1})],64)):U("",!0)]),_:1})]),_:1})]),_:1})):(c(),L(I,{key:1,class:"tabs","model-value":"screen"},{default:s(()=>[u(M,{label:"\u5927\u5C4F\u914D\u7F6E",name:"screen"},{default:s(()=>[u(h,{size:"small"},{default:s(()=>[u(b,{label:"\u5927\u5C4F\u5BBD\u5EA6"},{default:s(()=>[u(j,{placeholder:"\u8BF7\u8F93\u5165\u5927\u5C4F\u5BBD\u5EA6","model-value":d.config.width,onInput:o[5]||(o[5]=r=>D("width",r))},null,8,["model-value"])]),_:1}),u(b,{label:"\u5927\u5C4F\u9AD8\u5EA6"},{default:s(()=>[u(j,{placeholder:"\u8BF7\u8F93\u5165\u5927\u5C4F\u9AD8\u5EA6","model-value":d.config.height,onInput:o[6]||(o[6]=r=>D("height",r))},null,8,["model-value"])]),_:1}),u(b,{class:"color-picker",label:"\u4E3B\u8272"},{default:s(()=>[u(g,{"show-alpha":"",onChange:o[7]||(o[7]=r=>D("primary",r)),"model-value":d.config.primary},null,8,["model-value"])]),_:1}),u(b,{label:"\u80CC\u666F"},{default:s(()=>[u(V,{modelValue:y.bgSelect,"onUpdate:modelValue":o[8]||(o[8]=r=>y.bgSelect=r),onChange:S},{default:s(()=>[u($,{value:1,label:"\u80CC\u666F\u8272"}),u($,{value:2,label:"\u6E10\u53D8\u8272"}),u($,{value:3,label:"\u80CC\u666F\u56FE"})]),_:1},8,["modelValue"])]),_:1}),y.bgSelect!==3?(c(),L(b,{key:0,class:"color-picker"},{default:s(()=>[u(g,{"show-alpha":"",modelValue:y.bgColor,"onUpdate:modelValue":o[9]||(o[9]=r=>y.bgColor=r),onChange:S},null,8,["modelValue"])]),_:1})):U("",!0),y.bgSelect===2?(c(),C(K,{key:1},[u(b,{class:"color-picker"},{default:s(()=>[u(g,{"show-alpha":"",modelValue:y.bgLinear,"onUpdate:modelValue":o[10]||(o[10]=r=>y.bgLinear=r),onChange:S},null,8,["modelValue"])]),_:1}),u(b,{label:"\u6E10\u53D8\u89D2\u5EA6"},{default:s(()=>[u(le,{modelValue:y.bgAngle,"onUpdate:modelValue":o[11]||(o[11]=r=>y.bgAngle=r),max:360,onChange:S},null,8,["modelValue"])]),_:1})],64)):U("",!0),y.bgSelect===3?(c(),L(b,{key:2,class:"upload-image"},{default:s(()=>[u(j,{placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",modelValue:y.bgUpload,"onUpdate:modelValue":o[12]||(o[12]=r=>y.bgUpload=r),onChange:S},null,8,["modelValue"]),u(p,{action:m(_e),"on-success":O},{default:s(()=>[u(a,{type:"primary"},{default:s(()=>[We]),_:1})]),_:1},8,["action"])]),_:1})):U("",!0),u(b,null,{default:s(()=>[u(a,{onClick:H},{default:s(()=>[Ke]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))])}}}),Ge={class:"main-left"},Qe={class:"components-list scroll"},Ze={class:"title"},et=["title"],tt={class:"scroll layer-list"},lt=Z({__name:"controlLeft",setup(d){const n=X([{label:"\u6298\u7EBF\u56FE1",icon:"line",zIndex:1},{label:"\u6298\u7EBF\u56FE2",icon:"line",zIndex:2},{label:"\u6298\u7EBF\u56FE3",icon:"line",zIndex:3},{label:"\u6298\u7EBF\u56FE4",icon:"line2",zIndex:4}]),i=X([{label:"\u56FE\u8868",children:[{type:"line",label:"\u6298\u7EBF\u56FE",icon:"line",position:{width:400,height:300},option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[150,230,224,218,135,147,260],type:"line"}]}},{type:"bar",label:"\u67F1\u72B6\u56FE",icon:"bar",position:{width:400,height:300},option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[120,200,150,80,70,110,130],type:"bar"}]}},{type:"pie",label:"\u997C\u56FE",icon:"pie",position:{width:300,height:300},option:{series:[{type:"pie",radius:"50%",data:[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:300,name:"Video Ads"}]}]}},{type:"echarts",label:"\u901A\u7528\u56FE\u8868",icon:"",position:{width:400,height:300},option:{}}]},{label:"\u8868\u683C",children:[{type:"table",label:"\u8868\u683C",icon:"table",position:{width:500,height:300},option:[],columns:[]}]},{label:"\u8F85\u52A9",children:[{type:"text",label:"\u6587\u672C",icon:"text2",position:{width:100,height:30},config:{text:"\u6587\u672C\u5185\u5BB9"}},{type:"sText",label:"\u6EDA\u52A8\u6587\u672C",icon:"stext",position:{width:100,height:30},config:{text:"\u6EDA\u52A8\u6587\u672C\u5185\u5BB9"}},{type:"image",label:"\u56FE\u7247",icon:"image",position:{width:100,height:50},config:{src:""}},{type:"background",label:"\u80CC\u666F",icon:"image",position:{width:100,height:50},config:{src:""}},{type:"border",label:"\u8FB9\u6846",icon:"border",position:{width:100,height:100},config:{style:{border:"1px solid #fff"}}}]},{label:"\u5176\u4ED6",children:[{type:"clock",label:"\u5F53\u524D\u65F6\u95F4",icon:"time",position:{width:150,height:30}}]},{label:"\u81EA\u5B9A\u4E49\u7EC4\u4EF6",children:[{type:"component",label:"\u81EA\u5B9A\u4E49",icon:"component",position:{width:200,height:200},config:{}}]}]),e=k=>we(k),l=(k,y)=>!1,F=()=>{console.log("sort")};return(k,y)=>{const S=T("el-tab-pane"),D=T("el-tabs");return c(),C("div",Ge,[u(D,{"model-value":"component",class:"tabs"},{default:s(()=>[u(S,{label:"\u7EC4\u4EF6",name:"component"},{default:s(()=>[_("div",Qe,[(c(!0),C(K,null,ee(i.value,(O,x)=>(c(),C("div",{key:x},[_("div",Ze,G(O.label),1),u(m(re),{itemKey:"label",tag:"ul",modelValue:O.children,"onUpdate:modelValue":w=>O.children=w,group:{name:"form",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:e},{item:s(({element:w})=>[_("li",{class:Q([w.type])},[_("i",{class:Q(`icon-${w.icon}`)},null,2),_("span",{title:w.label},G(w.label),9,et)],2)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))])]),_:1}),u(S,{label:"\u56FE\u5C42",name:"layer"},{default:s(()=>[_("div",tt,[u(m(re),{itemKey:"itemKey",tag:"ul",modelValue:n.value,"onUpdate:modelValue":y[0]||(y[0]=O=>n.value=O),animation:"300",move:l,onSort:F},{item:s(({element:O})=>[_("li",null,G(O.label),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1})])}}}),ot=["onMousedown"],ye=Z({__name:"ruler",props:{direction:{default:"h"},scale:null,offset:null,showRuler:{type:Boolean},showLine:{type:Boolean}},setup(d){const n=d,i=oe({leftTop:0,moveFlag:!1,moveLine:!1,line:[]}),e=Y(()=>n.direction==="h"?{borderLeft:"1px dotted #409eff",display:i.moveFlag?"block":"none",left:i.leftTop+"px"}:{borderTop:"1px dotted #409eff",display:i.moveFlag?"block":"none",top:i.leftTop+"px"}),l=Y(()=>{const x=n.direction==="h"?1920:1080;let w=[];for(let E=0;E<x;E=E+100)w.push(E);return w}),F=x=>parseInt(`${x/n.scale*100}`),k=()=>{i.moveFlag=!0,document.onmousemove=x=>{if(!i.moveFlag)return;const w=parseInt(`${x.pageX-n.offset[0]}`),E=parseInt(`${x.pageY-n.offset[1]}`);i.leftTop=n.direction==="h"?w:E},document.onmouseup=function(){S()}},y=()=>{!i.moveFlag||i.line.includes(i.leftTop)||i.line.push(i.leftTop)},S=()=>{i.moveFlag=!1,document.onmousemove=null,document.onmouseup=null},D=x=>n.direction==="h"?{left:x+"px"}:{top:x+"px"},O=(x,w,E)=>{i.moveLine=!0;const H=E.pageX-w,W=E.pageY-w;document.onmousemove=f=>{if(!i.moveLine)return;const B=parseInt(`${f.pageX-H}`),R=parseInt(`${f.pageY-W}`),z=n.direction==="h"?B:R;z<0?i.line.splice(x,1):i.line[x]=z},document.onmouseup=function(){i.moveLine=!1,S()}};return(x,w)=>(c(),C("div",null,[fe(_("div",{class:Q(["screen-ruler",`ruler-${d.direction}`]),onMouseenter:k,onMouseleave:S,onMousedown:y},[(c(!0),C(K,null,ee(m(l),E=>(c(),C("span",{key:E},G(F(E)),1))),128))],34),[[ve,d.showRuler]]),d.showLine?(c(),C(K,{key:0},[_("div",{class:Q(["ruler-line",d.direction]),style:q(m(e))},[_("span",null,G(F(i.leftTop-20)),1)],6),(c(!0),C(K,null,ee(i.line,(E,H)=>(c(),C("div",{class:Q(["ruler-line",d.direction]),key:E,style:q(D(E)),onMousedown:W=>O(H,E,W)},[_("span",null,G(F(E-20)),1)],46,ot))),128))],64)):U("",!0)]))}});const ut=Z({__name:"nowTime",props:{config:null},setup(d){const n=d,i=X(),e=X(),l=()=>{const F=n.config.dateTime;!F||F&&F.indexOf("{i}")!==-1?i.value=setInterval(()=>{e.value=ge(new Date,F)},1e3):e.value=ge(new Date,F)};return se(()=>n.config.dateTime,()=>{clearInterval(i.value),l()},{immediate:!0}),ue(()=>{}),(F,k)=>(c(),C("div",null,G(e.value),1))}}),nt=Z({__name:"marquee",props:{width:null,height:null,speed:{default:30},direction:{default:"top"},step:{default:1}},setup(d){const n=d,i=Y(()=>({width:n.width,height:n.height,overflow:"hidden"})),e=oe({left:0,top:0,duration:0}),l=Y(()=>["left","right"].includes(n.direction)),F=Y(()=>{const D=n.step>1?`transform ${e.duration}s`:"";return l.value?{display:"flex",width:parseInt(n.width)*2+"px",transform:`translateX(${e.left}px)`,transition:D}:{transform:`translateY(${e.top}px)`,transition:D}}),k=X(),y=X(),S=()=>{const D=k.value,O=y.value,x=()=>{const E=O.offsetWidth,H=O.offsetHeight;switch(n.direction){case"left":e.left+E<=0?(e.left=0,e.duration=0):(e.left=e.left-n.step,e.duration=.3);break;case"right":e.left>=0?(e.left=-E,e.duration=0):(e.left=e.left+n.step,e.duration=.3);break;case"bottom":e.top>=0?(e.top=-H,e.duration=0):(e.top=e.top+n.step,e.duration=.3);break;default:e.top+H<=0?(e.top=0,e.duration=0):(e.top=e.top-n.step,e.duration=.3)}};let w=setInterval(x,n.speed);D.onmouseenter=function(){clearInterval(w)},D.onmouseleave=function(){w=setInterval(x,n.speed)}};return ue(()=>{S()}),(D,O)=>(c(),C("div",{ref_key:"container",ref:k,class:Q([`marquess-${d.direction}`,"marquee-container"]),style:q(m(i))},[_("div",{style:q(m(F)),class:"inner-container"},[_("div",{ref_key:"container1",ref:y,style:q({display:m(l)?"flex":""})},[he(D.$slots,"default")],4),_("div",{style:q({display:m(l)?"flex":""})},[he(D.$slots,"default")],4)],4)],6))}}),at=Z({__name:"echartsInt",props:{option:null,width:{default:600},height:{default:400}},setup(d){const n=d,i=X(),e=X(),l=Ce(()=>{!i.value||(e.value=echarts.init(i.value),e.value.setOption(n.option),window.onresize=e.value)},100);return se(()=>n,()=>{e.value&&(e.value.clear(),e.value.dispose()),l()},{deep:!0}),ue(()=>{ae(()=>{l()})}),(F,k)=>(c(),C("div",{class:"echarts",style:q({width:d.width+"px",height:d.height+"px"}),ref_key:"echartsEl",ref:i},null,4))}}),st=(d,n,i)=>(console.log(d,n,i),i),it=["onMousedown"],ct=["onMousedown"],rt=["innerHTML"],dt=["src"],pt={key:0},ft=Z({__name:"screen",props:{data:null,type:{default:1},current:null},setup(d){const n=d,i=X(),e=Y(()=>n.data.position?be.exports(JSON.stringify(n.data.position)):""),l=Y(()=>n.data.config||{}),F=Y(()=>{const{width:f,height:B}=n.data.position;return Object.assign({},{width:f+"px",height:B+"px"},l.value.style||{})}),k=Y(()=>{let f={};return l.value.src&&(f={backgroundImage:`url(${l.value.src})`}),Object.assign(l.value.style||{},f)}),y=Y(()=>{if(!n.data.position)return{};const{left:f,top:B,height:R,width:z,zIndex:A,display:t}=n.data.position;return{left:f+"px",top:B+"px",width:z+"px",height:R+"px",zIndex:A||1,display:t?"none":""}}),S=f=>{f.preventDefault(),f.stopPropagation()},D=(f,B)=>{let R=!0;if(R){const z=f.pageX,A=f.pageY;let{width:t,height:o,left:v,top:g}=n.data.position;document.onmousemove=j=>{const $=j.pageX-z,V=j.pageY-A;let b=t,a=o,p=v,h=g;switch(B){case 1:b=t-$,a=o-V,h=g+V,p=v+$;break;case 4:b=t-$,p=v+$;break;case 6:b=t-$,p=v+$,a=o+V;break;case 2:a=o-V,h=g+V;break;case 7:a=o+V;break;case 3:b=t+$,a=o-V,h=g+V;break;case 5:b=t+$;break;case 8:b=t+$,a=o+V;break}b<50||a<30||Object.assign(n.data.position,{width:b,height:a,left:p,top:h})},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,R=!1}}f.stopPropagation()},O=f=>{let B=!0;const R=f.pageX-n.data.position.left,z=f.pageY-n.data.position.top;document.onmousemove=A=>{!B||Object.assign(n.data.position,{left:parseInt(`${A.pageX-R}`),top:parseInt(`${A.pageY-z}`)})},document.onmouseup=function(){B=!1,document.onmousemove=null}},x=Y(()=>{const f=i.value||n.data.option;return l.value.carousel?[...f,...f]:f}),w=X(),E=()=>{if(!l.value.carousel||!w.value||n.data.type!=="table")return;const f=w.value.querySelector(".el-scrollbar__wrap");function B(){f.scrollTop+=1,f.clientHeight+f.scrollTop===f.scrollHeight&&(f.scrollTop=f.scrollTop-f.scrollHeight/2)}let R=setInterval(B,l.value.speed||30);w.value.onmouseenter=function(){clearInterval(R)},w.value.onmouseleave=function(){R=setInterval(B,l.value.speed||30)}};se(()=>n.data.option,()=>{ae(()=>{E()})},{immediate:!0});const H=Y(()=>{switch(n.data.type){case"text":case"sText":return l.value.text;case"line":case"bar":case"pie":case"echarts":case"table":return n.data.option}return""}),W=()=>{if(!["line","bar","pie","echarts","text","sText","table"].includes(n.data.type))return;const{optionsType:f,requestUrl:B,method:R="post"}=l.value,{beforeRequest:z="",afterResponse:A=""}=n.data.events||{};if(f!==1||!B)return;let t={};z&&typeof z=="function"&&(t=z({})),pe(B,t,{method:R}).then(o=>{const v=o.data;i.value=v,A&&(typeof A=="function"&&(i.value=A(v,H.value)),typeof A=="string"&&(i.value=st(A,v,H.value)))}).catch(o=>{console.log(o)})};return ue(()=>{W()}),(f,B)=>{var A,t,o;const R=T("el-table-column"),z=T("el-table");return c(),C("div",{class:Q(["group",{["group-"+d.data.type]:!0,[(A=d.data.config)==null?void 0:A.class]:(t=d.data.config)==null?void 0:t.class}]),style:q(m(y)),onMousedown:de(S,["prevent","stop"])},[d.type===0&&!((o=d.data.config)!=null&&o.lock)?fe((c(),C("div",{key:0,class:"resize-box",onMousedown:O},[(c(),C(K,null,ee(8,v=>_("span",{key:v,class:Q(`rs${v}`),onMousedown:de(g=>D(g,v),["stop"])},null,42,ct)),64))],544)),[[ve,d.current===m(e)]]):U("",!0),["text","border"].includes(d.data.type)?(c(),C("div",{key:1,style:q(m(F)),innerHTML:i.value||m(l).text},null,12,rt)):U("",!0),d.data.type==="sText"?(c(),C("div",{key:2,style:q(m(F))},[u(nt,{width:`${d.data.position.width}px`,height:`${d.data.position.height}px`,speed:m(l).speed,direction:m(l).direction,step:m(l).step},{default:s(()=>[P(G(i.value||m(l).text),1)]),_:1},8,["width","height","speed","direction","step"])],4)):U("",!0),d.data.type==="image"?(c(),C("img",{key:3,class:"default-img",src:m(l).src,style:q(m(F)),alt:"\u8BF7\u9009\u62E9\u6216\u4E0A\u4F20\u56FE\u7247"},null,12,dt)):U("",!0),d.data.type==="background"?(c(),C("div",{key:4,class:"default-bg",style:q(m(k))},[m(l).src?U("",!0):(c(),C("span",pt,"\u8BF7\u9009\u62E9\u6216\u4E0A\u4F20\u56FE\u7247"))],4)):U("",!0),d.data.type==="table"?(c(),C("div",{key:5,ref_key:"tableEl",ref:w},[u(z,ne(m(l).props,{data:m(x),style:{width:"100%"}}),{default:s(()=>[(c(!0),C(K,null,ee(d.data.columns,v=>(c(),L(R,ne(v,{key:v.prop}),null,16))),128))]),_:1},16,["data"])],512)):U("",!0),d.data.type==="clock"?(c(),L(ut,{key:6,style:q(m(F)),config:m(l)},null,8,["style","config"])):U("",!0),["component"].includes(d.data.type)?(c(),L(xe(m(l).component),ke(ne({key:7},m(l))),null,16)):U("",!0),["line","bar","pie","echarts"].includes(d.data.type)?(c(),L(at,{key:8,option:i.value||d.data.option,height:d.data.position.height,width:d.data.position.width},null,8,["option","height","width"])):U("",!0)],46,it)}}}),gt={class:"container-screen"},ht={class:"main-box"},mt={class:"design-footer"},yt={class:"center"},vt={class:"item"},bt=_("label",{class:"label"},"\u6807\u5C3A",-1),Ft={class:"item"},Et=_("label",{class:"label"},"\u53C2\u8003\u7EBF",-1),_t={class:"item slider"},wt=_("label",{class:"label"},"\u7F29\u653E\u6BD4\u4F8B",-1),Ct={class:"item"},kt=P("\u81EA\u9002\u5E94"),At=Z({__name:"index",setup(d){const n=Be(),i=De(),e=oe({showLine:!0,scale:100,autoScale:100,ruler:!0,widthLeft:"",widthRight:"",offset:[],translateX:0,translateY:0,moveFlag:!1,loading:!1}),l=X(),F=X(),k=X({list:[],config:{width:"1920px",height:"1080px",background:"#000",style:"",primary:"#409eff"}}),y=Y(()=>{const{width:a,height:p,background:h,primary:M}=k.value.config;return{width:a,height:p,background:h,transform:`scale(${e.scale/100}) translate(${e.translateX}px,${e.translateY}px)`,color:M}}),S=()=>{l.value="",A({})},D=a=>{l.value=a,A(a)},O=Y(()=>l.value&&l.value.position?be.exports(JSON.stringify(l.value.position)):""),x=X({100:{style:{}}}),w=a=>{a==="left"?(e.widthLeft===""?e.widthLeft="0px":e.widthLeft="",setTimeout(()=>{W()},500)):e.widthRight===""?e.widthRight="0px":e.widthRight=""},E=()=>{e.scale=e.autoScale,e.translateX=0,e.translateY=0},H=X(),W=()=>{ae(()=>{const a=H.value.offsetWidth,p=parseInt(k.value.config.width);if(a&&p){const M=parseInt(`${a/p*100}`);e.autoScale=M}const h=H.value.getBoundingClientRect();e.offset[1]=h.top+(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),e.offset[0]=h.left+(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0)})},f=a=>{e.moveFlag=!0;const p=a.pageX-e.translateX,h=a.pageY-e.translateY;document.onmousemove=M=>{!e.moveFlag||(e.translateX=parseInt(`${M.pageX-p}`),e.translateY=parseInt(`${M.pageY-h}`))},document.onmouseup=function(){e.moveFlag=!1,document.onmousemove=null}},B=X(),R=()=>{ae(()=>{B.value.addEventListener("contextmenu",a=>{a.preventDefault(),console.log("00",a)})})},z=a=>{const p=a.newIndex,h=k.value.list[p];delete h.label,delete h.icon;const{pageX:M,pageY:J}=a.originalEvent;h.position||(h.position={}),h.config||(h.config={}),h.position.left=parseInt(`${M-e.offset[0]}`),h.position.top=parseInt(`${J-e.offset[1]}`),l.value=h,A(h)},A=a=>{F.value.setCurrent(a)},t=oe({visible:!1,title:"",direction:"",content:"",codeType:"",callback:""}),o=()=>{j()},v=a=>{try{if(typeof t.callback=="function"){const p=t.codeType==="json"?$e(a):ie(a);t.callback(p)}else switch(t.type){case"css":k.value.config.style=a,Te("screenStyle",a,!0);break;case"json":k.value=ie(a);break}j()}catch{}},g=a=>{const{type:p,direction:h,codeType:M,title:J,callback:te,content:I}=a;t.direction=h||"ltr",t.type=p,t.codeType=M||"",t.title=J?`\u63D0\u793A\uFF1A${J}`:"",t.visible=!0,t.callback=te;let le=M==="json"?Se(I,!0):me(I,!0);switch(p){case"css":le=k.value.config.style||"";break}t.content=le},j=()=>{t.visible=!1,t.type="",t.title="",t.codeType="",t.callback="",t.content=""},$=a=>{switch(a){case"del":k.value.list=[],S();break;case"eye":break;case"json":g({type:"json",content:k.value,title:"\u53EF\u7F16\u8F91\u4FEE\u6539\u6216\u5C06\u5DF2\u751F\u6210\u7684\u811A\u672C\u7C98\u8D34\u8FDB\u6765"});break;case"vue":break;case"save":V();break}},V=()=>{let a={data:me(k.value),name:"\u672A\u547D\u540D\u53EF\u89C6\u5316\u5927\u5C4F",type:4},p="designSave";n.id&&(Object.assign(a,{id:n.id}),p="designEdit"),e.loading=!0,pe(p,a).then(h=>{ce({message:h.message||"\u4FDD\u5B58\u6210\u529F\uFF01",type:"success"}),i.push({path:"/design/dataScreen/list"}),e.loading=!1}).catch(h=>{ce.error(h.message||"\u4FDD\u5B58\u5F02\u5E38"),e.loading=!1}),S()},b=()=>{const a=n.id;!a||(e.loading=!0,pe("designById",{id:a}).then(p=>{const h=p.data;k.value=ie(h.data),e.loading=!1}).catch(p=>{ce.error(p.message||"\u52A0\u8F7D\u5F02\u5E38"),e.loading=!1}))};return ue(()=>{W(),R(),b()}),(a,p)=>{const h=T("el-switch"),M=T("el-slider"),J=T("el-button"),te=Ae("loading");return fe((c(),C("div",gt,[u(lt,{style:q({width:e.widthLeft})},null,8,["style"]),_("div",ht,[u(Ve,{onClick:$}),_("div",{class:"design-box",ref_key:"designBoxEl",ref:H},[u(ye,{scale:e.scale,offset:e.offset,"show-ruler":e.ruler,"show-line":e.showLine},null,8,["scale","offset","show-ruler","show-line"]),u(ye,{scale:e.scale,offset:e.offset,"show-ruler":e.ruler,"show-line":e.showLine,direction:"v"},null,8,["scale","offset","show-ruler","show-line"]),_("div",{ref_key:"designCanvasEl",ref:B,onMousedown:f,class:"design-canvas",onClick:S,style:q(m(y))},[u(m(re),ne({itemKey:"id",list:k.value.list,name:"fade",class:"drag"},{group:"form",animation:200,handle:".none"},{onAdd:z}),{item:s(({element:I})=>[u(ft,{data:I,onClick:de(le=>D(I),["stop"]),type:0,current:m(O)},null,8,["data","onClick","current"])]),_:1},16,["list"])],36)],512),_("div",mt,[_("i",{class:"icon-menu icon",onClick:p[0]||(p[0]=I=>w("left"))}),_("div",yt,[_("div",vt,[bt,u(h,{size:"small",modelValue:e.ruler,"onUpdate:modelValue":p[1]||(p[1]=I=>e.ruler=I)},null,8,["modelValue"])]),_("div",Ft,[Et,u(h,{size:"small",modelValue:e.showLine,"onUpdate:modelValue":p[2]||(p[2]=I=>e.showLine=I)},null,8,["modelValue"])]),_("div",_t,[wt,u(M,{"show-stops":"",max:200,min:20,size:"small",marks:x.value,modelValue:e.scale,"onUpdate:modelValue":p[3]||(p[3]=I=>e.scale=I)},null,8,["marks","modelValue"])]),_("div",Ct,[u(J,{type:"primary",link:"",onClick:E},{default:s(()=>[kt]),_:1})])]),_("i",{class:"icon-menu icon",onClick:p[4]||(p[4]=I=>w())})])]),u(Je,{style:q({width:e.widthRight}),config:k.value.config,"onUpdate:config":p[5]||(p[5]=I=>k.value.config=I),onOpenDrawer:g,ref_key:"configEl",ref:F},null,8,["style","config"]),u(Ie,{modelValue:t.visible,"onUpdate:modelValue":p[6]||(p[6]=I=>t.visible=I),title:t.title,direction:t.direction,content:t.content,"code-type":t.codeType,onBeforeClose:o,onConfirm:v},null,8,["modelValue","title","direction","content","code-type"])])),[[te,e.loading]])}}});export{At as default};
