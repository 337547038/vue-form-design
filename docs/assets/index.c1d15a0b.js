import{d as D,i as a,B as g,o as A,c as C,g as o,w as h,M as s,h as i,y as V,x as v}from"./index.13ff13d8.js";const _=D({__name:"index",setup(k){const c=V(),r=a(),n=a(),e=g({visible:!1,title:"",type:1,id:""}),m=a({columns:[{label:"\u52FE\u9009",type:"selection"},{prop:"id",label:"\u7F16\u53F7"},{prop:"name",label:"\u540D\u79F0",width:150},{prop:"tableName",label:"\u6570\u636E\u8868\u540D",width:150},{prop:"category",label:"\u5206\u7C7B",config:{tagList:{0:"success"},dictKey:"source"}},{prop:"status",label:"\u72B6\u6001",config:{tagList:{0:"info",1:"success"},dictKey:"status"}},{prop:"creatName",label:"\u521B\u5EFA\u4EBA"},{prop:"updateDate",label:"\u4FEE\u6539\u65F6\u95F4",config:{formatter:"{y}-{m}-{d} {h}:{i}:{s}"},width:170},{label:"\u64CD\u4F5C",prop:"__control",width:"160px"}],controlBtn:[{label:"\u65B0\u589E",type:"primary",size:"small",click:()=>{e.visible=!0,e.title="\u521B\u5EFA\u6570\u636E\u6E90",e.type=1,e.id=""}},{label:"\u5220\u9664",key:"del",size:"small"}],operateBtn:[{label:"\u7F16\u8F91",click:u=>{e.visible=!0,e.title="\u4FEE\u6539\u6570\u636E\u6E90",e.type=2,e.id=u.id,v(()=>{n.value.getData({id:u.id})})}},{label:"\u5220\u9664",key:"del"},{label:"\u521B\u5EFA\u8868\u5355",click:u=>{c.push({path:"/design/form",query:{source:u.id}})}}],config:{expand:!0}}),p=a({list:[{type:"input",control:{modelValue:"",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},config:{},name:"name",item:{label:"\u540D\u79F0"}},{type:"input",control:{modelValue:"",placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u8868\u540D"},config:{},name:"tableName",item:{label:"\u6570\u636E\u8868\u540D"}},{type:"button",control:{label:"\u67E5\u8BE2",type:"primary",key:"submit"},config:{},name:""},{type:"button",config:{},name:"",control:{label:"\u6E05\u7A7A",key:"reset"}}],form:{size:"small"}}),d=a({list:[{type:"input",control:{modelValue:"",placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u6E90\u540D\u79F0"},config:{},name:"name",item:{label:"\u540D\u79F0"},customRules:[{type:"required",message:"\u8BF7\u8F93\u5165\u6570\u636E\u6E90\u540D\u79F0",trigger:"blur"}]},{type:"input",control:{modelValue:"",placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u8868\u540D"},config:{editDisabled:!0},name:"tableName",item:{label:"\u6570\u636E\u8868\u540D"},customRules:[{type:"required",message:"\u8BF7\u8F93\u5165\u521B\u5EFA\u751F\u6210\u7684\u6570\u636E\u8868\u540D",trigger:"blur"}]},{type:"select",control:{modelValue:"",appendToBody:!0},options:[],config:{optionsType:2,optionsFun:"source"},name:"category",item:{label:"\u5206\u7C7B"}},{type:"input",control:{modelValue:"",placeholder:"\u6570\u636E\u5E93\u8868\u6CE8\u91CA"},config:{editDisabled:!0},name:"remark",item:{label:"\u8868\u6CE8\u91CA"}},{type:"switch",control:{modelValue:1,activeValue:1,inactiveValue:0},config:{},name:"status",item:{label:"\u72B6\u6001"}},{type:"title",control:{modelValue:"\u6570\u636E\u5E93\u8868\u5B57\u6BB5"},config:{span:24},name:"title"},{type:"table",list:[{type:"input",control:{modelValue:"",size:"small",placeholder:"\u4E2D\u6587\u6807\u9898\u540D\u79F0"},config:{},name:"label",item:{label:"\u6807\u9898"}},{type:"input",control:{modelValue:"",size:"small"},config:{},name:"name",item:{label:"\u8868\u540D\u5B57"},customRules:[{type:"required",message:"\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"numberLetter",message:"\u53EA\u80FD\u4E3A\u5B57\u6BCD\u6570\u5B57",trigger:"blur"}]},{type:"select",control:{modelValue:"",appendToBody:!0,size:"small"},options:[{label:"INT",value:"INT"},{label:"VARCHAR",value:"VARCHAR"},{label:"TEXT",value:"TEXT"},{label:"DATETIME",value:"DATETIME"},{label:"FLOAT",value:"FLOAT"},{label:"BOOLEAN",value:"BOOLEAN"}],config:{optionsType:0},name:"type",item:{label:"\u7C7B\u578B"},customRules:[{type:"required",message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]},{type:"input",control:{modelValue:"",size:"small"},config:{},name:"length",item:{label:"\u957F\u5EA6/\u503C"}},{type:"input",control:{modelValue:"",size:"small"},config:{},name:"default",item:{label:"\u9ED8\u8BA4"}},{type:"switch",control:{modelValue:!1,size:"small"},config:{},name:"empty",item:{label:"\u7A7A"}},{type:"input",control:{modelValue:"",size:"small"},config:{},name:"remark",item:{label:"\u6CE8\u91CA"}},{type:"switch",control:{modelValue:!0,size:"small"},config:{},name:"enterable",item:{label:"\u53EF\u5F55\u5165"}}],tableData:[],control:{border:!0},config:{editDisabled:!0,addBtnText:"\u6DFB\u52A0\u4E00\u884C",delBtnText:"\u5220\u9664",span:24},name:"tableData"},{type:"txt",control:{modelValue:"\u63D0\u793A\uFF1A\u9ED8\u8BA4\u4F1A\u6DFB\u52A0id\u81EA\u589E\u4E3B\u952E\uFF1B\u53EF\u5F55\u5165\u8868\u793A\u8981\u5728\u8868\u5355\u91CC\u4F5C\u5165\u5F55\u5165\u5B57\u6BB5\uFF0C\u5982\u66F4\u65B0\u65F6\u95F4\u8FD9\u7C7B\u5B57\u6BB5\u4E00\u822C\u4E3A\u4E0D\u53EF\u5F55\u5165\uFF0C\u5176\u4ED6\u5B57\u6BB5\u5BF9\u5E94\u6570\u636E\u5E93\u5B57\u6BB5"},config:{span:24}},{type:"div",control:{},config:{span:24,textAlign:"center"},list:[{type:"button",control:{label:"\u4FDD\u5B58",type:"primary",key:"submit"},config:{span:0}},{type:"button",control:{label:"\u53D6\u6D88",key:"reset"},config:{span:0}}]}],form:{labelWidth:"80px",class:"form-row-2",size:"default",name:"source"},config:{addUrl:"sourceCreat",editUrl:"sourceEdit",requestUrl:"sourceById"}}),E=u=>{if(e.type===1){if(!u.tableData.length)return s.error("\u6570\u636E\u5E93\u8868\u5B57\u6BB5\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A"),!1;let l=[];if(u.tableData.forEach(t=>{["INT","VARCHAR"].includes(t.type)&&!t.length&&l.push(`\u540D\u5B57\u5217${t.name}\u7684\u957F\u5EA6\u503C\u4E0D\u80FD\u4E3A\u7A7A`)}),l.length)return s.error(l.join(",")),!1}return e.type===2&&(u.id=e.id),u},b=u=>{u==="success"&&(e.visible=!1,r.value.getListData())},B=u=>{u==="reset"&&(e.visible=!1)};return(u,l)=>{const t=i("ak-list"),f=i("ak-form"),F=i("el-dialog");return A(),C("div",null,[o(t,{ref_key:"tableListEl",ref:r,requestUrl:"sourceList",deleteUrl:"sourceDelete",searchData:p.value,tableData:m.value},null,8,["searchData","tableData"]),o(F,{modelValue:e.visible,"onUpdate:modelValue":l[0]||(l[0]=y=>e.visible=y),title:e.title,width:"800px","destroy-on-close":""},{default:h(()=>[o(f,{ref_key:"formEl",ref:n,formData:d.value,type:e.type,addUrl:"sourceCreat",editUrl:"sourceEdit",requestUrl:"sourceById",beforeSubmit:E,afterSubmit:b,onBtnClick:B},null,8,["formData","type"])]),_:1},8,["modelValue","title"])])}}});export{_ as default};
