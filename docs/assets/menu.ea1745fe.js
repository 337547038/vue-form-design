import{f as k,y as h,r as l,n as i,B as _,a as s,b as m,d as V,h as T,w as d,l as x,k as A,j as I,e as f}from"./index.2b72f3d0.js";const N=k({__name:"menu",setup(w){const b=h(),r=l(),u=l(),c={menuType:{1:"\u83DC\u5355",2:"\u6309\u94AE"}},o=l(!0),y=l({list:[{type:"input",control:{modelValue:"",placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},config:{},name:"name",item:{label:"\u83DC\u5355\u540D\u79F0"}},{type:"select",control:{modelValue:""},options:[],config:{optionsType:2,optionsFun:"status"},name:"status",item:{label:"\u72B6\u6001"}},{type:"button",control:{label:"\u641C\u7D22",key:"submit",type:"primary"},config:{}},{type:"button",control:{label:"\u91CD\u7F6E",key:"reset"},config:{}}],form:{size:"default"}}),a=l({tableProps:{rowKey:"id",defaultExpandAll:!1},columns:[{label:"\u83DC\u5355\u540D\u79F0",prop:"name"},{label:"\u5730\u5740",prop:"path"},{label:"\u56FE\u6807",prop:"icon",width:60},{label:"\u6392\u5E8F",prop:"sort",width:60},{label:"\u7C7B\u578B",prop:"type",width:70,config:{dictKey:"menuType",tagList:{1:"success",2:"info"}}},{label:"\u72B6\u6001",prop:"status",width:70,config:{dictKey:"status",tagList:{1:"success",2:"info"}}},{label:"\u64CD\u4F5C",prop:"__control",width:140}],controlBtn:[{label:"\u65B0\u589E",type:"primary",icon:"plus",click:()=>{e.visible=!0,e.title="\u65B0\u589E\u83DC\u5355",e.formType=1}},{label:"\u5C55\u5F00\u6298\u53E0",click:()=>{a.value.tableProps.defaultExpandAll=!a.value.tableProps.defaultExpandAll,o.value=!1,i(()=>{o.value=!0})}}],operateBtn:[{visible:"$.parentId!==1",label:"\u65B0\u589E",click:t=>{e.visible=!0,e.title="\u65B0\u589E\u83DC\u5355",e.formType=1,i(()=>{u.value.setValue({parentId:t.id})})}},{label:"\u7F16\u8F91",click:t=>{if(t.parentId===1){b.push({path:"/design/dataList/list"});return}e.visible=!0,e.title="\u7F16\u8F91\u83DC\u5355",e.formType=2,e.editId=t.id,i(()=>{u.value.setValue(t,!0)})}},{label:"\u5220\u9664",key:"del",visible:"$.parentId!==0&&$.parentId!==1"}],config:{pageSize:100,fixedBottomScroll:!1}}),e=_({visible:!1,title:"",formType:1,editId:""}),D=l({list:[{type:"input",control:{modelValue:"",disabled:!0,placeholder:"\u7236\u7EA7"},config:{},name:"parentId",item:{label:"\u7236\u7EA7ID"}},{type:"radio",control:{modelValue:1},options:[],config:{optionsType:2,optionsFun:"menuType"},name:"type",item:{label:"\u7C7B\u578B"}},{type:"input",control:{modelValue:"",placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},config:{},name:"name",item:{label:"\u83DC\u5355\u540D\u79F0"},customRules:[{type:"required",message:"\u83DC\u5355\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},{type:"input",control:{modelValue:"",placeholder:"\u8BF7\u8F93\u5165\u8BBF\u95EE\u5730\u5740/\u7C7B\u578B\u6807\u8BC6"},config:{},name:"path",item:{label:"\u8BBF\u95EE\u5730\u5740"}},{type:"component",control:{modelValue:""},config:{componentName:"DiyIconfont"},name:"icon",item:{label:"icon\u56FE\u6807"}},{type:"inputNumber",control:{modelValue:0,controlsPosition:"right"},config:{},name:"sort",item:{label:"\u6392\u5E8F"}},{type:"radio",control:{modelValue:1},options:[],config:{optionsType:2,optionsFun:"status"},name:"status",item:{label:"\u72B6\u6001"}},{type:"textarea",control:{modelValue:""},config:{span:24},name:"remark",item:{label:"\u5907\u6CE8"}},{type:"div",control:{},config:{textAlign:"center",span:24},list:[{type:"button",control:{label:"\u786E\u5B9A",type:"primary",key:"submit"},config:{span:0}},{type:"button",control:{label:"\u53D6\u6D88",key:"reset"},config:{span:0}}]}],form:{class:"form-row-2",labelWidth:"100px",size:"default"},config:{}}),g=t=>(e.formType===2&&(t.id=e.editId),t),B=t=>{e.visible=!1,t==="success"&&r.value.getListData()},E=t=>{t==="reset"&&(e.visible=!1)};return(t,p)=>{const F=s("ak-list"),C=s("ak-form"),v=s("el-dialog");return m(),V("div",null,[o.value?(m(),T(F,{key:0,ref_key:"tableListEl",ref:r,requestUrl:"menuList",deleteUrl:"menuDelete",searchData:y.value,tableData:a.value,afterResponse:"transformDataToChild",dict:c},{icon:d(({row:n})=>[x("i",{class:A(n.icon)},null,2)]),_:1},8,["searchData","tableData"])):I("",!0),f(v,{modelValue:e.visible,"onUpdate:modelValue":p[0]||(p[0]=n=>e.visible=n),title:e.title,width:"680px","destroy-on-close":""},{default:d(()=>[f(C,{ref_key:"formNameEl",ref:u,type:e.formType,formData:D.value,addUrl:"menuSave",editUrl:"menuEdit",beforeSubmit:g,afterSubmit:B,onBtnClick:E,dict:c},null,8,["type","formData"])]),_:1},8,["modelValue","title"])])}}});export{N as default};
