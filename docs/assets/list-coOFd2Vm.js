import{d as v,u as x,L as D,l,r as o,o as m,c as T,i as s,w as r,b as I,m as C,t as F,f as B,q as E}from"./index-CDYjrzCG.js";const L=v({__name:"list",setup(N){const i=x(),t=D({visible:!1}),n=l(),c=l(),d=l({columns:[{label:"勾选",type:"selection"},{prop:"id",label:"ID",width:"60px"},{prop:"name",label:"表单名称",width:"150px"},{prop:"source",label:"数据源名称",width:"150px",render:"text",replaceValue:"source",config:{}},{prop:"category",label:"分类",config:{},render:"tag",replaceValue:"sys-form"},{prop:"status",label:"状态",render:"switch",config:{inlinePrompt:!0,activeText:"启用",inactiveText:"禁用",activeValue:"1",inactiveValue:"0"},renderFormatter:e=>e&&e.toString()},{prop:"creatUserId",label:"创建人",render:"text",replaceValue:"creatUser",config:{}},{prop:"updateDate",label:"更新时间",width:200,config:{},timeFormat:"{yyyy}-{mm}-{dd}"},{label:"操作",prop:"control",width:"320px",fixed:"right",render:"buttons",buttons:[{label:"设置",type:"primary",click:e=>{t.visible=!0,E(()=>{n.value.setValue({name:e.name,id:e.id,category:e.category,status:e.status})})}},{label:"编辑",key:"edit",click:e=>{p(e)}},{label:"删除",key:"del"},{label:"一键创建列表",type:"primary",click:e=>{i.push({path:"/design/list",query:{form:e.id}})}}]}],controlBtn:[{label:"新增",type:"primary",size:"small",click:()=>{p({})}},{label:"删除",key:"del",size:"small"}],config:{expand:!0}}),p=e=>{i.push({path:"/design/form",query:{id:e.id}})},f=l({list:[{type:"input",control:{modelValue:"",placeholder:"请输入表单名称"},config:{},name:"name",formItem:{label:"表单名称"}},{type:"input",control:{modelValue:"",placeholder:"请输入数据源名称"},config:{},name:"sourceName",formItem:{label:"数据源名称"}},{type:"select",control:{modelValue:"",placeholder:"请选择表单分类"},config:{optionsType:2,optionsFun:"sys-form"},name:"category",formItem:{label:"分类"}}],form:{labelWidth:"",class:"",size:"default"},config:{submitCancel:!0}}),y=l({list:[{type:"input",control:{modelValue:""},config:{},name:"name",formItem:{label:"表单名称"},customRules:[{type:"required",message:"请输入表单名称",trigger:"blur"}]},{type:"select",control:{modelValue:"",appendToBody:!0},options:[],config:{optionsType:2,optionsFun:"sys-form"},name:"category",formItem:{label:"分类"}},{type:"select",control:{modelValue:"",appendToBody:!0},options:[],config:{optionsType:2,optionsFun:"sys-status"},name:"status",formItem:{label:"启用状态"}}],form:{labelWidth:"140px",class:"",size:"default",name:"formDialog"},config:{submitCancel:!0}}),b=e=>{e==="success"&&(t.visible=!1,c.value.getListData())},g=e=>{e==="reset"&&(t.visible=!1)};return(e,u)=>{const _=o("router-link"),k=o("ak-list"),h=o("ak-form"),V=o("el-dialog");return m(),T("div",null,[s(k,{ref_key:"tableListEl",ref:c,apiKey:{list:"designList",del:"designDelete"},"search-data":f.value,data:d.value,query:{type:1}},{sourceName:r(({row:a})=>[a.source?(m(),I(_,{key:0,to:`/design/datasource?source=${a.source}`},{default:r(()=>[C(F(a.sourceName),1)]),_:2},1032,["to"])):B("",!0)]),_:1},8,["search-data","data"]),s(V,{modelValue:t.visible,"onUpdate:modelValue":u[0]||(u[0]=a=>t.visible=a),title:"设置",width:"480px","destroy-on-close":""},{default:r(()=>[s(h,{ref_key:"formEl",ref:n,data:y.value,type:2,"edit-url":"designEdit","after-submit":b,"btn-click":g},null,8,["data"])]),_:1},8,["modelValue"])])}}});export{L as default};
