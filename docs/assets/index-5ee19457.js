import{d as D,r as t,o,c as b,a as N,F as R,b as a,w as e,e as A,f as h,n as B,g as p,t as F,h as S,i as n,j as V,u as q,k as P,l as K,m as I,p as Q,q as M,s as W,v as X,K as Y,x as Z,y as ee}from"./index-3a3de0b7.js";const ne=""+new URL("logo-03d6d6da.png",import.meta.url).href,te=D({__name:"menuItem",props:{data:{default:()=>[]}},setup(L){return(u,s)=>{const _=t("el-icon"),k=t("menu-item",!0),m=t("el-sub-menu"),y=t("el-menu-item");return o(!0),b(R,null,N(u.data,(l,d)=>(o(),b(R,{key:d},[l.children?(o(),a(m,{key:0,index:l.path||l.name},{title:e(()=>[l.elIcon?(o(),a(_,{key:0},{default:e(()=>[(o(),a(A(l.elIcon)))]),_:2},1024)):h("",!0),l.icon?(o(),b("i",{key:1,class:B(`icon ${l.icon}`)},null,2)):h("",!0),p("span",null,F(l.name),1)]),default:e(()=>[l.children.length?(o(),a(k,{key:0,data:l.children},null,8,["data"])):h("",!0)]),_:2},1032,["index"])):(o(),a(y,{key:1,index:l.path||l.name},{default:e(()=>[l.elIcon?(o(),a(_,{key:0},{default:e(()=>[(o(),a(A(l.elIcon)))]),_:2},1024)):h("",!0),l.icon?(o(),b("i",{key:1,class:B(`icon ${l.icon}`)},null,2)):h("",!0),p("span",null,F(l.name),1)]),_:2},1032,["index"]))],64))),128)}}}),oe=D({__name:"menu",props:{collapse:{type:Boolean}},setup(L){const u=S(()=>V("formMenuList",!0)),s=()=>{};return(_,k)=>{const m=t("el-menu");return o(),a(m,{collapse:_.collapse,"active-text-color":"#ffd04b","background-color":"rgb(48 65 86)","text-color":"#fff",onSelect:s,router:""},{default:e(()=>[n(te,{data:u.value},null,8,["data"])]),_:1},8,["collapse"])}}}),le={class:"comm-header-tool"},ae={class:"header-right"},se={class:"header-avatar",style:{cursor:"pointer"}},ce={class:"name"},re=p("span",{class:"title"},"个人中心",-1),ue=p("span",{class:"title"},"设置",-1),_e=p("span",{class:"title"},"退出登录",-1),de=D({__name:"header",emits:["click"],setup(L,{emit:u}){const s=q(),_=P(),k=S(()=>s==null?void 0:s.breadcrumb),m=S(()=>s==null?void 0:s.collapseMenu),y=K({name:"admin",avatar:""}),l=r=>{r==="collapse"&&s.setCollapseMenu(!m.value),u("click",r)},d=()=>{s.logout(_)};return(r,c)=>{const C=t("Fold"),w=t("Expand"),i=t("el-icon"),f=t("el-breadcrumb-item"),$=t("el-breadcrumb"),x=t("RefreshRight"),g=t("FullScreen"),U=t("el-avatar"),z=t("arrow-down"),J=t("User"),E=t("el-dropdown-item"),T=t("Setting"),j=t("CircleClose"),O=t("el-dropdown-menu"),G=t("el-dropdown");return o(),b(R,null,[n(i,{onClick:c[0]||(c[0]=v=>l("collapse")),class:"collapse-icon"},{default:e(()=>[m.value?(o(),a(w,{key:1})):(o(),a(C,{key:0}))]),_:1}),n($,{separator:"/",class:"breadcrumb"},{default:e(()=>[n(f,{to:{path:"/"}},{default:e(()=>[I("首页")]),_:1}),(o(!0),b(R,null,N(k.value,(v,H)=>(o(),b(R,{key:H},[v.path?(o(),a(f,{key:0,to:{path:v.path}},{default:e(()=>[I(F(v.label||v.name),1)]),_:2},1032,["to"])):(o(),a(f,{key:1},{default:e(()=>[I(F(v.label||v.name),1)]),_:2},1024))],64))),128))]),_:1}),p("div",le,[n(i,{onClick:c[1]||(c[1]=v=>l("refresh")),title:"刷新页面"},{default:e(()=>[n(x)]),_:1}),n(i,{title:"全屏"},{default:e(()=>[n(g,{onClick:c[2]||(c[2]=v=>l("fullScreen"))})]),_:1})]),p("div",ae,[n(G,null,{dropdown:e(()=>[n(O,null,{default:e(()=>[n(E,null,{default:e(()=>[n(i,null,{default:e(()=>[n(J)]),_:1}),re]),_:1}),n(E,null,{default:e(()=>[n(i,null,{default:e(()=>[n(T)]),_:1}),ue]),_:1}),n(E,{onClick:d},{default:e(()=>[n(i,null,{default:e(()=>[n(j)]),_:1}),_e]),_:1})]),_:1})]),default:e(()=>[p("div",se,[n(U,{class:"avatar",size:"small",shape:"circle",src:y.value.avatar},null,8,["src"]),p("span",ce,F(y.value.name),1),n(i,{class:"el-icon--right"},{default:e(()=>[n(z)]),_:1})])]),_:1})])],64)}}});const ie=p("img",{src:ne,alt:""},null,-1),me=D({__name:"index",setup(L){const u=q(),s=S(()=>u.collapseMenu),_=K(!1),k=S({get:()=>u.reloadFlag,set:()=>{u.setReloadRouter()}}),m=d=>{d==="fullScreen"&&(_.value=!_.value),d==="refresh"&&(k.value=!1,M(()=>{k.value=!0}))},y=S(()=>{const d=u==null?void 0:u.tabs;if(d){const r=[];return d.forEach(c=>{r.push(c.name)}),r}return[]}),l=()=>{V("akAllDict")||Z("dictList",{status:1}).then(r=>{var w;const c=(w=r.data)==null?void 0:w.list,C={};c!=null&&c.length&&(c.forEach(i=>{const f=i.children;if(f){const $=JSON.parse(f),x={};$.forEach(g=>{x[g.value]=g.label}),C[i.type]=x}}),ee("akAllDict",C))})};return Q(()=>{M(()=>{l()})}),(d,r)=>{const c=t("el-aside"),C=t("el-header"),w=t("router-view"),i=t("el-main"),f=t("el-container"),$=t("Close"),x=t("el-icon");return o(),a(f,{class:"common-layout"},{default:e(()=>[_.value?h("",!0):(o(),a(c,{key:0,width:s.value?"44px":"180px",class:"common-sidebar"},{default:e(()=>[p("div",{class:"logo",onClick:r[0]||(r[0]=g=>d.$router.push({path:"/"}))},[ie,W(p("span",null,"AK低代码快速开发平台",512),[[X,!s.value]])]),n(oe,{collapse:s.value},null,8,["collapse"])]),_:1},8,["width"])),n(f,{class:"overflow-scroll"},{default:e(()=>[_.value?h("",!0):(o(),a(C,{key:0,class:"common-header"},{default:e(()=>[n(de,{onClick:m})]),_:1})),n(i,{class:"common-main"},{default:e(()=>[k.value?(o(),a(w,{key:0},{default:e(({Component:g})=>[(o(),a(Y,{include:y.value},[(o(),a(A(g)))],1032,["include"]))]),_:1})):h("",!0)]),_:1})]),_:1}),_.value?(o(),a(x,{key:1,class:"quit-full",onClick:r[1]||(r[1]=g=>m("fullScreen")),title:"退出全屏"},{default:e(()=>[n($)]),_:1})):h("",!0)]),_:1})}}});export{me as default};
