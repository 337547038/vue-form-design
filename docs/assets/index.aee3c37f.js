import{_ as xe,a as Ne}from"./vueFile.vue_vue_type_script_setup_true_lang.9d62c0f6.js";import{d as ce,r as ae,C as Ue,k as Y,a as C,o as r,c as h,m as i,h as _,F as U,e as q,f as g,w as t,l as D,t as re,p as B,b as e,D as he,G as $e,H as Ie,I as De,s as ye,A as _e,J as ve,n as Be,v as Le,L as Oe,M as be,E as M,j as oe,u as Pe,z as Te,N as Re,x as qe,_ as ge,y as X,O as Fe,P as le,Q as Ee,q as ze,R as He}from"./index.c5c10742.js";const ie=[{label:"\u6807\u7B7E1",value:"value1"},{label:"\u6807\u7B7E2",value:"value2"},{label:"\u6807\u7B7E3",value:"value3"}],te={type:"fixed",source:0,request:"get",sourceFun:""},Ce=[{title:"\u57FA\u7840\u5B57\u6BB5",children:[{type:"input",label:"\u5355\u884C\u6587\u672C",icon:"input",control:{modelValue:""},config:{}},{type:"textarea",label:"\u591A\u884C\u6587\u672C",icon:"textarea",control:{modelValue:""},config:{}},{type:"radio",label:"\u5355\u9009\u6846\u7EC4",icon:"radio",control:{modelValue:""},options:ie,config:te},{type:"checkbox",label:"\u591A\u9009\u6846\u7EC4",icon:"checkbox",control:{modelValue:[]},options:ie,config:te},{type:"select",label:"\u4E0B\u62C9\u9009\u62E9\u6846",icon:"select",control:{modelValue:"",appendToBody:!0},options:ie,config:te},{type:"datePicker",label:"\u65E5\u671F\u9009\u62E9\u5668",icon:"date",control:{modelValue:"",type:"date"},config:{}},{type:"timePicker",label:"\u65F6\u95F4\u9009\u62E9\u5668",icon:"time",control:{modelValue:""},config:{}},{type:"colorPicker",label:"\u53D6\u8272\u5668",icon:"color",control:{modelValue:""},config:{}},{type:"switch",label:"\u5F00\u5173",icon:"switch",control:{modelValue:!1},config:{}},{type:"inputNumber",label:"\u8BA1\u6570\u5668",icon:"number",control:{modelValue:0},config:{}},{type:"cascader",label:"\u7EA7\u8054\u9009\u62E9\u5668",icon:"cascader",control:{modelValue:[]},options:[],config:te},{type:"rate",label:"\u8BC4\u5206",icon:"rate",control:{modelValue:0},config:{}},{type:"slider",label:"\u6ED1\u5757",icon:"slider",control:{modelValue:0},config:{}},{type:"txt",label:"\u6587\u5B57",icon:"text",control:{modelValue:""},config:{}},{type:"title",label:"\u6807\u9898",icon:"title",control:{modelValue:"\u6807\u9898"},config:{}}]},{title:"\u9AD8\u7EA7\u5B57\u6BB5",children:[{type:"table",label:"\u5B50\u8868",icon:"table",list:[],tableData:[],control:{border:!0},config:{}},{type:"component",label:"\u81EA\u5B9A\u4E49\u7EC4\u4EF6",icon:"component",control:{modelValue:""},config:{}},{type:"upload",label:"\u56FE\u7247/\u6587\u4EF6",icon:"image",control:{modelValue:[]},config:{}},{type:"tinymce",label:"tinymce\u5BCC\u6587\u672C",icon:"tinymce",control:{modelValue:""},config:{}}]},{title:"\u5E03\u5C40\u5B57\u6BB5",children:[{type:"grid",label:"\u683C\u6805\u5E03\u5C40",icon:"grid",columns:[{attr:{span:12},list:[]},{attr:{span:12},list:[]}],control:{},config:{}},{type:"tabs",label:"\u6807\u7B7E\u9875",icon:"tabs",columns:[{label:"Tab1",list:[]}],control:{},config:{}},{type:"card",label:"\u5361\u7247\u5E03\u5C40",icon:"card",list:[],control:{},config:{},item:{}},{type:"divider",label:"\u5206\u5272\u7EBF",icon:"divider",control:{},config:{}},{type:"div",label:"div\u5BB9\u5668",icon:"div",control:{},config:{},list:[]}]}],Ke={class:"components-list"},je={key:0},Je=_("div",{class:"title"},"\u5DF2\u6709\u8868\u5355\u5B57\u6BB5",-1),Me={class:"content"},Qe={class:"title"},We=["title"],Ge=ce({__name:"dragControl",props:{formData:{default:()=>({list:[],form:{}})},searchData:{default:()=>[]},searchDesign:{type:Boolean,default:!1}},emits:["update:searchData"],setup(Z,{emit:Q}){const A=Z,V=ae(A.searchData);Ue(()=>A.searchData,d=>{V.value=d});const w=Y(()=>A.searchDesign?Ce.slice(0,1):Ce),u=d=>JSON.parse(JSON.stringify(d)),H=(d,k)=>{if(k){const F=JSON.parse(JSON.stringify(d));delete F.rules,delete F.customRules,V.value.push(F)}else A.searchData.forEach((F,$)=>{F.name===d.name&&V.value.splice($,1)});Q("update:searchData",V.value)},a=d=>{let k=!1;return A.searchData.forEach(F=>{F.name===d&&(k=!0)}),k},W=Y(()=>{const d=[];return G(A.formData.list,d),d}),ee=["txt","title","table","component","upload"],G=(d,k)=>{d&&d.forEach(F=>{F.type==="grid"||F.type==="tabs"?F.columns.forEach($=>{G($.list,k)}):F.type==="card"?G(F.list,k):ee.indexOf(F.type)===-1&&k.push(F)})};return(d,k)=>{var $;const F=C("el-checkbox");return r(),h("div",Ke,[Z.searchDesign&&(($=i(W))==null?void 0:$.length)?(r(),h("div",je,[Je,_("div",Me,[(r(!0),h(U,null,q(i(W),x=>(r(),g(F,{key:x.name,checked:a(x.name),onChange:z=>H(x,z)},{default:t(()=>[D(re(x.item.label),1)]),_:2},1032,["checked","onChange"]))),128))])])):B("",!0),(r(!0),h(U,null,q(i(w),(x,z)=>(r(),h("div",{key:z},[_("div",Qe,re(x.title),1),e(i($e),{itemKey:"key123",tag:"ul",modelValue:x.children,"onUpdate:modelValue":m=>x.children=m,group:{name:"form",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:u},{item:t(({element:m})=>[_("li",{class:he([m.type])},[_("i",{class:he(`icon-${m.icon}`)},null,2),_("span",{title:m.label},re(m.label),9,We)],2)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))])}}}),Xe={class:"sidebar-tools"},Ye=_("h3",null,"\u901A\u7528\u5C5E\u6027",-1),Ze=D("="),eu=D("\u9690\u85CF(\u9ED8\u8BA4)"),uu=D("\u7981\u7528"),lu=_("h3",null,"\u6807\u7B7E\u914D\u7F6E\u9879",-1),tu=["onClick"],au=D("\u589E\u52A0\u6807\u7B7E"),ou={key:2},nu=_("h3",null,"\u9009\u9879\u914D\u7F6E",-1),su={key:0},ru=["onClick"],iu=D("\u65B0\u589E"),cu=D("\u52A8\u6001\u9009\u9879"),du=D("\u6570\u636E\u6E90"),pu=D("\u65B9\u6CD5\u51FD\u6570 "),mu=D("\u63A5\u53E3\u5B57\u5178 "),fu=_("h3",null,"\u6821\u9A8C\u8BBE\u7F6E",-1),hu={key:0},vu=["onClick"],bu=D("\u5FEB\u901F\u6DFB\u52A0"),gu=D("\u7F16\u5199\u6821\u9A8C\u89C4\u5219 "),Fu=D("\u5FC5\u586B "),Eu={key:4},Cu=_("h3",null,"\u5176\u4ED6\u5C5E\u6027",-1),Du=D("\u6DFB\u52A0\u5C5E\u6027 "),yu=D("\u6DFB\u52A0\u65F6\u83B7\u53D6\u8BF7\u6C42 "),_u=D("\u7F16\u8F91\u8868\u5355\u6837\u5F0F "),Bu=D("\u8BBE\u7F6E\u6570\u636E\u5B57\u5178 "),Au=ce({__name:"formControlAttr",props:{formData:null,formConfig:{default:()=>({})}},emits:["openDialog","update:formData","update:formConfig"],setup(Z,{emit:Q}){const A=Z,{formConfig:V,formData:w}=Ie(A),u=De(),H=ye(),a=Y(()=>u.controlAttr),W=ae([]),ee=Y(()=>{const o=d.isSearch;return[{label:"\u8868\u5355\u540D\u79F0",value:V.value.title,key:"title",hide:o,path:"config"},{label:"\u6570\u636E\u6E90",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90",value:be(V.value.formId),type:"select",options:W.value,key:"formId",hide:o,path:"config"},{label:"\u8868\u5355\u6807\u8BC6",value:w.value.name,key:"name"},{label:"\u8868\u5355\u6807\u7B7E\u5BBD\u5EA6",value:w.value.labelWidth,placeholder:"\u8868\u5355label\u5BBD\uFF0C\u5982180px",key:"labelWidth"},{label:"\u8868\u5355\u6837\u5F0F\u540D\u79F0",value:w.value.class,placeholder:"\u989D\u5916\u6DFB\u52A0\u7684\u8868\u5355class\u7C7B\u540D",key:"class"},{label:"\u7EC4\u4EF6\u5C3A\u5BF8",value:w.value.size,type:"select",key:"size",options:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},{label:"\u63D0\u4EA4\u6309\u94AE",value:V.value.confirm,placeholder:"\u63D0\u4EA4\u6309\u94AE\u6587\u6848\uFF0C\u7A7A\u4E0D\u663E\u793A",key:"confirm",path:"config",hide:o},{label:"\u53D6\u6D88\u8FD4\u56DE\u6309\u94AE",value:V.value.cancel,placeholder:"\u53D6\u6D88\u8FD4\u56DE\u6309\u94AE\u6587\u6848\uFF0C\u7A7A\u4E0D\u663E\u793A",path:"config",key:"cancel",hide:o}]}),G=Y(()=>{if(Object.keys(a.value).length){const{control:o={},className:n="",type:c,name:y,config:E={},item:v={},attr:b={}}=a.value;let N=!1;if(c==="table"){const O=a.value&&a.value.list;O&&O.length>0&&(N=O[0].type==="index")}return[{label:"\u81EA\u5B9A\u4E49Class",value:n,placeholder:"\u6837\u5F0F\u7C7B\u540D",path:"config.className"},{label:"\u5B57\u6BB5\u6807\u8BC6",value:y,type:Object.keys(d.dataSourceList).length>0?"select":"text",placeholder:"\u5B57\u6BB5\u552F\u4E00\u6807\u8BC6\uFF0C\u5BF9\u5E94\u6570\u636E\u5E93",dict:d.dataSourceList,path:"name",vHide:["grid","tabs","card","title","gridChild","tableColumn","divider","txt","div"],eventName:"filedNameKey"},{label:"\u5360\u4F4D\u5185\u5BB9",value:o.placeholder,placeholder:"placeholder",path:"control.placeholder",vShow:["password","input","textarea","select","date","number","datePicker","tinymce","timePicker"]},{label:"label\u503C",value:v.label,path:"item.label",vHide:["table","grid","tabs","title","gridChild","div","inputSlot"]},{label:"\u9690\u85CFlabel",value:v.showLabel,path:"item.showLabel",type:"switch",vHide:["table","grid","tabs","title","gridChild","divider","card","div","inputSlot"]},{label:"\u5E2E\u52A9\u4FE1\u606F",value:E.help,path:"config.help",vHide:["table","grid","tabs","gridChild","divider","div","inputSlot"]},{label:"\u8868\u5355\u6805\u683C",value:E.span,placeholder:"\u8868\u5355\u533A\u57DF\u6805\u683C\u5BBD",path:"config.span",vHide:["table","grid","gridChild","divider"],isNum:!0},{label:"\u6587\u672C\u503C",value:o.modelValue,placeholder:"\u652F\u6301html",path:"control.modelValue",vShow:["txt"],inputStyle:"textarea"},{label:"\u8BBE\u4E3A\u5BC6\u7801",value:c,type:"select",dict:{\u6587\u672C:"input",\u5BC6\u7801:"password"},path:"type",vShow:["input","password"],vIf:d.isSearch},{label:"\u6587\u672C\u57DF\u9AD8\u5EA6",value:o.rows,placeholder:"\u8F93\u5165\u6846\u884C\u6570",path:"control.rows",vShow:["textarea"],isNum:!0},{label:"\u524D\u7F00",value:E.prepend,placeholder:"\u6587\u672C\u524D\u7F00",path:"config.prepend",vShow:["input","password"]},{label:"\u540E\u7F00",value:E.append,placeholder:"\u6587\u672C\u540E\u7F00",path:"config.append",vShow:["input","password"]},{label:"\u8F6C\u6362\u683C\u5F0F\u5316\u503C",value:E.transform,path:"config.transform",type:"switch",vShow:["checkbox","select","switch","cascader","upload","slider"]},{label:"\u662F\u5426\u591A\u9009",value:o.multiple,path:"control.multiple",type:"switch",vShow:["select"],eventName:"selectMultiple"},{label:"\u662F\u5426\u7981\u7528",value:o.disabled,path:"control.disabled",type:"switch",vShow:["input","password","textarea","radio","checkbox","select","date","switch","number","cascader","upload","rate","tinymce"],vIf:d.isSearch},{label:"\u662F\u5426\u7981\u7528\u7F16\u8F91",value:E.editDisabled,path:"config.editDisabled",type:"switch",vShow:["input","password","textarea","radio","checkbox","select","date","switch","number","cascader","upload"],vIf:d.isSearch},{label:"\u6DFB\u52A0\u9875\u9690\u85CF",value:E.disabledAdd,path:"config.disabledAdd",type:"switch",vIf:d.isSearch,vHide:["inputSlot"]},{label:"\u7F16\u8F91\u9875\u9690\u85CF",value:E.disabledEdit,path:"config.disabledEdit",type:"switch",vIf:d.isSearch,vHide:["inputSlot"]},{label:"\u8BE6\u60C5\u9875\u9690\u85CF",value:E.disabledDetail,path:"config.disabledDetail",type:"switch",vIf:d.isSearch,vHide:["inputSlot"]},{label:"\u8BBE\u4E3AInput\u8F93\u5165\u6846\u7684\u524D/\u540E\u7F00",value:c==="inputSlot",path:"",type:"switch",vShow:["select","inputSlot"],eventName:"setInputSlot"},{label:"\u6807\u9898",value:o.modelValue,path:"control.modelValue",vShow:["title"]},{label:"\u5360\u636E\u7684\u5217\u6570span",value:b.span,path:"attr.span",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5DE6\u4FA7\u7684\u95F4\u9694\u683C\u6570offset",value:b.offset,path:"attr.offset",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5411\u53F3\u79FB\u52A8\u683C\u6570push",value:b.push,path:"attr.push",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5411\u5DE6\u79FB\u52A8\u683C\u6570pull",value:b.pull,path:"attr.pull",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5E8F\u53F7\u5217",value:N,type:"switch",vShow:["table"],eventName:"tableColumn1"},{label:"\u7EC4\u4EF6\u540D",value:E.template,placeholder:"\u5168\u5C40\u6CE8\u518C\u7684\u7EC4\u4EF6\u540D\u79F0",path:"config.componentName",vShow:["component"]},{label:"\u4E0A\u4F20\u5730\u5740",value:o.action,placeholder:"\u56FE\u7247/\u6587\u4EF6\u4E0A\u4F20\u5730\u5740",path:"control.action",vShow:["upload"]},{label:"\u6587\u4EF6\u5B57\u6BB5\u540D",value:o.name,placeholder:"\u4E0A\u4F20\u7684\u6587\u4EF6\u5B57\u6BB5\u540D",path:"control.name",vShow:["upload"]},{label:"\u5217\u8868\u7C7B\u578B",value:o.listType,type:"select",dict:{text:"text",picture:"picture","picture-card":"picture-card"},path:"control.listType",vShow:["upload"]},{label:"\u63D0\u793A\u6587\u5B57",value:E.tip,placeholder:"\u63D0\u793A\u8BF4\u660E\u6587\u5B57",path:"config.tip",vShow:["upload"]},{label:"\u6309\u94AE\u6587\u672C",value:E.btnText,placeholder:"\u4E0A\u4F20\u6309\u94AE\u6587\u672C",path:"config.btnText",vShow:["upload"]},{label:"direction",type:"select",dict:{horizontal:"horizontal",vertical:"vertical"},value:o.direction,path:"control.direction",vShow:["divider"]},{label:"border-style",value:o.borderStyle,path:"control.borderStyle",vShow:["divider"]},{label:"content-position",type:"select",dict:{left:"left",right:"right",center:"center"},value:o.contentPosition,path:"control.contentPosition",vShow:["divider"]},{label:"\u6700\u5C0F\u503C",value:o.min,path:"control.min",vShow:["slider"],eventName:"formatNumber",isNum:!0},{label:"\u6700\u5927\u503C",value:o.max,path:"control.max",vShow:["rate","slider"],eventName:"formatNumber",isNum:!0},{label:"\u6B65\u957F",value:o.step,path:"control.step",vShow:["slider"],eventName:"formatNumber",isNum:!0},{label:"type",value:o.type,path:"control.type",vShow:["datePicker"],type:"select",placeholder:"\u663E\u793A\u7C7B\u578B",dict:{year:"year",month:"month",date:"date",datetime:"datetime",week:"week",datetimerange:"datetimerange",daterange:"daterange",monthrange:"monthrange"}},{label:"format",value:o.format,path:"control.format",vShow:["datePicker","timePicker"],placeholder:"\u663E\u793A\u5728\u8F93\u5165\u6846\u4E2D\u7684\u683C\u5F0F"},{label:"color-format",value:o.colorFormat,path:"control.colorFormat",type:"select",placeholder:"\u5199\u5165 v-model \u7684\u989C\u8272\u7684\u683C\u5F0F",dict:{hsl:"hsl",hsv:"hsv",hex:"hex",rgb:"rgb"},vShow:["colorPicker"]},{label:"\u6587\u672C\u9AD8\u5EA6",value:o.height,path:"control.height",placeholder:"\u6587\u672C\u9AD8\u5EA6(\u9884\u89C8\u67E5\u770B\u6548\u679C)",vShow:["tinymce"]},{label:"\u6587\u672C\u5BBD\u5EA6",value:o.width,path:"control.width",placeholder:"\u6587\u672C\u5BBD\u5EA6(\u9884\u89C8\u67E5\u770B\u6548\u679C)",vShow:["tinymce"]},{label:"\u56FE\u7247\u4E0A\u4F20\u5730\u5740",value:o.imgUrl,path:"control.imgUrl",placeholder:"\u56FE\u7247\u4E0A\u4F20\u5730\u5740",vShow:["tinymce"]},{label:"\u9644\u4EF6\u4E0A\u4F20\u5730\u5740",value:o.blobUrl,path:"control.blobUrl",placeholder:"\u9644\u4EF6\u4E0A\u4F20\u5730\u5740",vShow:["tinymce"]},{label:"\u663E\u793A\u6A21\u5F0F",value:E.style,path:"config.style",placeholder:"\u663E\u793A\u98CE\u683C(\u9884\u89C8\u67E5\u770B\u6548\u679C)",type:"select",dict:{default:"default",simple:"simple"},vShow:["tinymce"]}].filter(O=>{let P=!0;return O.vShow&&(P=O.vShow.includes(c)),O.vHide&&(P=!O.vHide.includes(c)),O.vIf&&(P=!1),P})}else return[]}),d=_e({dataSourceList:{},customRulesList:[...ve,{type:"rules",label:"\u81EA\u5B9A\u4E49\u6B63\u5219"},{type:"methods",label:"\u81EA\u5B9A\u4E49\u65B9\u6CD5"}],isSearch:H.query.type==="search"}),k=(o,n)=>{switch(o.eventName){case"selectMultiple":n?a.value.control.modelValue=[]:a.value.control.modelValue="";break;case"tableColumn1":I(n);break;case"formatNumber":break;case"filedNameKey":for(const c in d.dataSourceList)if(d.dataSourceList[c]===n){a.value.item.label=c,a.value.name=n;return}break;case"setInputSlot":n?(a.value.type="inputSlot",a.value.item.showLabel=!0,M.success(`\u8BF7\u5728\u5BF9\u5E94\u7684Input\u8F93\u5165\u6846\u5C5E\u6027\u524D\u540E\u7F00\u8BBE\u7F6Ekey:${a.value.name}`)):(a.value.type="select",a.value.item.showLabel=!1);break}if(o.path){const c=o.isNum?parseInt(n):n;o.path&&F(a.value,o.path,c)}},F=(o,n,c)=>{let y=o;const E=n.split(".");let v=0;for(v;v<E.length-1;v++){const R=E[v];if(R in y)y=y[R];else throw new Error(`${R} is undefined`)}const b=E[v],N=y[E[v]];return c!==void 0&&(y[b]=c),{obj:y,key:b,value:N}},$=(o,n)=>{n==="tabs"?a.value.columns.splice(o,1):a.value.options.splice(o,1)},x=o=>{a.value.type==="cascader"?z("cascader"):o==="tabs"?a.value.columns.push({label:"\u6807\u7B7E\u540D\u79F0",list:[]}):a.value.options.push({label:"",value:""})},z=o=>{let n=a.value.control;o==="cascader"&&(n=a.value.options),Q("openDialog",n,c=>{o==="cascader"?a.value.options=c:(a.value.control={},Object.assign(a.value.control,c))})},m=o=>{var n;(n=a.value.item)!=null&&n.rules||(a.value.item.rules=[]),o?a.value.item.rules.push({required:!0,message:"\u5FC5\u586B\u9879",trigger:"change"}):a.value.item.rules.splice(0,1)},p=()=>{var o,n;(o=a.value.item)!=null&&o.rules||(a.value.item.rules=[]),Q("openDialog",(n=a.value.item)==null?void 0:n.rules,c=>{Object.assign(a.value.item.rules,c)})},f=(o,n)=>{if(o&&o.length===0||Object.keys(a.value).length===0)return!1;const c=o.indexOf(a.value.type);return n?c!==-1:c===-1},I=o=>{const n={name:"index",type:"index",item:{label:"\u5E8F\u53F7"},control:{},config:{}};o?a.value.list.unshift(n):a.value.list.splice(0,1)},T=Y(()=>{var n;const o=a.value&&((n=a.value.item)==null?void 0:n.rules);return o&&o.length>0}),ne=()=>{a.value.customRules||(a.value.customRules=[]),a.value.customRules.push({type:"required",message:"\u5FC5\u586B\u9879",trigger:"blur"})},L=o=>{a.value.customRules&&a.value.customRules.splice(o,1)},Ae=()=>{Q("openDialog","","css","css")},ke=()=>{Q("openDialog",{},"dict","json")},de=o=>{const n=o||H.query.formId;n&&oe("formFiled",{id:n}).then(c=>{c.data.code===200&&c.data.data.forEach(y=>{d.dataSourceList[y.label]=y.name})}).catch(c=>{console.log(c)}),H.query.type!=="search"&&oe("datasource").then(c=>{W.value=c.data.data})},se=(o,n)=>{o.key==="formId"&&(de(o.value),u.setActiveKey(""),u.setControlAttr({})),o.path==="config"?V.value[o.key]=o.value||n:w.value[o.key]=o.value},Ve=o=>{switch(o){case 0:return"\u6570\u636E\u6E90\u63A5\u53E3URL";case 1:return"\u65B9\u6CD5\u540D\u79F0";case 2:return"\u5B57\u5178key\uFF0C\u9ED8\u8BA4\u4E3A\u5B57\u6BB5\u6807\u8BC6"}return""},we=(o,n)=>{const c=ve.filter(y=>y.type===n);c&&c.length&&(o.message=c[0].message)};return de(),(o,n)=>{const c=C("el-option"),y=C("el-select"),E=C("el-switch"),v=C("el-input"),b=C("el-form-item"),N=C("el-col"),R=C("el-radio"),O=C("el-radio-group"),P=C("el-button"),ue=C("el-tab-pane"),K=C("QuestionFilled"),j=C("el-icon"),J=C("el-tooltip"),pe=C("el-tabs"),Se=C("el-checkbox"),me=C("el-form");return r(),h("div",Xe,[e(pe,{modelValue:"first"},{default:t(()=>[e(ue,{label:"\u5B57\u6BB5\u5C5E\u6027",name:"first"},{default:t(()=>[e(me,{size:"small",class:"form"},{default:t(()=>[Ye,(r(!0),h(U,null,q(i(G),(l,S)=>(r(),g(b,{key:S,label:l.label},{default:t(()=>[l.type==="select"?(r(),g(y,{key:0,placeholder:l.placeholder,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,filterable:l.path==="name","allow-create":l.path==="name",onChange:s=>k(l,s)},{default:t(()=>[(r(!0),h(U,null,q(l.dict,(s,fe)=>(r(),g(c,{key:s,value:s,label:l.path==="name"?`${fe}(${s})`:fe},null,8,["value","label"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","filterable","allow-create","onChange"])):l.type==="switch"?(r(),g(E,{key:1,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,onChange:s=>k(l,s)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(r(),g(v,{key:2,type:l.inputStyle,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,placeholder:l.placeholder,onChange:s=>k(l,s)},null,8,["type","modelValue","onUpdate:modelValue","placeholder","onChange"]))]),_:2},1032,["label"]))),128)),i(a).config?(r(),h(U,{key:0},[e(b,{label:"\u8054\u52A8\u6761\u4EF6"},{default:t(()=>[e(N,{span:9},{default:t(()=>[e(v,{placeholder:"\u6807\u8BC6\u540D\u79F0",modelValue:i(a).config.linkKey,"onUpdate:modelValue":n[0]||(n[0]=l=>i(a).config.linkKey=l)},null,8,["modelValue"])]),_:1}),e(N,{span:2,offset:1},{default:t(()=>[Ze]),_:1}),e(N,{span:9,offset:1},{default:t(()=>[e(v,{placeholder:"\u5173\u8054\u503C",modelValue:i(a).config.linkValue,"onUpdate:modelValue":n[1]||(n[1]=l=>i(a).config.linkValue=l)},null,8,["modelValue"])]),_:1})]),_:1}),f(["input","textarea","radio","checkbox","select","date","switch","number","cascader","slider","datePicker","timePicker","colorPicker","inputNumber","rate"],!0)?Be((r(),g(b,{key:0,label:"\u8054\u52A8\u7ED3\u679C"},{default:t(()=>[e(O,{class:"option-radio",modelValue:i(a).config.linkResult,"onUpdate:modelValue":n[2]||(n[2]=l=>i(a).config.linkResult=l)},{default:t(()=>[e(R,{label:"hidden"},{default:t(()=>[eu]),_:1}),e(R,{label:"disabled"},{default:t(()=>[uu]),_:1})]),_:1},8,["modelValue"])]),_:1},512)),[[Le,i(a).config.linkKey]]):B("",!0)],64)):B("",!0),f(["tabs"],!0)?(r(),h(U,{key:1},[lu,(r(!0),h(U,null,q(i(a).columns,(l,S)=>(r(),g(b,{key:S},{default:t(()=>[e(N,{span:12},{default:t(()=>[e(v,{placeholder:"\u6807\u7B7E\u914D\u7F6E\u9879",modelValue:l.label,"onUpdate:modelValue":s=>l.label=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(N,{span:2,offset:1},{default:t(()=>[_("i",{class:"icon-del",onClick:s=>$(S,"tabs")},null,8,tu)]),_:2},1024)]),_:2},1024))),128)),e(b,null,{default:t(()=>[e(P,{onClick:n[3]||(n[3]=l=>x("tabs"))},{default:t(()=>[au]),_:1})]),_:1})],64)):B("",!0),f(["radio","select","checkbox","cascader","inputSlot"],!0)?(r(),h("div",ou,[nu,f("select",!0)?(r(),g(b,{key:0,label:"\u6DFB\u52A0\u5168\u90E8\u9879"},{default:t(()=>[e(v,{placeholder:"\u8BF7\u8F93\u5165\u5168\u90E8\u9879\u6587\u6848",modelValue:i(a).config.addAll,"onUpdate:modelValue":n[4]||(n[4]=l=>i(a).config.addAll=l)},null,8,["modelValue"])]),_:1})):B("",!0),e(pe,{modelValue:i(a).config.type,"onUpdate:modelValue":n[9]||(n[9]=l=>i(a).config.type=l)},{default:t(()=>[e(ue,{label:"\u56FA\u5B9A\u9009\u9879",name:"fixed"},{default:t(()=>[i(a).type!=="cascader"?(r(),h("div",su,[(r(!0),h(U,null,q(i(a).options,(l,S)=>(r(),g(b,{key:S},{default:t(()=>[e(N,{span:10},{default:t(()=>[e(v,{placeholder:"\u9009\u9879\u6807\u7B7E",modelValue:l.label,"onUpdate:modelValue":s=>l.label=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(N,{span:10,offset:1},{default:t(()=>[e(v,{placeholder:"\u9009\u9879\u503C",modelValue:l.value,"onUpdate:modelValue":s=>l.value=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(N,{span:2,offset:1},{default:t(()=>[_("i",{class:"icon-del",onClick:s=>$(S)},null,8,ru)]),_:2},1024)]),_:2},1024))),128))])):B("",!0),e(b,null,{default:t(()=>[e(P,{onClick:x},{default:t(()=>[iu]),_:1})]),_:1})]),_:1}),e(ue,{name:"async"},{label:t(()=>[e(J,{content:"\u9009\u7528\u52A8\u6001\u9009\u9879\u65F6\u8BF7\u5220\u9664\u56FA\u5B9A\u9009\u9879\u6570\u636E",placement:"top"},{default:t(()=>[_("span",null,[cu,e(j,null,{default:t(()=>[e(K)]),_:1})])]),_:1})]),default:t(()=>[e(O,{class:"option-radio",modelValue:i(a).config.source,"onUpdate:modelValue":n[5]||(n[5]=l=>i(a).config.source=l),onChange:n[6]||(n[6]=l=>i(a).config.sourceFun="")},{default:t(()=>[e(R,{label:0},{default:t(()=>[du]),_:1}),e(R,{label:1},{default:t(()=>[pu,e(J,{content:"\u9002\u7528\u4E8E\u5BFC\u51FA\u4E3A\u5355\u72EC\u7684vue\u6587\u4EF6\uFF0C\u5728\u5F53\u524D\u6587\u4EF6\u4F7F\u7528provide\u5F62\u5F0F\u5C06\u65B9\u6CD5\u4F20\u9012",placement:"top"},{default:t(()=>[e(j,null,{default:t(()=>[e(K)]),_:1})]),_:1})]),_:1}),e(R,{label:2},{default:t(()=>[mu,e(J,{content:"\u4ECE\u5F53\u524D\u6570\u636E\u63A5\u53E3dict\u91CC\u5339\u914D\uFF0C\u53EF\u51CF\u5C11\u8BF7\u6C42\u6570\uFF0C\u5B9E\u9645\u9879\u76EE\u4E5F\u4E0D\u662F\u6BCF\u4E2A\u9009\u9879\u90FD\u6709\u5355\u72EC\u7684\u63A5\u53E3\u3002\u6B64\u8BBE\u7F6E\u9700\u8981\u5F00\u542F\u8868\u5355\u5C5E\u6027-\u6DFB\u52A0\u65F6\u83B7\u53D6\u8BF7\u6C42",placement:"top"},{default:t(()=>[e(j,null,{default:t(()=>[e(K)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(b,null,{default:t(()=>[e(v,{modelValue:i(a).config.sourceFun,"onUpdate:modelValue":n[8]||(n[8]=l=>i(a).config.sourceFun=l),placeholder:Ve(i(a).config.source)},Oe({_:2},[i(a).config.source?void 0:{name:"prepend",fn:t(()=>[e(y,{modelValue:i(a).config.request,"onUpdate:modelValue":n[7]||(n[7]=l=>i(a).config.request=l),style:{width:"80px"}},{default:t(()=>[e(c,{label:"get",value:"get"}),e(c,{label:"post",value:"post"})]),_:1},8,["modelValue"])])}]),1032,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):B("",!0),!d.isSearch&&f(["txt","title","table","grid","tabs","card","switch","gridChild","tableColumn","divider","div"])?(r(),h(U,{key:3},[fu,f(["input","password","component"],!0)?(r(),h("div",hu,[(r(!0),h(U,null,q(i(a).customRules,(l,S)=>(r(),g(b,{key:l.type},{default:t(()=>[e(v,{modelValue:l.message,"onUpdate:modelValue":s=>l.message=s,placeholder:"\u6821\u9A8C\u63D0\u793A\u4FE1\u606F"},{prepend:t(()=>[e(y,{modelValue:l.type,"onUpdate:modelValue":s=>l.type=s,style:{width:"80px"},onChange:s=>we(l,s)},{default:t(()=>[(r(!0),h(U,null,q(d.customRulesList,s=>(r(),g(c,{key:s.type,label:s.label,value:s.type},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),append:t(()=>[_("i",{class:"icon-del",onClick:s=>L(S)},null,8,vu)]),_:2},1032,["modelValue","onUpdate:modelValue"]),l.type==="rules"?(r(),g(v,{key:0,placeholder:"\u6B63\u5219\u8868\u8FBE\u5F0F",modelValue:l.rules,"onUpdate:modelValue":s=>l.rules=s},null,8,["modelValue","onUpdate:modelValue"])):B("",!0),l.type==="methods"?(r(),g(v,{key:1,placeholder:"\u65B9\u6CD5\u540D\u79F0",modelValue:l.methods,"onUpdate:modelValue":s=>l.methods=s},null,8,["modelValue","onUpdate:modelValue"])):B("",!0)]),_:2},1024))),128)),e(b,null,{default:t(()=>[e(P,{onClick:ne},{default:t(()=>[bu]),_:1}),e(P,{onClick:p},{default:t(()=>[gu,e(J,{content:"\u53EF\u53C2\u8003UI\u7EC4\u4EF6\u8868\u5355\u6821\u9A8C\uFF0C<a href='https://element-plus.gitee.io/zh-CN/component/form.html#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C' target='_blank' style='color:red'>\u8BE6\u60C5\u70B9\u51FB</a>",placement:"top","raw-content":""},{default:t(()=>[e(j,null,{default:t(()=>[e(K)]),_:1})]),_:1})]),_:1})]),_:1})])):(r(),g(b,{key:1},{default:t(()=>{var l,S;return[e(Se,{modelValue:i(T),onChange:m},{default:t(()=>[Fu]),_:1},8,["modelValue"]),((l=i(a).item)==null?void 0:l.rules)&&((S=i(a).item)==null?void 0:S.rules[0])?(r(),g(v,{key:0,placeholder:"\u81EA\u5B9A\u4E49\u5FC5\u586B\u9519\u8BEF\u63D0\u793A",modelValue:i(a).item.rules[0].message,"onUpdate:modelValue":n[10]||(n[10]=s=>i(a).item.rules[0].message=s)},null,8,["modelValue"])):B("",!0)]}),_:1}))],64)):B("",!0),f(["grid","card","gridChild","divider","div"])?(r(),h("div",Eu,[Cu,e(P,{size:"small",onClick:z},{default:t(()=>[Du,e(J,{content:"\u53EF\u6DFB\u52A0\u5F53\u524D\u7EC4\u4EF6\u6240\u6709prop\u5C5E\u6027",placement:"top"},{default:t(()=>[e(j,null,{default:t(()=>[e(K)]),_:1})]),_:1})]),_:1})])):B("",!0)]),_:1})]),_:1}),e(ue,{label:"\u8868\u5355\u5C5E\u6027",name:"second"},{default:t(()=>[e(me,{size:"small",class:"form"},{default:t(()=>[(r(!0),h(U,null,q(i(ee).filter(l=>!l.hide),(l,S)=>(r(),g(b,{label:l.label,key:S},{default:t(()=>[l.type==="select"?(r(),g(y,{key:0,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,placeholder:l.placeholder,onChange:s=>se(l)},{default:t(()=>[(r(!0),h(U,null,q(l.options,s=>(r(),g(c,{label:s.label||s.name,key:s.label||s.name,value:i(be)(s.value||s.id)},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])):(r(),g(v,{key:1,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,placeholder:l.placeholder,onChange:s=>se(l)},null,8,["modelValue","onUpdate:modelValue","placeholder","onChange"]))]),_:2},1032,["label"]))),128)),d.isSearch?B("",!0):(r(),g(b,{key:0},{label:t(()=>[yu,e(J,{content:"\u65B0\u589E\u8868\u5355\u6570\u636E\u65F6\uFF0C\u4ECE\u63A5\u53E3\u83B7\u53D6\u65B0\u589E\u521D\u59CB\u6570\u636E",placement:"top"},{default:t(()=>[e(j,null,{default:t(()=>[e(K)]),_:1})]),_:1})]),default:t(()=>[e(E,{modelValue:i(V).addLoad,"onUpdate:modelValue":n[11]||(n[11]=l=>i(V).addLoad=l),onChange:n[12]||(n[12]=l=>se({key:"addLoad",path:"config"},l))},null,8,["modelValue"])]),_:1})),e(b,null,{default:t(()=>[e(P,{onClick:Ae},{default:t(()=>[_u,e(J,{content:"\u5F53\u524D\u8868\u5355\u5E94\u7528\u9875\u7684\u6837\u5F0F\uFF0C\u7C7B\u4F3C\u4E8E.vue\u6587\u4EF6\u4E2D\u7684<style scoped>\u4E2D\u7684\u6837\u5F0F",placement:"top"},{default:t(()=>[e(j,null,{default:t(()=>[e(K)]),_:1})]),_:1})]),_:1}),e(P,{onClick:ke},{default:t(()=>[Bu,e(J,{content:"\u6570\u636E\u5B57\u5178\uFF0C\u7528\u4E8E\u5339\u914D\u591A\u9009\u7EC4\u3001\u4E0B\u62C9\u9009\u62E9\u7B49\uFF0C\u63D0\u4F9B\u52A8\u6001\u83B7\u53D6Options\u63A5\u53E3\u5B57\u5178\u6570\u636E\uFF0C\u4E00\u822C\u4E0D\u8BBE\u7F6E\uFF0C\u4ECE\u63A5\u53E3dict\u83B7\u53D6\u3002\u683C\u5F0F\uFF1A{0:'\u7537',1:'\u5973'}",placement:"top"},{default:t(()=>[e(j,null,{default:t(()=>[e(K)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),ku={class:"design-container"},Vu={class:"main-body"},wu={class:"main-form"},Su={key:0,class:"empty-tips"},xu={key:0,id:"editJson"},Nu={class:"dialog-footer"},Uu=D(" \u786E\u5B9A "),$u={class:"dialog-footer"},Iu=D(" \u63D0\u4EA4 "),Lu=D(" \u53D6\u6D88 "),Tu=ce({__name:"index",setup(Z){var z;Pe().changeBreadcrumb([{label:"\u7CFB\u7EDF\u5DE5\u5177"},{label:"\u8868\u5355\u8BBE\u8BA1"}]);const A=De(),V=Te(),w=ye(),u=_e({formData:{list:[],form:{labelWidth:"",class:"",size:"default",name:"form"+new Date().getTime()},config:{title:"form"+new Date().getTime(),formId:w.query.formId||""}},visibleDialog:!1,dialogType:"",editor:{},loading:!1,drawerDirection:"rtl",formDataPreview:{},previewVisible:!1,searchDesign:((z=w.query)==null?void 0:z.type)==="search",formDataList:{},formDataTemp:{},formDict:{}}),H=ae(),a=()=>{const m=w.query.id;m&&(u.loading=!0,oe("getFormById",{id:m}).then(p=>{if(p.data.code===200){const f=p.data.data;u.searchDesign?(f.searchData&&(u.formData=X(f.searchData)),u.formDataList=X(f.formData),u.formDataTemp=f):f.formData&&(u.formData=X(f.formData)),u.formDict=Fe(f.dict)}u.loading=!1}).catch(p=>{M.info(p.data||"\u52A0\u8F7D\u5F02\u5E38"),u.loading=!1}))},W=m=>{switch(u.dialogType="",m){case"del":u.formData.list=[],A.setActiveKey(""),A.setControlAttr({});break;case"eye":A.setActiveKey(""),A.setControlAttr({}),u.previewVisible=!0;let p=le(u.formData);const f=u.formData.form.name,I=new RegExp(`get${f}ControlByName`,"g");p=p.replace(I,`getPreview${f}ControlByName`),u.formDataPreview=X(p),u.formDataPreview.form.name=`Preview${f}`;break;case"json":d(u.formData);break;case"save":G();break;case"vue":H.value.open(u.formData);break}},ee=()=>{try{const m=u.editor.getValue();if(typeof u.dialogType=="function")u.dialogType(X(m));else switch(u.dialogType){case"css":u.formData.config||(u.formData.config={}),u.formData.config.style=m;break;case"dict":u.formDict=Fe(m);break;default:u.formData=X(m)}u.visibleDialog=!1}catch{}},G=()=>{var f,I;const m=(f=u.formData.config)==null?void 0:f.title;if(!u.searchDesign&&!m){M.error("\u8BF7\u5207\u6362\u5230\u8868\u5355\u5C5E\u6027\u8F93\u5165\u8868\u5355\u540D\u79F0\uFF01");return}const p=Object.assign({},u.formDataTemp,{formData:le(u.formData),id:w.query.id,formId:((I=u.formData.config)==null?void 0:I.formId)||w.query.formId,name:m,type:1,dict:Ee(u.formDict)});u.searchDesign&&Object.assign(p,{searchData:le(u.formData),formData:u.formDataTemp.formData}),u.loading=!0,oe("saveForm",p).then(T=>{T.data.code===200?(M({message:"\u4FDD\u5B58\u6210\u529F\uFF01",type:"success"}),V.push({path:"/designform/formlist"})):M.error(T.data),u.loading=!1}).catch(T=>{M.info(T.data||"\u4FDD\u5B58\u5F02\u5E38"),u.loading=!1}),w.query.id||window.sessionStorage.removeItem("formMenuList"),A.setActiveKey(""),A.setControlAttr({})},d=(m,p,f)=>{var T;u.drawerDirection=p?"ltr":"rtl",u.dialogType=p,u.visibleDialog=!0;let I=le(m,!0);p==="css"&&(I=((T=u.formData.config)==null?void 0:T.style)||""),p==="dict"&&(I=Ee(u.formDict,!0)),ze(()=>{u.editor=He(I,"",f)})},k=m=>{F(),m()},F=()=>{u.visibleDialog=!1,u.dialogType=""},$=ae(),x=()=>{$.value.validate((m,p)=>{if(m)M.success("\u6821\u9A8C\u901A\u8FC7"),console.log(p);else return M.error("\u6821\u9A8C\u4E0D\u901A\u8FC7"),!1})};return a(),Re(()=>{Object.keys(u.editor).length!==0&&(u.editor.destroy(),u.editor.container.remove())}),(m,p)=>{const f=C("el-button"),I=C("el-drawer"),T=C("el-dialog"),ne=qe("loading");return r(),h("div",ku,[e(Ge,{formData:u.formDataList,searchData:u.formData.list,"onUpdate:searchData":p[0]||(p[0]=L=>u.formData.list=L),searchDesign:u.searchDesign},null,8,["formData","searchData","searchDesign"]),_("div",Vu,[e(xe,{onClick:W}),Be((r(),h("div",wu,[u.formData.list.length===0?(r(),h("div",Su," \u4ECE\u5DE6\u4FA7\u62D6\u62FD\u6765\u6DFB\u52A0\u5B57\u6BB5 ")):B("",!0),e(ge,{type:4,formData:u.formData,dict:u.formDict},null,8,["formData","dict"])])),[[ne,u.loading]])]),e(Au,{formData:u.formData.form,"onUpdate:formData":p[1]||(p[1]=L=>u.formData.form=L),formConfig:u.formData.config,"onUpdate:formConfig":p[2]||(p[2]=L=>u.formData.config=L),onOpenDialog:d},null,8,["formData","formConfig"]),e(I,{modelValue:u.visibleDialog,"onUpdate:modelValue":p[3]||(p[3]=L=>u.visibleDialog=L),size:"60%",direction:u.drawerDirection,"custom-class":"json-dialog","append-to-body":!0,"before-close":k},{default:t(()=>[u.visibleDialog?(r(),h("div",xu)):B("",!0),_("div",Nu,[e(f,{type:"primary",size:"small",onClick:ee},{default:t(()=>[Uu]),_:1})])]),_:1},8,["modelValue","direction"]),u.searchDesign?B("",!0):(r(),g(Ne,{key:0,ref_key:"vueFileEl",ref:H},null,512)),e(T,{modelValue:u.previewVisible,"onUpdate:modelValue":p[5]||(p[5]=L=>u.previewVisible=L),title:"\u9884\u89C8",fullscreen:!0},{footer:t(()=>[_("div",$u,[e(f,{size:"small",type:"primary",onClick:x},{default:t(()=>[Iu]),_:1}),e(f,{size:"small",onClick:p[4]||(p[4]=L=>u.previewVisible=!1)},{default:t(()=>[Lu]),_:1})])]),default:t(()=>[u.previewVisible?(r(),g(ge,{key:0,"form-data":u.formDataPreview,dict:u.formDict,type:1,ref_key:"previewForm",ref:$},null,8,["form-data","dict"])):B("",!0)]),_:1},8,["modelValue"])])}}});export{Tu as default};
