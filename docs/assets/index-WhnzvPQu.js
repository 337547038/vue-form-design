import{A as mt,X as st,Y as kn,Q as Cn,d as Lt,a1 as rn,a2 as sn,l as Ee,h as Ut,B as Tn,r as U,b as R,o as _,w as g,c as F,F as J,a as pe,M as Yt,G as xt,p as un,j as f,s as Ot,f as B,e as se,m as j,t as It,I as y,v as Ht,a3 as At,a4 as Vn,k as xn,y as On,u as In,q as gt,W as An,a5 as zt,a6 as Pn,U as Nn,x as Fn,a7 as Wt,a0 as vt,N as Je,V as Gt,z as Kt}from"./index-D9mad5Az.js";import{_ as Mn,a as Bn,b as Qe,g as bt}from"./aceTooptip-nI_qXZsX.js";import{_ as Ln}from"./aceDrawer.vue_vue_type_script_setup_true_lang-ickqR92R.js";/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function qt(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable})),t.push.apply(t,n)}return t}function ye(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qt(Object(t),!0).forEach(function(n){Un(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):qt(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function ot(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ot=function(e){return typeof e}:ot=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(o)}function Un(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function we(){return we=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},we.apply(this,arguments)}function Rn(o,e){if(o==null)return{};var t={},n=Object.keys(o),l,a;for(a=0;a<n.length;a++)l=n[a],!(e.indexOf(l)>=0)&&(t[l]=o[l]);return t}function $n(o,e){if(o==null)return{};var t=Rn(o,e),n,l;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(l=0;l<a.length;l++)n=a[l],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(o,n)&&(t[n]=o[n])}return t}var jn="1.15.6";function _e(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var De=_e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ze=_e(/Edge/i),Jt=_e(/firefox/i),$e=_e(/safari/i)&&!_e(/chrome/i)&&!_e(/android/i),Rt=_e(/iP(ad|od|hone)/i),dn=_e(/chrome/i)&&_e(/android/i),cn={capture:!1,passive:!1};function I(o,e,t){o.addEventListener(e,t,!De&&cn)}function x(o,e,t){o.removeEventListener(e,t,!De&&cn)}function ut(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function fn(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function ge(o,e,t,n){if(o){t=t||document;do{if(e!=null&&(e[0]===">"?o.parentNode===t&&ut(o,e):ut(o,e))||n&&o===t)return o;if(o===t)break}while(o=fn(o))}return null}var Qt=/\s+/g;function de(o,e,t){if(o&&e)if(o.classList)o.classList[t?"add":"remove"](e);else{var n=(" "+o.className+" ").replace(Qt," ").replace(" "+e+" "," ");o.className=(n+(t?" "+e:"")).replace(Qt," ")}}function D(o,e,t){var n=o&&o.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(t=o.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function Me(o,e){var t="";if(typeof o=="string")t=o;else do{var n=D(o,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(o=o.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function pn(o,e,t){if(o){var n=o.getElementsByTagName(e),l=0,a=n.length;if(t)for(;l<a;l++)t(n[l],l);return n}return[]}function be(){var o=document.scrollingElement;return o||document.documentElement}function W(o,e,t,n,l){if(!(!o.getBoundingClientRect&&o!==window)){var a,i,r,u,d,p,h;if(o!==window&&o.parentNode&&o!==be()?(a=o.getBoundingClientRect(),i=a.top,r=a.left,u=a.bottom,d=a.right,p=a.height,h=a.width):(i=0,r=0,u=window.innerHeight,d=window.innerWidth,p=window.innerHeight,h=window.innerWidth),(e||t)&&o!==window&&(l=l||o.parentNode,!De))do if(l&&l.getBoundingClientRect&&(D(l,"transform")!=="none"||t&&D(l,"position")!=="static")){var S=l.getBoundingClientRect();i-=S.top+parseInt(D(l,"border-top-width")),r-=S.left+parseInt(D(l,"border-left-width")),u=i+a.height,d=r+a.width;break}while(l=l.parentNode);if(n&&o!==window){var N=Me(l||o),V=N&&N.a,A=N&&N.d;N&&(i/=A,r/=V,h/=V,p/=A,u=i+p,d=r+h)}return{top:i,left:r,bottom:u,right:d,width:h,height:p}}}function Zt(o,e,t){for(var n=Ce(o,!0),l=W(o)[e];n;){var a=W(n)[t],i=void 0;if(i=l>=a,!i)return n;if(n===be())break;n=Ce(n,!1)}return!1}function Be(o,e,t,n){for(var l=0,a=0,i=o.children;a<i.length;){if(i[a].style.display!=="none"&&i[a]!==E.ghost&&(n||i[a]!==E.dragged)&&ge(i[a],t.draggable,o,!1)){if(l===e)return i[a];l++}a++}return null}function $t(o,e){for(var t=o.lastElementChild;t&&(t===E.ghost||D(t,"display")==="none"||e&&!ut(t,e));)t=t.previousElementSibling;return t||null}function fe(o,e){var t=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==E.clone&&(!e||ut(o,e))&&t++;return t}function en(o){var e=0,t=0,n=be();if(o)do{var l=Me(o),a=l.a,i=l.d;e+=o.scrollLeft*a,t+=o.scrollTop*i}while(o!==n&&(o=o.parentNode));return[e,t]}function Xn(o,e){for(var t in o)if(o.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===o[t][n])return Number(t)}return-1}function Ce(o,e){if(!o||!o.getBoundingClientRect)return be();var t=o,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=D(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return be();if(n||e)return t;n=!0}}while(t=t.parentNode);return be()}function Yn(o,e){if(o&&e)for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o}function yt(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var je;function mn(o,e){return function(){if(!je){var t=arguments,n=this;t.length===1?o.call(n,t[0]):o.apply(n,t),je=setTimeout(function(){je=void 0},e)}}}function Hn(){clearTimeout(je),je=void 0}function hn(o,e,t){o.scrollLeft+=e,o.scrollTop+=t}function gn(o){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):t?t(o).clone(!0)[0]:o.cloneNode(!0)}function vn(o,e,t){var n={};return Array.from(o.children).forEach(function(l){var a,i,r,u;if(!(!ge(l,e.draggable,o,!1)||l.animated||l===t)){var d=W(l);n.left=Math.min((a=n.left)!==null&&a!==void 0?a:1/0,d.left),n.top=Math.min((i=n.top)!==null&&i!==void 0?i:1/0,d.top),n.right=Math.max((r=n.right)!==null&&r!==void 0?r:-1/0,d.right),n.bottom=Math.max((u=n.bottom)!==null&&u!==void 0?u:-1/0,d.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var ue="Sortable"+new Date().getTime();function zn(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(l){if(!(D(l,"display")==="none"||l===E.ghost)){o.push({target:l,rect:W(l)});var a=ye({},o[o.length-1].rect);if(l.thisAnimationDuration){var i=Me(l,!0);i&&(a.top-=i.f,a.left-=i.e)}l.fromRect=a}})}},addAnimationState:function(n){o.push(n)},removeAnimationState:function(n){o.splice(Xn(o,{target:n}),1)},animateAll:function(n){var l=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var a=!1,i=0;o.forEach(function(r){var u=0,d=r.target,p=d.fromRect,h=W(d),S=d.prevFromRect,N=d.prevToRect,V=r.rect,A=Me(d,!0);A&&(h.top-=A.f,h.left-=A.e),d.toRect=h,d.thisAnimationDuration&&yt(S,h)&&!yt(p,h)&&(V.top-h.top)/(V.left-h.left)===(p.top-h.top)/(p.left-h.left)&&(u=Gn(V,S,N,l.options)),yt(h,p)||(d.prevFromRect=p,d.prevToRect=h,u||(u=l.options.animation),l.animate(d,V,h,u)),u&&(a=!0,i=Math.max(i,u),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},u),d.thisAnimationDuration=u)}),clearTimeout(e),a?e=setTimeout(function(){typeof n=="function"&&n()},i):typeof n=="function"&&n(),o=[]},animate:function(n,l,a,i){if(i){D(n,"transition",""),D(n,"transform","");var r=Me(this.el),u=r&&r.a,d=r&&r.d,p=(l.left-a.left)/(u||1),h=(l.top-a.top)/(d||1);n.animatingX=!!p,n.animatingY=!!h,D(n,"transform","translate3d("+p+"px,"+h+"px,0)"),this.forRepaintDummy=Wn(n),D(n,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),D(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){D(n,"transition",""),D(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},i)}}}}function Wn(o){return o.offsetWidth}function Gn(o,e,t,n){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var Ae=[],_t={initializeByDefault:!0},We={mount:function(e){for(var t in _t)_t.hasOwnProperty(t)&&!(t in e)&&(e[t]=_t[t]);Ae.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ae.push(e)},pluginEvent:function(e,t,n){var l=this;this.eventCanceled=!1,n.cancel=function(){l.eventCanceled=!0};var a=e+"Global";Ae.forEach(function(i){t[i.pluginName]&&(t[i.pluginName][a]&&t[i.pluginName][a](ye({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](ye({sortable:t},n)))})},initializePlugins:function(e,t,n,l){Ae.forEach(function(r){var u=r.pluginName;if(!(!e.options[u]&&!r.initializeByDefault)){var d=new r(e,t,e.options);d.sortable=e,d.options=e.options,e[u]=d,we(n,d.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);typeof i<"u"&&(e.options[a]=i)}},getEventProperties:function(e,t){var n={};return Ae.forEach(function(l){typeof l.eventProperties=="function"&&we(n,l.eventProperties.call(t[l.pluginName],e))}),n},modifyOption:function(e,t,n){var l;return Ae.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[t]=="function"&&(l=a.optionListeners[t].call(e[a.pluginName],n))}),l}};function Kn(o){var e=o.sortable,t=o.rootEl,n=o.name,l=o.targetEl,a=o.cloneEl,i=o.toEl,r=o.fromEl,u=o.oldIndex,d=o.newIndex,p=o.oldDraggableIndex,h=o.newDraggableIndex,S=o.originalEvent,N=o.putSortable,V=o.extraEventProperties;if(e=e||t&&t[ue],!!e){var A,oe=e.options,le="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!De&&!ze?A=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(A=document.createEvent("Event"),A.initEvent(n,!0,!0)),A.to=i||t,A.from=r||t,A.item=l||t,A.clone=a,A.oldIndex=u,A.newIndex=d,A.oldDraggableIndex=p,A.newDraggableIndex=h,A.originalEvent=S,A.pullMode=N?N.lastPutMode:void 0;var G=ye(ye({},V),We.getEventProperties(n,e));for(var Q in G)A[Q]=G[Q];t&&t.dispatchEvent(A),oe[le]&&oe[le].call(e,A)}}var qn=["evt"],ie=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=n.evt,a=$n(n,qn);We.pluginEvent.bind(E)(e,t,ye({dragEl:m,parentEl:Y,ghostEl:C,rootEl:$,nextEl:xe,lastDownEl:lt,cloneEl:X,cloneHidden:ke,dragStarted:Le,putSortable:te,activeSortable:E.active,originalEvent:l,oldIndex:Fe,oldDraggableIndex:Xe,newIndex:ce,newDraggableIndex:Se,hideGhostForTarget:wn,unhideGhostForTarget:Dn,cloneNowHidden:function(){ke=!0},cloneNowShown:function(){ke=!1},dispatchSortableEvent:function(r){ae({sortable:t,name:r,originalEvent:l})}},a))};function ae(o){Kn(ye({putSortable:te,cloneEl:X,targetEl:m,rootEl:$,oldIndex:Fe,oldDraggableIndex:Xe,newIndex:ce,newDraggableIndex:Se},o))}var m,Y,C,$,xe,lt,X,ke,Fe,ce,Xe,Se,Ze,te,Ne=!1,dt=!1,ct=[],Te,he,wt,Dt,tn,nn,Le,Pe,Ye,He=!1,et=!1,at,ne,Et=[],Pt=!1,ft=[],ht=typeof document<"u",tt=Rt,on=ze||De?"cssFloat":"float",Jn=ht&&!dn&&!Rt&&"draggable"in document.createElement("div"),bn=(function(){if(ht){if(De)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}})(),yn=function(e,t){var n=D(e),l=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=Be(e,0,t),i=Be(e,1,t),r=a&&D(a),u=i&&D(i),d=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+W(a).width,p=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+W(i).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&r.float!=="none"){var h=r.float==="left"?"left":"right";return i&&(u.clear==="both"||u.clear===h)?"vertical":"horizontal"}return a&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||d>=l&&n[on]==="none"||i&&n[on]==="none"&&d+p>l)?"vertical":"horizontal"},Qn=function(e,t,n){var l=n?e.left:e.top,a=n?e.right:e.bottom,i=n?e.width:e.height,r=n?t.left:t.top,u=n?t.right:t.bottom,d=n?t.width:t.height;return l===r||a===u||l+i/2===r+d/2},Zn=function(e,t){var n;return ct.some(function(l){var a=l[ue].options.emptyInsertThreshold;if(!(!a||$t(l))){var i=W(l),r=e>=i.left-a&&e<=i.right+a,u=t>=i.top-a&&t<=i.bottom+a;if(r&&u)return n=l}}),n},_n=function(e){function t(a,i){return function(r,u,d,p){var h=r.options.group.name&&u.options.group.name&&r.options.group.name===u.options.group.name;if(a==null&&(i||h))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return t(a(r,u,d,p),i)(r,u,d,p);var S=(i?r:u).options.group.name;return a===!0||typeof a=="string"&&a===S||a.join&&a.indexOf(S)>-1}}var n={},l=e.group;(!l||ot(l)!="object")&&(l={name:l}),n.name=l.name,n.checkPull=t(l.pull,!0),n.checkPut=t(l.put),n.revertClone=l.revertClone,e.group=n},wn=function(){!bn&&C&&D(C,"display","none")},Dn=function(){!bn&&C&&D(C,"display","")};ht&&!dn&&document.addEventListener("click",function(o){if(dt)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),dt=!1,!1},!0);var Ve=function(e){if(m){e=e.touches?e.touches[0]:e;var t=Zn(e.clientX,e.clientY);if(t){var n={};for(var l in e)e.hasOwnProperty(l)&&(n[l]=e[l]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[ue]._onDragOver(n)}}},eo=function(e){m&&m.parentNode[ue]._isOutsideThisEl(e.target)};function E(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=we({},e),o[ue]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yn(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,r){i.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:E.supportPointer!==!1&&"PointerEvent"in window&&(!$e||Rt),emptyInsertThreshold:5};We.initializePlugins(this,o,t);for(var n in t)!(n in e)&&(e[n]=t[n]);_n(e);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=e.forceFallback?!1:Jn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?I(o,"pointerdown",this._onTapStart):(I(o,"mousedown",this._onTapStart),I(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(I(o,"dragover",this),I(o,"dragenter",this)),ct.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),we(this,zn())}E.prototype={constructor:E,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Pe=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,m):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,l=this.options,a=l.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(r||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,p=l.filter;if(so(n),!m&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||l.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&$e&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=ge(u,l.draggable,n,!1),!(u&&u.animated)&&lt!==u)){if(Fe=fe(u),Xe=fe(u,l.draggable),typeof p=="function"){if(p.call(this,e,u,this)){ae({sortable:t,rootEl:d,name:"filter",targetEl:u,toEl:n,fromEl:n}),ie("filter",t,{evt:e}),a&&e.preventDefault();return}}else if(p&&(p=p.split(",").some(function(h){if(h=ge(d,h.trim(),n,!1),h)return ae({sortable:t,rootEl:h,name:"filter",targetEl:u,fromEl:n,toEl:n}),ie("filter",t,{evt:e}),!0}),p)){a&&e.preventDefault();return}l.handle&&!ge(d,l.handle,n,!1)||this._prepareDragStart(e,r,u)}}},_prepareDragStart:function(e,t,n){var l=this,a=l.el,i=l.options,r=a.ownerDocument,u;if(n&&!m&&n.parentNode===a){var d=W(n);if($=a,m=n,Y=m.parentNode,xe=m.nextSibling,lt=n,Ze=i.group,E.dragged=m,Te={target:m,clientX:(t||e).clientX,clientY:(t||e).clientY},tn=Te.clientX-d.left,nn=Te.clientY-d.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,m.style["will-change"]="all",u=function(){if(ie("delayEnded",l,{evt:e}),E.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!Jt&&l.nativeDraggable&&(m.draggable=!0),l._triggerDragStart(e,t),ae({sortable:l,name:"choose",originalEvent:e}),de(m,i.chosenClass,!0)},i.ignore.split(",").forEach(function(p){pn(m,p.trim(),St)}),I(r,"dragover",Ve),I(r,"mousemove",Ve),I(r,"touchmove",Ve),i.supportPointer?(I(r,"pointerup",l._onDrop),!this.nativeDraggable&&I(r,"pointercancel",l._onDrop)):(I(r,"mouseup",l._onDrop),I(r,"touchend",l._onDrop),I(r,"touchcancel",l._onDrop)),Jt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,m.draggable=!0),ie("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(ze||De))){if(E.eventCanceled){this._onDrop();return}i.supportPointer?(I(r,"pointerup",l._disableDelayedDrag),I(r,"pointercancel",l._disableDelayedDrag)):(I(r,"mouseup",l._disableDelayedDrag),I(r,"touchend",l._disableDelayedDrag),I(r,"touchcancel",l._disableDelayedDrag)),I(r,"mousemove",l._delayedDragTouchMoveHandler),I(r,"touchmove",l._delayedDragTouchMoveHandler),i.supportPointer&&I(r,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(u,i.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m&&St(m),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._disableDelayedDrag),x(e,"touchend",this._disableDelayedDrag),x(e,"touchcancel",this._disableDelayedDrag),x(e,"pointerup",this._disableDelayedDrag),x(e,"pointercancel",this._disableDelayedDrag),x(e,"mousemove",this._delayedDragTouchMoveHandler),x(e,"touchmove",this._delayedDragTouchMoveHandler),x(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?I(document,"pointermove",this._onTouchMove):t?I(document,"touchmove",this._onTouchMove):I(document,"mousemove",this._onTouchMove):(I(m,"dragend",this),I($,"dragstart",this._onDragStart));try{document.selection?rt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ne=!1,$&&m){ie("dragStarted",this,{evt:t}),this.nativeDraggable&&I(document,"dragover",eo);var n=this.options;!e&&de(m,n.dragClass,!1),de(m,n.ghostClass,!0),E.active=this,e&&this._appendGhost(),ae({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(he){this._lastX=he.clientX,this._lastY=he.clientY,wn();for(var e=document.elementFromPoint(he.clientX,he.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(he.clientX,he.clientY),e!==t);)t=e;if(m.parentNode[ue]._isOutsideThisEl(e),t)do{if(t[ue]){var n=void 0;if(n=t[ue]._onDragOver({clientX:he.clientX,clientY:he.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=fn(t));Dn()}},_onTouchMove:function(e){if(Te){var t=this.options,n=t.fallbackTolerance,l=t.fallbackOffset,a=e.touches?e.touches[0]:e,i=C&&Me(C,!0),r=C&&i&&i.a,u=C&&i&&i.d,d=tt&&ne&&en(ne),p=(a.clientX-Te.clientX+l.x)/(r||1)+(d?d[0]-Et[0]:0)/(r||1),h=(a.clientY-Te.clientY+l.y)/(u||1)+(d?d[1]-Et[1]:0)/(u||1);if(!E.active&&!Ne){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(C){i?(i.e+=p-(wt||0),i.f+=h-(Dt||0)):i={a:1,b:0,c:0,d:1,e:p,f:h};var S="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");D(C,"webkitTransform",S),D(C,"mozTransform",S),D(C,"msTransform",S),D(C,"transform",S),wt=p,Dt=h,he=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!C){var e=this.options.fallbackOnBody?document.body:$,t=W(m,!0,tt,!0,e),n=this.options;if(tt){for(ne=e;D(ne,"position")==="static"&&D(ne,"transform")==="none"&&ne!==document;)ne=ne.parentNode;ne!==document.body&&ne!==document.documentElement?(ne===document&&(ne=be()),t.top+=ne.scrollTop,t.left+=ne.scrollLeft):ne=be(),Et=en(ne)}C=m.cloneNode(!0),de(C,n.ghostClass,!1),de(C,n.fallbackClass,!0),de(C,n.dragClass,!0),D(C,"transition",""),D(C,"transform",""),D(C,"box-sizing","border-box"),D(C,"margin",0),D(C,"top",t.top),D(C,"left",t.left),D(C,"width",t.width),D(C,"height",t.height),D(C,"opacity","0.8"),D(C,"position",tt?"absolute":"fixed"),D(C,"zIndex","100000"),D(C,"pointerEvents","none"),E.ghost=C,e.appendChild(C),D(C,"transform-origin",tn/parseInt(C.style.width)*100+"% "+nn/parseInt(C.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,l=e.dataTransfer,a=n.options;if(ie("dragStart",this,{evt:e}),E.eventCanceled){this._onDrop();return}ie("setupClone",this),E.eventCanceled||(X=gn(m),X.removeAttribute("id"),X.draggable=!1,X.style["will-change"]="",this._hideClone(),de(X,this.options.chosenClass,!1),E.clone=X),n.cloneId=rt(function(){ie("clone",n),!E.eventCanceled&&(n.options.removeCloneOnHide||$.insertBefore(X,m),n._hideClone(),ae({sortable:n,name:"clone"}))}),!t&&de(m,a.dragClass,!0),t?(dt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(x(document,"mouseup",n._onDrop),x(document,"touchend",n._onDrop),x(document,"touchcancel",n._onDrop),l&&(l.effectAllowed="move",a.setData&&a.setData.call(n,l,m)),I(document,"drop",n),D(m,"transform","translateZ(0)")),Ne=!0,n._dragStartId=rt(n._dragStarted.bind(n,t,e)),I(document,"selectstart",n),Le=!0,window.getSelection().removeAllRanges(),$e&&D(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,l,a,i,r=this.options,u=r.group,d=E.active,p=Ze===u,h=r.sort,S=te||d,N,V=this,A=!1;if(Pt)return;function oe(q,Oe){ie(q,V,ye({evt:e,isOwner:p,axis:N?"vertical":"horizontal",revert:i,dragRect:l,targetRect:a,canSort:h,fromSortable:S,target:n,completed:G,onMove:function(Ie,c){return nt($,t,m,l,Ie,W(Ie),e,c)},changed:Q},Oe))}function le(){oe("dragOverAnimationCapture"),V.captureAnimationState(),V!==S&&S.captureAnimationState()}function G(q){return oe("dragOverCompleted",{insertion:q}),q&&(p?d._hideClone():d._showClone(V),V!==S&&(de(m,te?te.options.ghostClass:d.options.ghostClass,!1),de(m,r.ghostClass,!0)),te!==V&&V!==E.active?te=V:V===E.active&&te&&(te=null),S===V&&(V._ignoreWhileAnimating=n),V.animateAll(function(){oe("dragOverAnimationComplete"),V._ignoreWhileAnimating=null}),V!==S&&(S.animateAll(),S._ignoreWhileAnimating=null)),(n===m&&!m.animated||n===t&&!n.animated)&&(Pe=null),!r.dragoverBubble&&!e.rootEl&&n!==document&&(m.parentNode[ue]._isOutsideThisEl(e.target),!q&&Ve(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),A=!0}function Q(){ce=fe(m),Se=fe(m,r.draggable),ae({sortable:V,name:"change",toEl:t,newIndex:ce,newDraggableIndex:Se,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=ge(n,r.draggable,t,!0),oe("dragOver"),E.eventCanceled)return A;if(m.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||V._ignoreWhileAnimating===n)return G(!1);if(dt=!1,d&&!r.disabled&&(p?h||(i=Y!==$):te===this||(this.lastPutMode=Ze.checkPull(this,d,m,e))&&u.checkPut(this,d,m,e))){if(N=this._getDirection(e,n)==="vertical",l=W(m),oe("dragOverValid"),E.eventCanceled)return A;if(i)return Y=$,le(),this._hideClone(),oe("revert"),E.eventCanceled||(xe?$.insertBefore(m,xe):$.appendChild(m)),G(!0);var Z=$t(t,r.draggable);if(!Z||lo(e,N,this)&&!Z.animated){if(Z===m)return G(!1);if(Z&&t===e.target&&(n=Z),n&&(a=W(n)),nt($,t,m,l,n,a,e,!!n)!==!1)return le(),Z&&Z.nextSibling?t.insertBefore(m,Z.nextSibling):t.appendChild(m),Y=t,Q(),G(!0)}else if(Z&&oo(e,N,this)){var me=Be(t,0,r,!0);if(me===m)return G(!1);if(n=me,a=W(n),nt($,t,m,l,n,a,e,!1)!==!1)return le(),t.insertBefore(m,me),Y=t,Q(),G(!0)}else if(n.parentNode===t){a=W(n);var ee=0,K,k=m.parentNode!==t,v=!Qn(m.animated&&m.toRect||l,n.animated&&n.toRect||a,N),w=N?"top":"left",b=Zt(n,"top","top")||Zt(m,"top","top"),s=b?b.scrollTop:void 0;Pe!==n&&(K=a[w],He=!1,et=!v&&r.invertSwap||k),ee=ao(e,n,a,N,v?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,et,Pe===n);var O;if(ee!==0){var H=fe(m);do H-=ee,O=Y.children[H];while(O&&(D(O,"display")==="none"||O===C))}if(ee===0||O===n)return G(!1);Pe=n,Ye=ee;var T=n.nextElementSibling,re=!1;re=ee===1;var L=nt($,t,m,l,n,a,e,re);if(L!==!1)return(L===1||L===-1)&&(re=L===1),Pt=!0,setTimeout(no,30),le(),re&&!T?t.appendChild(m):n.parentNode.insertBefore(m,re?T:n),b&&hn(b,0,s-b.scrollTop),Y=m.parentNode,K!==void 0&&!et&&(at=Math.abs(K-W(n)[w])),Q(),G(!0)}if(t.contains(m))return G(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){x(document,"mousemove",this._onTouchMove),x(document,"touchmove",this._onTouchMove),x(document,"pointermove",this._onTouchMove),x(document,"dragover",Ve),x(document,"mousemove",Ve),x(document,"touchmove",Ve)},_offUpEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._onDrop),x(e,"touchend",this._onDrop),x(e,"pointerup",this._onDrop),x(e,"pointercancel",this._onDrop),x(e,"touchcancel",this._onDrop),x(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(ce=fe(m),Se=fe(m,n.draggable),ie("drop",this,{evt:e}),Y=m&&m.parentNode,ce=fe(m),Se=fe(m,n.draggable),E.eventCanceled){this._nulling();return}Ne=!1,et=!1,He=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Nt(this.cloneId),Nt(this._dragStartId),this.nativeDraggable&&(x(document,"drop",this),x(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),$e&&D(document.body,"user-select",""),D(m,"transform",""),e&&(Le&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),C&&C.parentNode&&C.parentNode.removeChild(C),($===Y||te&&te.lastPutMode!=="clone")&&X&&X.parentNode&&X.parentNode.removeChild(X),m&&(this.nativeDraggable&&x(m,"dragend",this),St(m),m.style["will-change"]="",Le&&!Ne&&de(m,te?te.options.ghostClass:this.options.ghostClass,!1),de(m,this.options.chosenClass,!1),ae({sortable:this,name:"unchoose",toEl:Y,newIndex:null,newDraggableIndex:null,originalEvent:e}),$!==Y?(ce>=0&&(ae({rootEl:Y,name:"add",toEl:Y,fromEl:$,originalEvent:e}),ae({sortable:this,name:"remove",toEl:Y,originalEvent:e}),ae({rootEl:Y,name:"sort",toEl:Y,fromEl:$,originalEvent:e}),ae({sortable:this,name:"sort",toEl:Y,originalEvent:e})),te&&te.save()):ce!==Fe&&ce>=0&&(ae({sortable:this,name:"update",toEl:Y,originalEvent:e}),ae({sortable:this,name:"sort",toEl:Y,originalEvent:e})),E.active&&((ce==null||ce===-1)&&(ce=Fe,Se=Xe),ae({sortable:this,name:"end",toEl:Y,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ie("nulling",this),$=m=Y=C=xe=X=lt=ke=Te=he=Le=ce=Se=Fe=Xe=Pe=Ye=te=Ze=E.dragged=E.ghost=E.clone=E.active=null,ft.forEach(function(e){e.checked=!0}),ft.length=wt=Dt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":m&&(this._onDragOver(e),to(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,l=0,a=n.length,i=this.options;l<a;l++)t=n[l],ge(t,i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||io(t));return e},sort:function(e,t){var n={},l=this.el;this.toArray().forEach(function(a,i){var r=l.children[i];ge(r,this.options.draggable,l,!1)&&(n[a]=r)},this),t&&this.captureAnimationState(),e.forEach(function(a){n[a]&&(l.removeChild(n[a]),l.appendChild(n[a]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ge(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var l=We.modifyOption(this,e,t);typeof l<"u"?n[e]=l:n[e]=t,e==="group"&&_n(n)},destroy:function(){ie("destroy",this);var e=this.el;e[ue]=null,x(e,"mousedown",this._onTapStart),x(e,"touchstart",this._onTapStart),x(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(x(e,"dragover",this),x(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ct.splice(ct.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ke){if(ie("hideClone",this),E.eventCanceled)return;D(X,"display","none"),this.options.removeCloneOnHide&&X.parentNode&&X.parentNode.removeChild(X),ke=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ke){if(ie("showClone",this),E.eventCanceled)return;m.parentNode==$&&!this.options.group.revertClone?$.insertBefore(X,m):xe?$.insertBefore(X,xe):$.appendChild(X),this.options.group.revertClone&&this.animate(m,X),D(X,"display",""),ke=!1}}};function to(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function nt(o,e,t,n,l,a,i,r){var u,d=o[ue],p=d.options.onMove,h;return window.CustomEvent&&!De&&!ze?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=o,u.dragged=t,u.draggedRect=n,u.related=l||e,u.relatedRect=a||W(e),u.willInsertAfter=r,u.originalEvent=i,o.dispatchEvent(u),p&&(h=p.call(d,u,i)),h}function St(o){o.draggable=!1}function no(){Pt=!1}function oo(o,e,t){var n=W(Be(t.el,0,t.options,!0)),l=vn(t.el,t.options,C),a=10;return e?o.clientX<l.left-a||o.clientY<n.top&&o.clientX<n.right:o.clientY<l.top-a||o.clientY<n.bottom&&o.clientX<n.left}function lo(o,e,t){var n=W($t(t.el,t.options.draggable)),l=vn(t.el,t.options,C),a=10;return e?o.clientX>l.right+a||o.clientY>n.bottom&&o.clientX>n.left:o.clientY>l.bottom+a||o.clientX>n.right&&o.clientY>n.top}function ao(o,e,t,n,l,a,i,r){var u=n?o.clientY:o.clientX,d=n?t.height:t.width,p=n?t.top:t.left,h=n?t.bottom:t.right,S=!1;if(!i){if(r&&at<d*l){if(!He&&(Ye===1?u>p+d*a/2:u<h-d*a/2)&&(He=!0),He)S=!0;else if(Ye===1?u<p+at:u>h-at)return-Ye}else if(u>p+d*(1-l)/2&&u<h-d*(1-l)/2)return ro(e)}return S=S||i,S&&(u<p+d*a/2||u>h-d*a/2)?u>p+d/2?1:-1:0}function ro(o){return fe(m)<fe(o)?1:-1}function io(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function so(o){ft.length=0;for(var e=o.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&ft.push(n)}}function rt(o){return setTimeout(o,0)}function Nt(o){return clearTimeout(o)}ht&&I(document,"touchmove",function(o){(E.active||Ne)&&o.cancelable&&o.preventDefault()});E.utils={on:I,off:x,css:D,find:pn,is:function(e,t){return!!ge(e,t,e,!1)},extend:Yn,throttle:mn,closest:ge,toggleClass:de,clone:gn,index:fe,nextTick:rt,cancelNextTick:Nt,detectDirection:yn,getChild:Be,expando:ue};E.get=function(o){return o[ue]};E.mount=function(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(E.utils=ye(ye({},E.utils),n.utils)),We.mount(n)})};E.create=function(o,e){return new E(o,e)};E.version=jn;var z=[],Ue,Ft,Mt=!1,kt,Ct,pt,Re;function uo(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):this.options.supportPointer?I(document,"pointermove",this._handleFallbackAutoScroll):n.touches?I(document,"touchmove",this._handleFallbackAutoScroll):I(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):(x(document,"pointermove",this._handleFallbackAutoScroll),x(document,"touchmove",this._handleFallbackAutoScroll),x(document,"mousemove",this._handleFallbackAutoScroll)),ln(),it(),Hn()},nulling:function(){pt=Ft=Ue=Mt=Re=kt=Ct=null,z.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var l=this,a=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(a,i);if(pt=t,n||this.options.forceAutoScrollFallback||ze||De||$e){Tt(t,this.options,r,n);var u=Ce(r,!0);Mt&&(!Re||a!==kt||i!==Ct)&&(Re&&ln(),Re=setInterval(function(){var d=Ce(document.elementFromPoint(a,i),!0);d!==u&&(u=d,it()),Tt(t,l.options,d,n)},10),kt=a,Ct=i)}else{if(!this.options.bubbleScroll||Ce(r,!0)===be()){it();return}Tt(t,this.options,Ce(r,!1),!1)}}},we(o,{pluginName:"scroll",initializeByDefault:!0})}function it(){z.forEach(function(o){clearInterval(o.pid)}),z=[]}function ln(){clearInterval(Re)}var Tt=mn(function(o,e,t,n){if(e.scroll){var l=(o.touches?o.touches[0]:o).clientX,a=(o.touches?o.touches[0]:o).clientY,i=e.scrollSensitivity,r=e.scrollSpeed,u=be(),d=!1,p;Ft!==t&&(Ft=t,it(),Ue=e.scroll,p=e.scrollFn,Ue===!0&&(Ue=Ce(t,!0)));var h=0,S=Ue;do{var N=S,V=W(N),A=V.top,oe=V.bottom,le=V.left,G=V.right,Q=V.width,Z=V.height,me=void 0,ee=void 0,K=N.scrollWidth,k=N.scrollHeight,v=D(N),w=N.scrollLeft,b=N.scrollTop;N===u?(me=Q<K&&(v.overflowX==="auto"||v.overflowX==="scroll"||v.overflowX==="visible"),ee=Z<k&&(v.overflowY==="auto"||v.overflowY==="scroll"||v.overflowY==="visible")):(me=Q<K&&(v.overflowX==="auto"||v.overflowX==="scroll"),ee=Z<k&&(v.overflowY==="auto"||v.overflowY==="scroll"));var s=me&&(Math.abs(G-l)<=i&&w+Q<K)-(Math.abs(le-l)<=i&&!!w),O=ee&&(Math.abs(oe-a)<=i&&b+Z<k)-(Math.abs(A-a)<=i&&!!b);if(!z[h])for(var H=0;H<=h;H++)z[H]||(z[H]={});(z[h].vx!=s||z[h].vy!=O||z[h].el!==N)&&(z[h].el=N,z[h].vx=s,z[h].vy=O,clearInterval(z[h].pid),(s!=0||O!=0)&&(d=!0,z[h].pid=setInterval((function(){n&&this.layer===0&&E.active._onTouchMove(pt);var T=z[this.layer].vy?z[this.layer].vy*r:0,re=z[this.layer].vx?z[this.layer].vx*r:0;typeof p=="function"&&p.call(E.dragged.parentNode[ue],re,T,o,pt,z[this.layer].el)!=="continue"||hn(z[this.layer].el,re,T)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&S!==u&&(S=Ce(S,!1)));Mt=d}},30),En=function(e){var t=e.originalEvent,n=e.putSortable,l=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(t){var d=n||a;r();var p=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(p.clientX,p.clientY);u(),d&&!d.el.contains(h)&&(i("spill"),this.onSpill({dragEl:l,putSortable:n}))}};function jt(){}jt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var l=Be(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(t,l):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:En};we(jt,{pluginName:"revertOnSpill"});function Xt(){}Xt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,l=n||this.sortable;l.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),l.animateAll()},drop:En};we(Xt,{pluginName:"removeOnSpill"});E.mount(new uo);E.mount(Xt,jt);const co=o=>new Promise(e=>{mt("designById",{id:o}).then(t=>{const n=t.data,l=st(n.listData),a=st(n.data),i=kn(n.dict);e({tableData:l,searchData:a,dict:i,source:n.source,name:n.name})})}),fo=o=>new Promise(e=>{mt("designList",{extend:{pageSize:20},query:{name:o,type:1}}).then(n=>{e(n.data.list)})}),Vt=o=>new Promise(e=>{mt("designById",{id:o}).then(t=>{const n=st(t.data.data),l=[];n.list.forEach(a=>{if(["input","select"].includes(a.type)){const i=Cn(a);delete i.customRules,l.push(i)}}),e({data:Bt(n),defaultSearch:l})})}),po=["txt","title","table","component","upload","button","tinymce","inputSlot","flex"],Bt=o=>{const e=[];return o?.list.forEach(t=>{if(t.type==="grid"||t.type==="tabs")t.columns.forEach(n=>{Bt(n)});else if(["card","div"].includes(t.type))Bt(t);else if(!po.includes(t.type)&&t.name){const n=t.config.help;e.push({prop:t.name,label:t.formItem?.label,help:n})}}),e},an=Lt({__name:"operateBtn",props:rn({position:{default:"top"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const e=o,t=sn(o,"modelValue"),n=Ee([]),l=Ee([]),a=Ut(()=>[{label:"新增",key:"add",show:e.position==="top"},{label:"编辑",key:"edit",show:!0},{label:"查看",key:"detail",show:e.position==="left"},{label:"删除",key:"del",show:!0},{label:"导出",key:"export",show:e.position==="top"}].filter(u=>u.show)),i=a.value.map(u=>u.key);Tn(()=>t.value,u=>{u?.length&&(n.value=[],l.value=[],u.forEach(d=>{d.key&&i.includes(d.key)&&(n.value.push(d.key),l.value.push(d.key))}))},{deep:!0,immediate:!0});const r=u=>{const d=u.filter(p=>!l.value.includes(p));if(d.length)t.value.push({key:d[0]});else{const p=l.value.filter(h=>!u.includes(h));t.value=t.value.filter(h=>h.key!==p[0])}l.value=u};return(u,d)=>{const p=U("el-option"),h=U("el-select");return _(),R(h,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=S=>n.value=S),multiple:"",onChange:r},{default:g(()=>[(_(!0),F(J,null,pe(a.value,S=>(_(),R(p,{key:S.key,label:S.label,value:S.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}}),mo={class:"sidebar-tools"},ho={class:"h3"},go=["onClick"],vo=["onClick"],bo=Lt({__name:"controlAttr",props:{tabsName:{},tabsNameModifiers:{}},emits:rn(["changeEvent"],["update:tabsName"]),setup(o,{expose:e,emit:t}){const n=t,l=Yt("tableData",{}),a=Yt("currentObj"),i=sn(o,"tabsName"),r=xt({formSourceList:[],tagCustomList:[],replaceValueList:[],replaceValueType:0}),u=["switch","image","tag","link","datetime","date","buttons","string","text"],d=[{label:"年-月-日",value:"{yyyy}-{mm}-{dd}"},{label:"年-月-日 时:分:秒",value:"{yyyy}-{mm}-{dd} {h}:{i}:{s}"},{label:"x年x月x日",value:"{yyyy}年{mm}月{dd}日"},{label:"x年x月x日 时:分:秒",value:"{yyyy}年{mm}月{dd}日 {h}:{i}:{s}"},{label:"时:分:秒",value:"{h}:{i}:{s}"},{label:"年-月-日 时:分:秒 星期",value:"{yyyy}:{mm}:{dd} {h}:{i}:{s} 星期{w}"}],p=["primary","success","warning","danger","info"],h=b=>{a.value.config={},delete a.value.replaceValue,delete a.value.timeFormat,delete a.value.buttons,delete a.value.custom,["tag","text"].includes(b)?r.tagCustomList=[{label:"primary",value:""}]:b==="buttons"&&(a.value.buttons=[])},S=b=>{if(!b)return{};const s={};for(const O of b)s[O.value]=O.label;return s},N=()=>{r.tagCustomList.push({label:"primary",value:""})},V=b=>{r.tagCustomList.splice(b,1)},A=()=>{a.value?.custom||(a.value.custom={}),a.value.custom=S(r.tagCustomList)},oe=()=>{r.replaceValueList.push({label:"",value:""})},le=b=>{r.replaceValueList.splice(b,1)},G=b=>{b===1?(r.replaceValueList=[{label:"",value:""}],a.value.replaceValue={}):a.value.replaceValue=""},Q=()=>{a.value.replaceValue=S(r.replaceValueList)},Z=b=>{k(b)},me=Ut(()=>[{label:"所属表单",placeholder:"请选择所属表单",value:parseInt(l.value.config.formId)||"",key:"formId",type:"select",options:r.formSourceList,clearable:!0,filterable:!0,remote:!0,remoteMethod:Z},{label:"数据列表名称",placeholder:"保存的数据列表名称",value:l.value.config.name,key:"name"},{label:"数据添加编辑打开方式",placeholder:"默认新页面打开",value:l.value.config.openType,type:"select",options:[{label:"弹窗",value:"dialog"},{label:"新页面",value:"page"}],key:"openType",clearable:!0},{label:"窗口宽度",placeholder:"弹窗宽度",value:l.value.config.dialogWidth,type:"input",key:"dialogWidth",hide:l.value.config.openType!=="dialog"},{label:"横向滚动固定在底部",value:l.value.config.fixedBottomScroll,key:"fixedBottomScroll",type:"select",placeholder:"默认开启",options:[{label:"启用",value:!0},{label:"禁用",value:!1}],clearable:!0},{label:"列显示隐藏设置",value:l.value.config.columnsSetting,key:"columnsSetting",type:"select",placeholder:"默认开启",options:[{label:"启用",value:!0},{label:"禁用",value:!1}],clearable:!0},{label:"操作按钮设置",type:"operate"},{label:"可折叠查询表单",value:l.value.config.expand,key:"expand",type:"switch"},{label:"查询跳转页面",value:l.value.config.searchJump,key:"searchJump",type:"switch"},{label:"操作列按钮下拉",value:l.value.config.operateDropdown,key:"operateDropdown",type:"input",placeholder:"大于设定个数的以下拉形式显示"},{label:"分页设置",value:l.value.config.pageSize,key:"pageSize",type:"input",placeholder:"每页分多少条"},{label:"查询排序",value:l.value.config.orderSort,key:"orderSort",type:"input",placeholder:"查询排序，id desc"},{label:"开启侧栏树",value:l.value.treeData?.show,key:"tree",type:"switch"}]),ee=(b,s)=>{if(b.key==="tree"){l.value.treeData||(l.value.treeData={}),l.value.treeData.show=s;return}b.key==="formId"&&(!b.value&&l.value.config?.openType==="dialog"&&delete l.value.config.openType,n("changeEvent",{type:"formId",value:b.value})),l.value.config[b.key]=b.value},K=b=>{n("changeEvent",{type:"openDrawer",value:b})},k=b=>{fo(b).then(s=>{r.formSourceList=s})},v=b=>{if(!b)return[];const s=[];for(const O in b)s.push({value:O,label:b[O]});return s};return e({rowChange:()=>{["tag","text"].includes(a.value.render)&&(console.log("currentObj.render"),Object.keys(a.value.custom).length&&(r.tagCustomList=v(a.value.custom)),a.value.replaceValue&&typeof a.value.replaceValue=="object"&&(r.replaceValueList=v(a.value.replaceValue),r.replaceValueType=1))}}),un(()=>{k()}),(b,s)=>{const O=U("el-option"),H=U("el-select"),T=U("el-form-item"),re=U("el-switch"),L=U("el-input"),q=U("el-button"),Oe=U("el-tab-pane"),Ge=U("el-tabs"),Ie=U("el-form");return _(),F("div",mo,[f(Ie,{size:"small",class:"form"},{default:g(()=>[f(Ge,{modelValue:i.value,"onUpdate:modelValue":s[32]||(s[32]=c=>i.value=c)},{default:g(()=>[f(Oe,{label:"字段属性",name:"first"},{default:g(()=>[Ot(B("div",null,[B("div",ho,[B("h3",null,It(y(a).label),1),s[33]||(s[33]=j(" 列设置 ",-1))]),f(T,{label:"渲染模式"},{default:g(()=>[f(H,{modelValue:y(a).render,"onUpdate:modelValue":s[0]||(s[0]=c=>y(a).render=c),onChange:h},{default:g(()=>[(_(),F(J,null,pe(u,c=>f(O,{key:c,value:c,label:c},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1}),y(a).render==="switch"?(_(),F(J,{key:0},[f(T,{label:"inline-prompt"},{default:g(()=>[f(re,{modelValue:y(a).config.inlinePrompt,"onUpdate:modelValue":s[1]||(s[1]=c=>y(a).config.inlinePrompt=c)},null,8,["modelValue"])]),_:1}),f(T,{label:"打开时描述"},{default:g(()=>[f(L,{modelValue:y(a).config.activeText,"onUpdate:modelValue":s[2]||(s[2]=c=>y(a).config.activeText=c),placeholder:"打开时的文字描述"},null,8,["modelValue"])]),_:1}),f(T,{label:"关闭时描述"},{default:g(()=>[f(L,{modelValue:y(a).config.inactiveText,"onUpdate:modelValue":s[3]||(s[3]=c=>y(a).config.inactiveText=c),placeholder:"关闭时的文字描述"},null,8,["modelValue"])]),_:1}),f(T,{label:"状态为on时的值"},{default:g(()=>[f(L,{modelValue:y(a).config.activeValue,"onUpdate:modelValue":s[4]||(s[4]=c=>y(a).config.activeValue=c),placeholder:"状态为on时的值"},null,8,["modelValue"])]),_:1}),f(T,{label:"状态为off时的值"},{default:g(()=>[f(L,{modelValue:y(a).config.inactiveValue,"onUpdate:modelValue":s[5]||(s[5]=c=>y(a).config.inactiveValue=c),placeholder:"状态为off时的值"},null,8,["modelValue"])]),_:1})],64)):se("",!0),y(a).render==="image"?(_(),F(J,{key:1},[f(T,{label:"图片宽度"},{default:g(()=>[f(L,{modelValue:y(a).config.width,"onUpdate:modelValue":s[6]||(s[6]=c=>y(a).config.width=c),placeholder:"请输入图片宽度，单位px"},null,8,["modelValue"])]),_:1}),f(T,{label:"图片高度"},{default:g(()=>[f(L,{modelValue:y(a).config.height,"onUpdate:modelValue":s[7]||(s[7]=c=>y(a).config.height=c),placeholder:"请输入图片高度，单位px"},null,8,["modelValue"])]),_:1})],64)):se("",!0),["tag","text"].includes(y(a).render)?(_(),F(J,{key:2},[f(T,{label:"值设置类型",style:{"margin-bottom":"0"}},{default:g(()=>[(_(!0),F(J,null,pe(r.tagCustomList,(c,ve)=>(_(),F("div",{key:ve,style:{"margin-bottom":"10px",display:"flex","align-items":"center"}},[f(L,{modelValue:c.value,"onUpdate:modelValue":P=>c.value=P,placeholder:"对应的值",onChange:A},{append:g(()=>[f(H,{modelValue:c.label,"onUpdate:modelValue":P=>c.label=P,style:{width:"90px"},onChange:A},{default:g(()=>[(_(),F(J,null,pe(p,P=>f(O,{key:P,label:P,value:P},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),B("i",{style:{"margin-left":"10px"},class:"icon-del",onClick:P=>V(ve)},null,8,go)]))),128))]),_:1}),f(T,{class:"flex-end"},{default:g(()=>[Ot(f(q,{type:"primary",onClick:N},{default:g(()=>[...s[34]||(s[34]=[j(" 新增值设置类型 ",-1)])]),_:1},512),[[Ht,r.tagCustomList.length<p.length]])]),_:1}),f(T,{label:"值替换数据"},{default:g(()=>[f(H,{modelValue:r.replaceValueType,"onUpdate:modelValue":s[8]||(s[8]=c=>r.replaceValueType=c),onChange:G},{default:g(()=>[f(O,{label:"使用字典",value:0}),f(O,{label:"自定义",value:1})]),_:1},8,["modelValue"])]),_:1}),r.replaceValueType===0?(_(),R(T,{key:0,label:"字典类型key"},{default:g(()=>[f(L,{modelValue:y(a).replaceValue,"onUpdate:modelValue":s[9]||(s[9]=c=>y(a).replaceValue=c),placeholder:"请输入字典类型key"},null,8,["modelValue"])]),_:1})):(_(),F(J,{key:1},[f(T,{label:"值替换数据"},{default:g(()=>[(_(!0),F(J,null,pe(r.replaceValueList,(c,ve)=>(_(),F("div",{key:c.value,style:{"margin-bottom":"10px",display:"flex","align-items":"center"}},[f(L,{modelValue:c.value,"onUpdate:modelValue":P=>c.value=P,placeholder:"对应的值",onChange:Q},null,8,["modelValue","onUpdate:modelValue"]),f(L,{modelValue:c.label,"onUpdate:modelValue":P=>c.label=P,placeholder:"替换的值",onChange:Q},null,8,["modelValue","onUpdate:modelValue"]),B("i",{style:{"margin-left":"10px"},class:"icon-del",onClick:P=>le(ve)},null,8,vo)]))),128))]),_:1}),f(T,{class:"flex-end"},{default:g(()=>[f(q,{type:"primary",onClick:oe},{default:g(()=>[...s[35]||(s[35]=[j(" 新增值替换数据 ",-1)])]),_:1})]),_:1})],64))],64)):se("",!0),y(a).render==="link"?(_(),F(J,{key:3},[f(T,{label:"显示类型"},{default:g(()=>[f(H,{modelValue:y(a).config.type,"onUpdate:modelValue":s[10]||(s[10]=c=>y(a).config.type=c)},{default:g(()=>[(_(),F(J,null,pe(p,c=>f(O,{key:c,label:c,value:c},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),f(T,{label:"是否带下划线"},{default:g(()=>[f(re,{modelValue:y(a).config.underline,"onUpdate:modelValue":s[11]||(s[11]=c=>y(a).config.underline=c)},null,8,["modelValue"])]),_:1}),f(T,{label:"打开方式"},{default:g(()=>[f(H,{modelValue:y(a).config.target,"onUpdate:modelValue":s[12]||(s[12]=c=>y(a).config.target=c)},{default:g(()=>[f(O,{value:"_blank"},{default:g(()=>[...s[36]||(s[36]=[j(" _blank ",-1)])]),_:1}),f(O,{value:"_parent"},{default:g(()=>[...s[37]||(s[37]=[j(" _parent ",-1)])]),_:1}),f(O,{value:"_self"},{default:g(()=>[...s[38]||(s[38]=[j(" _self ",-1)])]),_:1}),f(O,{value:"_top"},{default:g(()=>[...s[39]||(s[39]=[j(" _top ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):se("",!0),["datetime","date"].includes(y(a).render)?(_(),R(T,{key:4,label:"显示格式"},{default:g(()=>[f(H,{modelValue:y(a).timeFormat,"onUpdate:modelValue":s[13]||(s[13]=c=>y(a).timeFormat=c)},{default:g(()=>[(_(),F(J,null,pe(d,(c,ve)=>f(O,{key:ve,label:c.label,value:c.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})):se("",!0),y(a).render==="buttons"?(_(),F(J,{key:5},[f(T,{label:"按钮设置"},{default:g(()=>[f(an,{modelValue:y(a).buttons,"onUpdate:modelValue":s[14]||(s[14]=c=>y(a).buttons=c),position:"right"},null,8,["modelValue"])]),_:1}),f(T,{class:"flex-end"},{default:g(()=>[f(q,{type:"primary",onClick:s[15]||(s[15]=c=>K("buttons"))},{default:g(()=>[...s[40]||(s[40]=[j(" 添加设置更多按钮 ",-1)])]),_:1})]),_:1})],64)):se("",!0),f(T,null,{default:g(()=>[y(a).render?(_(),R(q,{key:0,type:"primary",onClick:s[16]||(s[16]=c=>K("renderFormatter"))},{default:g(()=>[...s[41]||(s[41]=[j(" renderFormatter ",-1)])]),_:1})):se("",!0),f(q,{type:"primary",onClick:s[17]||(s[17]=c=>K("columns"))},{default:g(()=>[...s[42]||(s[42]=[j(" 设置表格列 ",-1)])]),_:1})]),_:1})],512),[[Ht,Object.keys(y(a)).length]])]),_:1}),f(Oe,{label:"数据列表配置",name:"second"},{default:g(()=>[(_(!0),F(J,null,pe(me.value.filter(c=>!c.hide),(c,ve)=>(_(),R(T,{key:ve,label:c.label},{default:g(()=>[c.type==="select"?(_(),R(H,At({key:0,modelValue:c.value,"onUpdate:modelValue":P=>c.value=P},{ref_for:!0},c,{options:"",onChange:P=>ee(c)}),{default:g(()=>[(_(!0),F(J,null,pe(c.options,P=>(_(),R(O,{key:P.label||P.name,label:P.label||P.name,value:y(Vn)(P.value??P.id)},null,8,["label","value"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue","onChange"])):c.type==="switch"?(_(),R(re,{key:1,modelValue:c.value,"onUpdate:modelValue":P=>c.value=P,onInput:P=>ee(c,P)},null,8,["modelValue","onUpdate:modelValue","onInput"])):c.type==="operate"?(_(),R(an,{key:2,modelValue:y(l).controlBtn,"onUpdate:modelValue":s[18]||(s[18]=P=>y(l).controlBtn=P)},null,8,["modelValue"])):(_(),R(L,{key:3,modelValue:c.value,"onUpdate:modelValue":P=>c.value=P,placeholder:c.placeholder,onInput:P=>ee(c)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"]))]),_:2},1032,["label"]))),128)),y(l).treeData?.show?(_(),F(J,{key:0},[f(T,{label:"树标识名称"},{default:g(()=>[f(L,{modelValue:y(l).treeData.name,"onUpdate:modelValue":s[19]||(s[19]=c=>y(l).treeData.name=c),placeholder:"树标识名称"},null,8,["modelValue"])]),_:1}),f(T,{label:"树列表接口URL"},{default:g(()=>[f(L,{modelValue:y(l).treeData.requestUrl,"onUpdate:modelValue":s[20]||(s[20]=c=>y(l).treeData.requestUrl=c),placeholder:"树列表数据接口URL"},null,8,["modelValue"])]),_:1}),f(T,{class:"event-btn"},{default:g(()=>[f(q,{type:"primary",onClick:s[21]||(s[21]=c=>K("treeProp"))},{default:g(()=>[...s[43]||(s[43]=[j(" 编辑侧栏树属性 ",-1)])]),_:1}),f(q,{type:"primary",onClick:s[22]||(s[22]=c=>K("treeBefore"))},{default:g(()=>[...s[44]||(s[44]=[j(" 树before事件 ",-1)])]),_:1}),f(q,{type:"primary",onClick:s[23]||(s[23]=c=>K("treeAfter"))},{default:g(()=>[...s[45]||(s[45]=[j(" 树after事件 ",-1)])]),_:1})]),_:1})],64)):se("",!0),f(T,{class:"event-btn"},{default:g(()=>[f(q,{type:"primary",onClick:s[24]||(s[24]=c=>K("tableConfig"))},{default:g(()=>[...s[46]||(s[46]=[j(" 编辑表格属性 ",-1)])]),_:1})]),_:1}),s[49]||(s[49]=B("div",{class:"h3"},[B("h3",null,"接口数据事件")],-1)),f(T,{label:"主键"},{default:g(()=>[f(L,{modelValue:y(l).pk,"onUpdate:modelValue":s[25]||(s[25]=c=>y(l).pk=c),placeholder:"列表主键"},null,8,["modelValue"])]),_:1}),f(T,{label:"列表数据请求URL"},{default:g(()=>[f(L,{modelValue:y(l).apiKey.list,"onUpdate:modelValue":s[26]||(s[26]=c=>y(l).apiKey.list=c),placeholder:"一般不需要填写，使用默认值"},null,8,["modelValue"])]),_:1}),f(T,{label:"删除列表数据URL"},{default:g(()=>[f(L,{modelValue:y(l).apiKey.del,"onUpdate:modelValue":s[27]||(s[27]=c=>y(l).apiKey.del=c),placeholder:"一般不需要填写，使用默认值"},null,8,["modelValue"])]),_:1}),f(T,{label:"编辑保存状态URL"},{default:g(()=>[f(L,{modelValue:y(l).apiKey.edit,"onUpdate:modelValue":s[28]||(s[28]=c=>y(l).apiKey.edit=c),placeholder:"一般不需要填写，使用默认值"},null,8,["modelValue"])]),_:1}),f(T,{label:"导出列表URL"},{default:g(()=>[f(L,{modelValue:y(l).apiKey.export,"onUpdate:modelValue":s[29]||(s[29]=c=>y(l).apiKey.export=c),placeholder:"一般不需要填写，使用默认值"},null,8,["modelValue"])]),_:1}),f(T,{class:"event-btn"},{default:g(()=>[f(q,{type:"primary",onClick:s[30]||(s[30]=c=>K("before"))},{default:g(()=>[...s[47]||(s[47]=[j(" before事件 ",-1)])]),_:1}),f(q,{type:"primary",onClick:s[31]||(s[31]=c=>K("after"))},{default:g(()=>[...s[48]||(s[48]=[j(" after事件 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),yo={class:"main-body"},_o={class:"header"},wo={class:"field"},Do={class:"table-field-list"},Eo={class:"list"},So={class:"main-form main-table"},ko={key:1,class:"tip"},Co={class:"control-btn"},To={key:0,class:"tip"},Vo={class:"control-other"},xo={key:0,class:"tip"},Oo=["onClick"],Io=["innerHTML"],Ao=["onClick"],Po={key:4},No=Lt({__name:"index",setup(o){xn().changeBreadcrumb([{label:"设计管理"},{label:"列表页设计"}]);const t=Ee(),n=Ee(),l=On().query,a=In(),i=xt({searchData:{},loading:!1,attrObj:{},config:{},previewVisible:!1,tabsName:"second",formFieldList:[],dict:{},refreshTable:!0}),r=Ee({tableProps:{},columns:[],config:{openType:"page",fixedBottomScroll:!0,columnsSetting:!0,expand:!0},apiKey:{},controlBtn:[]}),u=Ee();Gt("tableData",r);const d=Ee({});Gt("currentObj",d);const p=xt({visible:!1,title:"",direction:"ltr",content:"",codeType:"",type:""}),h=({type:k,value:v})=>{k==="formId"?Vt(v).then(({data:w})=>{i.formFieldList=w}):k==="openDrawer"&&le(v)},S=()=>{p.visible=!1,p.content="",p.codeType="",p.title="",p.type=""},N=Ut(()=>{const k={label:"表单字段",options:i.formFieldList},v=[{label:"其他字段",options:[{label:"多选",type:"selection"},{label:"序号",type:"index",width:"70px"},{label:"操作"}]}];return i.formFieldList?.length&&v.unshift(k),v}),V=k=>{r.value.columns.forEach((v,w)=>{v.prop===k.prop&&r.value.columns.splice(w,1)})},A=(k,v)=>{if(v){let w=!1;r.value.columns.forEach(b=>{(b.prop&&b.prop===k.prop||b.type&&b.type===k.type)&&(w=!0)}),w||r.value.columns.push(k)}else r.value.columns.forEach((w,b)=>{w.prop===k.prop&&r.value.columns.splice(b,1)})},oe=k=>{switch(k){case"del":r.value=JSON.parse(u.value),i.selectField=[],d.value={};break;case"eye":i.previewVisible=!0;break;case"json":le("json");break;case"vue":t.value.openTable(r.value);break;case"save":K();break}},le=k=>{let w,b="",s=!1,O="ltr";switch(k){case"json":w=r.value,O="rtl";break;case"tableConfig":b="el-table的相关属性",w=r.value.tableProps||{};break;case"before":case"after":w=(r.value.events||{})[k],w||(w=Qe(k+"Type","list"),s=!0);break;case"treeProp":w=r.value.treeData||{},Object.keys(w).length===1&&(w={show:!0,treeProps:{},name:"唯一标识",method:"post"}),b="更多参数详见ak-list组件";break;case"treeBefore":w=r.value.treeData?.before,b=bt.before,w||(w=Qe("beforeType","tree"),s=!0);break;case"treeAfter":w=r.value.treeData?.after,b=bt.after,w||(w=Qe("afterType","tree"),s=!0);break;case"buttons":w=d.value.buttons||[],b="可设置多个操作按钮，可使用内置key=edit/del快速设置按钮";break;case"controlBtn":w=r.value.controlBtn,b="操作按钮列表，可使用内置key=add/edit/del/export快速设置按钮";break;case"columns":w=d.value||[],b="支持el-table-column所有属性";break;case"renderFormatter":w=d.value.renderFormatter,w||(w=Qe("renderFormatter"),s=!0),b="渲染前对字段值的预处理方法，需返回新值";break}s||(w=vt(w,!0)),p.visible=!0,p.direction=O,p.title=b||bt[k],p.content=w,p.codeType="",p.type=k},G=k=>{const v=st(k);switch(p.type){case"json":r.value=v;break;case"treeProp":r.value.treeData=v;break;case"buttons":d.value.buttons=v;break;case"controlBtn":r.value.controlBtn=v;break;case"before":case"after":r.value.events||(r.value.events={}),r.value.events[p.type]=v;break;case"tableConfig":r.value.tableProps=v;break;case"treeBefore":r.value.treeData.before=v;break;case"treeAfter":r.value.treeData.after=v;break;case"columns":d.value=v;break;case"renderFormatter":d.value.renderFormatter=v;break}S()},Q=Ee(),Z=k=>{d.value=k,i.tabsName="first",Q.value.rowChange()},me=()=>{if(!l.id){Je.error("请先保存设计的列表");return}a.push({path:"/design/form",query:{id:l.id,type:"search",redirect:`/design/list?id=${l.id}`}})},ee=()=>{const k=n.value.querySelector(".el-table__header-wrapper tr");E.create(k,{animation:180,delay:0,onEnd:v=>{const w=r.value.columns[v.oldIndex];r.value.columns.splice(v.oldIndex,1),r.value.columns.splice(v.newIndex,0,w),i.refreshTable=!1,gt(()=>{i.refreshTable=!0,gt(()=>{ee()})})}})},K=()=>{const{formId:k,name:v}=r.value.config,{list:w,del:b}=r.value.apiKey;if(!k&&(!w||!b))return Je.error("请选择所属表单或配置接口url");const s={listData:vt(r.value),data:vt(i.searchData)||"{}",source:k,name:v||"未命名列表",type:2};let O="designSave";l.id?(Object.assign(s,{id:l.id}),O="designEdit"):s.status=1,i.loading=!0,mt(O,s).then(()=>{Je({message:"保存成功！",type:"success"}),a.push({path:"/design/list/list"}),i.loading=!1}).catch(H=>{Je.error(H.message||"保存异常"),i.loading=!1})};return un(()=>{u.value=JSON.stringify(r.value),gt(()=>{ee()}),l.id&&co(l.id).then(({tableData:k,searchData:v,source:w,name:b})=>{r.value=k,i.searchData=v,k.config.formId&&Vt(w).then(({data:s})=>{i.formFieldList=s}),r.value.config.name=b}),l.form&&(r.value.config.formId=l.form,Vt(l.form).then(({data:k,defaultSearch:v})=>{r.value.columns=k,i.formFieldList=JSON.parse(JSON.stringify(k)),r.value.controlBtn=[{key:"add"},{key:"del"}],r.value.columns.push({label:"操作",render:"buttons",config:{},buttons:[{key:"edit"},{key:"del",render:"confirm",popConfirm:{title:"确认删除该记录吗？",confirmButtonText:"确认",cancelButtonText:"取消",confirmButtonType:"danger"}}]}),i.searchData={list:v,form:{size:"default"},config:{submitCancel:!0}}}))}),(k,v)=>{const w=U("el-button"),b=U("el-checkbox"),s=U("el-popover"),O=U("ak-form"),H=U("el-divider"),T=U("el-button-group"),re=U("el-tooltip"),L=U("el-switch"),q=U("el-image"),Oe=U("el-tag"),Ge=U("el-table-column"),Ie=U("el-table"),c=U("ak-list"),ve=U("el-dialog"),P=An("loading");return _(),F("div",null,[Ot((_(),F("div",{ref_key:"container",ref:n,class:"design-container design-table"},[B("div",yo,[B("div",_o,[B("div",wo,[f(s,{placement:"bottom",width:420,trigger:"hover"},{reference:g(()=>[f(w,{type:"primary",plain:"",size:"small"},{default:g(()=>[...v[4]||(v[4]=[j(" 添加表格列字段 ",-1)])]),_:1})]),default:g(()=>[B("div",Do,[(_(!0),F(J,null,pe(N.value,(M,Ke)=>(_(),F("div",{key:Ke,class:"item"},[B("h3",null,It(M.label),1),B("div",Eo,[(_(!0),F(J,null,pe(M.options,qe=>(_(),R(b,{key:qe.prop,label:qe.label,onChange:Sn=>A(qe,Sn)},null,8,["label","onChange"]))),128))])]))),128))])]),_:1})]),f(Mn,{onClick:oe})]),B("div",So,[B("div",{class:"search-box",title:"条件查询搜索区域，单击可编辑",onClick:me},[i.searchData?.list?.length?(_(),R(O,{key:0,"operate-type":"search",data:i.searchData,"request-url":""},null,8,["data"])):(_(),F("div",ko," 条件查询搜索区域，单击可编辑 "))]),f(H,{"border-style":"dashed"}),B("div",Co,[B("div",{class:"btn-group",title:"单击可编辑",onClick:v[0]||(v[0]=M=>le("controlBtn"))},[r.value?.controlBtn?.length===0||!r.value?.controlBtn?(_(),F("div",To," 操作按钮区域，点击可添加如新增、删除 ")):(_(),R(zt,{key:1,position:"top",buttons:y(Wt)(r.value?.controlBtn),row:{}},null,8,["buttons"]))]),B("div",Vo,[f(T,null,{default:g(()=>[r.value.config?.expand?(_(),R(w,{key:0,circle:"",icon:"Search",title:"展开/收起筛选"})):se("",!0),r.value.config?.columnsSetting!==!1?(_(),R(w,{key:1,circle:"",icon:"SetUp",title:"设置列显示隐藏"})):se("",!0)]),_:1})])]),r.value.columns?.length?se("",!0):(_(),F("div",xo," 表格列设置区域，可从左上角 添加表格列字段 选择已有列或直接从上方工具栏 生成脚本预览 编辑 ")),i.refreshTable?(_(),R(Ie,At({key:1},r.value.tableProps||{},{ref:"tableEl",data:[{}]}),{default:g(()=>[(_(!0),F(J,null,pe(r.value.columns,M=>(_(),R(Ge,At({key:M.prop||M.label,ref_for:!0},M),Pn({header:g(Ke=>[j(It(Ke.column.label)+" ",1),B("i",{class:"icon-close",onClick:qe=>V(M)},null,8,Oo),M.help?(_(),R(re,{key:0,placement:"top"},{content:g(()=>[B("span",{innerHTML:M.help},null,8,Io)]),default:g(()=>[v[5]||(v[5]=B("i",{class:"icon-help"},null,-1))]),_:2},1024)):se("",!0)]),_:2},[M.type!=="index"?{name:"default",fn:g(()=>[M.type==="selection"?(_(),R(b,{key:0})):(_(),F("div",{key:1,onClick:Nn(Ke=>Z(M),["stop"])},[M.render==="switch"?(_(),R(L,{key:0})):M.render==="image"?(_(),R(q,{key:1,style:Fn({width:M.config.width,height:M.config.height})},null,8,["style"])):M.render==="tag"?(_(),R(Oe,{key:2},{default:g(()=>[...v[6]||(v[6]=[j(" 设置 ",-1)])]),_:1})):M.render==="buttons"?(_(),R(zt,{key:3,class:"btn-group",position:"demo",buttons:y(Wt)(M.buttons,"right"),row:{}},null,8,["buttons"])):(_(),F("span",Po,"设置"))],8,Ao))]),key:"0"}:void 0]),1040))),128))]),_:1},16)):se("",!0),v[7]||(v[7]=B("div",{class:"table-tip"},[j(" 操作提示："),B("br"),j(" *从数据列表配置中选择 所属表单"),B("br"),j(" *从左上角 添加表格字段 选择预设字段"),B("br"),j(" *可拖动表头字段移动调整表头字段排列顺序"),B("br"),j(" *可通过顶部工具栏 生成脚本预览 查看或编辑添加自定义字段 ")],-1))])]),f(bo,{ref_key:"controlAttrEl",ref:Q,"tabs-name":i.tabsName,"onUpdate:tabsName":v[1]||(v[1]=M=>i.tabsName=M),onChangeEvent:h},null,8,["tabs-name"])])),[[P,i.loading]]),f(Ln,{modelValue:p.visible,"onUpdate:modelValue":v[2]||(v[2]=M=>p.visible=M),title:p.title,direction:p.direction,content:p.content,"code-type":p.codeType,onBeforeClose:S,onConfirm:G},null,8,["modelValue","title","direction","content","code-type"]),f(Bn,{ref_key:"vueFileEl",ref:t},null,512),f(ve,{modelValue:i.previewVisible,"onUpdate:modelValue":v[3]||(v[3]=M=>i.previewVisible=M),title:"预览",fullscreen:!0},{default:g(()=>[i.previewVisible?(_(),R(c,{key:0,data:r.value,"search-data":i.searchData},null,8,["data","search-data"])):se("",!0)]),_:1},8,["modelValue"])])}}});typeof Kt=="function"&&Kt(No);export{No as default};
