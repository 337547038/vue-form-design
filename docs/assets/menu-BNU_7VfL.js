import{d as x,l as o,L,r as m,o as f,c as C,b as w,w as b,g as y,n as E,t as B,f as D,i as g,I as N,q as p}from"./index-DW6ahk2i.js";const S={style:{"padding-left":"5px"}},P=x({__name:"menu",setup(F){const u=o(),i=o(),d={menuType:{1:"菜单",2:"按钮",3:"设计内容"}},s=o(!0),r=o({tableProps:{rowKey:"id",defaultExpandAll:!1},columns:[{label:"菜单名称",prop:"name"},{label:"地址",prop:"path"},{label:"排序",prop:"sort",width:60},{label:"类型",prop:"type",width:100,config:{dictKey:"menuType",tagList:{1:"success",2:"info",3:"warning"}}},{label:"状态",prop:"status",width:70,config:{dictKey:"sys-status",tagList:{1:"success",2:"info"}}},{label:"操作",prop:"__control",width:140}],controlBtn:[{label:"新增",type:"primary",icon:"plus",click:()=>{t.visible=!0,t.title="新增菜单",t.formType=1}},{label:"展开折叠",click:()=>{r.value.tableProps.defaultExpandAll=!r.value.tableProps.defaultExpandAll,s.value=!1,p(()=>{s.value=!0})}}],operateBtn:[{label:"新增",click:e=>{t.visible=!0,t.title="新增菜单",t.formType=1,p(()=>{i.value.setValue({parentId:e.id})})}},{label:"编辑",click:e=>{t.visible=!0,t.title="编辑菜单",t.formType=2,t.editId=e.id,p(()=>{i.value.setValue(e,!0)})}},{label:"删除",key:"del"}],config:{pageSize:"100",sort:"sort asc",fixedBottomScroll:!1}}),t=L({visible:!1,title:"",formType:1,editId:""}),v=o({list:[{type:"input",control:{modelValue:"",disabled:!0,placeholder:"父级ID"},name:"parentId",formItem:{label:"父级ID"}},{type:"select",control:{modelValue:1},options:[],config:{optionsType:2,optionsFun:"menuType"},name:"type",formItem:{label:"类型"}},{type:"select",control:{modelValue:""},options:[],config:{optionsType:1,optionsFun:"designList",method:"post",label:"name",value:"id",hidden:"$.type!==3",debug:!0,beforeFetch:e=>(e.query={type:2},e)},name:"contentList",formItem:{label:"内容列表"}},{type:"input",control:{modelValue:"",placeholder:"请输入菜单名称"},config:{},name:"name",formItem:{label:"菜单名称"},customRules:[{type:"required",message:"菜单名称不能为空",trigger:"blur"}]},{type:"input",control:{modelValue:"",placeholder:"请输入访问地址/类型标识"},config:{disabled:"$.type===3"},name:"path",formItem:{label:"访问地址"}},{type:"component",control:{modelValue:""},config:{componentName:"diyIconfont"},name:"icon",formItem:{label:"icon图标"}},{type:"inputNumber",control:{modelValue:0,controlsPosition:"right"},config:{},name:"sort",formItem:{label:"排序"}},{type:"radio",control:{modelValue:1},options:[],config:{optionsType:2,optionsFun:"sys-status"},name:"status",formItem:{label:"状态"}},{type:"radio",control:{modelValue:1},options:[{label:"显示",value:"1"},{label:"隐藏",value:"0"}],config:{optionsType:0},name:"navShow",formItem:{label:"导航显示"}},{type:"textarea",control:{modelValue:""},config:{span:24},name:"remark",formItem:{label:"备注"}}],form:{class:"form-row-2",labelWidth:"100px",size:"default"},config:{submitCancel:!0}}),h=e=>(t.formType===2&&(e.id=t.editId),delete e.contentList,e),_=e=>{t.visible=!1,e==="success"&&u.value.getListData()},k=e=>{e==="reset"&&(t.visible=!1)},I=(e,l)=>(l.list=N(l.list),l),V=({key:e,label:l,model:a,value:c})=>{e==="contentList"&&(a.path="/design/list/content/"+c,a.name=l)};return(e,l)=>{const a=m("ak-list"),c=m("ak-form"),T=m("el-dialog");return f(),C("div",null,[s.value?(f(),w(a,{key:0,ref_key:"tableListEl",ref:u,"request-url":"menuList","delete-url":"menuDelete",data:r.value,"after-fetch":I,dict:d},{name:b(({row:n})=>[y("i",{class:E(n.icon)},null,2),y("span",S,B(n.name),1)]),_:1},8,["data"])):D("",!0),g(T,{modelValue:t.visible,"onUpdate:modelValue":l[0]||(l[0]=n=>t.visible=n),title:t.title,width:"680px","destroy-on-close":""},{default:b(()=>[g(c,{ref_key:"formNameEl",ref:i,type:t.formType,data:v.value,"submit-url":"menuSave","edit-url":"menuEdit","before-submit":h,"after-submit":_,onBtnClick:k,dict:d,onChange:V},null,8,["type","data"])]),_:1},8,["modelValue","title"])])}}});export{P as default};
