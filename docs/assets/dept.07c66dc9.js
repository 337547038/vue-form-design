import{d as _,r as u,H as B,o as h,c as V,p as c,w as A,q as p,B as d}from"./index.ae153a4c.js";const x=_({__name:"dept",setup(I){const m=u(),i=u(),f=u([]),E=u({list:[{type:"input",control:{modelValue:"",placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},config:{},name:"name",item:{label:"\u90E8\u95E8\u540D\u79F0"}},{type:"select",control:{modelValue:""},options:[],config:{optionsType:2,optionsFun:"status"},name:"status",item:{label:"\u72B6\u6001"}},{type:"button",control:{label:"\u67E5\u8BE2",key:"submit",type:"primary"},config:{}},{type:"button",control:{label:"\u6E05\u7A7A",key:"reset"},config:{}}],form:{labelWidth:"",class:"",size:"default"},config:{}}),y=u({tableProps:{rowKey:"id"},columns:[{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{label:"\u6392\u5E8F",prop:"sort"},{label:"\u72B6\u6001",prop:"status",config:{dictKey:"status",tagList:{1:"success",2:"info"}}},{label:"\u64CD\u4F5C",prop:"__control"}],controlBtn:[{label:"\u65B0\u589E",type:"primary",size:"small",icon:"plus",click:()=>{t.visible=!0,t.title="\u65B0\u589E\u90E8\u95E8",t.formType=1,s()}}],operateBtn:[{label:"\u65B0\u589E",click:e=>{t.visible=!0,t.title="\u65B0\u589E\u90E8\u95E8",t.formType=1,d(()=>{i.value.setValue({parentId:e.id})}),s()}},{label:"\u7F16\u8F91",click:e=>{t.visible=!0,t.title="\u7F16\u8F91\u90E8\u95E8",t.formType=2,t.editId=e.id,e.parentId===0&&(e.parentId=""),d(()=>{i.value.setValue(e)}),s()}},{label:"\u5220\u9664",key:"del"}],config:{fixedBottomScroll:!1}}),t=B({visible:!1,title:"",formType:1,editId:""}),g=u({list:[{type:"treeSelect",control:{modelValue:"",data:[],renderAfterExpand:!1,props:{label:"name"},checkStrictly:!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},config:{optionsType:0},name:"parentId",item:{label:"\u4E0A\u7EA7\u90E8\u95E8"}},{type:"input",control:{modelValue:"",placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},config:{},name:"name",item:{label:"\u90E8\u95E8\u540D\u79F0"},customRules:[{type:"required",message:"\u90E8\u95E8\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},{type:"inputNumber",control:{modelValue:0,controlsPosition:"right"},config:{},name:"sort",item:{label:"\u6392\u5E8F"}},{type:"radio",control:{modelValue:1},options:[],config:{optionsType:2,optionsFun:"status"},name:"status",item:{label:"\u72B6\u6001"}},{type:"textarea",control:{modelValue:""},config:{},name:"remark",item:{label:"\u5907\u6CE8"}},{type:"div",control:{},config:{textAlign:"center"},list:[{type:"button",control:{label:"\u786E\u5B9A",type:"primary",key:"submit"},config:{span:0}},{type:"button",control:{label:"\u53D6\u6D88",key:"reset"},config:{span:0}}]}],form:{labelWidth:"100px",size:"default"},config:{}}),D=e=>(t.formType===2&&(e.id=t.editId),e),v=e=>{t.visible=!1,e==="success"&&m.value.getListData()},k=e=>{e==="reset"&&(t.visible=!1)},F=e=>{const a=e.list;let o=[];return b(a,0,o),f.value=o,o},b=(e,a,o)=>{e.forEach(l=>{if(l.value=l.id,l.parentId===a){const n=e.filter(r=>r.parentId===l.id);n!=null&&n.length&&(l.children=[],b(e,l.id,l.children)),o.push(l)}})},s=()=>{d(()=>{i.value.setOptions({parentId:f.value})})};return(e,a)=>{const o=p("ak-list"),l=p("ak-form"),n=p("el-dialog");return h(),V("div",null,[c(o,{ref_key:"tableListEl",ref:m,requestUrl:"deptList",deleteUrl:"deptDelete",searchData:E.value,tableData:y.value,afterResponse:F},null,8,["searchData","tableData"]),c(n,{modelValue:t.visible,"onUpdate:modelValue":a[0]||(a[0]=r=>t.visible=r),title:t.title,width:"400px","destroy-on-close":""},{default:A(()=>[c(l,{ref_key:"formNameEl",ref:i,type:t.formType,formData:g.value,addUrl:"deptSave",editUrl:"deptEdit",beforeSubmit:D,afterSubmit:v,onBtnClick:k},null,8,["type","formData"])]),_:1},8,["modelValue","title"])])}}});export{x as default};
