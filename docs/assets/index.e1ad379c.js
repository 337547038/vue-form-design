import{_ as Ae,a as Ve,b as ke}from"./vueFile.vue_vue_type_script_setup_true_lang.d1ef93ee.js";import{d as de,r as ie,B as ge,k as le,a as C,o as r,c as m,m as d,h as A,F as L,e as R,f as F,w as t,l as _,t as se,p as k,b as e,C as fe,D as we,G as Se,H as Fe,s as Ee,z as ye,I as he,n as Ce,v as xe,J as Ne,E as H,j as te,u as Ue,y as $e,L as Le,x as Ie,_ as ve,q as Te}from"./index.d7c31da2.js";import{s as Y,o as ee}from"./form.d7b94745.js";const re=[{label:"\u6807\u7B7E1",value:"value1"},{label:"\u6807\u7B7E2",value:"value2"},{label:"\u6807\u7B7E3",value:"value3"}],ue={type:"fixed",source:0,request:"get",sourceFun:""},be=[{title:"\u57FA\u7840\u5B57\u6BB5",children:[{type:"input",label:"\u5355\u884C\u6587\u672C",icon:"input",control:{modelValue:""},config:{}},{type:"textarea",label:"\u591A\u884C\u6587\u672C",icon:"textarea",control:{modelValue:""},config:{}},{type:"radio",label:"\u5355\u9009\u6846\u7EC4",icon:"radio",control:{modelValue:""},options:re,config:ue},{type:"checkbox",label:"\u591A\u9009\u6846\u7EC4",icon:"checkbox",control:{modelValue:[]},options:re,config:ue},{type:"select",label:"\u4E0B\u62C9\u9009\u62E9\u6846",icon:"select",control:{modelValue:"",appendToBody:!0},options:re,config:ue},{type:"datePicker",label:"\u65E5\u671F\u9009\u62E9\u5668",icon:"date",control:{modelValue:"",type:"date"},config:{}},{type:"timePicker",label:"\u65F6\u95F4\u9009\u62E9\u5668",icon:"time",control:{modelValue:""},config:{}},{type:"colorPicker",label:"\u53D6\u8272\u5668",icon:"color",control:{modelValue:""},config:{}},{type:"switch",label:"\u5F00\u5173",icon:"switch",control:{modelValue:!1},config:{}},{type:"inputNumber",label:"\u8BA1\u6570\u5668",icon:"number",control:{modelValue:0},config:{}},{type:"cascader",label:"\u7EA7\u8054\u9009\u62E9\u5668",icon:"cascader",control:{modelValue:[]},options:[],config:ue},{type:"rate",label:"\u8BC4\u5206",icon:"rate",control:{modelValue:0},config:{}},{type:"slider",label:"\u6ED1\u5757",icon:"slider",control:{modelValue:0},config:{}},{type:"txt",label:"\u6587\u5B57",icon:"text",control:{modelValue:""},config:{}},{type:"title",label:"\u6807\u9898",icon:"title",control:{modelValue:"\u6807\u9898"},config:{}}]},{title:"\u9AD8\u7EA7\u5B57\u6BB5",children:[{type:"table",label:"\u5B50\u8868",icon:"table",list:[],tableData:[],control:{border:!0},config:{}},{type:"component",label:"\u81EA\u5B9A\u4E49\u7EC4\u4EF6",icon:"component",control:{modelValue:""},config:{}},{type:"upload",label:"\u56FE\u7247/\u6587\u4EF6",icon:"image",control:{modelValue:[]},config:{}},{type:"tinymce",label:"tinymce\u5BCC\u6587\u672C",icon:"tinymce",control:{modelValue:""},config:{}}]},{title:"\u5E03\u5C40\u5B57\u6BB5",children:[{type:"grid",label:"\u683C\u6805\u5E03\u5C40",icon:"grid",columns:[{attr:{span:12},list:[]},{attr:{span:12},list:[]}],control:{},config:{}},{type:"tabs",label:"\u6807\u7B7E\u9875",icon:"tabs",columns:[{label:"Tab1",list:[]}],control:{},config:{}},{type:"card",label:"\u5361\u7247\u5E03\u5C40",icon:"card",list:[],control:{},config:{},item:{}},{type:"divider",label:"\u5206\u5272\u7EBF",icon:"divider",control:{},config:{}},{type:"div",label:"div\u5BB9\u5668",icon:"div",control:{},config:{},list:[]}]}],Pe={class:"components-list"},Oe={key:0},Re=A("div",{class:"title"},"\u5DF2\u6709\u8868\u5355\u5B57\u6BB5",-1),qe={class:"content"},ze={class:"title"},He=["title"],Ke=de({__name:"dragControl",props:{formData:{default:()=>({list:[],form:{}})},searchData:{default:()=>[]},searchDesign:{type:Boolean,default:!1}},emits:["update:searchData"],setup(X,{emit:j}){const V=X,w=ie(V.searchData);ge(()=>V.searchData,E=>{w.value=E});const S=le(()=>V.searchDesign?be.slice(0,1):be),a=E=>JSON.parse(JSON.stringify(E)),O=(E,x)=>{if(x){const b=JSON.parse(JSON.stringify(E));delete b.rules,delete b.customRules,w.value.push(b)}else V.searchData.forEach((b,I)=>{b.name===E.name&&w.value.splice(I,1)});j("update:searchData",w.value)},f=E=>{let x=!1;return V.searchData.forEach(b=>{b.name===E&&(x=!0)}),x},u=le(()=>{const E=[];return q(V.formData.list,E),E}),G=["txt","title","table","component","upload"],q=(E,x)=>{E&&E.forEach(b=>{b.type==="grid"||b.type==="tabs"?b.columns.forEach(I=>{q(I.list,x)}):b.type==="card"?q(b.list,x):G.indexOf(b.type)===-1&&x.push(b)})};return(E,x)=>{var I;const b=C("el-checkbox");return r(),m("div",Pe,[X.searchDesign&&((I=d(u))==null?void 0:I.length)?(r(),m("div",Oe,[Re,A("div",qe,[(r(!0),m(L,null,R(d(u),T=>(r(),F(b,{key:T.name,checked:f(T.name),onChange:z=>O(T,z)},{default:t(()=>[_(se(T.item.label),1)]),_:2},1032,["checked","onChange"]))),128))])])):k("",!0),(r(!0),m(L,null,R(d(S),(T,z)=>(r(),m("div",{key:z},[A("div",ze,se(T.title),1),e(d(we),{itemKey:"key123",tag:"ul",modelValue:T.children,"onUpdate:modelValue":p=>T.children=p,group:{name:"form",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:a},{item:t(({element:p})=>[A("li",{class:fe([p.type])},[A("i",{class:fe(`icon-${p.icon}`)},null,2),A("span",{title:p.label},se(p.label),9,He)],2)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))])}}}),Je={class:"sidebar-tools"},Me=A("h3",null,"\u901A\u7528\u5C5E\u6027",-1),We=_("="),je=_("\u9690\u85CF(\u9ED8\u8BA4)"),Ge=_("\u7981\u7528"),Qe=A("h3",null,"\u6807\u7B7E\u914D\u7F6E\u9879",-1),Xe=["onClick"],Ye=_("\u589E\u52A0\u6807\u7B7E"),Ze={key:2},eu=A("h3",null,"\u9009\u9879\u914D\u7F6E",-1),uu={key:0},lu=["onClick"],tu=_("\u65B0\u589E"),au=_("\u52A8\u6001\u9009\u9879"),ou=_("\u6570\u636E\u6E90"),nu=_("\u65B9\u6CD5\u51FD\u6570 "),su=_("\u63A5\u53E3\u5B57\u5178 "),ru=A("h3",null,"\u6821\u9A8C\u8BBE\u7F6E",-1),iu={key:0},du=["onClick"],cu=_("\u5FEB\u901F\u6DFB\u52A0"),pu=_("\u7F16\u5199\u6821\u9A8C\u89C4\u5219 "),mu=_("\u5FC5\u586B "),fu={key:4},hu=A("h3",null,"\u5176\u4ED6\u5C5E\u6027",-1),vu=_("\u6DFB\u52A0\u5C5E\u6027 "),bu=_("\u6DFB\u52A0\u65F6\u83B7\u53D6\u8BF7\u6C42 "),gu=_("\u7F16\u8F91\u8868\u5355\u6837\u5F0F "),Fu=de({__name:"formControlAttr",props:{formData:null,formConfig:{default:()=>({})}},emits:["openDialog","update:formData","update:formConfig"],setup(X,{emit:j}){const V=X,{formConfig:w,formData:S}=Se(V),a=Fe(),O=Ee(),f=ye({formAttr:[{label:"\u8868\u5355\u540D\u79F0",value:w.value.title,key:"title",hide:O.query.type==="search",path:"config"},{label:"\u6570\u636E\u6E90",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90",value:w.value.formId,type:"select",options:[],key:"formId",hide:O.query.type==="search",path:"config"},{label:"\u8868\u5355\u6807\u8BC6",value:S.value.name,key:"name"},{label:"\u8868\u5355\u6807\u7B7E\u5BBD\u5EA6",value:S.value.labelWidth,placeholder:"\u8868\u5355label\u5BBD\uFF0C\u5982180px",key:"labelWidth"},{label:"\u8868\u5355\u6837\u5F0F\u540D\u79F0",value:S.value.class,placeholder:"\u989D\u5916\u6DFB\u52A0\u7684\u8868\u5355class\u7C7B\u540D",key:"class"},{label:"\u7EC4\u4EF6\u5C3A\u5BF8",value:S.value.size,type:"select",key:"size",options:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},{label:"\u63D0\u4EA4\u6309\u94AE",value:w.value.confirm,placeholder:"\u63D0\u4EA4\u6309\u94AE\u6587\u6848\uFF0C\u7A7A\u4E0D\u663E\u793A",key:"confirm",path:"config"},{label:"\u53D6\u6D88\u8FD4\u56DE\u6309\u94AE",value:w.value.cancel,placeholder:"\u53D6\u6D88\u8FD4\u56DE\u6309\u94AE\u6587\u6848\uFF0C\u7A7A\u4E0D\u663E\u793A",path:"config",key:"cancel"}],dataSourceList:{},customRulesList:[...he,{type:"rules",label:"\u81EA\u5B9A\u4E49\u6B63\u5219"},{type:"methods",label:"\u81EA\u5B9A\u4E49\u65B9\u6CD5"}],isSearch:O.query.type==="search",attrList:[]}),u=le(()=>a.controlAttr);ge(()=>u.value,o=>{var n;o&&((n=Object.keys(o))==null?void 0:n.length)>0?G():f.attrList=[]});const G=()=>{const{control:o={},className:n="",type:c,name:B,config:y={},item:h={},attr:v={}}=u.value;let $=!1;if(c==="table"){const D=u.value&&u.value.list;D&&D.length>0&&($=D[0].type==="index")}f.attrList=[{label:"\u81EA\u5B9A\u4E49Class",value:n,placeholder:"\u6837\u5F0F\u7C7B\u540D",path:"config.className"},{label:"\u5B57\u6BB5\u6807\u8BC6",value:B,type:Object.keys(f.dataSourceList).length>0?"select":"text",placeholder:"\u5B57\u6BB5\u552F\u4E00\u6807\u8BC6\uFF0C\u5BF9\u5E94\u6570\u636E\u5E93",dict:f.dataSourceList,path:"name",vHide:["grid","tabs","card","title","gridChild","tableColumn","divider","txt","div"],eventName:"filedNameKey"},{label:"\u5360\u4F4D\u5185\u5BB9",value:o.placeholder,placeholder:"placeholder",path:"control.placeholder",vShow:["password","input","textarea","select","date","number","datePicker","tinymce","timePicker"]},{label:"label\u503C",value:h.label,path:"item.label",vHide:["table","grid","tabs","title","gridChild","div","inputSlot"]},{label:"\u9690\u85CFlabel",value:h.showLabel,path:"item.showLabel",type:"switch",vHide:["table","grid","tabs","title","gridChild","divider","card","div","inputSlot"]},{label:"\u5E2E\u52A9\u4FE1\u606F",value:y.help,path:"config.help",vHide:["table","grid","tabs","gridChild","divider","div","inputSlot"]},{label:"\u8868\u5355\u6805\u683C",value:y.span,placeholder:"\u8868\u5355\u533A\u57DF\u6805\u683C\u5BBD",path:"config.span",vHide:["table","grid","gridChild","divider"],isNum:!0},{label:"\u6587\u672C\u503C",value:o.modelValue,placeholder:"\u652F\u6301html",path:"control.modelValue",vShow:["txt"],inputStyle:"textarea"},{label:"\u8BBE\u4E3A\u5BC6\u7801",value:c,type:"select",dict:{\u6587\u672C:"input",\u5BC6\u7801:"password"},path:"type",vShow:["input","password"],vIf:f.isSearch},{label:"\u6587\u672C\u57DF\u9AD8\u5EA6",value:o.rows,placeholder:"\u8F93\u5165\u6846\u884C\u6570",path:"control.rows",vShow:["textarea"],isNum:!0},{label:"\u524D\u7F00",value:y.prepend,placeholder:"\u6587\u672C\u524D\u7F00",path:"config.prepend",vShow:["input","password"]},{label:"\u540E\u7F00",value:y.append,placeholder:"\u6587\u672C\u540E\u7F00",path:"config.append",vShow:["input","password"]},{label:"\u662F\u5426\u591A\u9009",value:o.multiple,path:"control.multiple",type:"switch",vShow:["select"],eventName:"selectMultiple"},{label:"\u662F\u5426\u7981\u7528",value:o.disabled,path:"control.disabled",type:"switch",vShow:["input","password","textarea","radio","checkbox","select","date","switch","number","cascader","upload","rate","tinymce"],vIf:f.isSearch},{label:"\u662F\u5426\u7981\u7528\u7F16\u8F91",value:y.editDisabled,path:"config.editDisabled",type:"switch",vShow:["input","password","textarea","radio","checkbox","select","date","switch","number","cascader","upload"],vIf:f.isSearch},{label:"\u6DFB\u52A0\u9875\u9690\u85CF",value:y.disabledAdd,path:"config.disabledAdd",type:"switch",vIf:f.isSearch,vHide:["inputSlot"]},{label:"\u7F16\u8F91\u9875\u9690\u85CF",value:y.disabledEdit,path:"config.disabledEdit",type:"switch",vIf:f.isSearch,vHide:["inputSlot"]},{label:"\u8BE6\u60C5\u9875\u9690\u85CF",value:y.disabledDetail,path:"config.disabledDetail",type:"switch",vIf:f.isSearch,vHide:["inputSlot"]},{label:"\u8BBE\u4E3AInput\u8F93\u5165\u6846\u7684\u524D/\u540E\u7F00",value:c==="inputSlot",path:"",type:"switch",vShow:["select","inputSlot"],eventName:"setInputSlot"},{label:"\u6807\u9898",value:o.modelValue,path:"control.modelValue",vShow:["title"]},{label:"\u5360\u636E\u7684\u5217\u6570span",value:v.span,path:"attr.span",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5DE6\u4FA7\u7684\u95F4\u9694\u683C\u6570offset",value:v.offset,path:"attr.offset",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5411\u53F3\u79FB\u52A8\u683C\u6570push",value:v.push,path:"attr.push",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5411\u5DE6\u79FB\u52A8\u683C\u6570pull",value:v.pull,path:"attr.pull",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5E8F\u53F7\u5217",value:$,type:"switch",vShow:["table"],eventName:"tableColumn1"},{label:"\u7EC4\u4EF6\u540D",value:y.template,placeholder:"\u5168\u5C40\u6CE8\u518C\u7684\u7EC4\u4EF6\u540D\u79F0",path:"config.componentName",vShow:["component"]},{label:"\u4E0A\u4F20\u5730\u5740",value:o.action,placeholder:"\u56FE\u7247/\u6587\u4EF6\u4E0A\u4F20\u5730\u5740",path:"control.action",vShow:["upload"]},{label:"\u6587\u4EF6\u5B57\u6BB5\u540D",value:o.name,placeholder:"\u4E0A\u4F20\u7684\u6587\u4EF6\u5B57\u6BB5\u540D",path:"control.name",vShow:["upload"]},{label:"\u5217\u8868\u7C7B\u578B",value:o.listType,type:"select",dict:{text:"text",picture:"picture","picture-card":"picture-card"},path:"control.listType",vShow:["upload"]},{label:"\u63D0\u793A\u6587\u5B57",value:y.tip,placeholder:"\u63D0\u793A\u8BF4\u660E\u6587\u5B57",path:"config.tip",vShow:["upload"]},{label:"\u6309\u94AE\u6587\u672C",value:y.btnText,placeholder:"\u4E0A\u4F20\u6309\u94AE\u6587\u672C",path:"config.btnText",vShow:["upload"]},{label:"direction",type:"select",dict:{horizontal:"horizontal",vertical:"vertical"},value:o.direction,path:"control.direction",vShow:["divider"]},{label:"border-style",value:o.borderStyle,path:"control.borderStyle",vShow:["divider"]},{label:"content-position",type:"select",dict:{left:"left",right:"right",center:"center"},value:o.contentPosition,path:"control.contentPosition",vShow:["divider"]},{label:"\u6700\u5C0F\u503C",value:o.min,path:"control.min",vShow:["slider"],eventName:"formatNumber",isNum:!0},{label:"\u6700\u5927\u503C",value:o.max,path:"control.max",vShow:["rate","slider"],eventName:"formatNumber",isNum:!0},{label:"\u6B65\u957F",value:o.step,path:"control.step",vShow:["slider"],eventName:"formatNumber",isNum:!0},{label:"type",value:o.type,path:"control.type",vShow:["datePicker"],type:"select",placeholder:"\u663E\u793A\u7C7B\u578B",dict:{year:"year",month:"month",date:"date",datetime:"datetime",week:"week",datetimerange:"datetimerange",daterange:"daterange",monthrange:"monthrange"}},{label:"format",value:o.format,path:"control.format",vShow:["datePicker","timePicker"],placeholder:"\u663E\u793A\u5728\u8F93\u5165\u6846\u4E2D\u7684\u683C\u5F0F"},{label:"color-format",value:o.colorFormat,path:"control.colorFormat",type:"select",placeholder:"\u5199\u5165 v-model \u7684\u989C\u8272\u7684\u683C\u5F0F",dict:{hsl:"hsl",hsv:"hsv",hex:"hex",rgb:"rgb"},vShow:["colorPicker"]},{label:"\u6587\u672C\u9AD8\u5EA6",value:o.height,path:"control.height",placeholder:"\u6587\u672C\u9AD8\u5EA6(\u9884\u89C8\u67E5\u770B\u6548\u679C)",vShow:["tinymce"]},{label:"\u6587\u672C\u5BBD\u5EA6",value:o.width,path:"control.width",placeholder:"\u6587\u672C\u5BBD\u5EA6(\u9884\u89C8\u67E5\u770B\u6548\u679C)",vShow:["tinymce"]},{label:"\u56FE\u7247\u4E0A\u4F20\u5730\u5740",value:o.imgUrl,path:"control.imgUrl",placeholder:"\u56FE\u7247\u4E0A\u4F20\u5730\u5740",vShow:["tinymce"]},{label:"\u9644\u4EF6\u4E0A\u4F20\u5730\u5740",value:o.blobUrl,path:"control.blobUrl",placeholder:"\u9644\u4EF6\u4E0A\u4F20\u5730\u5740",vShow:["tinymce"]},{label:"\u663E\u793A\u6A21\u5F0F",value:y.style,path:"config.style",placeholder:"\u663E\u793A\u98CE\u683C(\u9884\u89C8\u67E5\u770B\u6548\u679C)",type:"select",dict:{default:"default",simple:"simple"},vShow:["tinymce"]}],f.attrList=f.attrList.filter(D=>{let K=!0;return D.vShow&&(K=D.vShow.includes(c)),D.vHide&&(K=!D.vHide.includes(c)),D.vIf&&(K=!1),K})},q=(o,n)=>{switch(o.eventName){case"selectMultiple":n?u.value.control.modelValue=[]:u.value.control.modelValue="";break;case"tableColumn1":i(n);break;case"formatNumber":break;case"filedNameKey":for(const c in f.dataSourceList)if(f.dataSourceList[c]===n){u.value.item.label=c,u.value.name=n;return}break;case"setInputSlot":n?(u.value.type="inputSlot",u.value.item.showLabel=!0,H.success(`\u8BF7\u5728\u5BF9\u5E94\u7684Input\u8F93\u5165\u6846\u5C5E\u6027\u524D\u540E\u7F00\u8BBE\u7F6Ekey:${u.value.name}`)):(u.value.type="select",u.value.item.showLabel=!1),G();break}if(o.path){const c=o.isNum?parseInt(n):n;o.path&&E(u.value,o.path,c)}},E=(o,n,c)=>{let B=o;const y=n.split(".");let h=0;for(h;h<y.length-1;h++){const D=y[h];if(D in B)B=B[D];else throw new Error(`${D} is undefined`)}const v=y[h],$=B[y[h]];return c!==void 0&&(B[v]=c),{obj:B,key:v,value:$}},x=(o,n)=>{n==="tabs"?u.value.columns.splice(o,1):u.value.options.splice(o,1)},b=o=>{u.value.type==="cascader"?I():o==="tabs"?u.value.columns.push({label:"\u6807\u7B7E\u540D\u79F0",list:[]}):u.value.options.push({label:"",value:""})},I=()=>{let o=u.value.control;u.value.type==="cascader"&&(o=u.value.options),j("openDialog",o,n=>{u.value.type==="cascader"?u.value.options=n:(u.value.control={},Object.assign(u.value.control,n))})},T=o=>{var n;(n=u.value.item)!=null&&n.rules||(u.value.item.rules=[]),o?u.value.item.rules.push({required:!0,message:"\u5FC5\u586B\u9879",trigger:"change"}):u.value.item.rules.splice(0,1)},z=()=>{var o,n;(o=u.value.item)!=null&&o.rules||(u.value.item.rules=[]),j("openDialog",(n=u.value.item)==null?void 0:n.rules,c=>{Object.assign(u.value.item.rules,c)})},p=(o,n)=>{if(o&&o.length===0||Object.keys(u.value).length===0)return!1;const c=o.indexOf(u.value.type);return n?c!==-1:c===-1},i=o=>{const n={name:"index",type:"index",item:{label:"\u5E8F\u53F7"},control:{},config:{}};o?u.value.list.unshift(n):u.value.list.splice(0,1)},g=le(()=>{var n;const o=u.value&&((n=u.value.item)==null?void 0:n.rules);return o&&o.length>0}),P=()=>{u.value.customRules||(u.value.customRules=[]),u.value.customRules.push({type:"required",message:"\u5FC5\u586B\u9879",trigger:"blur"})},ae=o=>{u.value.customRules&&u.value.customRules.splice(o,1)},oe=()=>{j("openDialog",V.formConfig.style||"","css")},U=o=>{const n=o||O.query.formId;n&&te("formFiled",{id:n}).then(c=>{c.data.code===200&&c.data.data.forEach(B=>{f.dataSourceList[B.label]=B.name})}).catch(c=>{console.log(c)}),O.query.type!=="search"&&te("datasource").then(c=>{f.formAttr[0].options=c.data.data})},ne=(o,n)=>{o.key==="formId"&&(U(o.value),a.setActiveKey(""),a.setControlAttr({})),o.path==="config"?w.value[o.key]=o.value||n:S.value[o.key]=o.value},De=o=>{switch(o){case 0:return"\u6570\u636E\u6E90\u63A5\u53E3URL";case 1:return"\u65B9\u6CD5\u540D\u79F0";case 2:return"\u5B57\u5178key\uFF0C\u9ED8\u8BA4\u4E3A\u5B57\u6BB5\u6807\u8BC6"}return""},_e=(o,n)=>{const c=he.filter(B=>B.type===n);c&&c.length&&(o.message=c[0].message)};return U(),(o,n)=>{const c=C("el-option"),B=C("el-select"),y=C("el-switch"),h=C("el-input"),v=C("el-form-item"),$=C("el-col"),D=C("el-radio"),K=C("el-radio-group"),Q=C("el-button"),Z=C("el-tab-pane"),J=C("QuestionFilled"),M=C("el-icon"),W=C("el-tooltip"),ce=C("el-tabs"),Be=C("el-checkbox"),pe=C("el-form");return r(),m("div",Je,[e(ce,{modelValue:"first"},{default:t(()=>[e(Z,{label:"\u5B57\u6BB5\u5C5E\u6027",name:"first"},{default:t(()=>[e(pe,{size:"small",class:"form"},{default:t(()=>[Me,(r(!0),m(L,null,R(f.attrList,(l,N)=>(r(),F(v,{key:N,label:l.label},{default:t(()=>[l.type==="select"?(r(),F(B,{key:0,placeholder:l.placeholder,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,filterable:l.path==="name","allow-create":l.path==="name",onChange:s=>q(l,s)},{default:t(()=>[(r(!0),m(L,null,R(l.dict,(s,me)=>(r(),F(c,{key:s,value:s,label:l.path==="name"?`${me}(${s})`:me},null,8,["value","label"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","filterable","allow-create","onChange"])):l.type==="switch"?(r(),F(y,{key:1,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,onChange:s=>q(l,s)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(r(),F(h,{key:2,type:l.inputStyle,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,placeholder:l.placeholder,onChange:s=>q(l,s)},null,8,["type","modelValue","onUpdate:modelValue","placeholder","onChange"]))]),_:2},1032,["label"]))),128)),d(u).config?(r(),m(L,{key:0},[e(v,{label:"\u8054\u52A8\u6761\u4EF6"},{default:t(()=>[e($,{span:9},{default:t(()=>[e(h,{placeholder:"\u6807\u8BC6\u540D\u79F0",modelValue:d(u).config.linkKey,"onUpdate:modelValue":n[0]||(n[0]=l=>d(u).config.linkKey=l)},null,8,["modelValue"])]),_:1}),e($,{span:2,offset:1},{default:t(()=>[We]),_:1}),e($,{span:9,offset:1},{default:t(()=>[e(h,{placeholder:"\u5173\u8054\u503C",modelValue:d(u).config.linkValue,"onUpdate:modelValue":n[1]||(n[1]=l=>d(u).config.linkValue=l)},null,8,["modelValue"])]),_:1})]),_:1}),p(["input","textarea","radio","checkbox","select","date","switch","number","cascader","slider","datePicker","timePicker","colorPicker","inputNumber","rate"],!0)?Ce((r(),F(v,{key:0,label:"\u8054\u52A8\u7ED3\u679C"},{default:t(()=>[e(K,{class:"option-radio",modelValue:d(u).config.linkResult,"onUpdate:modelValue":n[2]||(n[2]=l=>d(u).config.linkResult=l)},{default:t(()=>[e(D,{label:"hidden"},{default:t(()=>[je]),_:1}),e(D,{label:"disabled"},{default:t(()=>[Ge]),_:1})]),_:1},8,["modelValue"])]),_:1},512)),[[xe,d(u).config.linkKey]]):k("",!0)],64)):k("",!0),p(["tabs"],!0)?(r(),m(L,{key:1},[Qe,(r(!0),m(L,null,R(d(u).columns,(l,N)=>(r(),F(v,{key:N},{default:t(()=>[e($,{span:12},{default:t(()=>[e(h,{placeholder:"\u6807\u7B7E\u914D\u7F6E\u9879",modelValue:l.label,"onUpdate:modelValue":s=>l.label=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e($,{span:2,offset:1},{default:t(()=>[A("i",{class:"icon-del",onClick:s=>x(N,"tabs")},null,8,Xe)]),_:2},1024)]),_:2},1024))),128)),e(v,null,{default:t(()=>[e(Q,{onClick:n[3]||(n[3]=l=>b("tabs"))},{default:t(()=>[Ye]),_:1})]),_:1})],64)):k("",!0),p(["radio","select","checkbox","cascader","inputSlot"],!0)?(r(),m("div",Ze,[eu,p("select",!0)?(r(),F(v,{key:0,label:"\u6DFB\u52A0\u5168\u90E8\u9879"},{default:t(()=>[e(h,{placeholder:"\u8BF7\u8F93\u5165\u5168\u90E8\u9879\u6587\u6848",modelValue:d(u).config.addAll,"onUpdate:modelValue":n[4]||(n[4]=l=>d(u).config.addAll=l)},null,8,["modelValue"])]),_:1})):k("",!0),e(ce,{modelValue:d(u).config.type,"onUpdate:modelValue":n[9]||(n[9]=l=>d(u).config.type=l)},{default:t(()=>[e(Z,{label:"\u56FA\u5B9A\u9009\u9879",name:"fixed"},{default:t(()=>[d(u).type!=="cascader"?(r(),m("div",uu,[(r(!0),m(L,null,R(d(u).options,(l,N)=>(r(),F(v,{key:N},{default:t(()=>[e($,{span:10},{default:t(()=>[e(h,{placeholder:"\u9009\u9879\u6807\u7B7E",modelValue:l.label,"onUpdate:modelValue":s=>l.label=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e($,{span:10,offset:1},{default:t(()=>[e(h,{placeholder:"\u9009\u9879\u503C",modelValue:l.value,"onUpdate:modelValue":s=>l.value=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e($,{span:2,offset:1},{default:t(()=>[A("i",{class:"icon-del",onClick:s=>x(N)},null,8,lu)]),_:2},1024)]),_:2},1024))),128))])):k("",!0),e(v,null,{default:t(()=>[e(Q,{onClick:b},{default:t(()=>[tu]),_:1})]),_:1})]),_:1}),e(Z,{name:"async"},{label:t(()=>[e(W,{content:"\u9009\u7528\u52A8\u6001\u9009\u9879\u65F6\u8BF7\u5220\u9664\u56FA\u5B9A\u9009\u9879\u6570\u636E",placement:"top"},{default:t(()=>[A("span",null,[au,e(M,null,{default:t(()=>[e(J)]),_:1})])]),_:1})]),default:t(()=>[e(K,{class:"option-radio",modelValue:d(u).config.source,"onUpdate:modelValue":n[5]||(n[5]=l=>d(u).config.source=l),onChange:n[6]||(n[6]=l=>d(u).config.sourceFun="")},{default:t(()=>[e(D,{label:0},{default:t(()=>[ou]),_:1}),e(D,{label:1},{default:t(()=>[nu,e(W,{content:"\u9002\u7528\u4E8E\u5BFC\u51FA\u4E3A\u5355\u72EC\u7684vue\u6587\u4EF6\uFF0C\u5728\u5F53\u524D\u6587\u4EF6\u4F7F\u7528provide\u5F62\u5F0F\u5C06\u65B9\u6CD5\u4F20\u9012",placement:"top"},{default:t(()=>[e(M,null,{default:t(()=>[e(J)]),_:1})]),_:1})]),_:1}),e(D,{label:2},{default:t(()=>[su,e(W,{content:"\u4ECE\u5F53\u524D\u6570\u636E\u63A5\u53E3dict\u91CC\u5339\u914D\uFF0C\u53EF\u51CF\u5C11\u8BF7\u6C42\u6570\uFF0C\u5B9E\u9645\u9879\u76EE\u4E5F\u4E0D\u662F\u6BCF\u4E2A\u9009\u9879\u90FD\u6709\u5355\u72EC\u7684\u63A5\u53E3\u3002\u6B64\u8BBE\u7F6E\u9700\u8981\u5F00\u542F\u8868\u5355\u5C5E\u6027-\u6DFB\u52A0\u65F6\u83B7\u53D6\u8BF7\u6C42",placement:"top"},{default:t(()=>[e(M,null,{default:t(()=>[e(J)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(v,null,{default:t(()=>[e(h,{modelValue:d(u).config.sourceFun,"onUpdate:modelValue":n[8]||(n[8]=l=>d(u).config.sourceFun=l),placeholder:De(d(u).config.source)},Ne({_:2},[d(u).config.source?void 0:{name:"prepend",fn:t(()=>[e(B,{modelValue:d(u).config.request,"onUpdate:modelValue":n[7]||(n[7]=l=>d(u).config.request=l),style:{width:"80px"}},{default:t(()=>[e(c,{label:"get",value:"get"}),e(c,{label:"post",value:"post"})]),_:1},8,["modelValue"])])}]),1032,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):k("",!0),!f.isSearch&&p(["txt","title","table","grid","tabs","card","switch","gridChild","tableColumn","divider","div"])?(r(),m(L,{key:3},[ru,p(["input","password","component"],!0)?(r(),m("div",iu,[(r(!0),m(L,null,R(d(u).customRules,(l,N)=>(r(),F(v,{key:l.type},{default:t(()=>[e(h,{modelValue:l.message,"onUpdate:modelValue":s=>l.message=s,placeholder:"\u6821\u9A8C\u63D0\u793A\u4FE1\u606F"},{prepend:t(()=>[e(B,{modelValue:l.type,"onUpdate:modelValue":s=>l.type=s,style:{width:"80px"},onChange:s=>_e(l,s)},{default:t(()=>[(r(!0),m(L,null,R(f.customRulesList,s=>(r(),F(c,{key:s.type,label:s.label,value:s.type},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),append:t(()=>[A("i",{class:"icon-del",onClick:s=>ae(N)},null,8,du)]),_:2},1032,["modelValue","onUpdate:modelValue"]),l.type==="rules"?(r(),F(h,{key:0,placeholder:"\u6B63\u5219\u8868\u8FBE\u5F0F",modelValue:l.rules,"onUpdate:modelValue":s=>l.rules=s},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),l.type==="methods"?(r(),F(h,{key:1,placeholder:"\u65B9\u6CD5\u540D\u79F0",modelValue:l.methods,"onUpdate:modelValue":s=>l.methods=s},null,8,["modelValue","onUpdate:modelValue"])):k("",!0)]),_:2},1024))),128)),e(v,null,{default:t(()=>[e(Q,{onClick:P},{default:t(()=>[cu]),_:1}),e(Q,{onClick:z},{default:t(()=>[pu,e(W,{content:"\u53EF\u53C2\u8003UI\u7EC4\u4EF6\u8868\u5355\u6821\u9A8C\uFF0C<a href='https://element-plus.gitee.io/zh-CN/component/form.html#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C' target='_blank' style='color:red'>\u8BE6\u60C5\u70B9\u51FB</a>",placement:"top","raw-content":""},{default:t(()=>[e(M,null,{default:t(()=>[e(J)]),_:1})]),_:1})]),_:1})]),_:1})])):(r(),F(v,{key:1},{default:t(()=>{var l,N;return[e(Be,{modelValue:d(g),onChange:T},{default:t(()=>[mu]),_:1},8,["modelValue"]),((l=d(u).item)==null?void 0:l.rules)&&((N=d(u).item)==null?void 0:N.rules[0])?(r(),F(h,{key:0,placeholder:"\u81EA\u5B9A\u4E49\u5FC5\u586B\u9519\u8BEF\u63D0\u793A",modelValue:d(u).item.rules[0].message,"onUpdate:modelValue":n[10]||(n[10]=s=>d(u).item.rules[0].message=s)},null,8,["modelValue"])):k("",!0)]}),_:1}))],64)):k("",!0),p(["grid","card","gridChild","divider","div"])?(r(),m("div",fu,[hu,e(Q,{size:"small",onClick:I},{default:t(()=>[vu,e(W,{content:"\u53EF\u6DFB\u52A0\u5F53\u524D\u7EC4\u4EF6\u6240\u6709prop\u5C5E\u6027",placement:"top"},{default:t(()=>[e(M,null,{default:t(()=>[e(J)]),_:1})]),_:1})]),_:1})])):k("",!0)]),_:1})]),_:1}),e(Z,{label:"\u8868\u5355\u5C5E\u6027",name:"second"},{default:t(()=>[e(pe,{size:"small",class:"form"},{default:t(()=>[(r(!0),m(L,null,R(f.formAttr.filter(l=>!l.hide),(l,N)=>(r(),F(v,{label:l.label,key:N},{default:t(()=>[l.type==="select"?(r(),F(B,{key:0,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,placeholder:l.placeholder,onChange:s=>ne(l)},{default:t(()=>[(r(!0),m(L,null,R(l.options,s=>(r(),F(c,{label:s.label||s.name,key:s.label||s.name,value:s.value||s.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])):(r(),F(h,{key:1,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,placeholder:l.placeholder,onChange:s=>ne(l)},null,8,["modelValue","onUpdate:modelValue","placeholder","onChange"]))]),_:2},1032,["label"]))),128)),e(v,null,{label:t(()=>[bu,e(W,{content:"\u65B0\u589E\u8868\u5355\u6570\u636E\u65F6\uFF0C\u4ECE\u63A5\u53E3\u83B7\u53D6\u65B0\u589E\u521D\u59CB\u6570\u636E",placement:"top"},{default:t(()=>[e(M,null,{default:t(()=>[e(J)]),_:1})]),_:1})]),default:t(()=>[e(y,{modelValue:d(w).addLoad,"onUpdate:modelValue":n[11]||(n[11]=l=>d(w).addLoad=l),onChange:n[12]||(n[12]=l=>ne({key:"addLoad",path:"config"},l))},null,8,["modelValue"])]),_:1}),e(v,null,{default:t(()=>[e(Q,{onClick:oe},{default:t(()=>[gu,e(W,{content:"\u5F53\u524D\u8868\u5355\u5E94\u7528\u9875\u7684\u6837\u5F0F\uFF0C\u7C7B\u4F3C\u4E8E.vue\u6587\u4EF6\u4E2D\u7684<style scoped>\u4E2D\u7684\u6837\u5F0F",placement:"top"},{default:t(()=>[e(M,null,{default:t(()=>[e(J)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),Eu={class:"design-container"},yu={class:"main-body"},Cu={class:"main-form"},Du={key:0,class:"empty-tips"},_u={key:0,id:"editJson"},Bu={class:"dialog-footer"},Au=_(" \u786E\u5B9A "),Vu={class:"dialog-footer"},ku=_(" \u63D0\u4EA4 "),wu=_(" \u53D6\u6D88 "),Uu=de({__name:"index",setup(X){var z;Ue().changeBreadcrumb([{label:"\u7CFB\u7EDF\u5DE5\u5177"},{label:"\u8868\u5355\u8BBE\u8BA1"}]);const V=Fe(),w=$e(),S=Ee(),a=ye({formData:{list:[],form:{labelWidth:"",class:"",size:"default",name:"form"+new Date().getTime()},config:{title:"form"+new Date().getTime(),formId:S.query.formId||""}},visibleDialog:!1,dialogType:"",editor:{},loading:!1,drawerDirection:"rtl",formDataPreview:{},previewVisible:!1,searchDesign:((z=S.query)==null?void 0:z.type)==="search",formDataList:{},formDataTemp:{}}),O=ie(),f=()=>{const p=S.query.id;p&&(a.loading=!0,te("getFormById",{id:p}).then(i=>{if(i.data.code===200){const g=i.data.data;a.searchDesign?(g.searchData&&(a.formData=Y(g.searchData)),a.formDataList=Y(g.formData),a.formDataTemp=g):g.formData&&(a.formData=Y(g.formData))}a.loading=!1}).catch(i=>{H.info(i.data||"\u52A0\u8F7D\u5F02\u5E38"),a.loading=!1}))},u=p=>{switch(a.dialogType="",p){case"del":a.formData.list=[],V.setActiveKey(""),V.setControlAttr({});break;case"eye":V.setActiveKey(""),V.setControlAttr({}),a.previewVisible=!0;let i=ee(a.formData);const g=a.formData.form.name,P=new RegExp(`get${g}ControlByName`,"g");i=i.replace(P,`getPreview${g}ControlByName`),a.formDataPreview=Y(i),a.formDataPreview.form.name=`Preview${g}`;break;case"json":E(a.formData);break;case"save":q();break;case"vue":O.value.open(a.formData);break;case"import":E({});break}},G=()=>{try{const p=a.editor.getValue();let i=p;a.dialogType!=="css"&&(i=Y(p)),typeof a.dialogType=="function"?a.dialogType(i):a.dialogType==="css"?(a.formData.config||(a.formData.config={}),a.formData.config.style=i):a.formData=i,a.visibleDialog=!1}catch{}},q=()=>{var g;const p=a.formData.form.title;if(!p){H.error("\u8BF7\u5207\u6362\u5230\u8868\u5355\u5C5E\u6027\u8F93\u5165\u8868\u5355\u540D\u79F0\uFF01");return}const i={searchData:a.formDataTemp.searchData,tableData:a.formDataTemp.tableData,formData:ee(a.formData),id:S.query.id,formId:((g=a.formData.form)==null?void 0:g.formId)||S.query.formId,name:p,type:1};a.searchDesign&&Object.assign(i,{searchData:ee(a.formData),formData:a.formDataTemp.formData}),a.loading=!0,te("saveForm",i).then(P=>{P.data.code===200?(H({message:"\u4FDD\u5B58\u6210\u529F\uFF01",type:"success"}),w.push({path:"/designform/formlist"})):H.error(P.data),a.loading=!1}).catch(P=>{H.info(P.data||"\u4FDD\u5B58\u5F02\u5E38"),a.loading=!1}),S.query.id||window.sessionStorage.removeItem("formMenuList"),V.setActiveKey(""),V.setControlAttr({})},E=(p,i)=>{a.drawerDirection=i?"ltr":"rtl",a.dialogType=i,a.visibleDialog=!0;let g=ee(p,!0);i==="css"&&(g=p);const P=i==="css"?"css":"";Te(()=>{a.editor=ke(g,"",P)})},x=p=>{b(),p()},b=()=>{a.visibleDialog=!1,a.dialogType=""},I=ie(),T=()=>{I.value.validate((p,i)=>{if(p)H.success("\u6821\u9A8C\u901A\u8FC7"),console.log(i);else return H.error("\u6821\u9A8C\u4E0D\u901A\u8FC7"),!1})};return f(),Le(()=>{Object.keys(a.editor).length!==0&&(a.editor.destroy(),a.editor.container.remove())}),(p,i)=>{const g=C("el-button"),P=C("el-drawer"),ae=C("el-dialog"),oe=Ie("loading");return r(),m("div",Eu,[e(Ke,{formData:a.formDataList,searchData:a.formData.list,"onUpdate:searchData":i[0]||(i[0]=U=>a.formData.list=U),searchDesign:a.searchDesign},null,8,["formData","searchData","searchDesign"]),A("div",yu,[e(Ae,{onClick:u}),Ce((r(),m("div",Cu,[a.formData.list.length===0?(r(),m("div",Du," \u4ECE\u5DE6\u4FA7\u62D6\u62FD\u6765\u6DFB\u52A0\u5B57\u6BB5 ")):k("",!0),e(ve,{type:4,formData:a.formData},null,8,["formData"])])),[[oe,a.loading]])]),e(Fu,{formData:a.formData.form,"onUpdate:formData":i[1]||(i[1]=U=>a.formData.form=U),formConfig:a.formData.config,"onUpdate:formConfig":i[2]||(i[2]=U=>a.formData.config=U),onOpenDialog:E},null,8,["formData","formConfig"]),e(P,{modelValue:a.visibleDialog,"onUpdate:modelValue":i[3]||(i[3]=U=>a.visibleDialog=U),size:"60%",direction:a.drawerDirection,"custom-class":"json-dialog","append-to-body":!0,"before-close":x},{default:t(()=>[a.visibleDialog?(r(),m("div",_u)):k("",!0),A("div",Bu,[e(g,{type:"primary",size:"small",onClick:G},{default:t(()=>[Au]),_:1})])]),_:1},8,["modelValue","direction"]),a.searchDesign?k("",!0):(r(),F(Ve,{key:0,ref_key:"vueFileEl",ref:O},null,512)),e(ae,{modelValue:a.previewVisible,"onUpdate:modelValue":i[5]||(i[5]=U=>a.previewVisible=U),title:"\u9884\u89C8",fullscreen:!0},{footer:t(()=>[A("div",Vu,[e(g,{size:"small",type:"primary",onClick:T},{default:t(()=>[ku]),_:1}),e(g,{size:"small",onClick:i[4]||(i[4]=U=>a.previewVisible=!1)},{default:t(()=>[wu]),_:1})])]),default:t(()=>[a.previewVisible?(r(),F(ve,{key:0,"form-data":a.formDataPreview,type:1,ref_key:"previewForm",ref:I},null,8,["form-data"])):k("",!0)]),_:1},8,["modelValue"])])}}});export{Uu as default};
