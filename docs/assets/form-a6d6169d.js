import{d as g,x as _,g as p,r as D,J as y,a as b,b as h,A as v,o as I,c as k,m as C,u as x,U as i,s as E,E as q,W as B,C as F,q as S,G as U,D as j}from"./index-8ad7f075.js";const R={style:{"min-height":"300px"}},M=g({__name:"form",setup(T){const d=_(),r=p().query,c=j(),n=D(),e=y({formData:{list:[],form:{},config:{}},dict:{},formId:r.form,id:r.id,loading:!0}),f=b(()=>r.id?2:1),m=()=>{if(!e.formId)return i.error("非法操作."),!1;const t={id:e.formId};E("designById",t).then(a=>{var s;const o=a.data;o&&Object.keys(o).length&&(e.formData=q(o.data),e.dict=B(o.dict),(r.id||(s=e.formData.config)!=null&&s.addLoad)&&n.value.getData({formId:e.formId,id:r.id}),d.changeBreadcrumb([{label:"内容管理"},{label:o.name}])),F(()=>{e.loading=!1})}).catch(a=>{e.loading=!1,i.error(a.message||"非法操作..")})},l=t=>(t.formId=e.formId,t.id=r.id,t),u=t=>{t==="success"&&c.go(-1)};return h(()=>{m()}),(t,a)=>{const o=S("ak-form"),s=U("loading");return v((I(),k("div",R,[C(o,{ref_key:"formEl",ref:n,formData:e.formData,type:x(f),dict:e.dict,requestUrl:"getFormContent",addUrl:"saveFormContent",editUrl:"editFormContent",beforeSubmit:l,afterSubmit:u},null,8,["formData","type","dict"])])),[[s,e.loading]])}}});export{M as default};
