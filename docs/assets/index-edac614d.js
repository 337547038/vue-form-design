import{d as $,a as o,c as k,f as z,F as w,g as a,w as e,i as A,j as h,k as V,b as i,t as x,l as t,m as n,r as S,o as K,q as H,s as P,v as T,e as D,x as N,u as E,y as q,z as Q,A as W,K as X,B as Y}from"./index-ea7eee8a.js";const Z=""+new URL("logo-03d6d6da.png",import.meta.url).href,ee=$({__name:"menuItem",props:{data:{default:()=>[]}},setup(y){return(m,s)=>{const u=n("el-icon"),v=n("menu-item",!0),c=n("el-sub-menu"),f=n("el-menu-item");return o(!0),k(w,null,z(y.data,(l,p)=>(o(),k(w,{key:p},[l.children?(o(),a(c,{key:0,index:l.path||l.name},{title:e(()=>[l.elIcon?(o(),a(u,{key:0},{default:e(()=>[(o(),a(A(l.elIcon)))]),_:2},1024)):h("",!0),l.icon?(o(),k("i",{key:1,class:V(`icon ${l.icon}`)},null,2)):h("",!0),i("span",null,x(l.name),1)]),default:e(()=>[t(v,{data:l.children},null,8,["data"])]),_:2},1032,["index"])):(o(),a(f,{key:1,index:l.path||l.name},{default:e(()=>[l.elIcon?(o(),a(u,{key:0},{default:e(()=>[(o(),a(A(l.elIcon)))]),_:2},1024)):h("",!0),l.icon?(o(),k("i",{key:1,class:V(`icon ${l.icon}`)},null,2)):h("",!0),i("span",null,x(l.name),1)]),_:2},1032,["index"]))],64))),128)}}}),te=$({__name:"menu",props:{collapse:{type:Boolean}},emits:["getMenuList"],setup(y,{emit:m}){const s=S([]),u=()=>{const c=window.sessionStorage.getItem("formMenuList");if(c){s.value=JSON.parse(c);return}H("menuList",{status:1}).then(f=>{s.value=P(f.data,"transformDataToChild"),window.sessionStorage.setItem("formMenuList",JSON.stringify(s.value))})},v=()=>{};return K(()=>{m("getMenuList",s.value),u()}),(c,f)=>{const l=n("el-menu");return o(),a(l,{collapse:y.collapse,"active-text-color":"#ffd04b","background-color":"rgb(48 65 86)","text-color":"#fff",onSelect:v,router:""},{default:e(()=>[t(ee,{data:s.value},null,8,["data"])]),_:1},8,["collapse"])}}}),ne={class:"comm-header-tool"},oe={class:"header-right"},le={class:"header-avatar",style:{cursor:"pointer"}},ae={class:"name"},se=i("span",{class:"title"},"个人中心",-1),ce=i("span",{class:"title"},"设置",-1),ue=i("span",{class:"title"},"退出登录",-1),re=$({__name:"header",props:{collapse:{type:Boolean}},emits:["click"],setup(y,{emit:m}){const s=T(),u=D(()=>s==null?void 0:s.breadcrumb),v=S({name:"admin",avatar:""}),c=l=>{m("click",l)},f=()=>{console.log("logout")};return(l,p)=>{const r=n("Fold"),_=n("Expand"),d=n("el-icon"),b=n("el-breadcrumb-item"),M=n("el-breadcrumb"),R=n("RefreshRight"),L=n("FullScreen"),F=n("el-avatar"),I=n("arrow-down"),C=n("User"),B=n("el-menu-item"),U=n("Setting"),J=n("CircleClose"),O=n("el-menu"),j=n("el-dropdown");return o(),k(w,null,[t(d,{onClick:p[0]||(p[0]=g=>c("collapse")),class:"collapse-icon"},{default:e(()=>[y.collapse?(o(),a(_,{key:1})):(o(),a(r,{key:0}))]),_:1}),t(M,{separator:"/",class:"breadcrumb"},{default:e(()=>[t(b,{to:{path:"/"}},{default:e(()=>[N("首页")]),_:1}),(o(!0),k(w,null,z(E(u),(g,G)=>(o(),k(w,{key:G},[g.path?(o(),a(b,{key:0,to:{path:g.path}},{default:e(()=>[N(x(g.label),1)]),_:2},1032,["to"])):(o(),a(b,{key:1},{default:e(()=>[N(x(g.label),1)]),_:2},1024))],64))),128))]),_:1}),i("div",ne,[t(d,{onClick:p[1]||(p[1]=g=>c("refresh")),title:"刷新页面"},{default:e(()=>[t(R)]),_:1}),t(d,{title:"全屏"},{default:e(()=>[t(L,{onClick:p[2]||(p[2]=g=>c("fullScreen"))})]),_:1})]),i("div",oe,[t(j,null,{dropdown:e(()=>[t(O,{class:"avatar-menu"},{default:e(()=>[t(B,null,{default:e(()=>[t(d,null,{default:e(()=>[t(C)]),_:1}),se]),_:1}),t(B,null,{default:e(()=>[t(d,null,{default:e(()=>[t(U)]),_:1}),ce]),_:1}),t(B,{onClick:f},{default:e(()=>[t(d,null,{default:e(()=>[t(J)]),_:1}),ue]),_:1})]),_:1})]),default:e(()=>[i("div",le,[t(F,{class:"avatar",size:"small",shape:"circle",src:v.value.avatar},null,8,["src"]),i("span",ae,x(v.value.name),1),t(d,{class:"el-icon--right"},{default:e(()=>[t(I)]),_:1})])]),_:1})])],64)}}});const _e=i("img",{src:Z,alt:""},null,-1),de=$({__name:"index",setup(y){const m=T(),s=S(q("collapseMenu")==="true"),u=S(!1),v=S([]),c=D({get:()=>m.reloadFlag,set:()=>{m.setReloadRouter()}}),f=r=>{if(r==="collapse"){const _=!s.value;s.value=_,q("collapseMenu",_.toString())}r==="fullScreen"&&(u.value=!u.value),r==="refresh"&&(c.value=!1,Y(()=>{c.value=!0}))},l=r=>{v.value=r},p=D(()=>{const r=m==null?void 0:m.tabs;if(r){const _=[];return r.forEach(d=>{_.push(d.name)}),_}return[]});return K(()=>{}),(r,_)=>{const d=n("el-aside"),b=n("el-header"),M=n("router-view"),R=n("el-main"),L=n("el-container"),F=n("Close"),I=n("el-icon");return o(),a(L,{class:"common-layout"},{default:e(()=>[u.value?h("",!0):(o(),a(d,{key:0,width:s.value?"44px":"180px",class:"common-sidebar"},{default:e(()=>[i("div",{class:"logo",onClick:_[0]||(_[0]=C=>r.$router.push({path:"/"}))},[_e,Q(i("span",null,"AK低代码快速开发平台",512),[[W,!s.value]])]),t(te,{collapse:s.value,onGetMenuList:l},null,8,["collapse"])]),_:1},8,["width"])),t(L,{class:"overflow-scroll"},{default:e(()=>[u.value?h("",!0):(o(),a(b,{key:0,class:"common-header"},{default:e(()=>[t(re,{onClick:f,collapse:s.value},null,8,["collapse"])]),_:1})),t(R,{class:"common-main"},{default:e(()=>[E(c)?(o(),a(M,{key:0},{default:e(({Component:C})=>[(o(),a(X,{include:E(p)},[(o(),a(A(C)))],1032,["include"]))]),_:1})):h("",!0)]),_:1})]),_:1}),u.value?(o(),a(I,{key:1,class:"quit-full",onClick:_[1]||(_[1]=C=>f("fullScreen")),title:"退出全屏"},{default:e(()=>[t(F)]),_:1})):h("",!0)]),_:1})}}});export{de as default};
