import{d as I,k as D,l as a,G as y,r as n,c as E,o as C,j as o,w as g,q as s}from"./index-BMqeUH7Y.js";const T=I({__name:"dict",setup(B){const v=D(),d=a(),c=a(),m=a(),t=y({visible:!1,type:"add",editId:"",formData:{list:[{type:"input",control:{modelValue:"",placeholder:"请输入字典名称"},config:{},name:"name",formItem:{label:"字典名称"},customRules:[{type:"required",message:"请输入字典名称",trigger:"blur"}]},{type:"input",control:{modelValue:"",placeholder:"请输入字典标识"},config:{disabledEdit:!0},name:"type",formItem:{label:"字典标识"},customRules:[{type:"required",message:"请输入字典标识",trigger:"blur"}]},{type:"radio",control:{modelValue:1},options:[{label:"正常",value:1},{label:"停用",value:0}],config:{optionsType:0},name:"status",formItem:{label:"状态"}},{type:"textarea",control:{modelValue:""},config:{},name:"remark",formItem:{label:"说明描述"}}],form:{labelWidth:"",size:"default"},config:{submitCancel:!0}}}),l=y({visible:!1,editId:"",formData:{list:[{type:"input",control:{modelValue:"",disabled:!0,placeholder:"请输入字典名称"},config:{},name:"name",formItem:{label:"字典名称"}},{type:"flex",list:[{type:"input",control:{modelValue:"",placeholder:"显示的标签名称"},config:{},name:"label",formItem:{label:"字典标签"}},{type:"input",control:{modelValue:""},config:{},name:"value",formItem:{label:"键值"}}],tableData:[],control:{},config:{addBtnText:"添加一行",delBtnText:"删除"},name:"children"}],form:{labelWidth:"",size:"default"},config:{transformData:!0,submitCancel:!0,style:`.flex-item{display:flex}
.flex-item .el-form-item{ margin-right:10px}`}}}),k=a({columns:[{label:"多选",type:"selection"},{label:"序号",type:"index",width:"70px"},{label:"字典名称",prop:"name"},{label:"字典标识",prop:"type"},{label:"状态",prop:"status",render:"tag",replaceValue:"sys-status",custom:{0:"info",1:"success"},config:{}},{label:"更新时间",prop:"updateTime",width:170,render:"datetime",config:{}},{label:"操作",prop:"__control",width:200,render:"buttons",buttons:[{label:"设置",type:"primary",click:e=>{l.visible=!0,l.editId=e.id,s(()=>{m.value.setValue({name:e.name,children:e.children?JSON.parse(e.children):[]})})}},{label:"编辑",icon:"edit",type:"primary",click:e=>{t.visible=!0,t.type="edit",t.editId=e.id,s(()=>{c.value.setValue(e,!0)})}},{label:"删除",key:"del",icon:"delete",visible:"$.isSystem!==1"}]}],controlBtn:[{label:"新增",type:"primary",size:"small",icon:"plus",click:()=>{t.visible=!0,t.type="add",t.editId="",s(()=>{})}},{label:"批量删除",type:"danger",size:"small",icon:"delete",key:"del"}],config:{expand:!0,searchJump:!0}}),h=a({list:[{type:"input",control:{modelValue:"",placeholder:"请输入字典名称"},config:{},name:"name",formItem:{label:"字典名称"}},{type:"select",control:{modelValue:"",style:{width:"100px"}},options:[{label:"正常",value:"1"},{label:"停用",value:"0"}],name:"status",config:{optionsType:0},formItem:{label:"状态"}}],form:{labelWidth:"",class:"",size:"default"},config:{submitCancel:!0}}),_=e=>(e.id=t.editId,e),V=e=>(e.id=l.editId,e),u=e=>{t.visible=!1,l.visible=!1,d.value.getListData(),e==="set"&&v.getDict()},p=e=>{e==="reset"&&(t.visible=!1,l.visible=!1),console.log("btn click")};return(e,i)=>{const x=n("ak-list"),f=n("ak-form"),b=n("el-dialog");return C(),E("div",null,[o(x,{ref_key:"tableListEl",ref:d,"api-key":{list:"dictList",del:"dictDelete"},"search-data":h.value,data:k.value},null,8,["search-data","data"]),o(b,{modelValue:t.visible,"onUpdate:modelValue":i[0]||(i[0]=r=>t.visible=r),title:t.type==="add"?"添加字典":"修改",width:"400px","destroy-on-close":""},{default:g(()=>[o(f,{ref_key:"formEl",ref:c,data:t.formData,"operate-type":t.type,"submit-url":t.type==="add"?"dictSave":"dictEdit",before:_,after:u,onBtnClick:p},null,8,["data","operate-type","submit-url"])]),_:1},8,["modelValue","title"]),o(b,{modelValue:l.visible,"onUpdate:modelValue":i[1]||(i[1]=r=>l.visible=r),title:"设置字典数据",width:"400px","destroy-on-close":""},{default:g(()=>[o(f,{ref_key:"formEl2",ref:m,data:l.formData,"operate-type":"edit","submit-url":"dictEdit",before:V,after:u("set"),onBtnClick:p},null,8,["data","after"])]),_:1},8,["modelValue"])])}}});export{T as default};
