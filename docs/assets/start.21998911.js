import{d as B,r as l,a as h,b as I,z as k,o as E,c as x,p as o,w as r,u as q,m as t,g as c,s as p,B as A,q as n,J as T,i as R,C as S}from"./index.ae153a4c.js";const U={class:"container-apply-start"},V=t("div",{class:"status"},[t("ul",null,[t("li",{class:"s1"},"\u25CF \u5DF2\u5B8C\u6210"),t("li",{class:"s2"},"\u25CF \u8FDB\u884C\u4E2D"),t("li",{class:"s3"},"\u25CF \u672A\u8FDB\u884C"),t("li",{class:"s4"},"\u25CF \u5DF2\u62D2\u7EDD"),t("li",{class:"s5"},"\u25CF \u8DF3\u8FC7")])],-1),z=B({__name:"start",setup(N){const d=R(),D=S(),i=l(),_=l({list:[],form:{}}),f=l(!0),v=h(()=>1),m=l(),F=()=>{const e={id:d.query.flowId};c("designById",e).then(a=>{i.value.setValue(p(a.data.data)),m.value=a.data.source,c("designById",{id:a.data.source}).then(s=>{_.value=p(s.data.data),A(()=>{f.value=!1})})})},C=e=>(e.formId=m.value,e),w=(e,a)=>{if(e==="success"){const s={userId:0,flowId:d.query.flowId,formId:a.data.insertId,title:"user\u7684\u8BF7\u5047\u5BA1\u6279",creatTime:new Date};c("flowSave",s).then(()=>{D.push({path:"/task/applyed"})}).catch(u=>{console.log(u)})}else console.log("\u63D0\u4EA4\u5931\u8D25")};return I(()=>{F()}),(e,a)=>{const s=n("ak-form"),u=n("el-tab-pane"),g=n("ak-flow"),y=n("el-tabs"),b=T("loading");return k((E(),x("div",U,[o(y,null,{default:r(()=>[o(u,{label:"\u8868\u5355\u4FE1\u606F"},{default:r(()=>[o(s,{formData:_.value,beforeSubmit:C,afterSubmit:w,type:q(v),requestUrl:"getFormContent",addUrl:"saveFormContent",editUrl:"editFormContent"},null,8,["formData","type"])]),_:1}),o(u,{label:"\u6D41\u7A0B\u56FE",name:"flow",class:"flow-box"},{default:r(()=>[V,o(g,{type:1,ref_key:"flowEl",ref:i},null,512)]),_:1})]),_:1})])),[[b,f.value]])}}});export{z as default};
