import{d as x,l as a,L as y,r as s,o as I,c as D,i,w as g,q as r}from"./index-BIFij2q2.js";const C=x({__name:"dict",setup(E){const d=a(),m=a(),c=a(),t=y({visible:!1,type:1,editId:"",formData:{list:[{type:"input",control:{modelValue:"",placeholder:"请输入字典名称"},config:{},name:"name",formItem:{label:"字典名称"},customRules:[{type:"required",message:"请输入字典名称",trigger:"blur"}]},{type:"input",control:{modelValue:"",placeholder:"请输入字典标识"},config:{disabledEdit:!0},name:"type",formItem:{label:"字典标识"},customRules:[{type:"required",message:"请输入字典标识",trigger:"blur"}]},{type:"radio",control:{modelValue:1},options:[{label:"正常",value:1},{label:"停用",value:0}],config:{optionsType:0},name:"status",formItem:{label:"状态"}},{type:"textarea",control:{modelValue:""},config:{},name:"remark",formItem:{label:"说明描述"}}],form:{labelWidth:"",size:"default"},config:{submitCancel:!0}}}),l=y({visible:!1,editId:"",formData:{list:[{type:"input",control:{modelValue:"",disabled:!0,placeholder:"请输入字典名称"},config:{},name:"name",formItem:{label:"字典名称"}},{type:"flex",list:[{type:"input",control:{modelValue:"",placeholder:"显示的标签名称"},config:{},name:"label",formItem:{label:"字典标签"}},{type:"input",control:{modelValue:""},config:{},name:"value",formItem:{label:"键值"}}],tableData:[],control:{},config:{addBtnText:"添加一行",delBtnText:"删除"},name:"children"}],form:{labelWidth:"",size:"default"},config:{submitCancel:!0,style:`.flex-item{display:flex}
.flex-item .el-form-item{ margin-right:10px}`}}}),v=a({columns:[{label:"多选",type:"selection"},{label:"序号",type:"index",width:"70px"},{label:"字典名称",prop:"name"},{label:"字典标识",prop:"type"},{label:"状态",prop:"status",config:{tagList:{0:"info",1:"success"},dictKey:"sys-status"}},{label:"更新时间",prop:"updateTime",width:170,config:{formatter:"{y}-{m}-{d} {h}:{i}:{s}"}},{label:"操作",prop:"__control",width:200}],controlBtn:[{label:"新增",type:"primary",size:"small",icon:"plus",click:()=>{t.visible=!0,t.type=1,t.editId="",r(()=>{})}},{label:"批量删除",type:"danger",size:"small",icon:"delete",key:"del"}],operateBtn:[{label:"设置",click:e=>{l.visible=!0,l.type=1,l.editId=e.id,r(()=>{c.value.setValue({name:e.name,children:e.children?JSON.parse(e.children):[]})})}},{label:"编辑",icon:"edit",click:e=>{t.visible=!0,t.type=2,t.editId=e.id,r(()=>{m.value.setValue(e,!0)})}},{label:"删除",key:"del",icon:"delete",visible:"$.isSystem!==1"}],config:{expand:!0,searchJump:!0}}),h=a({list:[{type:"input",control:{modelValue:"",placeholder:"请输入字典名称"},config:{},name:"name",formItem:{label:"字典名称"}},{type:"select",control:{modelValue:"",appendToBody:!0},options:[{label:"正常",value:"1"},{label:"停用",value:"0"}],name:"status",config:{optionsType:0,transformData:"string"},formItem:{label:"状态"}}],form:{labelWidth:"",class:"",size:"default"},config:{submitCancel:!0}}),k=e=>(e.id=t.editId,e),_=e=>(e.id=l.editId,e),u=()=>{t.visible=!1,l.visible=!1,d.value.getListData()},p=e=>{e==="reset"&&(t.visible=!1,l.visible=!1),console.log("btn click")};return(e,o)=>{const V=s("ak-list"),f=s("ak-form"),b=s("el-dialog");return I(),D("div",null,[i(V,{ref_key:"tableListEl",ref:d,"request-url":"dictList","delete-url":"dictDelete","search-data":h.value,data:v.value},null,8,["search-data","data"]),i(b,{modelValue:t.visible,"onUpdate:modelValue":o[0]||(o[0]=n=>t.visible=n),title:"添加字典",width:"400px","destroy-on-close":""},{default:g(()=>[i(f,{ref_key:"formEl",ref:m,data:t.formData,type:t.type,"submit-url":"dictSave","edit-url":"dictEdit","before-submit":k,"after-submit":u,onBtnClick:p},null,8,["data","type"])]),_:1},8,["modelValue"]),i(b,{modelValue:l.visible,"onUpdate:modelValue":o[1]||(o[1]=n=>l.visible=n),title:"设置字典数据",width:"400px","destroy-on-close":""},{default:g(()=>[i(f,{ref_key:"formEl2",ref:c,data:l.formData,type:2,"edit-url":"dictEdit","before-submit":_,"after-submit":u,onBtnClick:p},null,8,["data"])]),_:1},8,["modelValue"])])}}});export{C as default};
