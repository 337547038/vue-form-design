import{i as ae,r as M,j as J,o as he,b as B,c as d,k as T,w as u,g as e,u as U,a9 as Ee,d as A,f as Q,F as G,e as m,y as Y,h as I,H as ye,J as Ce,M as ie,R as ke,t as le,z as W,aa as Fe,N as _e,D as de,G as fe,n as te,B as we,l as Be,I as xe,C as re,O as De,_ as Ae,Y as $e,V as Se,S as Te,s as ge,q as Ve,a1 as Le,a0 as ve,m as Ue,E as me,p as Ie}from"./index.67521be0.js";import{_ as Re,a as ze}from"./vueFile.vue_vue_type_script_setup_true_lang.ffea8809.js";import{_ as je}from"./aceDrawer.vue_vue_type_script_setup_true_lang.d27638eb.js";import{g as Oe,a as qe}from"./getData.d01a08de.js";const Me=["bg.jpg","bg2.jpg","bg3.jpg","head_bg.png"],Ye=[],We=[],se={bg:Me,border:Ye,img:We},Xe=I("\u4E0A\u4F20"),Ne={class:"img-list"},Ge=["onClick"],Ke=["src"],Pe={key:0},He=ae({__name:"upload",emits:["click"],setup(V,{expose:$,emit:v}){const p=M(!1),a=M(),L=M("bg"),o=J(()=>{if(!se)return[];const f=[];for(const E in se)f.push(E);return f}),j=J(()=>L.value.name==="upload"?[]:se?se[L.value]:[]),_=J(()=>`./static/screen/${L.value}/`),k=f=>{p.value=!1,v("click",_.value+f,a.value)},r=f=>{L.value="upload",ye(()=>{j.value.unshift(f.path)})};return $({open:(f,E)=>{p.value=!0,a.value=E,f?L.value=f:L.value=o.value[0]}}),he(()=>{}),(f,E)=>{const g=B("el-button"),O=B("el-upload"),S=B("el-tab-pane"),H=B("el-tabs"),Z=B("el-dialog");return d(),T(Z,{modelValue:p.value,"onUpdate:modelValue":E[1]||(E[1]=R=>p.value=R),width:"800px",title:"\u9009\u62E9\u4E0A\u4F20\u56FE\u7247"},{default:u(()=>{var R;return[e(O,{action:U(Ee),"on-success":r,"show-file-list":!1},{default:u(()=>[e(g,{type:"primary"},{default:u(()=>[Xe]),_:1})]),_:1},8,["action"]),e(H,{modelValue:L.value,"onUpdate:modelValue":E[0]||(E[0]=z=>L.value=z)},{default:u(()=>[(d(!0),A(G,null,Q(U(o),z=>(d(),T(S,{label:z,name:z,key:z},null,8,["label","name"]))),128)),e(S,{label:"\u4E0A\u4F20",name:"upload"})]),_:1},8,["modelValue"]),m("div",Ne,[m("ul",null,[(d(!0),A(G,null,Q(U(j),z=>(d(),A("li",{key:z,onClick:ee=>k(z)},[m("img",{src:U(_)+z,alt:""},null,8,Ke)],8,Ge))),128))]),(R=U(j))!=null&&R.length?Y("",!0):(d(),A("p",Pe," \u6682\u65E0\u76F8\u5173\u7D20\u6750\u8D44\u6E90 "))])]}),_:1},8,["modelValue"])}}});const Je=Ce(He,[["__scopeId","data-v-7ebb50b6"]]),Qe={key:0},Ze=I("\u9009\u62E9\u56FE\u7247"),el=I("\u56FE\u8868\u7F16\u8F91"),ll=I("\u7F16\u8F91\u66F4\u591A\u5185\u8054\u6837\u5F0F"),tl=I("\u8868\u683C\u5C5E\u6027"),ol=I("Table-column"),ul=I("\u9759\u6001"),nl=I("\u5168\u5C40"),al=I("\u52A8\u6001"),sl=I("\u7F16\u8F91\u6570\u636E"),il=m("h3",null,"\u63A5\u53E3\u6570\u636E\u5904\u7406\u4E8B\u4EF6",-1),cl=I("beforeRequest"),rl=I("afterResponse"),dl=I("\u4E0A\u4F20"),pl=I("\u7F16\u8F91\u6837\u5F0F"),fl=m("h3",null,"\u5168\u5C40\u6570\u636E",-1),gl=m("h3",null,"\u63A5\u53E3\u6570\u636E\u5904\u7406\u4E8B\u4EF6",-1),vl=I("beforeRequest"),ml=I("afterResponse"),bl=ae({__name:"configControl",props:{config:null},emits:["update:config","openDrawer","update"],setup(V,{expose:$,emit:v}){const p=V,a=M({}),L=M(),o=J(()=>a.value.type),j=s=>{v("update:config",Object.assign({},p.config,s))},_=ie({bgColor:"",bgLinear:"",bgAngle:0,bgUpload:"",bgSelect:""});ke(()=>p.config,s=>{if(!Object.keys(a.value).length){const l=s.background||"";if(l.indexOf("url")!==-1){const w=new RegExp("(?<=url\\()(.*?)(?=\\))","g"),y=l.match(w);Object.assign(_,{bgUpload:y,bgSelect:3})}else if(l.indexOf("linear")!==-1){const y=l.substring(l.indexOf("(")+1,l.lastIndexOf(")")).split(/,(?![^(]*\))(?![^"']*["'](?:[^"']*["'][^"']*["'])*[^"']*$)/);Object.assign(_,{bgColor:y[1].trim(),bgLinear:y[2].trim(),bgAngle:Number(y[0].replace("deg","")),bgSelect:2})}else Object.assign(_,{bgColor:l,bgSelect:1})}},{immediate:!0});const k=()=>{let s="";switch(_.bgSelect){case 1:s=_.bgColor;break;case 2:s=`linear-gradient(${_.bgAngle}deg, ${_.bgColor}, ${_.bgLinear})`;break;case 3:s=`url(${_.bgUpload})`;break}r("background",s)},r=(s,l)=>{j({[s]:l})},x=s=>{a.value=s},f=J(()=>{var s,l,w,y;if(Object.keys(a.value).length){const{config:i={},position:C,type:X}=a.value;return[{type:"group",title:"\u4F4D\u7F6E\u4FE1\u606F"},{label:"width",value:C.width,placeholder:"\u8BF7\u8F93\u5165\u5BBD\u5EA6",key:"width",path:"position"},{label:"height",value:C.height,placeholder:"\u8BF7\u8F93\u5165\u9AD8\u5EA6",key:"height",path:"position"},{type:"number",label:"left",value:C.left,placeholder:"\u56FE\u5C42\u4F4D\u7F6E",key:"left",path:"position"},{type:"number",label:"top",value:C.top,key:"top",path:"position"},{type:"number",label:"right",value:C.right,placeholder:"\u8BBE\u7F6E\u540Eleft\u4E3Aauto",key:"right",path:"position"},{type:"number",label:"bottom",value:C.bottom,placeholder:"\u8BBE\u7F6E\u540Etop\u4E3Aauto",key:"bottom",path:"position"},{type:"number",label:"zIndex",value:C.zIndex,placeholder:"\u8BF7\u8F93\u5165\u5C42\u7EA7",key:"zIndex",path:"position"},{type:"group",title:"\u5C5E\u6027\u4FE1\u606F"},{type:"switch",label:"\u9501\u5B9A",value:i.lock,key:"lock"},{type:"switch",label:"\u9690\u85CF",value:C.display,key:"display",path:"position"},{label:"\u6837\u5F0F\u7C7B\u540D",placeholder:"\u65B9\u4FBF\u5F15\u7528\u4E2A\u6027\u5316\u6837\u5F0F",value:i.class,key:"class"},{label:"\u6587\u672C\u5185\u5BB9",placeholder:"\u8BF7\u8F93\u5165\u6587\u672C\u5185\u5BB9",value:i.text,key:"text",vShow:["text"]},{type:"select",label:"\u6EDA\u52A8\u65B9\u5411",placeholder:"\u8BF7\u9009\u62E9\u6EDA\u52A8\u65B9\u5411",value:i.direction,key:"direction",vShow:["sText"],options:{left:"\u4ECE\u5DE6\u5230\u53F3",right:"\u4ECE\u53F3\u5230\u5DE6",top:"\u4ECE\u4E0A\u5230\u4E0B",bottom:"\u4ECE\u4E0B\u5230\u4E0A"}},{type:"number",label:"\u6EDA\u52A8\u901F\u5EA6",placeholder:"\u6EDA\u52A8\u901F\u5EA6\uFF0C\u6570\u5B57\u8D8A\u5927\u901F\u5EA6\u8D8A\u6162",value:i.speed,key:"speed",vShow:["sText"]},{type:"number",label:"\u6EDA\u52A8\u6B65\u957F",placeholder:"\u6BCF\u5355\u4F4D\u65F6\u95F4\u6EDA\u52A8\u7684\u8DDD\u79BB\uFF0C\u9ED8\u8BA41",value:i.step,key:"step",vShow:["sText"]},{type:"textarea",label:"\u6587\u672C\u5185\u5BB9",placeholder:"\u8BF7\u8F93\u5165\u6587\u672C\u5185\u5BB9\uFF0C\u652F\u6301html",value:i.text,key:"text",vShow:["sText"]},{label:"\u5B57\u4F53\u5927\u5C0F",placeholder:"\u6587\u672C\u5B57\u4F53\u5927\u5C0F,\u598214px",value:(s=i.style)==null?void 0:s.fontSize,key:"fontSize",path:"style",vShow:["text","clock"]},{label:"\u8FB9\u6846",placeholder:"\u59821px solid #000",value:(l=i.style)==null?void 0:l.border,key:"border",path:"style",vShow:["border"]},{type:"color",label:"\u80CC\u666F\u989C\u8272",value:(w=i.style)==null?void 0:w.background,key:"background",path:"style",vShow:["border"]},{type:"color",label:"\u5B57\u4F53\u989C\u8272",value:(y=i.style)==null?void 0:y.color,key:"color",path:"style",vShow:["text","clock"]},{type:"select",label:"\u65F6\u95F4\u683C\u5F0F",value:i.dateTime,key:"dateTime",allowCreate:!0,filterable:!0,placeholder:"\u9009\u62E9\u6216\u521B\u5EFA\u65F6\u95F4\u683C\u5F0F",vShow:["clock"],options:{"{y}-{m}-{d}":"{y}-{m}-{d}","{h}:{i}:{s}":"{h}:{i}:{s}","{y}-{m}-{d} {h}:{i}:{s}":"{y}-{m}-{d} {h}:{i}:{s}","{y}\u5E74{m}\u6708{d}\u65E5 {h}:{i}:{s} \u661F\u671F{w}":"{y}\u5E74{m}\u6708{d}\u65E5 {h}:{i}:{s} \u661F\u671F{w}"}},{label:"\u7EC4\u4EF6\u540D\u79F0",value:i.component,placeholder:"\u5168\u5C40\u6CE8\u518C\u7684\u7EC4\u4EF6\u540D\u79F0",key:"component",vShow:["component"]},{type:"switch",label:"\u662F\u5426\u8F6E\u64AD",value:i.carousel,key:"carousel",vShow:["table"]},{type:"number",label:"\u6EDA\u52A8\u901F\u5EA6",placeholder:"\u5F00\u542F\u8F6E\u64AD\u6709\u6548",value:i.speed,key:"speed",vShow:["table"]}].filter(N=>{let F=!0;return N.vShow&&(F=N.vShow.includes(X)),N.vHide&&(F=!N.vHide.includes(X)),F})}return[]}),E=(s,l)=>{var w;s.path==="position"?a.value.position[s.key]=l:s.path==="style"?((w=a.value.config)!=null&&w.style||(a.value.config.style={}),a.value.config.style[s.key]=l):a.value.config[s.key]=l,["zIndex","display","lock"].includes(s.key)&&v("update")},g=(s,l)=>{L.value.open(s,l)},O=(s,l)=>{switch(l){case"screenBg":_.bgUpload=s,k();break;case"src":a.value.config.src=s;break}},S=()=>{v("openDrawer",{codeType:"css",type:"css",title:"\u5F53\u524D\u5E94\u7528\u9875\u7684\u6837\u5F0F\uFF0C\u7C7B\u4F3C\u4E8E.vue\u6587\u4EF6\u4E2D\u7684style scoped\u4E2D\u7684\u6837\u5F0F"})},H=()=>{v("openDrawer",{content:a.value.option,title:"\u53EF\u53C2\u8003echarts\u76F8\u5173\u4F8B\u5B50\u7F16\u8F91",callback:s=>{a.value.option=s}})},Z=()=>{var s;v("openDrawer",{codeType:"json",content:((s=a.value.config)==null?void 0:s.style)||{},title:"\u53EF\u8F93\u5165\u66F4\u591A\u7684css\u6837\u5F0F\uFF0C\u987B\u4E3Ajson\u683C\u5F0F",callback:l=>{a.value.config.style=l}})},R=()=>{var s;v("openDrawer",{codeType:"json",content:((s=a.value.config)==null?void 0:s.props)||{},title:"\u652F\u6301\u6240\u6709\u8868\u683Cprops\u5C5E\u6027\uFF0C\u53EF\u53C2\u8003el-table\u3002json\u683C\u5F0F",callback:l=>{a.value.config.props=l}})},z=()=>{let s=a.value.columns;(!s||!s.length)&&(s=[{prop:"",label:""}]),v("openDrawer",{codeType:"json",content:s,title:"\u8868\u683C\u5217\u8BBE\u7F6E\uFF0C\u53EF\u53C2\u8003table-column\u5C5E\u6027",callback:l=>{a.value.columns=l}})},ee=(s,l)=>{let w;l==="global"?w=p.config&&p.config[s]:w=a.value.events&&a.value.events[s],w||(s==="beforeRequest"?w=y=>(console.log("beforeRequest",y),y):l==="global"?w=y=>(console.log("afterResponse",y),y):w=(y,i,C)=>(console.log("afterResponse",y,i,C),i)),v("openDrawer",{content:w,title:s==="beforeRequest"?"\u8FD9\u91CC\u53EF\u5904\u7406\u8BF7\u6C42\u524D\u7684\u53C2\u6570\uFF0C\u8FD4\u56DE\u76F8\u5E94\u53C2\u6570\u7ED9\u63A5\u53E3":"\u63A5\u53E3\u6570\u636E\u5904\u7406\u3002\u4E5F\u53EF\u4E3A\u5B57\u7B26\u4E32\uFF0C\u5982opt=formatTest",callback:y=>{l==="global"?p.config[s]=y:(a.value.events||(a.value.events={}),a.value.events[s]=y)}})},ce=()=>{var y,i;let s,l;const w=a.value.config.optionsType;w===2?(l="\u4ECE\u5927\u5C4F\u914D\u7F6E\u7684\u5168\u5C40\u6570\u636E\u91CC\u83B7\u53D6\u6307\u5B9A\u6570\u636E",s=(y=a.value.events)==null?void 0:y.getGlobal,s||(s=(C,X)=>(console.log("getGlobalData",C,X),C))):(l="\u56FE\u8868\u6570\u636E\uFF0C\u66FF\u6362\u76F8\u5173\u6570\u636E\u8FD4\u56DE\u5373\u53EF",["text","sText"].includes(o.value)?(s=(i=a.value.config)==null?void 0:i.text,l="\u7F16\u8F91\u6587\u672C\u5185\u5BB9\u6570\u636E"):s=a.value.option,o.value==="table"&&(l="\u8868\u683C\u5217\u8868\u6570\u636E\u3002\u6839\u636E\u8BBE\u5B9A\u7684table-column\u5217\u6570\u636E\u8BBE\u7F6E\u5BF9\u5E94\u7684\u6570\u636E")),v("openDrawer",{content:s,title:l,callback:C=>{w===2?(a.value.events||(a.value.events={}),a.value.events.getGlobal=C):["text","sText"].includes(o.value)?a.value.config.text=C:a.value.option=C}})};return $({setCurrent:x}),(s,l)=>{var D;const w=B("el-switch"),y=B("el-color-picker"),i=B("el-input"),C=B("el-option"),X=B("el-select"),N=B("el-input-number"),F=B("el-form-item"),q=B("el-button"),oe=B("el-form"),ue=B("el-tab-pane"),ne=B("el-radio"),c=B("el-radio-group"),n=B("el-tabs"),h=B("el-slider");return d(),A("div",{class:W(["main-right",{lock:(D=a.value.config)==null?void 0:D.lock}])},[Object.keys(a.value).length?(d(),T(n,{key:0,class:"tabs","model-value":"screen"},{default:u(()=>[e(ue,{label:"\u4F4D\u7F6E\u5C5E\u6027",name:"screen"},{default:u(()=>[e(oe,{size:"small"},{default:u(()=>[(d(!0),A(G,null,Q(U(f),(t,K)=>(d(),T(F,{label:t.label,key:K},{default:u(()=>[t.type==="group"?(d(),A("h3",Qe,le(t.title),1)):t.type==="switch"?(d(),T(w,{key:1,"model-value":t.value,onChange:b=>E(t,b),class:W([t.key])},null,8,["model-value","onChange","class"])):t.type==="color"?(d(),T(y,{key:2,"show-alpha":"",onChange:b=>E(t,b),"model-value":t.value},null,8,["onChange","model-value"])):t.type==="textarea"?(d(),T(i,{key:3,type:"textarea",placeholder:t.placeholder,onChange:b=>E(t,b),"model-value":t.value},null,8,["placeholder","onChange","model-value"])):t.type==="select"?(d(),T(X,{key:4,allowCreate:t.allowCreate,filterable:t.filterable,placeholder:t.placeholder,onChange:b=>E(t,b),"model-value":t.value},{default:u(()=>[(d(!0),A(G,null,Q(t.options,(b,P)=>(d(),T(C,{key:b,label:b,value:P},null,8,["label","value"]))),128))]),_:2},1032,["allowCreate","filterable","placeholder","onChange","model-value"])):t.type==="number"?(d(),T(N,{key:5,"controls-position":"right",placeholder:t.placeholder,"model-value":t.value,onInput:b=>E(t,b)},null,8,["placeholder","model-value","onInput"])):(d(),T(i,{key:6,placeholder:t.placeholder,"model-value":t.value,onInput:b=>E(t,b)},null,8,["placeholder","model-value","onInput"]))]),_:2},1032,["label"]))),128)),["image","background"].includes(U(o))?(d(),T(F,{key:0,class:"upload-image"},{default:u(()=>[e(i,{placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",modelValue:a.value.config.src,"onUpdate:modelValue":l[0]||(l[0]=t=>a.value.config.src=t)},null,8,["modelValue"]),e(q,{type:"primary",onClick:l[1]||(l[1]=t=>g(U(o)==="image"?"img":"bg","src"))},{default:u(()=>[Ze]),_:1})]),_:1})):Y("",!0),["line","bar","pie","echarts"].includes(U(o))?(d(),T(F,{key:1},{default:u(()=>[e(q,{type:"primary",onClick:H},{default:u(()=>[el]),_:1})]),_:1})):Y("",!0),["text","sText","image","background","border","clock"].includes(U(o))?(d(),T(F,{key:2},{default:u(()=>[e(q,{type:"primary",onClick:Z},{default:u(()=>[ll]),_:1})]),_:1})):Y("",!0),["table"].includes(U(o))?(d(),T(F,{key:3},{default:u(()=>[e(q,{type:"primary",onClick:R},{default:u(()=>[tl]),_:1}),e(q,{type:"primary",onClick:z},{default:u(()=>[ol]),_:1})]),_:1})):Y("",!0)]),_:1})]),_:1}),e(ue,{label:"\u6570\u636E",name:"data"},{default:u(()=>[["line","bar","pie","echarts","text","sText","table"].includes(U(o))?(d(),T(oe,{key:0,size:"small"},{default:u(()=>[e(F,{label:"\u6570\u636E\u7C7B\u578B"},{default:u(()=>[e(c,{modelValue:a.value.config.optionsType,"onUpdate:modelValue":l[2]||(l[2]=t=>a.value.config.optionsType=t)},{default:u(()=>[e(ne,{label:0,style:{"margin-right":"4px"}},{default:u(()=>[ul]),_:1}),e(ne,{label:2,style:{"margin-right":"4px"}},{default:u(()=>[nl]),_:1}),e(ne,{label:1},{default:u(()=>[al]),_:1})]),_:1},8,["modelValue"])]),_:1}),a.value.config.optionsType!==1?(d(),T(F,{key:0},{default:u(()=>[e(q,{type:"primary",onClick:ce},{default:u(()=>[sl]),_:1})]),_:1})):Y("",!0),a.value.config.optionsType===1?(d(),A(G,{key:1},[e(F,null,{default:u(()=>[e(i,{modelValue:a.value.config.requestUrl,"onUpdate:modelValue":l[4]||(l[4]=t=>a.value.config.requestUrl=t),placeholder:"\u63A5\u53E3URL\u6216api\u4E2D\u7684key"},{prepend:u(()=>[e(X,{modelValue:a.value.config.method,"onUpdate:modelValue":l[3]||(l[3]=t=>a.value.config.method=t),style:{width:"60px"}},{default:u(()=>[e(C,{label:"get",value:"get"}),e(C,{label:"post",value:"post"}),e(C,{label:"ws",value:"ws",disabled:""})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(F,{label:"\u5237\u65B0\u65F6\u95F4"},{default:u(()=>[e(N,{modelValue:a.value.config.loopTime,"onUpdate:modelValue":l[5]||(l[5]=t=>a.value.config.loopTime=t),disabled:""},null,8,["modelValue"])]),_:1}),e(F,null,{default:u(()=>[il]),_:1}),e(F,null,{default:u(()=>[e(q,{onClick:l[6]||(l[6]=t=>ee("beforeRequest"))},{default:u(()=>[cl]),_:1})]),_:1}),e(F,null,{default:u(()=>[e(q,{onClick:l[7]||(l[7]=t=>ee("afterResponse"))},{default:u(()=>[rl]),_:1})]),_:1})],64)):Y("",!0)]),_:1})):Y("",!0)]),_:1})]),_:1})):(d(),T(n,{key:1,class:"tabs","model-value":"screen"},{default:u(()=>[e(ue,{label:"\u5927\u5C4F\u914D\u7F6E",name:"screen"},{default:u(()=>[e(oe,{size:"small"},{default:u(()=>[e(F,{label:"\u5927\u5C4F\u5BBD\u5EA6"},{default:u(()=>[e(i,{placeholder:"\u8BF7\u8F93\u5165\u5927\u5C4F\u5BBD\u5EA6","model-value":V.config.width,onInput:l[8]||(l[8]=t=>r("width",t))},null,8,["model-value"])]),_:1}),e(F,{label:"\u5927\u5C4F\u9AD8\u5EA6"},{default:u(()=>[e(i,{placeholder:"\u8BF7\u8F93\u5165\u5927\u5C4F\u9AD8\u5EA6","model-value":V.config.height,onInput:l[9]||(l[9]=t=>r("height",t))},null,8,["model-value"])]),_:1}),e(F,{class:"color-picker",label:"\u4E3B\u8272"},{default:u(()=>[e(y,{"show-alpha":"",onChange:l[10]||(l[10]=t=>r("primary",t)),"model-value":V.config.primary},null,8,["model-value"])]),_:1}),e(F,{label:"\u80CC\u666F"},{default:u(()=>[e(X,{modelValue:_.bgSelect,"onUpdate:modelValue":l[11]||(l[11]=t=>_.bgSelect=t),onChange:k},{default:u(()=>[e(C,{value:1,label:"\u80CC\u666F\u8272"}),e(C,{value:2,label:"\u6E10\u53D8\u8272"}),e(C,{value:3,label:"\u80CC\u666F\u56FE"})]),_:1},8,["modelValue"])]),_:1}),_.bgSelect!==3?(d(),T(F,{key:0,class:"color-picker"},{default:u(()=>[e(y,{"show-alpha":"",modelValue:_.bgColor,"onUpdate:modelValue":l[12]||(l[12]=t=>_.bgColor=t),onChange:k},null,8,["modelValue"])]),_:1})):Y("",!0),_.bgSelect===2?(d(),A(G,{key:1},[e(F,{class:"color-picker"},{default:u(()=>[e(y,{"show-alpha":"",modelValue:_.bgLinear,"onUpdate:modelValue":l[13]||(l[13]=t=>_.bgLinear=t),onChange:k},null,8,["modelValue"])]),_:1}),e(F,{label:"\u6E10\u53D8\u89D2\u5EA6"},{default:u(()=>[e(h,{modelValue:_.bgAngle,"onUpdate:modelValue":l[14]||(l[14]=t=>_.bgAngle=t),max:360,onChange:k},null,8,["modelValue"])]),_:1})],64)):Y("",!0),_.bgSelect===3?(d(),T(F,{key:2,class:"upload-image"},{default:u(()=>[e(i,{placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",modelValue:_.bgUpload,"onUpdate:modelValue":l[15]||(l[15]=t=>_.bgUpload=t),onChange:k},null,8,["modelValue"]),e(q,{type:"primary",onClick:l[16]||(l[16]=t=>g("bg","screenBg"))},{default:u(()=>[dl]),_:1})]),_:1})):Y("",!0),e(F,null,{default:u(()=>[e(q,{onClick:S},{default:u(()=>[pl]),_:1})]),_:1}),e(F,null,{default:u(()=>[fl]),_:1}),e(F,null,{default:u(()=>[e(i,{"model-value":V.config.requestUrl,placeholder:"\u63A5\u53E3URL\u6216api\u4E2D\u7684key",onInput:l[18]||(l[18]=t=>r("requestUrl",t))},{prepend:u(()=>[e(X,{"model-value":V.config.method,style:{width:"60px"},onChange:l[17]||(l[17]=t=>r("method",t))},{default:u(()=>[e(C,{label:"get",value:"get"}),e(C,{label:"post",value:"post"}),e(C,{label:"ws",value:"ws",disabled:""})]),_:1},8,["model-value"])]),_:1},8,["model-value"])]),_:1}),e(F,{label:"\u5237\u65B0\u65F6\u95F4"},{default:u(()=>[e(N,{disabled:"","model-value":V.config.loopTime,onInput:l[19]||(l[19]=t=>r("loopTime",t))},null,8,["model-value"])]),_:1}),e(F,null,{default:u(()=>[gl]),_:1}),e(F,null,{default:u(()=>[e(q,{onClick:l[20]||(l[20]=t=>ee("beforeRequest","global"))},{default:u(()=>[vl]),_:1})]),_:1}),e(F,null,{default:u(()=>[e(q,{onClick:l[21]||(l[21]=t=>ee("afterResponse","global"))},{default:u(()=>[ml]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})),e(Je,{ref_key:"uploadImageEl",ref:L,onClick:O},null,512)],2)}}}),hl={class:"main-left"},yl={class:"components-list scroll"},Fl={class:"title"},_l=["title"],El={class:"scroll layer-list"},Cl=["onClick"],kl=["onClick"],wl=["onClick"],Bl=m("i",{class:"icon-del"},null,-1),xl=ae({__name:"controlLeft",props:{active:null},emits:["update","update:active"],setup(V,{expose:$,emit:v}){const p={line:["\u6298\u7EBF\u56FE","line"],bar:["\u67F1\u72B6\u56FE","bar"],pie:["\u997C\u56FE","pie"],echarts:["\u901A\u7528\u56FE\u8868",""],table:["\u8868\u683C","table"],text:["\u6587\u672C","text2"],sText:["\u6EDA\u52A8\u6587\u672C","stext"],image:["\u56FE\u7247","image"],background:["\u80CC\u666F","image"],border:["\u8FB9\u6846","border"],clock:["\u5F53\u524D\u65F6\u95F4","time"],component:["\u81EA\u5B9A\u4E49","component"]},a=M([]),L=M([{label:"\u56FE\u8868",children:[{type:"line",label:p.line[0],icon:p.line[1],position:{width:400,height:300},option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[150,230,224,218,135,147,260],type:"line"}]}},{type:"bar",label:p.bar[0],icon:p.bar[1],position:{width:400,height:300},option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[120,200,150,80,70,110,130],type:"bar"}]}},{type:"pie",label:p.pie[0],icon:p.pie[1],position:{width:300,height:300},option:{series:[{type:"pie",radius:"50%",data:[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:300,name:"Video Ads"}]}]}},{type:"echarts",label:p.echarts[0],icon:p.echarts[1],position:{width:400,height:300},option:{}}]},{label:"\u8868\u683C",children:[{type:"table",label:p.table[0],icon:p.table[1],position:{width:500,height:300},option:[],columns:[]}]},{label:"\u8F85\u52A9",children:[{type:"text",label:p.text[0],icon:p.text[1],position:{width:100,height:30},config:{text:"\u6587\u672C\u5185\u5BB9"}},{type:"sText",label:p.sText[0],icon:p.sText[1],position:{width:100,height:30},config:{text:"\u6EDA\u52A8\u6587\u672C\u5185\u5BB9"}},{type:"image",label:p.image[0],icon:p.image[1],position:{width:100,height:50},config:{src:""}},{type:"background",label:p.background[0],icon:p.background[1],position:{width:100,height:50},config:{src:""}},{type:"border",label:p.border[0],icon:p.border[1],position:{width:100,height:100},config:{style:{border:"1px solid #fff"}}}]},{label:"\u5176\u4ED6",children:[{type:"clock",label:p.clock[0],icon:p.clock[1],position:{width:150,height:30}}]},{label:"\u81EA\u5B9A\u4E49\u7EC4\u4EF6",children:[{type:"component",label:p.component[0],icon:p.component[1],position:{width:200,height:200},config:{}}]}]),o=k=>_e(k),j=(k,r)=>{let x=!1;switch(r){case"display":x=!k.display,k.display=x;break;case"lock":x=!k.lock,k.lock=x;break;case"active":v("update:active",k.index);break}v("update",r,k.index,x)};return $({setLayer:k=>{const r=[];k.forEach((x,f)=>{r.push({label:p[x.type][0],icon:p[x.type][1],zIndex:x.position.zIndex||0,display:x.position.display,lock:x.config.lock,index:f})}),a.value=r.sort((x,f)=>x.icon.localeCompare(f.icon))}}),(k,r)=>{const x=B("el-tab-pane"),f=B("el-popconfirm"),E=B("el-tabs");return d(),A("div",hl,[e(E,{"model-value":"component",class:"tabs"},{default:u(()=>[e(x,{label:"\u7EC4\u4EF6",name:"component"},{default:u(()=>[m("div",yl,[(d(!0),A(G,null,Q(L.value,(g,O)=>(d(),A("div",{key:O},[m("div",Fl,le(g.label),1),e(U(Fe),{itemKey:"label",tag:"ul",modelValue:g.children,"onUpdate:modelValue":S=>g.children=S,group:{name:"form",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:o},{item:u(({element:S})=>[m("li",{class:W([S.type])},[m("i",{class:W(`icon-${S.icon}`)},null,2),m("span",{title:S.label},le(S.label),9,_l)],2)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))])]),_:1}),e(x,{label:"\u56FE\u5C42",name:"layer"},{default:u(()=>[m("div",El,[m("ul",null,[(d(!0),A(G,null,Q(a.value,(g,O)=>(d(),A("li",{key:O,class:W({active:V.active===g.index,lock:g.lock,display:g.display})},[m("span",{onClick:S=>j(g,"active")},[m("i",{class:W(`icon-${g.icon}`)},null,2),I(" "+le(g.label),1)],8,Cl),m("i",{onClick:S=>j(g,"display"),class:W(["icon",[g.display?"icon-eye-close":"icon-eye"]])},null,10,kl),m("i",{onClick:S=>j(g,"lock"),class:W(["icon",[g.lock?"icon-lock":"icon-lock-open"]])},null,10,wl),e(f,{title:"\u786E\u8BA4\u5220\u9664",onConfirm:S=>j({index:g.index},"del")},{reference:u(()=>[Bl]),_:2},1032,["onConfirm"])],2))),128))])])]),_:1})]),_:1})])}}}),Dl=["onMousedown"],be=ae({__name:"ruler",props:{direction:{default:"h"},scale:null,offset:null,showRuler:{type:Boolean},showLine:{type:Boolean},size:null,scroll:null},setup(V){const $=V,v=ie({leftTop:0,moveFlag:!1,moveLine:!1,line:[]}),p=J(()=>{let f={};return $.direction==="v"&&$.scroll[0]>0&&(f={left:$.scroll[0]+20+"px"}),{width:$.size,...f}}),a=J(()=>{let f;return $.direction==="h"?f={left:v.leftTop+"px"}:f={top:v.leftTop+"px"},{display:v.moveFlag?"block":"none",...f}}),L=J(()=>{const f=$.direction==="h"?1920:1080;let E=[];for(let g=0;g<f;g=g+100)E.push(g);return E}),o=f=>parseInt(`${f/$.scale*100}`),j=()=>{v.moveFlag=!0,document.onmousemove=f=>{if(!v.moveFlag)return;const E=parseInt(`${f.pageX-$.offset[0]+$.scroll[0]}`),g=parseInt(`${f.pageY-$.offset[1]+$.scroll[1]}`);v.leftTop=$.direction==="h"?E:g},document.onmouseup=function(){k()}},_=()=>{!v.moveFlag||v.line.includes(v.leftTop)||v.line.push(v.leftTop)},k=()=>{v.moveFlag=!1,document.onmousemove=null,document.onmouseup=null},r=f=>$.direction==="h"?{left:f+"px"}:{top:f+"px"},x=(f,E,g)=>{v.moveLine=!0;const O=g.pageX-E,S=g.pageY-E;document.onmousemove=H=>{if(!v.moveLine)return;const Z=parseInt(`${H.pageX-O}`),R=parseInt(`${H.pageY-S}`),z=$.direction==="h"?Z:R;z<30?(v.line.splice(f,1),v.moveLine=!1):v.line[f]=z},document.onmouseup=function(){v.moveLine=!1,k()}};return(f,E)=>(d(),A(G,null,[de(m("div",{class:W(["screen-ruler",`ruler-${V.direction}`]),style:te(U(p))},[m("div",{class:"ruler-box",onMouseenter:j,onMouseleave:k,onMousedown:_},[(d(!0),A(G,null,Q(U(L),g=>(d(),A("span",{key:g},le(o(g)),1))),128))],32)],6),[[fe,V.showRuler]]),de(m("div",null,[m("div",{class:W(["ruler-line dotted",`line-${V.direction}`]),style:te(U(a))},[m("span",null,le(o(v.leftTop-20)),1)],6),(d(!0),A(G,null,Q(v.line,(g,O)=>(d(),A("div",{class:W(["ruler-line",`line-${V.direction}`]),key:g,style:te(r(g)),onMousedown:S=>x(O,g,S)},[m("span",null,le(o(g-20)),1)],46,Dl))),128))],512),[[fe,V.showLine]])],64))}});const Al={class:"container-screen"},$l={class:"main-box"},Sl={key:0,class:"no-date"},Tl={class:"design-footer"},Vl={class:"center"},Ll={class:"item"},Ul=m("label",{class:"label"},"\u6807\u5C3A",-1),Il={class:"item"},Rl=m("label",{class:"label"},"\u53C2\u8003\u7EBF",-1),zl={class:"item slider"},jl=m("label",{class:"label"},"\u7F29\u653E\u6BD4\u4F8B",-1),Ol={class:"item"},ql=I("\u81EA\u9002\u5E94 "),Nl=ae({__name:"index",setup(V){we().changeBreadcrumb([{label:"\u7CFB\u7EDF\u5DE5\u5177"},{label:"\u53EF\u89C6\u5316\u5927\u5C4F\u8BBE\u8BA1"}]);const v=Be(),p=xe(),a=re("screenToolWidthLeft")||"",L=re("screenToolWidthRight")||"",o=ie({showLine:!0,scale:100,autoScale:100,ruler:!0,widthLeft:a==="0"?"":a,widthRight:L==="0"?"":L,offset:[],scroll:[0,0],translateX:0,translateY:0,moveFlag:!1,loading:!1,isEye:!1,active:null}),j=M(),_=M(),k=M(),r=M({list:[],config:{width:"1920px",height:"1080px",background:"#000",style:"",primary:"#409eff"}}),x=M({});Ie("globalScreen",x);const f=J(()=>{const{width:c,height:n,background:h,primary:D}=r.value.config,t=o.scale/100;return{width:c,height:n,background:h,transform:`scale(${t})`,color:D}}),E=()=>{o.active=null,w({})},g=(c,n)=>{o.active=n,w(c)},O=(c,n)=>{if(n==="del")r.value.list.splice(c,1),E();else if(n==="clone"){const h=_e(r.value.list[c]);r.value.list.push(h);const D=r.value.list.length-1;g(h,D)}y()},S=M({100:{style:{}}}),H=c=>{let n;c==="Left"?(o.widthLeft=o.widthLeft===""?"0px":"",n=o.widthLeft,setTimeout(()=>{z()},500)):(o.widthRight=o.widthRight===""?"0px":"",n=o.widthRight),re("screenToolWidth"+c,n||"0")},Z=()=>{o.scale=o.autoScale},R=M(),z=()=>{ye(()=>{const c=R.value.offsetWidth,n=parseInt(r.value.config.width);if(c&&n){const D=parseInt(`${c/n*100}`);o.autoScale=D,o.scale=D}const h=R.value.getBoundingClientRect();o.offset[1]=h.top+(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),o.offset[0]=h.left+(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0)})},ee=c=>{o.moveFlag=!0;const n=R.value.scrollTop,h=R.value.scrollLeft,D=c.pageX+h,t=c.pageY+n;document.onmousemove=K=>{if(!o.moveFlag)return;const b=D-K.pageX,P=t-K.pageY;R.value.scrollTo(b,P)},document.onmouseup=function(){o.moveFlag=!1,document.onmousemove=null}},ce=()=>{const c=R.value.scrollTop,n=R.value.scrollLeft;o.scroll=[n,c]},s=c=>{c.preventDefault()},l=c=>{const n=c.newIndex,h=r.value.list[n];delete h.label,delete h.icon;const{pageX:D,pageY:t}=c.originalEvent;h.position||(h.position={}),h.config||(h.config={}),h.position.left=parseInt(`${D-o.offset[0]+o.scroll[0]}`),h.position.top=parseInt(`${t-o.offset[1]+o.scroll[1]}`),o.active=n,w(h),y()},w=c=>{j.value.setCurrent(c)},y=()=>{_.value.setLayer(r.value.list)},i=ie({visible:!1,title:"",direction:"",content:"",codeType:"",callback:""}),C=()=>{F()},X=c=>{try{if(typeof i.callback=="function"){const n=i.codeType==="json"?Te(c):ge(c);i.callback(n)}else switch(i.type){case"css":r.value.config.style=c,Ve("screenStyle",c,!0);break;case"json":r.value=ge(c),y();break}F()}catch{}},N=c=>{const{type:n,direction:h,codeType:D,title:t,callback:K,content:b}=c;i.direction=h||"ltr",i.type=n,i.codeType=D||"",i.title=t?`\u63D0\u793A\uFF1A${t}`:"",i.visible=!0,i.callback=K;let P=D==="json"?Le(b,!0):ve(b,!0);switch(n){case"css":P=r.value.config.style||"";break}i.content=P},F=()=>{i.visible=!1,i.type="",i.title="",i.codeType="",i.callback="",i.content=""},q=c=>{switch(c){case"del":r.value.list=[],E(),y();break;case"eye":o.isEye=!0;break;case"json":N({type:"json",content:r.value,title:"\u53EF\u7F16\u8F91\u4FEE\u6539\u6216\u5C06\u5DF2\u751F\u6210\u7684\u811A\u672C\u7C98\u8D34\u8FDB\u6765"});break;case"vue":k.value.openScreen(r.value);break;case"save":oe();break}},oe=()=>{let c={data:ve(r.value),name:"\u672A\u547D\u540D\u53EF\u89C6\u5316\u5927\u5C4F",type:4},n="designSave";const h=v.query.id;h&&(Object.assign(c,{id:h}),delete c.name,n="designEdit"),o.loading=!0,Ue(n,c).then(D=>{me({message:D.message||"\u4FDD\u5B58\u6210\u529F\uFF01",type:"success"}),h||p.push({path:"/design/dataScreen/list"}),o.loading=!1}).catch(D=>{me.error(D.message||"\u4FDD\u5B58\u5F02\u5E38"),o.loading=!1}),E()},ue=()=>{o.loading=!0,Oe(v.query.id).then(c=>{o.loading=!1,r.value=c,y();const{requestUrl:n,afterResponse:h,beforeRequest:D,method:t}=r.value.config;n&&qe(n,h,D,t).then(K=>{x.value=K})}).catch(()=>{o.loading=!1})},ne=(c,n,h)=>{switch(c){case"display":case"zIndex":r.value.list[n].position[c]=h;break;case"lock":r.value.list[n].config[c]=h;break;case"del":return O(n,"del")}w(r.value.list[n])};return he(()=>{z(),ue()}),(c,n)=>{const h=B("el-switch"),D=B("el-slider"),t=B("el-button"),K=De("loading");return de((d(),A("div",Al,[o.isEye?(d(),A("i",{key:0,class:"icon-close close-preview",onClick:n[0]||(n[0]=b=>o.isEye=!1)})):Y("",!0),e(xl,{style:te({width:o.widthLeft}),ref_key:"controlLeftEl",ref:_,active:o.active,"onUpdate:active":n[1]||(n[1]=b=>o.active=b),onUpdate:ne},null,8,["style","active"]),m("div",$l,[e(Re,{onClick:q}),m("div",{class:"design-box",ref_key:"designBoxEl",ref:R,onScroll:ce},[e(be,{size:"1920px",scale:o.scale,offset:o.offset,scroll:o.scroll,"show-ruler":o.ruler,"show-line":o.showLine},null,8,["scale","offset","scroll","show-ruler","show-line"]),e(be,{size:"1080px",scale:o.scale,offset:o.offset,scroll:o.scroll,"show-ruler":o.ruler,"show-line":o.showLine,direction:"v"},null,8,["scale","offset","scroll","show-ruler","show-line"]),m("div",{onMousedown:ee,class:W(["design-canvas",{preview:o.isEye}]),style:te(U(f)),onClick:E,onContextmenu:s},[e(U(Fe),Se({itemKey:"id",list:r.value.list,name:"fade",class:"drag"},{group:"form",animation:200,handle:".none"},{onAdd:l}),{item:u(({element:b,index:P})=>[e(Ae,{data:b,onClick:$e(pe=>g(b,P),["stop"]),type:0,current:P===o.active,onControlClick:pe=>O(P,pe)},null,8,["data","onClick","current","onControlClick"])]),_:1},16,["list"])],38),r.value.list.length?Y("",!0):(d(),A("div",Sl,"\u8BF7\u4ECE\u5DE6\u5219\u7EC4\u4EF6\u680F\u62D6\u52A8\u7EC4\u4EF6\u5230\u8BBE\u8BA1\u533A\u57DF "))],544),m("div",Tl,[m("i",{class:"icon-menu icon",onClick:n[2]||(n[2]=b=>H("Left"))}),m("div",Vl,[m("div",Ll,[Ul,e(h,{size:"small",modelValue:o.ruler,"onUpdate:modelValue":n[3]||(n[3]=b=>o.ruler=b)},null,8,["modelValue"])]),m("div",Il,[Rl,e(h,{size:"small",modelValue:o.showLine,"onUpdate:modelValue":n[4]||(n[4]=b=>o.showLine=b)},null,8,["modelValue"])]),m("div",zl,[jl,e(D,{"show-stops":"",max:200,min:o.autoScale-5,size:"small",marks:S.value,modelValue:o.scale,"onUpdate:modelValue":n[5]||(n[5]=b=>o.scale=b)},null,8,["min","marks","modelValue"])]),m("div",Ol,[e(t,{type:"primary",link:"",onClick:Z},{default:u(()=>[ql]),_:1})])]),m("i",{class:"icon-menu icon",onClick:n[6]||(n[6]=b=>H("Right"))})])]),e(bl,{style:te({width:o.widthRight}),config:r.value.config,"onUpdate:config":n[7]||(n[7]=b=>r.value.config=b),onOpenDrawer:N,onUpdate:y,ref_key:"configEl",ref:j},null,8,["style","config"]),e(je,{modelValue:i.visible,"onUpdate:modelValue":n[8]||(n[8]=b=>i.visible=b),title:i.title,direction:i.direction,content:i.content,"code-type":i.codeType,onBeforeClose:C,onConfirm:X},null,8,["modelValue","title","direction","content","code-type"]),e(ze,{ref_key:"vueFileEl",ref:k},null,512)])),[[K,o.loading]])}}});export{Nl as default};
