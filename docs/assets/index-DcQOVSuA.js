import{d as k,l as o,G as E,p as L,r as x,o as S,c as V,i as q,g as h,x as w,N as C,k as B,u as M,A as T,J as F,q as K,I as U,y,ah as $,ai as z,E as I}from"./index-CDYjrzCG.js";const A=["src"],D=k({__name:"code",props:{placeholder:{}},emits:["update:modelValue","focus"],setup(r,{emit:_}){const m=_,t=o(""),c=o(),n=o("");E(()=>t.value,()=>{m("update:modelValue",t.value)});const l=()=>{m("focus",n.value,u)},u=()=>{w("getCaptcha",{}).then(d=>{const{base64:s,codeId:i}=d.data;c.value="data:image/png;base64,"+s,n.value=i}).catch(()=>{})};return L(()=>{u()}),(d,s)=>{const i=x("el-input");return S(),V("div",null,[q(i,{placeholder:d.placeholder,modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=e=>t.value=e),onFocus:l},null,8,["placeholder","modelValue"]),h("img",{src:c.value,class:"img",alt:"",onClick:u},null,8,A)])}}}),G=C(D,[["__scopeId","data-v-9f6e29df"]]),J=r=>($("data-v-7bbcab32"),r=r(),z(),r),P={class:"login"},j={class:"main"},H=J(()=>h("h3",null,"后台管理系统",-1)),R=k({__name:"index",setup(r){const _=o(),m=B(),t=M(),c=T(),n=o(),l=o(),u=o({list:[{type:"input",control:{prefixIcon:"User",modelValue:"admin",placeholder:"请输入登录账号"},config:{},name:"userName",formItem:{label:"用户名",hideLabel:!0},customRules:[{type:"required",message:"请输入登录账号",trigger:"blur"}]},{type:"password",control:{prefixIcon:"Lock",modelValue:"123456",placeholder:"请输入密码"},config:{},name:"password",formItem:{label:"密码",hideLabel:!0},customRules:[{type:"required",message:"请输入密码",trigger:"blur"}]},{type:"component",control:{modelValue:"",placeholder:"请输入验证码",onFocus:(e,a)=>{n.value=e,l.value=a}},config:{componentName:F(G)},name:"code",formItem:{label:"验证码",hideLabel:!0},customRules:[{type:"required",message:"请输入验证码",trigger:"blur"}]},{type:"button",control:{label:"登录",type:"primary",key:"submit"}}],form:{size:"default"},config:{}}),d=e=>(e.codeId=n.value,e),s=(e,a)=>{a?(m.setLoginInfo(e,!0),i().then(()=>{const p=c.query.redirect?c.query.redirect:"/";K(()=>{t.push({path:p})})})):l.value&&l.value()},i=()=>new Promise(e=>{w("userMenuList",{query:{status:1,navShow:1},extend:{sort:"sort asc"}}).then(a=>{var v;const p=((v=a.data)==null?void 0:v.list)||[],b=[],g=[];p.forEach(f=>{f.path&&b.push(f.path),f.type!==2&&g.push(f)});const N=U(g);y("formMenuList",N,0),y("resources",b,0),e({})})});return L(()=>{}),(e,a)=>{const p=x("ak-form");return S(),V("div",P,[h("div",j,[H,q(p,{ref_key:"formEl",ref:_,apiKey:{add:"loginSubmit"},after:s,data:u.value,before:d},null,8,["data"])])])}}});typeof I=="function"&&I(R);const Q=C(R,[["__scopeId","data-v-7bbcab32"]]);export{Q as default};
