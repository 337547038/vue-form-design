import{i as V,M as $,r as s,b as l,O as H,c as b,k as x,w as u,e as t,g as e,D as M,d as I,h as i,H as E,m as k,s as w,t as A,y as R}from"./index.67521be0.js";const j={class:"flow-detail-drawer"},G={class:"header"},J=t("div",{class:"face"},[t("i",{class:"icon-user"})],-1),K=t("div",{class:"name"},"\u5F20\u4E09\u603B",-1),P=i("\u603B\u88C1\u52A9\u7406\u5BA1\u6279\u4E2D"),Q={class:"button"},W=i("\u540C\u610F"),X=i("\u62D2\u7EDD"),Y=i("\u6D41\u8F6C"),Z={class:"form-info"},ee=t("div",{class:"flow-list"},null,-1),te=t("div",{class:"status"},[t("ul",null,[t("li",{class:"s1"},"\u25CF \u5DF2\u5B8C\u6210"),t("li",{class:"s2"},"\u25CF \u8FDB\u884C\u4E2D"),t("li",{class:"s3"},"\u25CF \u672A\u8FDB\u884C"),t("li",{class:"s4"},"\u25CF \u5DF2\u62D2\u7EDD"),t("li",{class:"s5"},"\u25CF \u8DF3\u8FC7")])],-1),ae=V({__name:"drawerCom",setup(T,{expose:F}){const a=$({visible:!1,formId:"",id:"",loading:!0}),D=o=>{a.visible=!0,a.id=o.formId,E(()=>{B(o)})},c=s(),m=s(),d=s({list:[],form:{}}),C=o=>(o.formId=a.formId,o.id=a.id,o),g=()=>{},B=o=>{const r={id:o.flowId};k("designById",r).then(_=>{c.value.setValue(w(_.data.data)),a.formId=_.data.source,k("designById",{id:_.data.source}).then(f=>{d.value=w(f.data.data),E(()=>{a.loading=!1})}),m.value.getData({formId:a.formId,id:a.id})})},p=s(),n=s({list:[{type:"divider",control:{},config:{},item:{label:"\u5BA1\u6279\u610F\u89C1"}},{type:"select",control:{modelValue:"",appendToBody:!0,placeholder:"\u8BF7\u9009\u62E9\u5E38\u7528\u5BA1\u6279\u610F\u89C1"},options:[{label:"\u540C\u610F",value:1},{label:"\u4E0D\u540C\u610F",value:2}],config:{optionsType:0,span:8},name:"type",item:{label:"\u5FEB\u9009\u5BA1\u6279\u610F\u89C1"}},{type:"textarea",control:{modelValue:""},config:{},name:"remark",item:{label:"\u5BA1\u6279\u610F\u89C1",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA1\u6279\u610F\u89C1",trigger:"change"}]}}],form:{size:"default"},config:{}}),v=({key:o,value:r})=>{o==="type"&&p.value.setValue({remark:r===1?"\u540C\u610F":"\u4E0D\u540C\u610F"})},q=s({columns:[{label:"\u8282\u70B9\u540D\u79F0",prop:"nodeName"},{label:"\u5904\u7406\u4EBA",prop:"name"},{label:"\u4EFB\u52A1\u72B6\u6001",prop:"status",config:{}},{label:"\u5F00\u59CB\u65F6\u95F4",prop:"startTime",config:{formatter:"{y}-{m}-{d} {h}:{i}:{s}"}},{label:"\u7ED3\u675F\u65F6\u95F4",prop:"endTime",config:{formatter:"{y}-{m}-{d} {h}:{i}:{s}"}},{label:"\u5BA1\u6279\u610F\u89C1",prop:"remark"}],config:{columnsSetting:!1}});return F({open:D}),(o,r)=>{const _=l("el-tag"),f=l("el-button"),h=l("ak-form"),y=l("el-tab-pane"),L=l("ak-flow"),N=l("ak-list"),O=l("el-tabs"),U=l("el-drawer"),S=H("loading");return b(),x(U,{modelValue:a.visible,"onUpdate:modelValue":r[0]||(r[0]=z=>a.visible=z),"destroy-on-close":"","with-header":!1,size:"1200px"},{default:u(()=>[t("div",j,[t("div",G,[J,t("div",null,[K,e(_,null,{default:u(()=>[P]),_:1})]),t("div",Q,[e(f,{type:"success"},{default:u(()=>[W]),_:1}),e(f,{type:"danger"},{default:u(()=>[X]),_:1}),e(f,{type:"primary"},{default:u(()=>[Y]),_:1})])]),e(O,null,{default:u(()=>[e(y,{label:"\u8868\u5355\u4FE1\u606F"},{default:u(()=>[M((b(),I("div",Z,[e(h,{ref_key:"formEl",ref:m,formData:d.value,beforeSubmit:C,afterSubmit:g,type:2,requestUrl:"getFormContent",editUrl:"editFormContent"},null,8,["formData"]),e(h,{ref_key:"formOptionsEl",ref:p,formData:n.value,type:1,onChange:v},null,8,["formData"]),ee])),[[S,a.loading]])]),_:1}),e(y,{label:"\u6D41\u7A0B\u56FE",name:"flow",class:"flow-box"},{default:u(()=>[te,e(L,{type:1,ref_key:"flowEl",ref:c},null,512)]),_:1}),e(y,{label:"\u6D41\u8F6C\u8BB0\u5F55"},{default:u(()=>[e(N,{ref:"tableListEl",tableData:q.value},null,8,["tableData"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])}}});const oe=V({__name:"todo",setup(T){const F=s(),a=s({list:[{type:"input",control:{modelValue:"",placeholder:"\u8BF7\u8F93\u5165\u5BA1\u6279\u6807\u9898"},config:{},name:"title",item:{label:"\u5BA1\u6279\u6807\u9898"}},{type:"button",control:{label:"\u67E5\u8BE2",type:"primary",key:"submit"},config:{}},{type:"button",control:{label:"\u91CD\u7F6E"},config:{}}],form:{size:"default"},config:{}}),D=s({columns:[{prop:"title",label:"\u5BA1\u6279\u6807\u9898"},{prop:"creatTime",label:"\u53D1\u8D77\u65F6\u95F4",config:{formatter:"{y}-{m}-{d} {h}:{i}:{s}"}},{prop:"a",label:"\u6D41\u7A0B\u8282\u70B9"},{prop:"status",label:"\u6D41\u7A0B\u72B6\u6001"}],config:{requestUrl:"flowList",expand:!0}}),c=s(),m=d=>{c.value.open(d)};return(d,C)=>{const g=l("el-tag"),B=l("el-button"),p=l("ak-list");return b(),I("div",null,[e(p,{ref_key:"tableListEl",ref:F,requestUrl:"flowList",searchData:a.value,tableData:D.value},{status:u(({row:n})=>[n.status?(b(),x(g,{key:0},{default:u(()=>[i(A(n.status),1)]),_:2},1024)):R("",!0)]),title:u(({row:n})=>[e(B,{link:"",type:"primary",onClick:v=>m(n)},{default:u(()=>[i(A(n.title),1)]),_:2},1032,["onClick"])]),_:1},8,["searchData","tableData"]),e(ae,{ref_key:"drawerEl",ref:c},null,512)])}}});export{oe as default};
