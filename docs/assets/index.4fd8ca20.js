import{_ as Re,a as Ie}from"./vueFile.vue_vue_type_script_setup_true_lang.26e92c5e.js";import{d as ve,H as Ee,o as s,c as h,m as y,F as S,e as z,y as g,t as pe,l as Be,k as _,r as le,a as ue,N as $e,u as i,h as C,w as o,p as a,a6 as Le,I as Ae,q as x,a9 as Ne,g as me,s as Y,L as qe,aa as Te,ab as Ve,S as ze,V as Ce,E as Z,x as je,i as He,ac as Ke,b as Me,z as We,P as we,O as ge,X as ee,Y as he,J as Qe,C as Ge,$ as Se,a0 as xe,ad as Je}from"./index.ae153a4c.js";import{_ as Xe}from"./aceDrawer.vue_vue_type_script_setup_true_lang.938e7e60.js";const ye=[],be={optionsType:0},Ue=[{title:"\u57FA\u7840\u5B57\u6BB5",children:[{type:"input",label:"\u5355\u884C\u6587\u672C",icon:"input",control:{modelValue:""},config:{}},{type:"textarea",label:"\u591A\u884C\u6587\u672C",icon:"textarea",control:{modelValue:""},config:{}},{type:"radio",label:"\u5355\u9009\u6846\u7EC4",icon:"radio",control:{modelValue:""},options:ye,config:be},{type:"checkbox",label:"\u591A\u9009\u6846\u7EC4",icon:"checkbox",control:{modelValue:[]},options:ye,config:be},{type:"select",label:"\u4E0B\u62C9\u9009\u62E9\u6846",icon:"select",control:{modelValue:"",appendToBody:!0},options:ye,config:be},{type:"datePicker",label:"\u65E5\u671F\u9009\u62E9\u5668",icon:"date",control:{modelValue:"",type:"date"},config:{}},{type:"timePicker",label:"\u65F6\u95F4\u9009\u62E9\u5668",icon:"time",control:{modelValue:""},config:{}},{type:"colorPicker",label:"\u53D6\u8272\u5668",icon:"color",control:{modelValue:""},config:{}},{type:"switch",label:"\u5F00\u5173",icon:"switch",control:{modelValue:!1},config:{}},{type:"inputNumber",label:"\u8BA1\u6570\u5668",icon:"number",control:{modelValue:0},config:{}},{type:"cascader",label:"\u7EA7\u8054\u9009\u62E9\u5668",icon:"cascader",control:{modelValue:[]},options:[],config:be},{type:"rate",label:"\u8BC4\u5206",icon:"rate",control:{modelValue:0},config:{}},{type:"slider",label:"\u6ED1\u5757",icon:"slider",control:{modelValue:0},config:{}},{type:"treeSelect",label:"\u6811\u5F62\u63A7\u4EF6",icon:"tree2",control:{modelValue:"",data:[],renderAfterExpand:!1},config:{optionsType:0}},{type:"txt",label:"\u6587\u5B57",icon:"text",control:{modelValue:""},config:{}},{type:"title",label:"\u6807\u9898",icon:"title",control:{modelValue:"\u6807\u9898"},config:{}},{type:"button",label:"\u6309\u94AE",icon:"button",control:{label:"\u4FDD\u5B58"},config:{}}]},{title:"\u9AD8\u7EA7\u5B57\u6BB5",children:[{type:"table",label:"\u5B50\u8868",icon:"table",list:[],tableData:[],control:{border:!0},config:{addBtnText:"\u6DFB\u52A0\u4E00\u884C"}},{type:"component",label:"\u81EA\u5B9A\u4E49\u7EC4\u4EF6",icon:"component",control:{modelValue:""},config:{}},{type:"upload",label:"\u56FE\u7247/\u6587\u4EF6",icon:"image",control:{modelValue:""},config:{}},{type:"tinymce",label:"tinymce\u5BCC\u6587\u672C",icon:"tinymce",control:{modelValue:""},config:{}}]},{title:"\u5E03\u5C40\u5B57\u6BB5",children:[{type:"grid",label:"\u683C\u6805\u5E03\u5C40",icon:"grid",columns:[{attr:{span:12},list:[]},{attr:{span:12},list:[]}],control:{},config:{}},{type:"tabs",label:"\u6807\u7B7E\u9875",icon:"tabs",columns:[{label:"Tab1",list:[]}],control:{},config:{}},{type:"card",label:"\u5361\u7247\u5E03\u5C40",icon:"card",list:[],control:{},config:{},item:{}},{type:"flex",label:"\u5F39\u6027\u5E03\u5C40",icon:"flex",list:[],tableData:[],control:{},config:{addBtnText:"\u6DFB\u52A0\u4E00\u884C"}},{type:"divider",label:"\u5206\u5272\u7EBF",icon:"divider",control:{},config:{}},{type:"div",label:"div\u5BB9\u5668",icon:"div",control:{},config:{},list:[]}]},{title:"\u6269\u5C55\u7EC4\u4EF6",children:[{type:"expand-user",label:"\u9009\u62E9\u7528\u6237",icon:"user",control:{modelValue:""},config:{}}]}],Ye=""+new URL("test.c644ce60.png",import.meta.url).href,Ze=Ye,eu="\u6F14\u793Atest",uu={list:[{type:"input",control:{modelValue:""},config:{},name:"input1663920706618",item:{label:"\u5355\u884C\u6587\u672C"}}],form:{size:"default"}},lu=Object.freeze(Object.defineProperty({__proto__:null,imgPath:Ze,title:eu,formData:uu},Symbol.toStringTag,{value:"Module"})),tu=""+new URL("test2.ab129ef2.png",import.meta.url).href,au=tu,ou="\u6F14\u793Atest2",nu={list:[{type:"input",control:{modelValue:""},config:{},name:"input",item:{label:"\u5355\u884C\u6587\u672C"}},{type:"radio",control:{modelValue:""},options:[{label:"\u6807\u7B7E1",value:"value1"},{label:"\u6807\u7B7E2",value:"value2"},{label:"\u6807\u7B7E3",value:"value3"}],config:{optionsType:0},name:"radio1667180102980",item:{label:"\u5355\u9009\u6846\u7EC4"}},{type:"checkbox",control:{modelValue:[]},options:[{label:"\u6807\u7B7E1",value:"value1"},{label:"\u6807\u7B7E2",value:"value2"},{label:"\u6807\u7B7E3",value:"value3"}],config:{optionsType:0},name:"checkbox1667180107698",item:{label:"\u591A\u9009\u6846\u7EC4",showLabel:!1}},{type:"select",control:{modelValue:"",appendToBody:!0},options:[{label:"\u6807\u7B7E1",value:"value1"},{label:"\u6807\u7B7E2",value:"value2"},{label:"\u6807\u7B7E3",value:"value3"}],config:{optionsType:0},name:"select1667180110029",item:{label:"\u4E0B\u62C9\u9009\u62E9\u6846"}},{type:"datePicker",control:{modelValue:"",type:"date"},config:{},name:"datePicker1667180115571",item:{label:"\u65E5\u671F\u9009\u62E9\u5668"}},{type:"switch",control:{modelValue:!1},config:{},name:"switch1667180126483",item:{label:"\u5F00\u5173"}}],form:{labelWidth:"",class:"",size:"default",name:"form1663920704871"}},su=Object.freeze(Object.defineProperty({__proto__:null,imgPath:au,title:ou,formData:nu},Symbol.toStringTag,{value:"Module"})),ru={key:0,class:"no-date"},iu={key:1,class:"list"},cu=["onClick"],du=["src"],pu=ve({__name:"template",emits:["click"],setup(te,{expose:J,emit:U}){const w=Ee({visible:!1,list:[]}),F=()=>{w.visible=!0,n()},n=()=>{const l=Object.assign({"./template/test.ts":lu,"./template/test2.ts":su});console.log(l),w.list=[],Object.keys(l).forEach(T=>{const O=l[T];w.list.push({imgPath:O.imgPath,title:O.title,formData:O.formData})})},f=l=>{U("click",l.formData),w.visible=!1};return J({open:F}),(l,T)=>w.visible?(s(),h("div",{key:0,class:Be(["use-template",{active:w.visible}])},[y("span",{class:"close icon-close",onClick:T[0]||(T[0]=O=>w.visible=!1)}),w.list.length===0?(s(),h("div",ru,"\u6682\u65E0\u53EF\u7528\u6A21\u677F")):(s(),h("div",iu,[(s(!0),h(S,null,z(w.list,(O,X)=>(s(),h("div",{class:"item",key:X,onClick:K=>f(O)},[y("img",{src:O.imgPath,alt:""},null,8,du),g(pe(O.title),1)],8,cu))),128))]))],2)):_("",!0)}}),mu={class:"components-list"},fu={key:0},hu=y("div",{class:"title"},"\u5FEB\u901F\u9009\u62E9\u8868\u5355\u5B57\u6BB5",-1),bu={class:"content"},Eu={class:"title"},vu=["title"],Fu=ve({__name:"dragControl",props:{formId:null},emits:["clickCheck","click"],setup(te,{emit:J}){const U=te,w=Ne("formDesignType"),F=le([]),n=["input","radio","checkbox","select","datePicker","timePicker","inputNumber","cascader","component","button"],f=ue(()=>w==="search"),l=ue(()=>{if(w==="search"){const k=[];return Ue.forEach(D=>{if(D.children){const A=D.children.filter(W=>n.includes(W.type));A&&A.length&&k.push({title:D.title,children:A})}}),k}else return Ue}),T=k=>Ae(k);$e(()=>U.formId,k=>{k&&f.value&&O(k)});const O=k=>{me("designById",{id:k}).then(D=>{const A=Y(D.data.data);A&&A.list&&K(A.list)})},X=(k,D)=>{if(D){const A=Ae(k);delete A.rules,delete A.customRules,J("clickCheck",A)}},K=k=>{k.forEach(D=>{D.type==="grid"||D.type==="tabs"?D.columns.forEach(A=>{K(A.list)}):D.type==="card"?K(D.list):n.includes(D.type)&&D.type!=="button"&&F.value.push(D)})},b=le(),M=()=>{b.value.open()},ae=k=>{J("click",k)};return(k,D)=>{var W;const A=x("el-checkbox");return s(),h("div",mu,[i(f)&&((W=F.value)==null?void 0:W.length)?(s(),h("div",fu,[hu,y("div",bu,[(s(!0),h(S,null,z(F.value,q=>(s(),C(A,{key:q.name,onChange:m=>X(q,m)},{default:o(()=>{var m;return[g(pe((m=q.item)==null?void 0:m.label),1)]}),_:2},1032,["onChange"]))),128))])])):_("",!0),(s(!0),h(S,null,z(i(l),(q,m)=>(s(),h("div",{key:m},[y("div",Eu,[g(pe(q.title)+" ",1),m===0&&!i(f)?(s(),h("div",{key:0,class:"template",onClick:M},"\u4F7F\u7528\u6A21\u677F")):_("",!0)]),a(i(Le),{itemKey:"key123",tag:"ul",modelValue:q.children,"onUpdate:modelValue":p=>q.children=p,group:{name:"form",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:T},{item:o(({element:p})=>[y("li",{class:Be([p.type])},[y("i",{class:Be(`icon-${p.icon}`)},null,2),y("span",{title:p.label},pe(p.label),9,vu)],2)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128)),i(f)?_("",!0):(s(),C(pu,{key:1,ref_key:"useTemplateEl",ref:b,onClick:ae},null,512))])}}}),Cu={class:"sidebar-tools"},gu=y("div",{class:"h3"},[y("h3",null,"\u901A\u7528\u5C5E\u6027")],-1),yu=g("\u9690\u85CF(\u9ED8\u8BA4)"),Bu=g("\u7981\u7528"),Du=y("div",{class:"h3"},[y("h3",null,"\u6807\u7B7E\u914D\u7F6E\u9879")],-1),_u=["onClick"],ku=g("\u589E\u52A0\u6807\u7B7E"),Au={key:2},Vu=y("div",{class:"h3"},[y("h3",null,"\u9009\u9879\u914D\u7F6E")],-1),wu={key:0},Su=["onClick"],xu=g("beforeRequest "),Uu=g("afterResponse "),$u=g("\u4E0D\u8F6C\u6362"),Nu=g("number"),Tu=g("string"),Ou=y("div",{class:"h3"},[y("h3",null,"\u6821\u9A8C\u8BBE\u7F6E")],-1),Pu={key:0},Ru=["onClick"],Iu=g("\u5FEB\u901F\u6DFB\u52A0"),Lu=g("\u7F16\u5199\u6821\u9A8C\u89C4\u5219 "),qu=g("\u5FC5\u586B "),zu={key:4},ju=y("div",{class:"h3"},[y("h3",null,"\u5176\u4ED6\u5C5E\u6027")],-1),Hu=g("\u7F16\u8F91\u5C5E\u6027 "),Ku=g("\u6DFB\u52A0\u65F6\u83B7\u53D6\u8BF7\u6C42 "),Mu=g("\u7F16\u8F91\u8868\u5355\u6837\u5F0F "),Wu=g("\u8BBE\u7F6E\u6570\u636E\u5B57\u5178 "),Qu=y("div",{class:"h3"},[y("h3",null,"\u63A5\u53E3\u6570\u636E\u4E8B\u4EF6")],-1),Gu=g("beforeRequest "),Ju=g("afterResponse "),Xu=g("beforeSubmit "),Yu=g("afterSubmit "),Zu=g("\u8868\u5355\u7EC4\u4EF6\u6539\u53D8\u4E8B\u4EF6change "),el=ve({__name:"formControlAttr",props:{formData:null,formConfig:{default:()=>({})},formOtherData:{default:()=>({})}},emits:["openDialog","update:formOtherData"],setup(te,{expose:J,emit:U}){const w=te,{formConfig:F,formData:n}=qe(w),f=Te(),l=ue(()=>f.controlAttr),T=le([]),O=ue(()=>{var u;const t=b.isSearch;return[{label:"\u8868\u5355\u540D\u79F0",placeholder:"\u7528\u4E8E\u4FDD\u5B58\u7684\u8868\u5355\u540D\u79F0",value:w.formOtherData.formName,key:"formName",hide:t},{label:"\u6570\u636E\u6E90",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90",value:Ce(w.formOtherData.source),type:"select",options:T.value,key:"source",hide:t||!((u=T.value)!=null&&u.length),clearable:!0},{label:"\u8868\u5355\u6807\u8BC6",value:n.value.name,placeholder:"\u8868\u5355\u552F\u4E00\u6807\u8BC6\uFF0C\u53EF\u4E3A\u7A7A",key:"name",hide:t},{label:"\u8868\u5355\u6807\u7B7E\u5BBD\u5EA6",value:n.value.labelWidth,placeholder:"\u8868\u5355label\u5BBD\uFF0C\u5982180px",key:"labelWidth"},{label:"\u8868\u5355\u6837\u5F0F\u540D\u79F0",value:n.value.class,placeholder:"\u989D\u5916\u6DFB\u52A0\u7684\u8868\u5355class\u7C7B\u540D",key:"class",type:"select",options:[{label:"\u65E0\u6837\u5F0F",value:""},{label:"\u6BCF\u884C\u4E24\u5217",value:"form-row-2"},{label:"\u6BCF\u884C\u4E09\u5217",value:"form-row-3"},{label:"\u6BCF\u884C\u56DB\u5217",value:"form-row-4"}],hide:t,clearable:!0},{label:"\u5B57\u6BB5\u540D\u540E\u6DFB\u52A0\u5192\u53F7",value:n.value.showColon,key:"showColon",type:"switch"},{label:"\u7EC4\u4EF6\u5C3A\u5BF8",value:n.value.size,type:"select",key:"size",options:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]}]}),X=ue(()=>{if(Object.keys(l.value).length){const{control:t={},type:u,name:c,config:d={},item:B={},attr:E={}}=l.value;let v=!1;if(u==="table"){const N=l.value&&l.value.list;N&&N.length>0&&(v=N[0].type==="index")}return[{label:"\u81EA\u5B9A\u4E49Class",value:d.className,placeholder:"\u6837\u5F0F\u7C7B\u540D",path:"config.className"},{label:"\u5B57\u6BB5\u6807\u8BC6",value:c,type:Object.keys(b.dataSourceList).length>0?"select":"text",placeholder:"\u5B57\u6BB5\u552F\u4E00\u6807\u8BC6\uFF0C\u5BF9\u5E94\u6570\u636E\u5E93",dict:b.dataSourceList,path:"name",vHide:["grid","tabs","card","title","gridChild","tableColumn","divider","txt","div","button"],eventName:"filedNameKey"},{label:"\u5360\u4F4D\u5185\u5BB9",value:t.placeholder,placeholder:"placeholder",path:"control.placeholder",vShow:["password","input","textarea","select","date","number","datePicker","tinymce","timePicker","treeSelect"]},{label:"\u6309\u94AE\u7C7B\u578B",value:t.type,path:"control.type",type:"select",dict:{primary:"primary",success:"success",info:"info",warning:"warning",danger:"danger"},vShow:["button"],clearable:!0},{label:"\u6309\u94AE\u540D\u79F0",value:t.label,path:"control.label",vShow:["button"]},{label:"\u6309\u94AE\u4E8B\u4EF6",value:t.key,path:"control.key",type:"select",dict:{submit:"\u63D0\u4EA4\u8868\u5355",reset:"\u91CD\u7F6E\u8868\u5355",cancel:"\u53D6\u6D88\u8FD4\u56DE",none:"\u65E0\u52A8\u4F5C(\u81EA\u5B9A\u4E49)"},vShow:["button"]},{label:"\u5BF9\u9F50\u65B9\u5F0F",value:d.textAlign,path:"config.textAlign",type:"select",dict:{left:"left",right:"right",center:"center"},vShow:["button","div"]},{label:"label\u503C",value:B.label,path:"item.label",vHide:["table","grid","tabs","title","gridChild","div","inputSlot","flex","button","txt"]},{label:"\u9690\u85CFlabel",value:B.showLabel,path:"item.showLabel",type:"switch",vHide:["table","grid","tabs","title","gridChild","divider","card","div","inputSlot","flex","button","txt"]},{label:"\u5E2E\u52A9\u4FE1\u606F",value:d.help,path:"config.help",vHide:["table","grid","tabs","gridChild","divider","div","inputSlot","flex","button","txt"]},{label:"\u8868\u5355\u6805\u683C",value:d.span,placeholder:"\u8868\u5355\u533A\u57DF\u6805\u683C\u5BBD\uFF0C0\u4E3A\u81EA\u52A8\u5BBD",path:"config.span",vHide:["gridChild"],isNum:!0},{label:"\u6587\u672C\u503C",value:t.modelValue,placeholder:"\u652F\u6301html",path:"control.modelValue",vShow:["txt"],inputStyle:"textarea"},{label:"\u8BBE\u4E3A\u5BC6\u7801",value:u,type:"select",dict:{input:"\u6587\u672C",password:"\u5BC6\u7801"},path:"type",vShow:["input","password"],vIf:b.isSearch},{label:"\u6587\u672C\u57DF\u9AD8\u5EA6",value:t.rows,placeholder:"\u8F93\u5165\u6846\u884C\u6570",path:"control.rows",vShow:["textarea"],isNum:!0},{label:"\u524D\u7F00",value:d.prepend,placeholder:"\u6587\u672C\u524D\u7F00",path:"config.prepend",vShow:["input","password"]},{label:"\u540E\u7F00",value:d.append,placeholder:"\u6587\u672C\u540E\u7F00",path:"config.append",vShow:["input","password"]},{label:"\u72B6\u6001\u6253\u5F00\u65F6\u7684\u503C",value:t.activeValue,placeholder:"\u72B6\u6001\u6253\u5F00\u65F6\u7684\u503C",path:"control.activeValue",vShow:["switch"],isNum:!0},{label:"\u72B6\u6001\u5173\u95ED\u65F6\u7684\u503C",value:t.inactiveValue,placeholder:"\u72B6\u6001\u5173\u95ED\u65F6\u7684\u503C",path:"control.inactiveValue",vShow:["switch"],isNum:!0},{label:"\u589E\u52A0\u6309\u94AE\u6587\u6848",value:d.addBtnText,path:"config.addBtnText",type:"text",vShow:["flex","table"]},{label:"\u5220\u9664\u6309\u94AE\u6587\u6848",value:d.delBtnText,path:"config.delBtnText",type:"text",vShow:["flex","table"]},{label:"\u662F\u5426\u591A\u9009",value:t.multiple,path:"control.multiple",type:"switch",vShow:["select","treeSelect"],eventName:"selectMultiple"},{label:"\u53EF\u6E05\u7A7A",value:t.clearable,path:"control.clearable",type:"switch",vShow:["select"]},{label:"\u662F\u5426\u7981\u7528",value:t.disabled,path:"control.disabled",type:"switch",vShow:["input","password","textarea","radio","checkbox","select","date","switch","number","cascader","upload","rate","tinymce","treeSelect"],vIf:b.isSearch},{label:"\u662F\u5426\u7981\u7528\u7F16\u8F91",value:d.editDisabled,path:"config.editDisabled",type:"switch",vShow:["input","password","textarea","radio","checkbox","select","date","switch","number","cascader","upload","treeSelect","table","flex"],vIf:b.isSearch},{label:"\u6DFB\u52A0\u9875\u9690\u85CF",value:d.disabledAdd,path:"config.disabledAdd",type:"switch",vIf:b.isSearch,vHide:["inputSlot"]},{label:"\u7F16\u8F91\u9875\u9690\u85CF",value:d.disabledEdit,path:"config.disabledEdit",type:"switch",vIf:b.isSearch,vHide:["inputSlot"]},{label:"\u8BE6\u60C5\u9875\u9690\u85CF",value:d.disabledDetail,path:"config.disabledDetail",type:"switch",vIf:b.isSearch,vHide:["inputSlot"]},{label:"\u8BBE\u4E3AInput\u8F93\u5165\u6846\u7684\u524D/\u540E\u7F00",value:u==="inputSlot",path:"",type:"switch",vShow:["select","inputSlot"],eventName:"setInputSlot"},{label:"\u6807\u9898",value:t.modelValue,path:"control.modelValue",vShow:["title"]},{label:"\u5360\u636E\u7684\u5217\u6570span",value:E.span,path:"attr.span",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5DE6\u4FA7\u7684\u95F4\u9694\u683C\u6570offset",value:E.offset,path:"attr.offset",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5411\u53F3\u79FB\u52A8\u683C\u6570push",value:E.push,path:"attr.push",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5411\u5DE6\u79FB\u52A8\u683C\u6570pull",value:E.pull,path:"attr.pull",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5E8F\u53F7\u5217",value:v,type:"switch",vShow:["table"],eventName:"tableColumn1"},{label:"\u7EC4\u4EF6\u540D",value:d.componentName,placeholder:"\u5168\u5C40\u6CE8\u518C\u7684\u7EC4\u4EF6\u540D\u79F0",path:"config.componentName",vShow:["component"]},{label:"\u4E0A\u4F20\u5730\u5740",value:t.action,placeholder:"\u56FE\u7247/\u6587\u4EF6\u4E0A\u4F20\u5730\u5740,\u53EF\u4E0D\u586B\u6709\u9ED8\u8BA4\u503C",path:"control.action",vShow:["upload"]},{label:"\u6587\u4EF6\u5B57\u6BB5\u540D",value:t.name,placeholder:"\u4E0A\u4F20\u7684\u6587\u4EF6\u5B57\u6BB5\u540D,\u9ED8\u8BA4file",path:"control.name",vShow:["upload"]},{label:"\u5217\u8868\u7C7B\u578B",value:t.listType,type:"select",dict:{text:"text",picture:"picture","picture-card":"picture-card"},path:"control.listType",vShow:["upload"]},{label:"\u63D0\u793A\u6587\u5B57",value:d.tip,placeholder:"\u63D0\u793A\u8BF4\u660E\u6587\u5B57",path:"config.tip",vShow:["upload"]},{label:"\u6309\u94AE\u6587\u672C",value:d.btnText,placeholder:"\u4E0A\u4F20\u6309\u94AE\u6587\u672C",path:"config.btnText",vShow:["upload"]},{label:"direction",type:"select",dict:{horizontal:"horizontal",vertical:"vertical"},placeholder:"\u5206\u5272\u7EBF\u65B9\u5411\uFF0C\u9ED8\u8BA4horizontal",value:t.direction,path:"control.direction",vShow:["divider"]},{label:"border-style",placeholder:"\u5206\u9694\u7B26\u6837\u5F0F\uFF0C\u9ED8\u8BA4solid",value:t.borderStyle,path:"control.borderStyle",vShow:["divider"]},{label:"content-position",type:"select",dict:{left:"left",right:"right",center:"center"},value:t.contentPosition,path:"control.contentPosition",vShow:["divider"]},{label:"\u6700\u5C0F\u503C",value:t.min,path:"control.min",vShow:["slider"],eventName:"formatNumber",isNum:!0},{label:"\u6700\u5927\u503C",value:t.max,path:"control.max",vShow:["rate","slider"],eventName:"formatNumber",isNum:!0},{label:"\u6B65\u957F",value:t.step,path:"control.step",vShow:["slider"],eventName:"formatNumber",isNum:!0},{label:"type",value:t.type,path:"control.type",vShow:["datePicker"],type:"select",placeholder:"\u663E\u793A\u7C7B\u578B",dict:{year:"year",month:"month",date:"date",datetime:"datetime",week:"week",datetimerange:"datetimerange",daterange:"daterange",monthrange:"monthrange"}},{label:"format",value:t.format,path:"control.format",vShow:["datePicker","timePicker"],placeholder:"\u663E\u793A\u5728\u8F93\u5165\u6846\u4E2D\u7684\u683C\u5F0F"},{label:"color-format",value:t.colorFormat,path:"control.colorFormat",type:"select",placeholder:"\u5199\u5165 v-model \u7684\u989C\u8272\u7684\u683C\u5F0F",dict:{hsl:"hsl",hsv:"hsv",hex:"hex",rgb:"rgb"},vShow:["colorPicker"]},{label:"\u6587\u672C\u9AD8\u5EA6",value:t.height,path:"control.height",placeholder:"\u6587\u672C\u9AD8\u5EA6(\u9884\u89C8\u67E5\u770B\u6548\u679C)",vShow:["tinymce"]},{label:"\u6587\u672C\u5BBD\u5EA6",value:t.width,path:"control.width",placeholder:"\u6587\u672C\u5BBD\u5EA6(\u9884\u89C8\u67E5\u770B\u6548\u679C)",vShow:["tinymce"]},{label:"\u56FE\u7247\u4E0A\u4F20\u5730\u5740",value:t.imgUrl,path:"control.imgUrl",placeholder:"\u56FE\u7247\u4E0A\u4F20\u5730\u5740",vShow:["tinymce"]},{label:"\u9644\u4EF6\u4E0A\u4F20\u5730\u5740",value:t.blobUrl,path:"control.blobUrl",placeholder:"\u9644\u4EF6\u4E0A\u4F20\u5730\u5740",vShow:["tinymce"]},{label:"\u663E\u793A\u6A21\u5F0F",value:d.style,path:"config.style",placeholder:"\u663E\u793A\u98CE\u683C(\u9884\u89C8\u67E5\u770B\u6548\u679C)",type:"select",dict:{default:"default",simple:"simple"},vShow:["tinymce"]}].filter(N=>{let j=!0;return N.vShow&&(j=N.vShow.includes(u)),N.vHide&&(j=!N.vHide.includes(u)),N.vIf&&(j=!1),j})}else return[]}),K=Ne("formDesignType"),b=Ee({dataSourceList:{},customRulesList:[...Ve,{type:"rules",label:"\u81EA\u5B9A\u4E49\u6B63\u5219"},{type:"methods",label:"\u81EA\u5B9A\u4E49\u65B9\u6CD5"}],isSearch:K==="search",tooltip:{css:"\u5F53\u524D\u8868\u5355\u5E94\u7528\u9875\u7684\u6837\u5F0F\uFF0C\u7C7B\u4F3C\u4E8E.vue\u6587\u4EF6\u4E2D\u7684style scoped\u4E2D\u7684\u6837\u5F0F",dict:'\u6570\u636E\u5B57\u5178\uFF0C\u7528\u4E8E\u5339\u914D\u591A\u9009\u7EC4\u3001\u4E0B\u62C9\u9009\u62E9\u7B49\uFF0C\u63D0\u4F9B\u52A8\u6001\u83B7\u53D6Options\u63A5\u53E3\u5B57\u5178\u6570\u636E\uFF0C\u4E00\u822C\u4E0D\u8BBE\u7F6E\uFF0C\u4ECE\u63A5\u53E3dict\u83B7\u53D6\u3002json\u683C\u5F0F\uFF1A"sex":{"0":"\u7537","1":"\u5973"}',rules:"\u53EF\u53C2\u8003UI\u7EC4\u4EF6\u8868\u5355\u6821\u9A8C\uFF0C<a href='https://element-plus.gitee.io/zh-CN/component/form.html#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C' target='_blank' style='color:red'>\u8BE6\u60C5\u70B9\u51FB</a>",props:"\u53EF\u6DFB\u52A0\u5F53\u524D\u7EC4\u4EF6\u6240\u6709prop\u5C5E\u6027\u53CA\u4E8B\u4EF6\u65B9\u6CD5"},tabsName:"second"});$e(()=>f.activeKey,t=>{t&&(b.tabsName="first")});const M=(t,u)=>{switch(t.eventName){case"selectMultiple":u?l.value.control.modelValue=[]:l.value.control.modelValue="";break;case"tableColumn1":p(u);break;case"formatNumber":break;case"filedNameKey":t.type==="select"&&b.dataSourceList.forEach(c=>{c.name===u&&(l.value.item&&(l.value.item.label=c.label),l.value.name=c.label)});break;case"setInputSlot":u?(l.value.type="inputSlot",Z.success(`\u8BF7\u5728\u5BF9\u5E94\u7684Input\u8F93\u5165\u6846\u5C5E\u6027\u524D\u540E\u7F00\u8BBE\u7F6Ekey:${l.value.name}`)):l.value.type="select";break}if(t.path){const c=t.isNum?Ce(u):u;t.path&&ae(l.value,t.path,c)}},ae=(t,u,c)=>{let d=t;const B=u.split(".");let E=0;for(E;E<B.length-1;E++){const N=B[E];if(N in d)d=d[N];else throw new Error(`${N} is undefined`)}const v=B[E],se=d[B[E]];return c!==void 0&&(d[v]=c),{obj:d,key:v,value:se}},k=(t,u)=>{u==="tabs"?l.value.columns.splice(t,1):l.value.options.splice(t,1)},D=t=>{l.value.type==="cascader"?A("cascader"):l.value.type==="treeSelect"?A("treeSelect","\u7F16\u8F91\u7EC4\u4EF6\u4E0B\u62C9\u9009\u9879\u6570\u636E"):t==="tabs"?l.value.columns.push({label:"\u6807\u7B7E\u540D\u79F0",list:[]}):l.value.options.push({label:"",value:""})},A=(t,u)=>{let c=l.value.control;switch(l.value.type==="button"&&(c=l.value.config,t="button"),t){case"treeSelect":c=l.value.control.data;break;case"cascader":c=l.value.options;break;case"optionsParams":c=l.value.config.beforeRequest;break;case"optionsResult":c=l.value.config.afterResponse;break}U("openDialog",{content:c,title:u,type:t,direction:"ltr",callback:B=>{switch(t){case"treeSelect":l.value.control.data=B;break;case"cascader":l.value.options=B;break;case"optionsParams":l.value.config.beforeRequest=B;break;case"optionsResult":l.value.config.afterResponse=B;break;case"button":l.value.config=B;break;default:l.value.control={},Object.assign(l.value.control,B)}}})},W=t=>{var u;(u=l.value.item)!=null&&u.rules||(l.value.item.rules=[]),t?l.value.item.rules.push({required:!0,message:"\u5FC5\u586B\u9879",trigger:"change"}):l.value.item.rules.splice(0,1)},q=t=>{var c,d;(c=l.value.item)!=null&&c.rules||(l.value.item.rules=[]);const u={content:(d=l.value.item)==null?void 0:d.rules,title:t,direction:"ltr",callback:B=>{Object.assign(l.value.item.rules,B)}};U("openDialog",u)},m=(t,u)=>{if(t&&t.length===0||Object.keys(l.value).length===0)return!1;const c=t.indexOf(l.value.type);return u?c!==-1:c===-1},p=t=>{const u={name:"index",type:"index",item:{label:"\u5E8F\u53F7"},control:{},config:{}};t?l.value.list.unshift(u):l.value.list.splice(0,1)},V=ue(()=>{var u;const t=l.value&&((u=l.value.item)==null?void 0:u.rules);return t&&t.length>0}),L=()=>{l.value.customRules||(l.value.customRules=[]),l.value.customRules.push({type:"required",message:"\u5FC5\u586B\u9879",trigger:"blur"})},H=t=>{l.value.customRules&&l.value.customRules.splice(t,1)},P=t=>{U("openDialog",{codeType:"css",direction:"ltr",type:"css",title:t})},Q=t=>{U("openDialog",{type:"dict",direction:"ltr",codeType:"json",title:t})},$=t=>{if(b.isSearch)return;const u=t;u&&me("sourceById",{id:u}).then(c=>{var B;const d=(B=c.data.result)==null?void 0:B.tableData;d&&d.length&&(b.dataSourceList=d.filter(E=>E.enterable))}).catch(c=>{console.log(c)})},oe=()=>{b.isSearch||me("sourceList").then(t=>{T.value=t.data.list})},G=(t,u)=>{if(t.key==="source"&&($(t.value),f.setActiveKey(""),f.setControlAttr({})),["formName","source"].includes(t.key)){U("update:formOtherData",Object.assign(w.formOtherData,{[t.key]:t.value}));return}t.path==="config"?F.value[t.key]=t.value||u:n.value[t.key]=t.value},Fe=t=>{switch(t){case 1:return"\u6570\u636E\u6E90\u63A5\u53E3URL,\u53EF\u5E26\u53C2\u6570";case 2:return"\u5B57\u5178key\uFF0C\u9ED8\u8BA4\u4E3A\u5B57\u6BB5\u6807\u8BC6"}return""},fe=(t,u)=>{const c=Ve.filter(d=>d.type===u);c&&c.length&&(t.message=c[0].message)},De=(t,u)=>{A(t,u)},ne=(t,u)=>{U("openDialog",{type:t,title:u,direction:"ltr"})};return oe(),J({getFormFieldBySource:$}),(t,u)=>{const c=x("el-option"),d=x("el-select"),B=x("el-switch"),E=x("el-input"),v=x("el-form-item"),se=x("el-radio"),N=x("el-radio-group"),j=x("el-col"),R=x("el-button"),re=x("QuestionFilled"),ie=x("el-icon"),ce=x("el-tooltip"),Oe=x("el-checkbox"),_e=x("el-form"),ke=x("el-tab-pane"),Pe=x("el-tabs");return s(),h("div",Cu,[a(Pe,{modelValue:b.tabsName,"onUpdate:modelValue":u[29]||(u[29]=e=>b.tabsName=e)},{default:o(()=>[a(ke,{label:"\u5B57\u6BB5\u914D\u7F6E",name:"first"},{default:o(()=>[a(_e,{size:"small",class:"form"},{default:o(()=>[gu,(s(!0),h(S,null,z(i(X),(e,I)=>(s(),C(v,{key:I,label:e.label},{default:o(()=>[e.type==="select"?(s(),C(d,{key:0,placeholder:e.placeholder,modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,filterable:e.path==="name","allow-create":e.path==="name",clearable:e.clearable,onChange:r=>M(e,r)},{default:o(()=>[(s(!0),h(S,null,z(e.dict,(r,de)=>(s(),C(c,{key:de,value:e.path==="name"?r.name:de,label:e.path==="name"?`${r.label}(${r.name})`:r},null,8,["value","label"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","filterable","allow-create","clearable","onChange"])):e.type==="switch"?(s(),C(B,{key:1,modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,onChange:r=>M(e,r)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(s(),C(E,{key:2,type:e.inputStyle,modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,placeholder:e.placeholder,onInput:r=>M(e,r)},null,8,["type","modelValue","onUpdate:modelValue","placeholder","onInput"]))]),_:2},1032,["label"]))),128)),i(l).config?(s(),h(S,{key:0},[a(v,{label:"\u8054\u52A8\u6761\u4EF6"},{default:o(()=>[a(B,{modelValue:i(l).config.linkKey,"onUpdate:modelValue":u[0]||(u[0]=e=>i(l).config.linkKey=e)},null,8,["modelValue"])]),_:1}),i(l).config.linkKey?(s(),h(S,{key:0},[a(v,null,{default:o(()=>[a(E,{type:"textarea",modelValue:i(l).config.linkValue,"onUpdate:modelValue":u[1]||(u[1]=e=>i(l).config.linkValue=e),placeholder:"\u8868\u8FBE\u5F0F\u5982: $.input>1 $\u8868\u793A\u4E3A\u5F53\u524D\u8868\u5355\u6570\u636E\uFF0Cinput\u4E3A\u5B57\u6BB5\u6807\u8BC6"},null,8,["modelValue"])]),_:1}),m(["input","textarea","radio","checkbox","select","date","switch","number","cascader","slider","datePicker","timePicker","colorPicker","inputNumber","rate","treeSelect"],!0)?(s(),C(v,{key:0,label:"\u8054\u52A8\u7ED3\u679C"},{default:o(()=>[a(N,{class:"option-radio",modelValue:i(l).config.linkResult,"onUpdate:modelValue":u[2]||(u[2]=e=>i(l).config.linkResult=e)},{default:o(()=>[a(se,{label:"hidden"},{default:o(()=>[yu]),_:1}),a(se,{label:"disabled"},{default:o(()=>[Bu]),_:1})]),_:1},8,["modelValue"])]),_:1})):_("",!0)],64)):_("",!0)],64)):_("",!0),m(["tabs"],!0)?(s(),h(S,{key:1},[Du,(s(!0),h(S,null,z(i(l).columns,(e,I)=>(s(),C(v,{key:I},{default:o(()=>[a(j,{span:12},{default:o(()=>[a(E,{placeholder:"\u6807\u7B7E\u914D\u7F6E\u9879",modelValue:e.label,"onUpdate:modelValue":r=>e.label=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(j,{span:2,offset:1},{default:o(()=>[y("i",{class:"icon-del",onClick:r=>k(I,"tabs")},null,8,_u)]),_:2},1024)]),_:2},1024))),128)),a(v,null,{default:o(()=>[a(R,{onClick:u[3]||(u[3]=e=>D("tabs"))},{default:o(()=>[ku]),_:1})]),_:1})],64)):_("",!0),m(["radio","select","checkbox","cascader","inputSlot","treeSelect"],!0)?(s(),h("div",Au,[Vu,m("select",!0)?(s(),C(v,{key:0,label:"\u6DFB\u52A0\u5168\u90E8\u9879"},{default:o(()=>[a(E,{placeholder:"\u8BF7\u8F93\u5165\u5168\u90E8\u9879\u6587\u6848",modelValue:i(l).config.addAll,"onUpdate:modelValue":u[4]||(u[4]=e=>i(l).config.addAll=e)},null,8,["modelValue"])]),_:1})):_("",!0),a(v,{label:"\u9009\u9879\u6570\u636E\u6E90"},{default:o(()=>[a(d,{modelValue:i(l).config.optionsType,"onUpdate:modelValue":u[5]||(u[5]=e=>i(l).config.optionsType=e),onChange:u[6]||(u[6]=e=>i(l).config.optionsFun="")},{default:o(()=>[a(c,{value:0,label:"\u56FA\u5B9A\u9009\u9879"}),a(c,{value:1,label:"\u6570\u636E\u6E90"}),a(c,{value:2,label:"\u63A5\u53E3\u5B57\u5178"})]),_:1},8,["modelValue"])]),_:1}),i(l).config.optionsType===0?(s(),h(S,{key:1},[i(l).type!=="cascader"?(s(),h("div",wu,[(s(!0),h(S,null,z(i(l).options,(e,I)=>(s(),C(v,{key:I},{default:o(()=>[a(j,{span:10},{default:o(()=>[a(E,{placeholder:"\u9009\u9879\u6807\u7B7E",modelValue:e.label,"onUpdate:modelValue":r=>e.label=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(j,{span:10,offset:1},{default:o(()=>[a(E,{placeholder:"\u9009\u9879\u503C",modelValue:e.value,"onUpdate:modelValue":r=>e.value=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(j,{span:2,offset:1},{default:o(()=>[y("i",{class:"icon-del",onClick:r=>k(I)},null,8,Su)]),_:2},1024)]),_:2},1024))),128))])):_("",!0),a(v,null,{default:o(()=>[a(R,{onClick:D},{default:o(()=>[g(pe(i(l).type==="cascader"?"\u7F16\u8F91":"\u65B0\u589E"),1)]),_:1})]),_:1})],64)):(s(),h(S,{key:2},[a(v,null,{default:o(()=>[a(E,{modelValue:i(l).config.optionsFun,"onUpdate:modelValue":u[8]||(u[8]=e=>i(l).config.optionsFun=e),placeholder:Fe(i(l).config.optionsType)},ze({_:2},[i(l).config.optionsType===1?{name:"prepend",fn:o(()=>[a(d,{modelValue:i(l).config.method,"onUpdate:modelValue":u[7]||(u[7]=e=>i(l).config.method=e),style:{width:"80px"}},{default:o(()=>[a(c,{label:"get",value:"get"}),a(c,{label:"post",value:"post"})]),_:1},8,["modelValue"])])}:void 0]),1032,["modelValue","placeholder"])]),_:1}),i(l).config.optionsType===1?(s(),h(S,{key:0},[a(v,{label:"\u6307\u5B9Alabel\u5C5E\u6027\u503C"},{default:o(()=>[a(E,{modelValue:i(l).config.label,"onUpdate:modelValue":u[9]||(u[9]=e=>i(l).config.label=e),placeholder:"\u8FD4\u56DE\u6570\u636E\u4E2D\u6CA1\u6709label\u65F6\u53EF\u8BBE\u7F6E"},null,8,["modelValue"])]),_:1}),a(v,{label:"\u6307\u5B9Avalue\u5C5E\u6027\u503C"},{default:o(()=>[a(E,{modelValue:i(l).config.value,"onUpdate:modelValue":u[10]||(u[10]=e=>i(l).config.value=e),placeholder:"\u8FD4\u56DE\u6570\u636E\u4E2D\u6CA1\u6709value\u65F6\u53EF\u8BBE\u7F6E"},null,8,["modelValue"])]),_:1})],64)):_("",!0),i(l).config.optionsType===1?(s(),C(v,{key:1},{default:o(()=>[a(R,{onClick:u[11]||(u[11]=e=>De("optionsParams","\u8BF7\u6C42\u524D\u5904\u7406\u4E8B\u4EF6\uFF0C\u53C2\u6570(data,route,form) data\u8BF7\u6C42\u53C2\u6570,route\u9875\u9762\u8DEF\u7531,form\u8868\u5355\u503C"))},{default:o(()=>[xu]),_:1}),a(R,{onClick:u[12]||(u[12]=e=>De("optionsResult","\u8BF7\u6C42\u8FD4\u56DE\u7ED3\u675F\u5904\u7406\uFF1B\uFF0C\u4E5F\u53EF\u4E3A\u5B57\u7B26\u4E32\uFF0C\u5982opt=formatTest"))},{default:o(()=>[Uu]),_:1})]),_:1})):_("",!0)],64)),a(v,{label:"\u5C1D\u8BD5\u8F6C\u6362value\u503C\u4E3A"},{default:o(()=>[a(d,{modelValue:i(l).config.transformData,"onUpdate:modelValue":u[13]||(u[13]=e=>i(l).config.transformData=e),placeholder:"\u9ED8\u8BA4\u4E3Anumber"},{default:o(()=>[a(c,{value:"none"},{default:o(()=>[$u]),_:1}),a(c,{value:"number"},{default:o(()=>[Nu]),_:1}),a(c,{value:"string"},{default:o(()=>[Tu]),_:1})]),_:1},8,["modelValue"])]),_:1})])):_("",!0),!b.isSearch&&m(["txt","title","table","grid","tabs","card","switch","gridChild","tableColumn","divider","div","button"])?(s(),h(S,{key:3},[Ou,m(["input","password","component"],!0)?(s(),h("div",Pu,[(s(!0),h(S,null,z(i(l).customRules,(e,I)=>(s(),C(v,{key:e.type},{default:o(()=>[a(E,{modelValue:e.message,"onUpdate:modelValue":r=>e.message=r,placeholder:"\u6821\u9A8C\u63D0\u793A\u4FE1\u606F"},{prepend:o(()=>[a(d,{modelValue:e.type,"onUpdate:modelValue":r=>e.type=r,style:{width:"80px"},onChange:r=>fe(e,r)},{default:o(()=>[(s(!0),h(S,null,z(b.customRulesList,r=>(s(),C(c,{key:r.type,label:r.label,value:r.type},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),append:o(()=>[y("i",{class:"icon-del",onClick:r=>H(I)},null,8,Ru)]),_:2},1032,["modelValue","onUpdate:modelValue"]),e.type==="rules"?(s(),C(E,{key:0,placeholder:"\u6B63\u5219\u8868\u8FBE\u5F0F",modelValue:e.rules,"onUpdate:modelValue":r=>e.rules=r},null,8,["modelValue","onUpdate:modelValue"])):_("",!0),e.type==="methods"?(s(),C(E,{key:1,placeholder:"\u65B9\u6CD5\u540D\u79F0\uFF0C\u6B64\u65B9\u6CD5\u4EC5\u9002\u7528\u4E8E\u5BFC\u51FAvue\u6587\u4EF6",modelValue:e.methods,"onUpdate:modelValue":r=>e.methods=r},null,8,["modelValue","onUpdate:modelValue"])):_("",!0)]),_:2},1024))),128)),a(v,null,{default:o(()=>[a(R,{onClick:L},{default:o(()=>[Iu]),_:1}),a(R,{onClick:u[14]||(u[14]=e=>q(b.tooltip.rules))},{default:o(()=>[Lu,a(ce,{content:b.tooltip.rules,placement:"top","raw-content":""},{default:o(()=>[a(ie,null,{default:o(()=>[a(re)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1})])):(s(),C(v,{key:1},{default:o(()=>{var e,I;return[a(Oe,{modelValue:i(V),onChange:W},{default:o(()=>[qu]),_:1},8,["modelValue"]),((e=i(l).item)==null?void 0:e.rules)&&((I=i(l).item)==null?void 0:I.rules[0])?(s(),C(E,{key:0,placeholder:"\u81EA\u5B9A\u4E49\u5FC5\u586B\u9519\u8BEF\u63D0\u793A",modelValue:i(l).item.rules[0].message,"onUpdate:modelValue":u[15]||(u[15]=r=>i(l).item.rules[0].message=r)},null,8,["modelValue"])):_("",!0)]}),_:1}))],64)):_("",!0),m(["grid","card","gridChild","divider","div"])?(s(),h("div",zu,[ju,a(R,{size:"small",onClick:u[16]||(u[16]=e=>A("",b.tooltip.props))},{default:o(()=>[Hu,a(ce,{content:b.tooltip.props,placement:"top"},{default:o(()=>[a(ie,null,{default:o(()=>[a(re)]),_:1})]),_:1},8,["content"])]),_:1})])):_("",!0)]),_:1})]),_:1}),a(ke,{label:"\u8868\u5355\u914D\u7F6E",name:"second"},{default:o(()=>[a(_e,{size:"small",class:"form"},{default:o(()=>[(s(!0),h(S,null,z(i(O).filter(e=>!e.hide),(e,I)=>(s(),C(v,{label:e.label,key:I},{default:o(()=>[e.type==="select"?(s(),C(d,{key:0,modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,filterable:e.key==="class","allow-create":e.key==="class",placeholder:e.placeholder,clearable:e.clearable,onChange:r=>G(e)},{default:o(()=>[(s(!0),h(S,null,z(e.options,r=>{var de;return s(),C(c,{label:r.label||r.name,key:r.label||r.name,value:i(Ce)((de=r.value)!=null?de:r.id)},null,8,["label","value"])}),128))]),_:2},1032,["modelValue","onUpdate:modelValue","filterable","allow-create","placeholder","clearable","onChange"])):e.type==="switch"?(s(),C(B,{key:1,modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,onInput:r=>G(e)},null,8,["modelValue","onUpdate:modelValue","onInput"])):(s(),C(E,{key:2,modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,placeholder:e.placeholder,onInput:r=>G(e)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"]))]),_:2},1032,["label"]))),128)),b.isSearch?_("",!0):(s(),C(v,{key:0},{label:o(()=>[Ku,a(ce,{content:"\u65B0\u589E\u8868\u5355\u6570\u636E\u65F6\uFF0C\u4ECE\u63A5\u53E3\u83B7\u53D6\u65B0\u589E\u521D\u59CB\u6570\u636E",placement:"top"},{default:o(()=>[a(ie,null,{default:o(()=>[a(re)]),_:1})]),_:1})]),default:o(()=>[a(B,{modelValue:i(F).addLoad,"onUpdate:modelValue":u[17]||(u[17]=e=>i(F).addLoad=e),onChange:u[18]||(u[18]=e=>G({key:"addLoad",path:"config"},e))},null,8,["modelValue"])]),_:1})),a(v,null,{default:o(()=>[a(R,{onClick:u[19]||(u[19]=e=>P(b.tooltip.css))},{default:o(()=>[Mu,a(ce,{content:b.tooltip.css,placement:"top"},{default:o(()=>[a(ie,null,{default:o(()=>[a(re)]),_:1})]),_:1},8,["content"])]),_:1}),a(R,{onClick:u[20]||(u[20]=e=>Q(b.tooltip.dict))},{default:o(()=>[Wu,a(ce,{content:b.tooltip.dict,placement:"top"},{default:o(()=>[a(ie,null,{default:o(()=>[a(re)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),b.isSearch?_("",!0):(s(),h(S,{key:1},[Qu,a(v,{label:"\u65B0\u589E\u6570\u636E\u4FDD\u5B58url"},{default:o(()=>[a(E,{placeholder:"\u8868\u5355\u63D0\u4EA4\u7684url\uFF0C\u975E\u7279\u6B8A\u4E0D\u9700\u8981\u8BBE\u7F6E",modelValue:i(F).addUrl,"onUpdate:modelValue":u[21]||(u[21]=e=>i(F).addUrl=e)},null,8,["modelValue"])]),_:1}),a(v,{label:"\u4FEE\u6539\u6570\u636E\u4FDD\u5B58url"},{default:o(()=>[a(E,{placeholder:"\u4FEE\u6539\u63D0\u4EA4\u7684url\uFF0C\u975E\u7279\u6B8A\u4E0D\u9700\u8981\u8BBE\u7F6E",modelValue:i(F).editUrl,"onUpdate:modelValue":u[22]||(u[22]=e=>i(F).editUrl=e)},null,8,["modelValue"])]),_:1}),a(v,{label:"\u83B7\u53D6\u8868\u5355\u6570\u636Eurl"},{default:o(()=>[a(E,{placeholder:"\u83B7\u53D6\u8868\u5355\u6570\u636Eurl\uFF0C\u975E\u7279\u6B8A\u4E0D\u9700\u8981\u8BBE\u7F6E",modelValue:i(F).requestUrl,"onUpdate:modelValue":u[23]||(u[23]=e=>i(F).requestUrl=e)},null,8,["modelValue"])]),_:1}),a(v,{class:"event-btn"},{default:o(()=>[a(R,{onClick:u[24]||(u[24]=e=>ne("beforeRequest","\u83B7\u53D6\u8868\u5355\u521D\u59CB\u6570\u636E\u524D\u4E8B\u4EF6\uFF0C\u53EF\u4FEE\u6539\u8BF7\u6C42\u53C2\u6570"))},{default:o(()=>[Gu]),_:1}),a(R,{onClick:u[25]||(u[25]=e=>ne("afterResponse","\u83B7\u53D6\u8868\u5355\u521D\u59CB\u6570\u636E\u540E\u4E8B\u4EF6\uFF0C\u53EF\u5BF9\u8BF7\u6C42\u8FD4\u56DE\u6570\u636E\u8FDB\u884C\u5904\u7406\uFF1B\u4E5F\u53EF\u4E3A\u5B57\u7B26\u4E32\uFF0C\u5982opt=formatTest"))},{default:o(()=>[Ju]),_:1}),a(R,{onClick:u[26]||(u[26]=e=>ne("beforeSubmit","\u8868\u5355\u6570\u636E\u63D0\u4EA4\u524D\u4E8B\u4EF6\uFF0C\u53EF\u5BF9\u63D0\u4EA4\u6570\u636E\u8FDB\u884C\u5904\u7406\uFF1B\u4E5F\u53EF\u4E3A\u5B57\u7B26\u4E32\uFF0C\u5982opt=formatTest"))},{default:o(()=>[Xu]),_:1}),a(R,{onClick:u[27]||(u[27]=e=>ne("afterSubmit","\u8868\u5355\u6570\u636E\u63D0\u4EA4\u6210\u529F\u4E8B\u4EF6"))},{default:o(()=>[Yu]),_:1}),a(R,{onClick:u[28]||(u[28]=e=>ne("change","\u8868\u5355\u7EC4\u4EF6\u503C\u6539\u53D8\u4E8B\u4EF6\u3002\u5F53\u8868\u5355\u67D0\u503C\u6539\u53D8\u65F6\uFF0C\u53EF\u4FEE\u6539\u5176\u4ED6\u7EC4\u4EF6\u7684\u503C\uFF1B\u4E5F\u53EF\u4E3A\u5B57\u7B26\u4E32\uFF0C\u5982opt=formChange,\u5B57\u7B26\u4E32\u5373\u4E3A/utils/formChangeValue(name,model,key)\u4E2D\u7684key\u503C"))},{default:o(()=>[Zu]),_:1})]),_:1})],64))]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),ul={class:"design-container"},ll={class:"main-body"},tl={class:"main-form"},al={key:0,class:"empty-tips"},ol={class:"dialog-footer"},nl=g(" \u63D0\u4EA4 "),sl=g(" \u53D6\u6D88 "),dl=ve({__name:"index",setup(te){je().changeBreadcrumb([{label:"\u7CFB\u7EDF\u5DE5\u5177"},{label:"\u8868\u5355\u8BBE\u8BA1"}]);const U=Te(),w=Ge(),F=He().query||{},n=Ee({formData:{list:[],form:{size:"default"},config:{}},editor:{},loading:!1,formDataPreview:{},previewVisible:!1,designType:F.type,formDict:{},formOtherData:{source:F.source||"",formName:"\u672A\u547D\u540D\u8868\u5355"}}),f=Ee({visible:!1,type:"",title:"",codeType:"",direction:void 0,callback:""}),l=le(),T=le();Ke("formDesignType",n.designType);const O=()=>{const m=F.id;m&&(n.loading=!0,me("designById",{id:m}).then(p=>{const V=p.data;V.data&&(n.formData=Y(V.data)),n.formDict=ge(V.dict),n.formOtherData.source=V.source,n.formOtherData.formName=V.name,V.source&&n.designType!=="search"&&T.value.getFormFieldBySource(V.source),n.loading=!1}).catch(p=>{Z.error(p.message||"\u52A0\u8F7D\u5F02\u5E38"),n.loading=!1}))},X=m=>{switch(m){case"del":n.formData.list=[],U.setActiveKey(""),U.setControlAttr({});break;case"eye":U.setActiveKey(""),U.setControlAttr({}),n.previewVisible=!0;let p=ee(n.formData);const V=n.formData.form.name,L=new RegExp(`get${V}ControlByName`,"g");p=p.replace(L,`getPreview${V}ControlByName`),n.formDataPreview=Y(p),n.formDataPreview.form.name=`Preview${V}`;break;case"json":M({direction:"rtl",content:n.formData,title:"\u53EF\u7F16\u8F91\u4FEE\u6539\u6216\u5C06\u5DF2\u751F\u6210\u7684\u811A\u672C\u7C98\u8D34\u8FDB\u6765"});break;case"save":b();break;case"vue":l.value.open(n.formData);break}},K=m=>{try{if(typeof f.callback=="function"){const p=f.codeType==="json"?ge(m):Y(m);f.callback(p)}else switch(f.type){case"css":n.formData.config||(n.formData.config={}),n.formData.config.style=m;break;case"dict":n.formDict=ge(m);break;case"beforeRequest":case"beforeSubmit":case"afterResponse":case"afterSubmit":case"change":n.formData.events||(n.formData.events={}),n.formData.events[f.type]=Y(m);break;default:n.formData=Y(m)}k()}catch{}},b=()=>{const{addUrl:m,editUrl:p,requestUrl:V}=n.formData.config;if(!n.formOtherData.source&&(!m||!p||!V)&&n.designType!=="search"){Z.error("\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u6216\u914D\u7F6E\u63A5\u53E3url\u5730\u5740\uFF0C\u5426\u5219\u8868\u5355\u65E0\u6CD5\u63D0\u4EA4\u4FDD\u5B58");return}let L={data:ee(n.formData),source:n.formOtherData.source,name:n.formOtherData.formName,type:1,dict:he(n.formDict)},H="designSave";F.id&&(Object.assign(L,{id:F.id}),H="designEdit"),n.designType==="search"&&(L={data:ee(n.formData),dict:he(n.formDict),id:F.id}),n.loading=!0,me(H,L).then(P=>{Z({message:P.message||"\u4FDD\u5B58\u6210\u529F\uFF01",type:"success"});const Q=F.redirect||"/design/form/list";let $={};F.redirect&&F.redirect.indexOf("?")!==-1&&F.redirect.split("?")[1].split("&").forEach(Fe=>{const fe=Fe.split("=");$[fe[0]]=fe[1]}),w.push({path:Q,query:$}),n.loading=!1}).catch(P=>{Z.error(P.message||"\u4FDD\u5B58\u5F02\u5E38"),n.loading=!1}),F.id||window.sessionStorage.removeItem("formMenuList"),U.setActiveKey(""),U.setControlAttr({})},M=m=>{var oe;const{type:p,direction:V,codeType:L,title:H,callback:P,content:Q}=m;f.direction=V,f.type=p,f.codeType=L||"",f.title=H?`\u63D0\u793A\uFF1A${H}`:"",f.visible=!0,f.callback=P;let $=L==="json"?he(Q,!0):ee(Q,!0);switch(p){case"css":$=((oe=n.formData.config)==null?void 0:oe.style)||"";break;case"dict":$=he(n.formDict,!0);break;case"beforeRequest":case"beforeSubmit":case"afterResponse":case"afterSubmit":case"change":const G=n.formData.events||{};G[p]?$=ee(G[p],!0):["afterResponse","afterSubmit"].includes(p)?$=Se:p==="change"?$=Je:$=xe;break;case"optionsParams":Q||($=xe);break;case"optionsResult":Q||($=Se);break}f.content=$},ae=()=>{k()},k=()=>{f.visible=!1,f.type="",f.title="",f.codeType="",f.callback="",f.content=""},D=le(),A=()=>{D.value.validate((m,p)=>{if(m)Z.success("\u6821\u9A8C\u901A\u8FC7"),console.log(p);else return Z.error("\u6821\u9A8C\u4E0D\u901A\u8FC7"),!1})},W=m=>{n.formData=Y(ee(m))},q=m=>{n.formData.list.push(m)};return O(),Me(()=>{F.source&&T.value.getFormFieldBySource(F.source)}),(m,p)=>{const V=x("el-button"),L=x("el-dialog"),H=Qe("loading");return s(),h("div",ul,[a(Fu,{formId:n.formOtherData.source,onClickCheck:q,onClick:W},null,8,["formId"]),y("div",ll,[a(Re,{onClick:X}),We((s(),h("div",tl,[n.formData.list.length===0?(s(),h("div",al," \u4ECE\u5DE6\u4FA7\u62D6\u62FD\u6765\u6DFB\u52A0\u5B57\u6BB5 ")):_("",!0),a(we,{type:5,formData:n.formData,dict:n.formDict},null,8,["formData","dict"])])),[[H,n.loading]])]),a(el,{ref_key:"formControlAttrEl",ref:T,formData:n.formData.form,formConfig:n.formData.config,formOtherData:n.formOtherData,"onUpdate:formOtherData":p[0]||(p[0]=P=>n.formOtherData=P),onOpenDialog:M},null,8,["formData","formConfig","formOtherData"]),a(Xe,{modelValue:f.visible,"onUpdate:modelValue":p[1]||(p[1]=P=>f.visible=P),title:f.title,direction:f.direction,content:f.content,"code-type":f.codeType,onBeforeClose:ae,onConfirm:K},null,8,["modelValue","title","direction","content","code-type"]),["search"].includes(n.designType)?_("",!0):(s(),C(Ie,{key:0,ref_key:"vueFileEl",ref:l},null,512)),a(L,{modelValue:n.previewVisible,"onUpdate:modelValue":p[3]||(p[3]=P=>n.previewVisible=P),title:"\u9884\u89C8",fullscreen:!0},{footer:o(()=>[y("div",ol,[a(V,{size:"small",type:"primary",onClick:A},{default:o(()=>[nl]),_:1}),a(V,{size:"small",onClick:p[2]||(p[2]=P=>n.previewVisible=!1)},{default:o(()=>[sl]),_:1})])]),default:o(()=>[n.previewVisible?(s(),C(we,{key:0,"form-data":n.formDataPreview,dict:n.formDict,type:1,ref_key:"previewForm",ref:D},null,8,["form-data","dict"])):_("",!0)]),_:1},8,["modelValue"])])}}});export{dl as default};
