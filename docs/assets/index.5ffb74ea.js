import{_ as Ue,a as Te}from"./vueFile.vue_vue_type_script_setup_true_lang.b9213054.js";import{d as me,r as ie,C as Re,k as Z,a as C,o as i,c as v,m as c,h as B,F as S,e as q,f as F,w as o,l as b,t as se,p as y,b as t,D as ge,G as Ie,H as Le,I as Be,s as _e,A as Ae,J as De,L as Pe,M as ce,E as W,N as ke,O as Ve,j as re,u as Oe,z as qe,P as ze,x as He,n as Ke,_ as Ce,y as X,Q as de,R as Y,S as pe,q as je,U as Me}from"./index.52b94c93.js";const fe=[{label:"\u6807\u7B7E1",value:"value1"},{label:"\u6807\u7B7E2",value:"value2"},{label:"\u6807\u7B7E3",value:"value3"}],ne={type:"fixed",source:0,request:"get",sourceFun:""},ye=[{title:"\u57FA\u7840\u5B57\u6BB5",children:[{type:"input",label:"\u5355\u884C\u6587\u672C",icon:"input",control:{modelValue:""},config:{}},{type:"textarea",label:"\u591A\u884C\u6587\u672C",icon:"textarea",control:{modelValue:""},config:{}},{type:"radio",label:"\u5355\u9009\u6846\u7EC4",icon:"radio",control:{modelValue:""},options:fe,config:ne},{type:"checkbox",label:"\u591A\u9009\u6846\u7EC4",icon:"checkbox",control:{modelValue:[]},options:fe,config:ne},{type:"select",label:"\u4E0B\u62C9\u9009\u62E9\u6846",icon:"select",control:{modelValue:"",appendToBody:!0},options:fe,config:ne},{type:"datePicker",label:"\u65E5\u671F\u9009\u62E9\u5668",icon:"date",control:{modelValue:"",type:"date"},config:{}},{type:"timePicker",label:"\u65F6\u95F4\u9009\u62E9\u5668",icon:"time",control:{modelValue:""},config:{}},{type:"colorPicker",label:"\u53D6\u8272\u5668",icon:"color",control:{modelValue:""},config:{}},{type:"switch",label:"\u5F00\u5173",icon:"switch",control:{modelValue:!1},config:{}},{type:"inputNumber",label:"\u8BA1\u6570\u5668",icon:"number",control:{modelValue:0},config:{}},{type:"cascader",label:"\u7EA7\u8054\u9009\u62E9\u5668",icon:"cascader",control:{modelValue:[]},options:[],config:ne},{type:"rate",label:"\u8BC4\u5206",icon:"rate",control:{modelValue:0},config:{}},{type:"slider",label:"\u6ED1\u5757",icon:"slider",control:{modelValue:0},config:{}},{type:"treeSelect",label:"\u6811\u5F62\u63A7\u4EF6",icon:"tree2",control:{modelValue:"",data:[],renderAfterExpand:!1},config:{}},{type:"txt",label:"\u6587\u5B57",icon:"text",control:{modelValue:""},config:{}},{type:"title",label:"\u6807\u9898",icon:"title",control:{modelValue:"\u6807\u9898"},config:{}}]},{title:"\u9AD8\u7EA7\u5B57\u6BB5",children:[{type:"table",label:"\u5B50\u8868",icon:"table",list:[],tableData:[],control:{border:!0},config:{}},{type:"component",label:"\u81EA\u5B9A\u4E49\u7EC4\u4EF6",icon:"component",control:{modelValue:""},config:{}},{type:"upload",label:"\u56FE\u7247/\u6587\u4EF6",icon:"image",control:{modelValue:[]},config:{}},{type:"tinymce",label:"tinymce\u5BCC\u6587\u672C",icon:"tinymce",control:{modelValue:""},config:{}}]},{title:"\u5E03\u5C40\u5B57\u6BB5",children:[{type:"grid",label:"\u683C\u6805\u5E03\u5C40",icon:"grid",columns:[{attr:{span:12},list:[]},{attr:{span:12},list:[]}],control:{},config:{}},{type:"tabs",label:"\u6807\u7B7E\u9875",icon:"tabs",columns:[{label:"Tab1",list:[]}],control:{},config:{}},{type:"card",label:"\u5361\u7247\u5E03\u5C40",icon:"card",list:[],control:{},config:{},item:{}},{type:"flex",label:"\u5F39\u6027\u5E03\u5C40",icon:"flex",list:[],tableData:[],control:{},config:{}},{type:"divider",label:"\u5206\u5272\u7EBF",icon:"divider",control:{},config:{}},{type:"div",label:"div\u5BB9\u5668",icon:"div",control:{},config:{},list:[]}]}],Je={class:"components-list"},Qe={key:0},We=B("div",{class:"title"},"\u5DF2\u6709\u8868\u5355\u5B57\u6BB5",-1),Ge={class:"content"},Xe={class:"title"},Ye=["title"],Ze=me({__name:"dragControl",props:{formData:{default:()=>({list:[],form:{}})},searchData:{default:()=>[]},searchDesign:{type:Boolean,default:!1}},emits:["update:searchData"],setup(ee,{emit:z}){const k=ee,V=ie(k.searchData);Re(()=>k.searchData,r=>{V.value=r});const x=Z(()=>k.searchDesign?ye.slice(0,1):ye),e=r=>JSON.parse(JSON.stringify(r)),H=(r,w)=>{if(w){const D=JSON.parse(JSON.stringify(r));delete D.rules,delete D.customRules,V.value.push(D)}else k.searchData.forEach((D,I)=>{D.name===r.name&&V.value.splice(I,1)});z("update:searchData",V.value)},a=r=>{let w=!1;return k.searchData.forEach(D=>{D.name===r&&(w=!0)}),w},K=Z(()=>{const r=[];return G(k.formData.list,r),r}),ue=["txt","title","table","component","upload"],G=(r,w)=>{r&&r.forEach(D=>{D.type==="grid"||D.type==="tabs"?D.columns.forEach(I=>{G(I.list,w)}):D.type==="card"?G(D.list,w):ue.indexOf(D.type)===-1&&w.push(D)})};return(r,w)=>{var I;const D=C("el-checkbox");return i(),v("div",Je,[ee.searchDesign&&((I=c(K))==null?void 0:I.length)?(i(),v("div",Qe,[We,B("div",Ge,[(i(!0),v(S,null,q(c(K),T=>(i(),F(D,{key:T.name,checked:a(T.name),onChange:L=>H(T,L)},{default:o(()=>[b(se(T.item.label),1)]),_:2},1032,["checked","onChange"]))),128))])])):y("",!0),(i(!0),v(S,null,q(c(x),(T,L)=>(i(),v("div",{key:L},[B("div",Xe,se(T.title),1),t(c(Ie),{itemKey:"key123",tag:"ul",modelValue:T.children,"onUpdate:modelValue":h=>T.children=h,group:{name:"form",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:e},{item:o(({element:h})=>[B("li",{class:ge([h.type])},[B("i",{class:ge(`icon-${h.icon}`)},null,2),B("span",{title:h.label},se(h.label),9,Ye)],2)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))])}}}),eu={class:"sidebar-tools"},uu=B("h3",null,"\u901A\u7528\u5C5E\u6027",-1),lu=b("\u9690\u85CF(\u9ED8\u8BA4)"),tu=b("\u7981\u7528"),au=B("h3",null,"\u6807\u7B7E\u914D\u7F6E\u9879",-1),ou=["onClick"],nu=b("\u589E\u52A0\u6807\u7B7E"),su={key:2},iu=B("h3",null,"\u9009\u9879\u914D\u7F6E",-1),ru={key:0},cu=["onClick"],du=b("\u52A8\u6001\u9009\u9879"),pu=b("\u6570\u636E\u6E90"),fu=b("\u65B9\u6CD5\u51FD\u6570 "),mu=b("\u63A5\u53E3\u5B57\u5178 "),hu=b("\u8BF7\u6C42\u9644\u52A0\u53C2\u6570 "),vu=b("\u8BF7\u6C42\u7ED3\u679C\u5904\u7406\u4E8B\u4EF6 "),Fu=B("h3",null,"\u6821\u9A8C\u8BBE\u7F6E",-1),bu={key:0},Eu=["onClick"],gu=b("\u5FEB\u901F\u6DFB\u52A0"),Du=b("\u7F16\u5199\u6821\u9A8C\u89C4\u5219 "),Cu=b("\u5FC5\u586B "),yu={key:4},Bu=B("h3",null,"\u5176\u4ED6\u5C5E\u6027",-1),_u=b("\u7F16\u8F91\u5C5E\u6027 "),Au=b("\u6DFB\u52A0\u65F6\u83B7\u53D6\u8BF7\u6C42 "),ku=b("\u7F16\u8F91\u8868\u5355\u6837\u5F0F "),Vu=b("\u8BBE\u7F6E\u6570\u636E\u5B57\u5178 "),wu=B("h3",null,"\u63A5\u53E3\u6570\u636E\u4E8B\u4EF6",-1),Su=b("beforeRequest "),xu=b("afterResponse "),Nu=b("beforeSubmit "),$u=b("afterSubmit "),Uu=me({__name:"formControlAttr",props:{formData:null,formConfig:{default:()=>({})}},emits:["openDialog","update:formData","update:formConfig"],setup(ee,{emit:z}){const k=ee,{formConfig:V,formData:x}=Le(k),e=Be(),H=_e(),a=Z(()=>e.controlAttr),K=ie([]),ue=Z(()=>{const n=r.isSearch;return[{label:"\u8868\u5355\u540D\u79F0",value:V.value.title,key:"title",hide:n,path:"config"},{label:"\u6570\u636E\u6E90",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90",value:ce(V.value.formId),type:"select",options:K.value,key:"formId",hide:n||!K.value.length,path:"config"},{label:"\u8868\u5355\u6807\u8BC6",value:x.value.name,key:"name"},{label:"\u8868\u5355\u6807\u7B7E\u5BBD\u5EA6",value:x.value.labelWidth,placeholder:"\u8868\u5355label\u5BBD\uFF0C\u5982180px",key:"labelWidth"},{label:"\u8868\u5355\u6837\u5F0F\u540D\u79F0",value:x.value.class,placeholder:"\u989D\u5916\u6DFB\u52A0\u7684\u8868\u5355class\u7C7B\u540D",key:"class"},{label:"\u7EC4\u4EF6\u5C3A\u5BF8",value:x.value.size,type:"select",key:"size",options:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},{label:"\u63D0\u4EA4\u6309\u94AE",value:V.value.confirm,placeholder:n?"\u67E5\u8BE2\u6309\u94AE\u6587\u6848":"\u63D0\u4EA4\u6309\u94AE\u6587\u6848\uFF0C\u7A7A\u4E0D\u663E\u793A",key:"confirm",path:"config"},{label:"\u53D6\u6D88\u8FD4\u56DE\u6309\u94AE",value:V.value.cancel,placeholder:n?"\u53D6\u6D88\u67E5\u8BE2\u6587\u6848":"\u53D6\u6D88\u8FD4\u56DE\u6309\u94AE\u6587\u6848\uFF0C\u7A7A\u4E0D\u663E\u793A",path:"config",key:"cancel"},{label:"\u7B5B\u9009\u6761\u4EF6\u5C55\u5F00/\u6536\u8D77",value:V.value.expand,type:"switch",path:"config",key:"expand",hide:!n}]}),G=Z(()=>{if(Object.keys(a.value).length){const{control:n={},type:l,name:d,config:p={},item:_={},attr:E={}}=a.value;let g=!1;if(l==="table"){const A=a.value&&a.value.list;A&&A.length>0&&(g=A[0].type==="index")}return[{label:"\u81EA\u5B9A\u4E49Class",value:p.className,placeholder:"\u6837\u5F0F\u7C7B\u540D",path:"config.className"},{label:"\u5B57\u6BB5\u6807\u8BC6",value:d,type:Object.keys(r.dataSourceList).length>0?"select":"text",placeholder:"\u5B57\u6BB5\u552F\u4E00\u6807\u8BC6\uFF0C\u5BF9\u5E94\u6570\u636E\u5E93",dict:r.dataSourceList,path:"name",vHide:["grid","tabs","card","title","gridChild","tableColumn","divider","txt","div"],eventName:"filedNameKey"},{label:"\u5360\u4F4D\u5185\u5BB9",value:n.placeholder,placeholder:"placeholder",path:"control.placeholder",vShow:["password","input","textarea","select","date","number","datePicker","tinymce","timePicker","treeSelect"]},{label:"label\u503C",value:_.label,path:"item.label",vHide:["table","grid","tabs","title","gridChild","div","inputSlot","flex"]},{label:"\u9690\u85CFlabel",value:_.showLabel,path:"item.showLabel",type:"switch",vHide:["table","grid","tabs","title","gridChild","divider","card","div","inputSlot","flex"]},{label:"\u5E2E\u52A9\u4FE1\u606F",value:p.help,path:"config.help",vHide:["table","grid","tabs","gridChild","divider","div","inputSlot","flex"]},{label:"\u8868\u5355\u6805\u683C",value:p.span,placeholder:"\u8868\u5355\u533A\u57DF\u6805\u683C\u5BBD",path:"config.span",vHide:["table","grid","gridChild","divider"],isNum:!0},{label:"\u6587\u672C\u503C",value:n.modelValue,placeholder:"\u652F\u6301html",path:"control.modelValue",vShow:["txt"],inputStyle:"textarea"},{label:"\u8BBE\u4E3A\u5BC6\u7801",value:l,type:"select",dict:{\u6587\u672C:"input",\u5BC6\u7801:"password"},path:"type",vShow:["input","password"],vIf:r.isSearch},{label:"\u6587\u672C\u57DF\u9AD8\u5EA6",value:n.rows,placeholder:"\u8F93\u5165\u6846\u884C\u6570",path:"control.rows",vShow:["textarea"],isNum:!0},{label:"\u524D\u7F00",value:p.prepend,placeholder:"\u6587\u672C\u524D\u7F00",path:"config.prepend",vShow:["input","password"]},{label:"\u540E\u7F00",value:p.append,placeholder:"\u6587\u672C\u540E\u7F00",path:"config.append",vShow:["input","password"]},{label:"\u72B6\u6001\u6253\u5F00\u65F6\u7684\u503C",value:n.activeValue,placeholder:"\u72B6\u6001\u6253\u5F00\u65F6\u7684\u503C",path:"control.activeValue",vShow:["switch"],isNum:!0},{label:"\u72B6\u6001\u5173\u95ED\u65F6\u7684\u503C",value:n.inactiveValue,placeholder:"\u72B6\u6001\u5173\u95ED\u65F6\u7684\u503C",path:"control.inactiveValue",vShow:["switch"],isNum:!0},{label:"\u8F6C\u6362\u683C\u5F0F\u5316\u503C",value:p.transform,path:"config.transform",type:"switch",vShow:["checkbox","select","switch","cascader","slider","table","flex","treeSelect"]},{label:"\u589E\u52A0\u6309\u94AE\u6587\u6848",value:p.add,path:"config.add",type:"text",vShow:["flex","table"]},{label:"\u5220\u9664\u6309\u94AE\u6587\u6848",value:p.delete,path:"config.delete",type:"text",vShow:["flex","table"]},{label:"\u662F\u5426\u591A\u9009",value:n.multiple,path:"control.multiple",type:"switch",vShow:["select","treeSelect"],eventName:"selectMultiple"},{label:"\u662F\u5426\u7981\u7528",value:n.disabled,path:"control.disabled",type:"switch",vShow:["input","password","textarea","radio","checkbox","select","date","switch","number","cascader","upload","rate","tinymce","treeSelect"],vIf:r.isSearch},{label:"\u662F\u5426\u7981\u7528\u7F16\u8F91",value:p.editDisabled,path:"config.editDisabled",type:"switch",vShow:["input","password","textarea","radio","checkbox","select","date","switch","number","cascader","upload","treeSelect"],vIf:r.isSearch},{label:"\u6DFB\u52A0\u9875\u9690\u85CF",value:p.disabledAdd,path:"config.disabledAdd",type:"switch",vIf:r.isSearch,vHide:["inputSlot"]},{label:"\u7F16\u8F91\u9875\u9690\u85CF",value:p.disabledEdit,path:"config.disabledEdit",type:"switch",vIf:r.isSearch,vHide:["inputSlot"]},{label:"\u8BE6\u60C5\u9875\u9690\u85CF",value:p.disabledDetail,path:"config.disabledDetail",type:"switch",vIf:r.isSearch,vHide:["inputSlot"]},{label:"\u8BBE\u4E3AInput\u8F93\u5165\u6846\u7684\u524D/\u540E\u7F00",value:l==="inputSlot",path:"",type:"switch",vShow:["select","inputSlot"],eventName:"setInputSlot"},{label:"\u6807\u9898",value:n.modelValue,path:"control.modelValue",vShow:["title"]},{label:"\u5360\u636E\u7684\u5217\u6570span",value:E.span,path:"attr.span",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5DE6\u4FA7\u7684\u95F4\u9694\u683C\u6570offset",value:E.offset,path:"attr.offset",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5411\u53F3\u79FB\u52A8\u683C\u6570push",value:E.push,path:"attr.push",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5411\u5DE6\u79FB\u52A8\u683C\u6570pull",value:E.pull,path:"attr.pull",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5E8F\u53F7\u5217",value:g,type:"switch",vShow:["table"],eventName:"tableColumn1"},{label:"\u7EC4\u4EF6\u540D",value:p.template,placeholder:"\u5168\u5C40\u6CE8\u518C\u7684\u7EC4\u4EF6\u540D\u79F0",path:"config.componentName",vShow:["component"]},{label:"\u4E0A\u4F20\u5730\u5740",value:n.action,placeholder:"\u56FE\u7247/\u6587\u4EF6\u4E0A\u4F20\u5730\u5740,\u53EF\u4E0D\u586B\u6709\u9ED8\u8BA4\u503C",path:"control.action",vShow:["upload"]},{label:"\u6587\u4EF6\u5B57\u6BB5\u540D",value:n.name,placeholder:"\u4E0A\u4F20\u7684\u6587\u4EF6\u5B57\u6BB5\u540D,\u9ED8\u8BA4file",path:"control.name",vShow:["upload"]},{label:"\u5217\u8868\u7C7B\u578B",value:n.listType,type:"select",dict:{text:"text",picture:"picture","picture-card":"picture-card"},path:"control.listType",vShow:["upload"]},{label:"\u63D0\u793A\u6587\u5B57",value:p.tip,placeholder:"\u63D0\u793A\u8BF4\u660E\u6587\u5B57",path:"config.tip",vShow:["upload"]},{label:"\u6309\u94AE\u6587\u672C",value:p.btnText,placeholder:"\u4E0A\u4F20\u6309\u94AE\u6587\u672C",path:"config.btnText",vShow:["upload"]},{label:"direction",type:"select",dict:{horizontal:"horizontal",vertical:"vertical"},value:n.direction,path:"control.direction",vShow:["divider"]},{label:"border-style",value:n.borderStyle,path:"control.borderStyle",vShow:["divider"]},{label:"content-position",type:"select",dict:{left:"left",right:"right",center:"center"},value:n.contentPosition,path:"control.contentPosition",vShow:["divider"]},{label:"\u6700\u5C0F\u503C",value:n.min,path:"control.min",vShow:["slider"],eventName:"formatNumber",isNum:!0},{label:"\u6700\u5927\u503C",value:n.max,path:"control.max",vShow:["rate","slider"],eventName:"formatNumber",isNum:!0},{label:"\u6B65\u957F",value:n.step,path:"control.step",vShow:["slider"],eventName:"formatNumber",isNum:!0},{label:"type",value:n.type,path:"control.type",vShow:["datePicker"],type:"select",placeholder:"\u663E\u793A\u7C7B\u578B",dict:{year:"year",month:"month",date:"date",datetime:"datetime",week:"week",datetimerange:"datetimerange",daterange:"daterange",monthrange:"monthrange"}},{label:"format",value:n.format,path:"control.format",vShow:["datePicker","timePicker"],placeholder:"\u663E\u793A\u5728\u8F93\u5165\u6846\u4E2D\u7684\u683C\u5F0F"},{label:"color-format",value:n.colorFormat,path:"control.colorFormat",type:"select",placeholder:"\u5199\u5165 v-model \u7684\u989C\u8272\u7684\u683C\u5F0F",dict:{hsl:"hsl",hsv:"hsv",hex:"hex",rgb:"rgb"},vShow:["colorPicker"]},{label:"\u6587\u672C\u9AD8\u5EA6",value:n.height,path:"control.height",placeholder:"\u6587\u672C\u9AD8\u5EA6(\u9884\u89C8\u67E5\u770B\u6548\u679C)",vShow:["tinymce"]},{label:"\u6587\u672C\u5BBD\u5EA6",value:n.width,path:"control.width",placeholder:"\u6587\u672C\u5BBD\u5EA6(\u9884\u89C8\u67E5\u770B\u6548\u679C)",vShow:["tinymce"]},{label:"\u56FE\u7247\u4E0A\u4F20\u5730\u5740",value:n.imgUrl,path:"control.imgUrl",placeholder:"\u56FE\u7247\u4E0A\u4F20\u5730\u5740",vShow:["tinymce"]},{label:"\u9644\u4EF6\u4E0A\u4F20\u5730\u5740",value:n.blobUrl,path:"control.blobUrl",placeholder:"\u9644\u4EF6\u4E0A\u4F20\u5730\u5740",vShow:["tinymce"]},{label:"\u663E\u793A\u6A21\u5F0F",value:p.style,path:"config.style",placeholder:"\u663E\u793A\u98CE\u683C(\u9884\u89C8\u67E5\u770B\u6548\u679C)",type:"select",dict:{default:"default",simple:"simple"},vShow:["tinymce"]}].filter(A=>{let O=!0;return A.vShow&&(O=A.vShow.includes(l)),A.vHide&&(O=!A.vHide.includes(l)),A.vIf&&(O=!1),O})}else return[]}),r=Ae({dataSourceList:{},customRulesList:[...De,{type:"rules",label:"\u81EA\u5B9A\u4E49\u6B63\u5219"},{type:"methods",label:"\u81EA\u5B9A\u4E49\u65B9\u6CD5"}],isSearch:H.query.type==="search",tooltip:{css:"\u5F53\u524D\u8868\u5355\u5E94\u7528\u9875\u7684\u6837\u5F0F\uFF0C\u7C7B\u4F3C\u4E8E.vue\u6587\u4EF6\u4E2D\u7684<style scoped>\u4E2D\u7684\u6837\u5F0F</style>",dict:"\u6570\u636E\u5B57\u5178\uFF0C\u7528\u4E8E\u5339\u914D\u591A\u9009\u7EC4\u3001\u4E0B\u62C9\u9009\u62E9\u7B49\uFF0C\u63D0\u4F9B\u52A8\u6001\u83B7\u53D6Options\u63A5\u53E3\u5B57\u5178\u6570\u636E\uFF0C\u4E00\u822C\u4E0D\u8BBE\u7F6E\uFF0C\u4ECE\u63A5\u53E3dict\u83B7\u53D6\u3002\u683C\u5F0F\uFF1A{0:'\u7537',1:'\u5973'}",rules:"\u53EF\u53C2\u8003UI\u7EC4\u4EF6\u8868\u5355\u6821\u9A8C\uFF0C<a href='https://element-plus.gitee.io/zh-CN/component/form.html#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C' target='_blank' style='color:red'>\u8BE6\u60C5\u70B9\u51FB</a>",props:"\u53EF\u6DFB\u52A0\u5F53\u524D\u7EC4\u4EF6\u6240\u6709prop\u5C5E\u6027\u53CA\u4E8B\u4EF6\u65B9\u6CD5"}}),w=(n,l)=>{switch(n.eventName){case"selectMultiple":l?a.value.control.modelValue=[]:a.value.control.modelValue="";break;case"tableColumn1":N(l);break;case"formatNumber":break;case"filedNameKey":for(const d in r.dataSourceList)if(r.dataSourceList[d]===l){a.value.item&&(a.value.item.label=d),a.value.name=l;return}break;case"setInputSlot":l?(a.value.type="inputSlot",a.value.item.showLabel=!0,W.success(`\u8BF7\u5728\u5BF9\u5E94\u7684Input\u8F93\u5165\u6846\u5C5E\u6027\u524D\u540E\u7F00\u8BBE\u7F6Ekey:${a.value.name}`)):(a.value.type="select",a.value.item.showLabel=!1);break}if(n.path){const d=n.isNum?ce(l):l;n.path&&D(a.value,n.path,d)}},D=(n,l,d)=>{let p=n;const _=l.split(".");let E=0;for(E;E<_.length-1;E++){const A=_[E];if(A in p)p=p[A];else throw new Error(`${A} is undefined`)}const g=_[E],j=p[_[E]];return d!==void 0&&(p[g]=d),{obj:p,key:g,value:j}},I=(n,l)=>{l==="tabs"?a.value.columns.splice(n,1):a.value.options.splice(n,1)},T=n=>{a.value.type==="cascader"?L("cascader"):a.value.type==="treeSelect"?L("treeSelect","\u7F16\u8F91\u7EC4\u4EF6\u4E0B\u62C9\u9009\u9879\u6570\u636E"):n==="tabs"?a.value.columns.push({label:"\u6807\u7B7E\u540D\u79F0",list:[]}):a.value.options.push({label:"",value:""})},L=(n,l)=>{let d=a.value.control,p={title:l};switch(n){case"treeSelect":d=a.value.control.data;break;case"cascader":d=a.value.options;break;case"optionsParams":d=a.value.config.beforeRequest||Ve;break;case"optionsResult":d=a.value.config.afterResponse||ke;break}z("openDialog",d,_=>{switch(n){case"treeSelect":a.value.control.data=_;break;case"cascader":a.value.options=_;break;case"optionsParams":a.value.config.params=_;break;case"optionsResult":a.value.config.afterResponse=_;break;default:a.value.control={},Object.assign(a.value.control,_)}},p)},h=n=>{var l;(l=a.value.item)!=null&&l.rules||(a.value.item.rules=[]),n?a.value.item.rules.push({required:!0,message:"\u5FC5\u586B\u9879",trigger:"change"}):a.value.item.rules.splice(0,1)},f=n=>{var l,d;(l=a.value.item)!=null&&l.rules||(a.value.item.rules=[]),z("openDialog",(d=a.value.item)==null?void 0:d.rules,p=>{Object.assign(a.value.item.rules,p)},{title:n})},m=(n,l)=>{if(n&&n.length===0||Object.keys(a.value).length===0)return!1;const d=n.indexOf(a.value.type);return l?d!==-1:d===-1},N=n=>{const l={name:"index",type:"index",item:{label:"\u5E8F\u53F7"},control:{},config:{}};n?a.value.list.unshift(l):a.value.list.splice(0,1)},P=Z(()=>{var l;const n=a.value&&((l=a.value.item)==null?void 0:l.rules);return n&&n.length>0}),le=()=>{a.value.customRules||(a.value.customRules=[]),a.value.customRules.push({type:"required",message:"\u5FC5\u586B\u9879",trigger:"blur"})},$=n=>{a.value.customRules&&a.value.customRules.splice(n,1)},we=n=>{z("openDialog","","css",{codeType:"css",title:n})},Se=n=>{z("openDialog",{},"dict",{codeType:"json",title:n})},he=n=>{const l=n||H.query.formId;l&&re("formFiled",{id:l}).then(d=>{d.data.code===200&&d.data.data.forEach(p=>{r.dataSourceList[p.label]=p.name})}).catch(d=>{console.log(d)}),H.query.type!=="search"&&re("datasource").then(d=>{K.value=d.data.data})},te=(n,l)=>{n.key==="formId"&&(he(n.value),e.setActiveKey(""),e.setControlAttr({})),n.path==="config"?V.value[n.key]=n.value||l:x.value[n.key]=n.value},xe=n=>{switch(n){case 0:return"\u6570\u636E\u6E90\u63A5\u53E3URL";case 1:return"\u65B9\u6CD5\u540D\u79F0";case 2:return"\u5B57\u5178key\uFF0C\u9ED8\u8BA4\u4E3A\u5B57\u6BB5\u6807\u8BC6"}return""},Ne=(n,l)=>{const d=De.filter(p=>p.type===l);d&&d.length&&(n.message=d[0].message)},ve=(n,l)=>{L(n,l)},ae=(n,l)=>{z("openDialog","",n,{title:l})};return he(),(n,l)=>{const d=C("el-option"),p=C("el-select"),_=C("el-switch"),E=C("el-input"),g=C("el-form-item"),j=C("el-radio"),A=C("el-radio-group"),O=C("el-col"),R=C("el-button"),oe=C("el-tab-pane"),M=C("QuestionFilled"),J=C("el-icon"),Q=C("el-tooltip"),Fe=C("el-tabs"),$e=C("el-checkbox"),be=C("el-form");return i(),v("div",eu,[t(Fe,{modelValue:"first"},{default:o(()=>[t(oe,{label:"\u5B57\u6BB5\u914D\u7F6E",name:"first"},{default:o(()=>[t(be,{size:"small",class:"form"},{default:o(()=>[uu,(i(!0),v(S,null,q(c(G),(u,U)=>(i(),F(g,{key:U,label:u.label},{default:o(()=>[u.type==="select"?(i(),F(p,{key:0,placeholder:u.placeholder,modelValue:u.value,"onUpdate:modelValue":s=>u.value=s,filterable:u.path==="name","allow-create":u.path==="name",onChange:s=>w(u,s)},{default:o(()=>[(i(!0),v(S,null,q(u.dict,(s,Ee)=>(i(),F(d,{key:s,value:s,label:u.path==="name"?`${Ee}(${s})`:Ee},null,8,["value","label"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","filterable","allow-create","onChange"])):u.type==="switch"?(i(),F(_,{key:1,modelValue:u.value,"onUpdate:modelValue":s=>u.value=s,onChange:s=>w(u,s)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(i(),F(E,{key:2,type:u.inputStyle,modelValue:u.value,"onUpdate:modelValue":s=>u.value=s,placeholder:u.placeholder,onInput:s=>w(u,s)},null,8,["type","modelValue","onUpdate:modelValue","placeholder","onInput"]))]),_:2},1032,["label"]))),128)),c(a).config?(i(),v(S,{key:0},[t(g,{label:"\u8054\u52A8\u6761\u4EF6"},{default:o(()=>[t(_,{modelValue:c(a).config.linkKey,"onUpdate:modelValue":l[0]||(l[0]=u=>c(a).config.linkKey=u)},null,8,["modelValue"])]),_:1}),c(a).config.linkKey?(i(),v(S,{key:0},[t(g,null,{default:o(()=>[t(E,{type:"textarea",modelValue:c(a).config.linkValue,"onUpdate:modelValue":l[1]||(l[1]=u=>c(a).config.linkValue=u),placeholder:"\u8868\u8FBE\u5F0F\u5982: $.input>1 $\u8868\u793A\u4E3A\u5F53\u524D\u8868\u5355\u6570\u636E\uFF0Cinput\u4E3A\u5B57\u6BB5\u6807\u8BC6"},null,8,["modelValue"])]),_:1}),m(["input","textarea","radio","checkbox","select","date","switch","number","cascader","slider","datePicker","timePicker","colorPicker","inputNumber","rate","treeSelect"],!0)?(i(),F(g,{key:0,label:"\u8054\u52A8\u7ED3\u679C"},{default:o(()=>[t(A,{class:"option-radio",modelValue:c(a).config.linkResult,"onUpdate:modelValue":l[2]||(l[2]=u=>c(a).config.linkResult=u)},{default:o(()=>[t(j,{label:"hidden"},{default:o(()=>[lu]),_:1}),t(j,{label:"disabled"},{default:o(()=>[tu]),_:1})]),_:1},8,["modelValue"])]),_:1})):y("",!0)],64)):y("",!0)],64)):y("",!0),m(["tabs"],!0)?(i(),v(S,{key:1},[au,(i(!0),v(S,null,q(c(a).columns,(u,U)=>(i(),F(g,{key:U},{default:o(()=>[t(O,{span:12},{default:o(()=>[t(E,{placeholder:"\u6807\u7B7E\u914D\u7F6E\u9879",modelValue:u.label,"onUpdate:modelValue":s=>u.label=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(O,{span:2,offset:1},{default:o(()=>[B("i",{class:"icon-del",onClick:s=>I(U,"tabs")},null,8,ou)]),_:2},1024)]),_:2},1024))),128)),t(g,null,{default:o(()=>[t(R,{onClick:l[3]||(l[3]=u=>T("tabs"))},{default:o(()=>[nu]),_:1})]),_:1})],64)):y("",!0),m(["radio","select","checkbox","cascader","inputSlot","treeSelect"],!0)?(i(),v("div",su,[iu,m("select",!0)?(i(),F(g,{key:0,label:"\u6DFB\u52A0\u5168\u90E8\u9879"},{default:o(()=>[t(E,{placeholder:"\u8BF7\u8F93\u5165\u5168\u90E8\u9879\u6587\u6848",modelValue:c(a).config.addAll,"onUpdate:modelValue":l[4]||(l[4]=u=>c(a).config.addAll=u)},null,8,["modelValue"])]),_:1})):y("",!0),t(Fe,{modelValue:c(a).config.type,"onUpdate:modelValue":l[11]||(l[11]=u=>c(a).config.type=u)},{default:o(()=>[t(oe,{label:"\u56FA\u5B9A\u9009\u9879",name:"fixed"},{default:o(()=>[c(a).type!=="cascader"?(i(),v("div",ru,[(i(!0),v(S,null,q(c(a).options,(u,U)=>(i(),F(g,{key:U},{default:o(()=>[t(O,{span:10},{default:o(()=>[t(E,{placeholder:"\u9009\u9879\u6807\u7B7E",modelValue:u.label,"onUpdate:modelValue":s=>u.label=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(O,{span:10,offset:1},{default:o(()=>[t(E,{placeholder:"\u9009\u9879\u503C",modelValue:u.value,"onUpdate:modelValue":s=>u.value=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(O,{span:2,offset:1},{default:o(()=>[B("i",{class:"icon-del",onClick:s=>I(U)},null,8,cu)]),_:2},1024)]),_:2},1024))),128))])):y("",!0),t(g,null,{default:o(()=>[t(R,{onClick:T},{default:o(()=>[b(se(c(a).type==="cascader"?"\u7F16\u8F91":"\u65B0\u589E"),1)]),_:1})]),_:1})]),_:1}),t(oe,{name:"async"},{label:o(()=>[t(Q,{content:"\u9009\u7528\u52A8\u6001\u9009\u9879\u65F6\u8BF7\u5220\u9664\u56FA\u5B9A\u9009\u9879\u6570\u636E",placement:"top"},{default:o(()=>[B("span",null,[du,t(J,null,{default:o(()=>[t(M)]),_:1})])]),_:1})]),default:o(()=>[t(A,{class:"option-radio",modelValue:c(a).config.source,"onUpdate:modelValue":l[5]||(l[5]=u=>c(a).config.source=u),onChange:l[6]||(l[6]=u=>c(a).config.sourceFun="")},{default:o(()=>[t(j,{label:0},{default:o(()=>[pu]),_:1}),t(j,{label:1},{default:o(()=>[fu,t(Q,{content:"\u9002\u7528\u4E8E\u5BFC\u51FA\u4E3A\u5355\u72EC\u7684vue\u6587\u4EF6\uFF0C\u5728\u5F53\u524D\u6587\u4EF6\u4F7F\u7528provide\u5F62\u5F0F\u5C06\u65B9\u6CD5\u4F20\u9012",placement:"top"},{default:o(()=>[t(J,null,{default:o(()=>[t(M)]),_:1})]),_:1})]),_:1}),t(j,{label:2},{default:o(()=>[mu,t(Q,{content:"\u4ECE\u5F53\u524D\u6570\u636E\u63A5\u53E3dict\u91CC\u5339\u914D\uFF0C\u53EF\u51CF\u5C11\u8BF7\u6C42\u6570\uFF0C\u5B9E\u9645\u9879\u76EE\u4E5F\u4E0D\u662F\u6BCF\u4E2A\u9009\u9879\u90FD\u6709\u5355\u72EC\u7684\u63A5\u53E3\u3002\u6B64\u8BBE\u7F6E\u9700\u8981\u5F00\u542F\u8868\u5355\u5C5E\u6027-\u6DFB\u52A0\u65F6\u83B7\u53D6\u8BF7\u6C42",placement:"top"},{default:o(()=>[t(J,null,{default:o(()=>[t(M)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(g,null,{default:o(()=>[t(E,{modelValue:c(a).config.sourceFun,"onUpdate:modelValue":l[8]||(l[8]=u=>c(a).config.sourceFun=u),placeholder:xe(c(a).config.source)},Pe({_:2},[c(a).config.source?void 0:{name:"prepend",fn:o(()=>[t(p,{modelValue:c(a).config.request,"onUpdate:modelValue":l[7]||(l[7]=u=>c(a).config.request=u),style:{width:"80px"}},{default:o(()=>[t(d,{label:"get",value:"get"}),t(d,{label:"post",value:"post"})]),_:1},8,["modelValue"])])}]),1032,["modelValue","placeholder"])]),_:1}),c(a).config.source===0?(i(),F(g,{key:0},{default:o(()=>[t(R,{onClick:l[9]||(l[9]=u=>ve("optionsParams","\u8BF7\u6C42\u524D\u5904\u7406\u4E8B\u4EF6"))},{default:o(()=>[hu]),_:1}),t(R,{onClick:l[10]||(l[10]=u=>ve("optionsResult"))},{default:o(()=>[vu]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1},8,["modelValue"])])):y("",!0),!r.isSearch&&m(["txt","title","table","grid","tabs","card","switch","gridChild","tableColumn","divider","div"])?(i(),v(S,{key:3},[Fu,m(["input","password","component"],!0)?(i(),v("div",bu,[(i(!0),v(S,null,q(c(a).customRules,(u,U)=>(i(),F(g,{key:u.type},{default:o(()=>[t(E,{modelValue:u.message,"onUpdate:modelValue":s=>u.message=s,placeholder:"\u6821\u9A8C\u63D0\u793A\u4FE1\u606F"},{prepend:o(()=>[t(p,{modelValue:u.type,"onUpdate:modelValue":s=>u.type=s,style:{width:"80px"},onChange:s=>Ne(u,s)},{default:o(()=>[(i(!0),v(S,null,q(r.customRulesList,s=>(i(),F(d,{key:s.type,label:s.label,value:s.type},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),append:o(()=>[B("i",{class:"icon-del",onClick:s=>$(U)},null,8,Eu)]),_:2},1032,["modelValue","onUpdate:modelValue"]),u.type==="rules"?(i(),F(E,{key:0,placeholder:"\u6B63\u5219\u8868\u8FBE\u5F0F",modelValue:u.rules,"onUpdate:modelValue":s=>u.rules=s},null,8,["modelValue","onUpdate:modelValue"])):y("",!0),u.type==="methods"?(i(),F(E,{key:1,placeholder:"\u65B9\u6CD5\u540D\u79F0",modelValue:u.methods,"onUpdate:modelValue":s=>u.methods=s},null,8,["modelValue","onUpdate:modelValue"])):y("",!0)]),_:2},1024))),128)),t(g,null,{default:o(()=>[t(R,{onClick:le},{default:o(()=>[gu]),_:1}),t(R,{onClick:l[12]||(l[12]=u=>f(r.tooltip.rules))},{default:o(()=>[Du,t(Q,{content:r.tooltip.rules,placement:"top","raw-content":""},{default:o(()=>[t(J,null,{default:o(()=>[t(M)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1})])):(i(),F(g,{key:1},{default:o(()=>{var u,U;return[t($e,{modelValue:c(P),onChange:h},{default:o(()=>[Cu]),_:1},8,["modelValue"]),((u=c(a).item)==null?void 0:u.rules)&&((U=c(a).item)==null?void 0:U.rules[0])?(i(),F(E,{key:0,placeholder:"\u81EA\u5B9A\u4E49\u5FC5\u586B\u9519\u8BEF\u63D0\u793A",modelValue:c(a).item.rules[0].message,"onUpdate:modelValue":l[13]||(l[13]=s=>c(a).item.rules[0].message=s)},null,8,["modelValue"])):y("",!0)]}),_:1}))],64)):y("",!0),m(["grid","card","gridChild","divider","div"])?(i(),v("div",yu,[Bu,t(R,{size:"small",onClick:l[14]||(l[14]=u=>L("",r.tooltip.props))},{default:o(()=>[_u,t(Q,{content:r.tooltip.props,placement:"top"},{default:o(()=>[t(J,null,{default:o(()=>[t(M)]),_:1})]),_:1},8,["content"])]),_:1})])):y("",!0)]),_:1})]),_:1}),t(oe,{label:"\u8868\u5355\u914D\u7F6E",name:"second"},{default:o(()=>[t(be,{size:"small",class:"form"},{default:o(()=>[(i(!0),v(S,null,q(c(ue).filter(u=>!u.hide),(u,U)=>(i(),F(g,{label:u.label,key:U},{default:o(()=>[u.type==="select"?(i(),F(p,{key:0,modelValue:u.value,"onUpdate:modelValue":s=>u.value=s,placeholder:u.placeholder,onChange:s=>te(u)},{default:o(()=>[(i(!0),v(S,null,q(u.options,s=>(i(),F(d,{label:s.label||s.name,key:s.label||s.name,value:c(ce)(s.value||s.id)},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])):u.type==="switch"?(i(),F(_,{key:1,modelValue:u.value,"onUpdate:modelValue":s=>u.value=s,onInput:s=>te(u)},null,8,["modelValue","onUpdate:modelValue","onInput"])):(i(),F(E,{key:2,modelValue:u.value,"onUpdate:modelValue":s=>u.value=s,placeholder:u.placeholder,onInput:s=>te(u)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"]))]),_:2},1032,["label"]))),128)),r.isSearch?y("",!0):(i(),F(g,{key:0},{label:o(()=>[Au,t(Q,{content:"\u65B0\u589E\u8868\u5355\u6570\u636E\u65F6\uFF0C\u4ECE\u63A5\u53E3\u83B7\u53D6\u65B0\u589E\u521D\u59CB\u6570\u636E",placement:"top"},{default:o(()=>[t(J,null,{default:o(()=>[t(M)]),_:1})]),_:1})]),default:o(()=>[t(_,{modelValue:c(V).addLoad,"onUpdate:modelValue":l[15]||(l[15]=u=>c(V).addLoad=u),onChange:l[16]||(l[16]=u=>te({key:"addLoad",path:"config"},u))},null,8,["modelValue"])]),_:1})),t(g,null,{default:o(()=>[t(R,{onClick:l[17]||(l[17]=u=>we(r.tooltip.css))},{default:o(()=>[ku,t(Q,{content:r.tooltip.css,placement:"top"},{default:o(()=>[t(J,null,{default:o(()=>[t(M)]),_:1})]),_:1},8,["content"])]),_:1}),t(R,{onClick:l[18]||(l[18]=u=>Se(r.tooltip.dict))},{default:o(()=>[Vu,t(Q,{content:r.tooltip.dict,placement:"top"},{default:o(()=>[t(J,null,{default:o(()=>[t(M)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),r.isSearch?y("",!0):(i(),v(S,{key:1},[wu,t(g,{class:"event-btn"},{default:o(()=>[t(R,{onClick:l[19]||(l[19]=u=>ae("beforeRequest","\u83B7\u53D6\u8868\u5355\u521D\u59CB\u6570\u636E\u524D\u4E8B\u4EF6\uFF0C\u53EF\u4FEE\u6539\u8BF7\u6C42\u53C2\u6570"))},{default:o(()=>[Su]),_:1}),t(R,{onClick:l[20]||(l[20]=u=>ae("afterResponse","\u83B7\u53D6\u8868\u5355\u521D\u59CB\u6570\u636E\u540E\u4E8B\u4EF6\uFF0C\u53EF\u5BF9\u8BF7\u6C42\u8FD4\u56DE\u6570\u636E\u8FDB\u884C\u5904\u7406"))},{default:o(()=>[xu]),_:1}),t(R,{onClick:l[21]||(l[21]=u=>ae("beforeSubmit","\u8868\u5355\u6570\u636E\u63D0\u4EA4\u524D\u4E8B\u4EF6\uFF0C\u53EF\u5BF9\u63D0\u4EA4\u6570\u636E\u8FDB\u884C\u5904\u7406"))},{default:o(()=>[Nu]),_:1}),t(R,{onClick:l[22]||(l[22]=u=>ae("afterSubmit","\u8868\u5355\u6570\u636E\u63D0\u4EA4\u6210\u529F\u4E8B\u4EF6"))},{default:o(()=>[$u]),_:1})]),_:1})],64))]),_:1})]),_:1})]),_:1})])}}}),Tu={class:"design-container"},Ru={class:"main-body"},Iu={class:"main-form"},Lu={key:0,class:"empty-tips"},Pu=["innerHTML"],Ou={key:0,id:"editJson"},qu={class:"dialog-footer"},zu=b(" \u786E\u5B9A "),Hu={class:"dialog-footer"},Ku=b(" \u63D0\u4EA4 "),ju=b(" \u53D6\u6D88 "),Qu=me({__name:"index",setup(ee){var L;Oe().changeBreadcrumb([{label:"\u7CFB\u7EDF\u5DE5\u5177"},{label:"\u8868\u5355\u8BBE\u8BA1"}]);const k=Be(),V=qe(),x=_e(),e=Ae({formData:{list:[],form:{labelWidth:"",class:"",size:"default",name:"form"+new Date().getTime()},config:{title:"form"+new Date().getTime(),formId:x.query.formId||""}},visibleDialog:!1,dialogType:"",dialogTitle:"",codeType:"",editor:{},loading:!1,drawerDirection:"rtl",formDataPreview:{},previewVisible:!1,searchDesign:((L=x.query)==null?void 0:L.type)==="search",formDataList:{},formDataTemp:{},formDict:{}}),H=ie(),a=()=>{const h=x.query.id;h&&(e.loading=!0,re("getFormById",{id:h}).then(f=>{if(f.data.code===200){const m=f.data.data;e.searchDesign?(m.searchData&&(e.formData=X(m.searchData)),e.formDataList=X(m.formData),e.formDataTemp=m):m.formData&&(e.formData=X(m.formData)),e.formDict=de(m.dict)}e.loading=!1}).catch(f=>{W.error(f.data.message||"\u52A0\u8F7D\u5F02\u5E38"),e.loading=!1}))},K=h=>{switch(e.dialogType="",h){case"del":e.formData.list=[],k.setActiveKey(""),k.setControlAttr({});break;case"eye":k.setActiveKey(""),k.setControlAttr({}),e.previewVisible=!0;let f=Y(e.formData);const m=e.formData.form.name,N=new RegExp(`get${m}ControlByName`,"g");f=f.replace(N,`getPreview${m}ControlByName`),e.formDataPreview=X(f),e.formDataPreview.form.name=`Preview${m}`;break;case"json":r(e.formData,"",{title:"\u53EF\u7F16\u8F91\u4FEE\u6539\u6216\u5C06\u5DF2\u751F\u6210\u7684\u811A\u672C\u7C98\u8D34\u8FDB\u6765"});break;case"save":G();break;case"vue":H.value.open(e.formData);break}},ue=()=>{try{const h=e.editor.getValue();if(typeof e.dialogType=="function"){const f=e.codeType==="json"?de(h):X(h);e.dialogType(f)}else switch(e.dialogType){case"css":e.formData.config||(e.formData.config={}),e.formData.config.style=h;break;case"dict":e.formDict=de(h);break;case"beforeRequest":case"beforeSubmit":case"afterResponse":case"afterSubmit":e.formData.events||(e.formData.events={}),e.formData.events[e.dialogType]=X(h);break;default:e.formData=X(h)}e.visibleDialog=!1}catch{}},G=()=>{var m,N;const h=(m=e.formData.config)==null?void 0:m.title;if(!e.searchDesign&&!h){W.error("\u8BF7\u5207\u6362\u5230\u8868\u5355\u5C5E\u6027\u8F93\u5165\u8868\u5355\u540D\u79F0\uFF01");return}const f=Object.assign({},e.formDataTemp,{formData:Y(e.formData),id:x.query.id,formId:((N=e.formData.config)==null?void 0:N.formId)||x.query.formId,name:h,type:1,dict:pe(e.formDict)});e.searchDesign&&Object.assign(f,{searchData:Y(e.formData),formData:e.formDataTemp.formData}),e.loading=!0,re("saveForm",f).then(P=>{P.data.code===200?(W({message:"\u4FDD\u5B58\u6210\u529F\uFF01",type:"success"}),V.push({path:"/designform/formlist"})):W.error(P.data.message),e.loading=!1}).catch(P=>{W.error(P.data.message||"\u4FDD\u5B58\u5F02\u5E38"),e.loading=!1}),x.query.id||window.sessionStorage.removeItem("formMenuList"),k.setActiveKey(""),k.setControlAttr({})},r=(h,f,m)=>{var P;e.drawerDirection=f?"ltr":"rtl",e.dialogType=f,e.codeType=(m==null?void 0:m.codeType)||"",e.dialogTitle=m!=null&&m.title?`\u63D0\u793A\uFF1A${m==null?void 0:m.title}`:"",e.visibleDialog=!0;let N=e.codeType==="json"?pe(h,!0):Y(h,!0);switch(f){case"css":N=((P=e.formData.config)==null?void 0:P.style)||"";break;case"dict":N=pe(e.formDict,!0);break;case"beforeRequest":case"beforeSubmit":const le=e.formData.events||{};N=Y(le[f]||Ve,!0);break;case"afterResponse":case"afterSubmit":const $=e.formData.events||{};N=Y($[f]||ke,!0);break}je(()=>{e.editor=Me(N,"",e.codeType)})},w=h=>{D(),h()},D=()=>{e.visibleDialog=!1,e.dialogType=""},I=ie(),T=()=>{I.value.validate((h,f)=>{if(h)W.success("\u6821\u9A8C\u901A\u8FC7"),console.log(f);else return W.error("\u6821\u9A8C\u4E0D\u901A\u8FC7"),!1})};return a(),ze(()=>{Object.keys(e.editor).length!==0&&(e.editor.destroy(),e.editor.container.remove())}),(h,f)=>{const m=C("el-button"),N=C("el-drawer"),P=C("el-dialog"),le=He("loading");return i(),v("div",Tu,[t(Ze,{formData:e.formDataList,searchData:e.formData.list,"onUpdate:searchData":f[0]||(f[0]=$=>e.formData.list=$),searchDesign:e.searchDesign},null,8,["formData","searchData","searchDesign"]),B("div",Ru,[t(Ue,{onClick:K}),Ke((i(),v("div",Iu,[e.formData.list.length===0?(i(),v("div",Lu," \u4ECE\u5DE6\u4FA7\u62D6\u62FD\u6765\u6DFB\u52A0\u5B57\u6BB5 ")):y("",!0),t(Ce,{type:4,formData:e.formData,dict:e.formDict},null,8,["formData","dict"])])),[[le,e.loading]])]),t(Uu,{formData:e.formData.form,"onUpdate:formData":f[1]||(f[1]=$=>e.formData.form=$),formConfig:e.formData.config,"onUpdate:formConfig":f[2]||(f[2]=$=>e.formData.config=$),onOpenDialog:r},null,8,["formData","formConfig"]),t(N,{modelValue:e.visibleDialog,"onUpdate:modelValue":f[3]||(f[3]=$=>e.visibleDialog=$),size:"60%",title:e.dialogTitle,direction:e.drawerDirection,"custom-class":"ace-dialog","append-to-body":!0,"before-close":w},{header:o(()=>[B("div",{innerHTML:e.dialogTitle},null,8,Pu)]),default:o(()=>[e.visibleDialog?(i(),v("div",Ou)):y("",!0),B("div",qu,[t(m,{type:"primary",size:"small",onClick:ue},{default:o(()=>[zu]),_:1})])]),_:1},8,["modelValue","title","direction"]),e.searchDesign?y("",!0):(i(),F(Te,{key:0,ref_key:"vueFileEl",ref:H},null,512)),t(P,{modelValue:e.previewVisible,"onUpdate:modelValue":f[5]||(f[5]=$=>e.previewVisible=$),title:"\u9884\u89C8",fullscreen:!0},{footer:o(()=>[B("div",Hu,[t(m,{size:"small",type:"primary",onClick:T},{default:o(()=>[Ku]),_:1}),t(m,{size:"small",onClick:f[4]||(f[4]=$=>e.previewVisible=!1)},{default:o(()=>[ju]),_:1})])]),default:o(()=>[e.previewVisible?(i(),F(Ce,{key:0,"form-data":e.formDataPreview,dict:e.formDict,type:1,ref_key:"previewForm",ref:I},null,8,["form-data","dict"])):y("",!0)]),_:1},8,["modelValue"])])}}});export{Qu as default};
