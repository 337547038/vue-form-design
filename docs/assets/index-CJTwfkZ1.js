import{A as ht,X as ut,Y as An,Q as Pn,d as Ut,a1 as mn,a2 as hn,l as Se,h as Rt,B as Nn,r as U,b as R,o as _,w as h,c as F,F as Q,a as he,M as Jt,G as Ot,p as gn,j as c,s as It,f as B,e as de,m as X,t as At,I as y,v as Qt,a3 as Pt,a4 as Fn,k as Mn,y as Bn,u as Ln,q as vt,W as Un,a5 as Zt,a6 as Rn,U as $n,x as Xn,a7 as en,a0 as bt,$ as Yn,N as Qe,V as tn,z as nn}from"./index-BMqeUH7Y.js";import{_ as jn,a as Hn,b as Ze,g as yt}from"./aceTooptip-DJ6t-_KG.js";import{_ as zn}from"./aceDrawer.vue_vue_type_script_setup_true_lang-CI-Y1awU.js";/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function on(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable})),t.push.apply(t,n)}return t}function _e(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?on(Object(t),!0).forEach(function(n){Wn(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):on(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function lt(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lt=function(e){return typeof e}:lt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(o)}function Wn(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function De(){return De=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},De.apply(this,arguments)}function Gn(o,e){if(o==null)return{};var t={},n=Object.keys(o),l,a;for(a=0;a<n.length;a++)l=n[a],!(e.indexOf(l)>=0)&&(t[l]=o[l]);return t}function Kn(o,e){if(o==null)return{};var t=Gn(o,e),n,l;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(l=0;l<a.length;l++)n=a[l],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(o,n)&&(t[n]=o[n])}return t}var qn="1.15.6";function we(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var Ee=we(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ge=we(/Edge/i),ln=we(/firefox/i),Ye=we(/safari/i)&&!we(/chrome/i)&&!we(/android/i),$t=we(/iP(ad|od|hone)/i),vn=we(/chrome/i)&&we(/android/i),bn={capture:!1,passive:!1};function A(o,e,t){o.addEventListener(e,t,!Ee&&bn)}function I(o,e,t){o.removeEventListener(e,t,!Ee&&bn)}function dt(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function yn(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function be(o,e,t,n){if(o){t=t||document;do{if(e!=null&&(e[0]===">"?o.parentNode===t&&dt(o,e):dt(o,e))||n&&o===t)return o;if(o===t)break}while(o=yn(o))}return null}var an=/\s+/g;function fe(o,e,t){if(o&&e)if(o.classList)o.classList[t?"add":"remove"](e);else{var n=(" "+o.className+" ").replace(an," ").replace(" "+e+" "," ");o.className=(n+(t?" "+e:"")).replace(an," ")}}function D(o,e,t){var n=o&&o.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(t=o.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function Le(o,e){var t="";if(typeof o=="string")t=o;else do{var n=D(o,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(o=o.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function _n(o,e,t){if(o){var n=o.getElementsByTagName(e),l=0,a=n.length;if(t)for(;l<a;l++)t(n[l],l);return n}return[]}function ye(){var o=document.scrollingElement;return o||document.documentElement}function G(o,e,t,n,l){if(!(!o.getBoundingClientRect&&o!==window)){var a,i,r,u,d,f,m;if(o!==window&&o.parentNode&&o!==ye()?(a=o.getBoundingClientRect(),i=a.top,r=a.left,u=a.bottom,d=a.right,f=a.height,m=a.width):(i=0,r=0,u=window.innerHeight,d=window.innerWidth,f=window.innerHeight,m=window.innerWidth),(e||t)&&o!==window&&(l=l||o.parentNode,!Ee))do if(l&&l.getBoundingClientRect&&(D(l,"transform")!=="none"||t&&D(l,"position")!=="static")){var k=l.getBoundingClientRect();i-=k.top+parseInt(D(l,"border-top-width")),r-=k.left+parseInt(D(l,"border-left-width")),u=i+a.height,d=r+a.width;break}while(l=l.parentNode);if(n&&o!==window){var N=Le(l||o),O=N&&N.a,P=N&&N.d;N&&(i/=P,r/=O,m/=O,f/=P,u=i+f,d=r+m)}return{top:i,left:r,bottom:u,right:d,width:m,height:f}}}function rn(o,e,t){for(var n=Te(o,!0),l=G(o)[e];n;){var a=G(n)[t],i=void 0;if(i=l>=a,!i)return n;if(n===ye())break;n=Te(n,!1)}return!1}function Ue(o,e,t,n){for(var l=0,a=0,i=o.children;a<i.length;){if(i[a].style.display!=="none"&&i[a]!==E.ghost&&(n||i[a]!==E.dragged)&&be(i[a],t.draggable,o,!1)){if(l===e)return i[a];l++}a++}return null}function Xt(o,e){for(var t=o.lastElementChild;t&&(t===E.ghost||D(t,"display")==="none"||e&&!dt(t,e));)t=t.previousElementSibling;return t||null}function me(o,e){var t=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==E.clone&&(!e||dt(o,e))&&t++;return t}function sn(o){var e=0,t=0,n=ye();if(o)do{var l=Le(o),a=l.a,i=l.d;e+=o.scrollLeft*a,t+=o.scrollTop*i}while(o!==n&&(o=o.parentNode));return[e,t]}function Jn(o,e){for(var t in o)if(o.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===o[t][n])return Number(t)}return-1}function Te(o,e){if(!o||!o.getBoundingClientRect)return ye();var t=o,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=D(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return ye();if(n||e)return t;n=!0}}while(t=t.parentNode);return ye()}function Qn(o,e){if(o&&e)for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o}function _t(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var je;function wn(o,e){return function(){if(!je){var t=arguments,n=this;t.length===1?o.call(n,t[0]):o.apply(n,t),je=setTimeout(function(){je=void 0},e)}}}function Zn(){clearTimeout(je),je=void 0}function Dn(o,e,t){o.scrollLeft+=e,o.scrollTop+=t}function En(o){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):t?t(o).clone(!0)[0]:o.cloneNode(!0)}function Sn(o,e,t){var n={};return Array.from(o.children).forEach(function(l){var a,i,r,u;if(!(!be(l,e.draggable,o,!1)||l.animated||l===t)){var d=G(l);n.left=Math.min((a=n.left)!==null&&a!==void 0?a:1/0,d.left),n.top=Math.min((i=n.top)!==null&&i!==void 0?i:1/0,d.top),n.right=Math.max((r=n.right)!==null&&r!==void 0?r:-1/0,d.right),n.bottom=Math.max((u=n.bottom)!==null&&u!==void 0?u:-1/0,d.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var ce="Sortable"+new Date().getTime();function eo(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(l){if(!(D(l,"display")==="none"||l===E.ghost)){o.push({target:l,rect:G(l)});var a=_e({},o[o.length-1].rect);if(l.thisAnimationDuration){var i=Le(l,!0);i&&(a.top-=i.f,a.left-=i.e)}l.fromRect=a}})}},addAnimationState:function(n){o.push(n)},removeAnimationState:function(n){o.splice(Jn(o,{target:n}),1)},animateAll:function(n){var l=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var a=!1,i=0;o.forEach(function(r){var u=0,d=r.target,f=d.fromRect,m=G(d),k=d.prevFromRect,N=d.prevToRect,O=r.rect,P=Le(d,!0);P&&(m.top-=P.f,m.left-=P.e),d.toRect=m,d.thisAnimationDuration&&_t(k,m)&&!_t(f,m)&&(O.top-m.top)/(O.left-m.left)===(f.top-m.top)/(f.left-m.left)&&(u=no(O,k,N,l.options)),_t(m,f)||(d.prevFromRect=f,d.prevToRect=m,u||(u=l.options.animation),l.animate(d,O,m,u)),u&&(a=!0,i=Math.max(i,u),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},u),d.thisAnimationDuration=u)}),clearTimeout(e),a?e=setTimeout(function(){typeof n=="function"&&n()},i):typeof n=="function"&&n(),o=[]},animate:function(n,l,a,i){if(i){D(n,"transition",""),D(n,"transform","");var r=Le(this.el),u=r&&r.a,d=r&&r.d,f=(l.left-a.left)/(u||1),m=(l.top-a.top)/(d||1);n.animatingX=!!f,n.animatingY=!!m,D(n,"transform","translate3d("+f+"px,"+m+"px,0)"),this.forRepaintDummy=to(n),D(n,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),D(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){D(n,"transition",""),D(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},i)}}}}function to(o){return o.offsetWidth}function no(o,e,t,n){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var Ne=[],wt={initializeByDefault:!0},Ke={mount:function(e){for(var t in wt)wt.hasOwnProperty(t)&&!(t in e)&&(e[t]=wt[t]);Ne.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ne.push(e)},pluginEvent:function(e,t,n){var l=this;this.eventCanceled=!1,n.cancel=function(){l.eventCanceled=!0};var a=e+"Global";Ne.forEach(function(i){t[i.pluginName]&&(t[i.pluginName][a]&&t[i.pluginName][a](_e({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](_e({sortable:t},n)))})},initializePlugins:function(e,t,n,l){Ne.forEach(function(r){var u=r.pluginName;if(!(!e.options[u]&&!r.initializeByDefault)){var d=new r(e,t,e.options);d.sortable=e,d.options=e.options,e[u]=d,De(n,d.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);typeof i<"u"&&(e.options[a]=i)}},getEventProperties:function(e,t){var n={};return Ne.forEach(function(l){typeof l.eventProperties=="function"&&De(n,l.eventProperties.call(t[l.pluginName],e))}),n},modifyOption:function(e,t,n){var l;return Ne.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[t]=="function"&&(l=a.optionListeners[t].call(e[a.pluginName],n))}),l}};function oo(o){var e=o.sortable,t=o.rootEl,n=o.name,l=o.targetEl,a=o.cloneEl,i=o.toEl,r=o.fromEl,u=o.oldIndex,d=o.newIndex,f=o.oldDraggableIndex,m=o.newDraggableIndex,k=o.originalEvent,N=o.putSortable,O=o.extraEventProperties;if(e=e||t&&t[ce],!!e){var P,ae=e.options,re="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Ee&&!Ge?P=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(P=document.createEvent("Event"),P.initEvent(n,!0,!0)),P.to=i||t,P.from=r||t,P.item=l||t,P.clone=a,P.oldIndex=u,P.newIndex=d,P.oldDraggableIndex=f,P.newDraggableIndex=m,P.originalEvent=k,P.pullMode=N?N.lastPutMode:void 0;var K=_e(_e({},O),Ke.getEventProperties(n,e));for(var Z in K)P[Z]=K[Z];t&&t.dispatchEvent(P),ae[re]&&ae[re].call(e,P)}}var lo=["evt"],ue=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=n.evt,a=Kn(n,lo);Ke.pluginEvent.bind(E)(e,t,_e({dragEl:p,parentEl:H,ghostEl:T,rootEl:$,nextEl:Ie,lastDownEl:at,cloneEl:Y,cloneHidden:Ce,dragStarted:Re,putSortable:oe,activeSortable:E.active,originalEvent:l,oldIndex:Be,oldDraggableIndex:He,newIndex:pe,newDraggableIndex:ke,hideGhostForTarget:Vn,unhideGhostForTarget:xn,cloneNowHidden:function(){Ce=!0},cloneNowShown:function(){Ce=!1},dispatchSortableEvent:function(r){se({sortable:t,name:r,originalEvent:l})}},a))};function se(o){oo(_e({putSortable:oe,cloneEl:Y,targetEl:p,rootEl:$,oldIndex:Be,oldDraggableIndex:He,newIndex:pe,newDraggableIndex:ke},o))}var p,H,T,$,Ie,at,Y,Ce,Be,pe,He,ke,et,oe,Me=!1,ct=!1,ft=[],xe,ve,Dt,Et,un,dn,Re,Fe,ze,We=!1,tt=!1,rt,le,St=[],Nt=!1,pt=[],gt=typeof document<"u",nt=$t,cn=Ge||Ee?"cssFloat":"float",ao=gt&&!vn&&!$t&&"draggable"in document.createElement("div"),kn=function(){if(gt){if(Ee)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),Cn=function(e,t){var n=D(e),l=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=Ue(e,0,t),i=Ue(e,1,t),r=a&&D(a),u=i&&D(i),d=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+G(a).width,f=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+G(i).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&r.float!=="none"){var m=r.float==="left"?"left":"right";return i&&(u.clear==="both"||u.clear===m)?"vertical":"horizontal"}return a&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||d>=l&&n[cn]==="none"||i&&n[cn]==="none"&&d+f>l)?"vertical":"horizontal"},ro=function(e,t,n){var l=n?e.left:e.top,a=n?e.right:e.bottom,i=n?e.width:e.height,r=n?t.left:t.top,u=n?t.right:t.bottom,d=n?t.width:t.height;return l===r||a===u||l+i/2===r+d/2},io=function(e,t){var n;return ft.some(function(l){var a=l[ce].options.emptyInsertThreshold;if(!(!a||Xt(l))){var i=G(l),r=e>=i.left-a&&e<=i.right+a,u=t>=i.top-a&&t<=i.bottom+a;if(r&&u)return n=l}}),n},Tn=function(e){function t(a,i){return function(r,u,d,f){var m=r.options.group.name&&u.options.group.name&&r.options.group.name===u.options.group.name;if(a==null&&(i||m))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return t(a(r,u,d,f),i)(r,u,d,f);var k=(i?r:u).options.group.name;return a===!0||typeof a=="string"&&a===k||a.join&&a.indexOf(k)>-1}}var n={},l=e.group;(!l||lt(l)!="object")&&(l={name:l}),n.name=l.name,n.checkPull=t(l.pull,!0),n.checkPut=t(l.put),n.revertClone=l.revertClone,e.group=n},Vn=function(){!kn&&T&&D(T,"display","none")},xn=function(){!kn&&T&&D(T,"display","")};gt&&!vn&&document.addEventListener("click",function(o){if(ct)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),ct=!1,!1},!0);var Oe=function(e){if(p){e=e.touches?e.touches[0]:e;var t=io(e.clientX,e.clientY);if(t){var n={};for(var l in e)e.hasOwnProperty(l)&&(n[l]=e[l]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[ce]._onDragOver(n)}}},so=function(e){p&&p.parentNode[ce]._isOutsideThisEl(e.target)};function E(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=De({},e),o[ce]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Cn(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,r){i.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:E.supportPointer!==!1&&"PointerEvent"in window&&(!Ye||$t),emptyInsertThreshold:5};Ke.initializePlugins(this,o,t);for(var n in t)!(n in e)&&(e[n]=t[n]);Tn(e);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=e.forceFallback?!1:ao,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?A(o,"pointerdown",this._onTapStart):(A(o,"mousedown",this._onTapStart),A(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(A(o,"dragover",this),A(o,"dragenter",this)),ft.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),De(this,eo())}E.prototype={constructor:E,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Fe=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,p):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,l=this.options,a=l.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(r||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,f=l.filter;if(vo(n),!p&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||l.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Ye&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=be(u,l.draggable,n,!1),!(u&&u.animated)&&at!==u)){if(Be=me(u),He=me(u,l.draggable),typeof f=="function"){if(f.call(this,e,u,this)){se({sortable:t,rootEl:d,name:"filter",targetEl:u,toEl:n,fromEl:n}),ue("filter",t,{evt:e}),a&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(m){if(m=be(d,m.trim(),n,!1),m)return se({sortable:t,rootEl:m,name:"filter",targetEl:u,fromEl:n,toEl:n}),ue("filter",t,{evt:e}),!0}),f)){a&&e.preventDefault();return}l.handle&&!be(d,l.handle,n,!1)||this._prepareDragStart(e,r,u)}}},_prepareDragStart:function(e,t,n){var l=this,a=l.el,i=l.options,r=a.ownerDocument,u;if(n&&!p&&n.parentNode===a){var d=G(n);if($=a,p=n,H=p.parentNode,Ie=p.nextSibling,at=n,et=i.group,E.dragged=p,xe={target:p,clientX:(t||e).clientX,clientY:(t||e).clientY},un=xe.clientX-d.left,dn=xe.clientY-d.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,p.style["will-change"]="all",u=function(){if(ue("delayEnded",l,{evt:e}),E.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!ln&&l.nativeDraggable&&(p.draggable=!0),l._triggerDragStart(e,t),se({sortable:l,name:"choose",originalEvent:e}),fe(p,i.chosenClass,!0)},i.ignore.split(",").forEach(function(f){_n(p,f.trim(),kt)}),A(r,"dragover",Oe),A(r,"mousemove",Oe),A(r,"touchmove",Oe),i.supportPointer?(A(r,"pointerup",l._onDrop),!this.nativeDraggable&&A(r,"pointercancel",l._onDrop)):(A(r,"mouseup",l._onDrop),A(r,"touchend",l._onDrop),A(r,"touchcancel",l._onDrop)),ln&&this.nativeDraggable&&(this.options.touchStartThreshold=4,p.draggable=!0),ue("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ge||Ee))){if(E.eventCanceled){this._onDrop();return}i.supportPointer?(A(r,"pointerup",l._disableDelayedDrag),A(r,"pointercancel",l._disableDelayedDrag)):(A(r,"mouseup",l._disableDelayedDrag),A(r,"touchend",l._disableDelayedDrag),A(r,"touchcancel",l._disableDelayedDrag)),A(r,"mousemove",l._delayedDragTouchMoveHandler),A(r,"touchmove",l._delayedDragTouchMoveHandler),i.supportPointer&&A(r,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(u,i.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){p&&kt(p),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;I(e,"mouseup",this._disableDelayedDrag),I(e,"touchend",this._disableDelayedDrag),I(e,"touchcancel",this._disableDelayedDrag),I(e,"pointerup",this._disableDelayedDrag),I(e,"pointercancel",this._disableDelayedDrag),I(e,"mousemove",this._delayedDragTouchMoveHandler),I(e,"touchmove",this._delayedDragTouchMoveHandler),I(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?A(document,"pointermove",this._onTouchMove):t?A(document,"touchmove",this._onTouchMove):A(document,"mousemove",this._onTouchMove):(A(p,"dragend",this),A($,"dragstart",this._onDragStart));try{document.selection?it(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Me=!1,$&&p){ue("dragStarted",this,{evt:t}),this.nativeDraggable&&A(document,"dragover",so);var n=this.options;!e&&fe(p,n.dragClass,!1),fe(p,n.ghostClass,!0),E.active=this,e&&this._appendGhost(),se({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ve){this._lastX=ve.clientX,this._lastY=ve.clientY,Vn();for(var e=document.elementFromPoint(ve.clientX,ve.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ve.clientX,ve.clientY),e!==t);)t=e;if(p.parentNode[ce]._isOutsideThisEl(e),t)do{if(t[ce]){var n=void 0;if(n=t[ce]._onDragOver({clientX:ve.clientX,clientY:ve.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=yn(t));xn()}},_onTouchMove:function(e){if(xe){var t=this.options,n=t.fallbackTolerance,l=t.fallbackOffset,a=e.touches?e.touches[0]:e,i=T&&Le(T,!0),r=T&&i&&i.a,u=T&&i&&i.d,d=nt&&le&&sn(le),f=(a.clientX-xe.clientX+l.x)/(r||1)+(d?d[0]-St[0]:0)/(r||1),m=(a.clientY-xe.clientY+l.y)/(u||1)+(d?d[1]-St[1]:0)/(u||1);if(!E.active&&!Me){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(T){i?(i.e+=f-(Dt||0),i.f+=m-(Et||0)):i={a:1,b:0,c:0,d:1,e:f,f:m};var k="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");D(T,"webkitTransform",k),D(T,"mozTransform",k),D(T,"msTransform",k),D(T,"transform",k),Dt=f,Et=m,ve=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!T){var e=this.options.fallbackOnBody?document.body:$,t=G(p,!0,nt,!0,e),n=this.options;if(nt){for(le=e;D(le,"position")==="static"&&D(le,"transform")==="none"&&le!==document;)le=le.parentNode;le!==document.body&&le!==document.documentElement?(le===document&&(le=ye()),t.top+=le.scrollTop,t.left+=le.scrollLeft):le=ye(),St=sn(le)}T=p.cloneNode(!0),fe(T,n.ghostClass,!1),fe(T,n.fallbackClass,!0),fe(T,n.dragClass,!0),D(T,"transition",""),D(T,"transform",""),D(T,"box-sizing","border-box"),D(T,"margin",0),D(T,"top",t.top),D(T,"left",t.left),D(T,"width",t.width),D(T,"height",t.height),D(T,"opacity","0.8"),D(T,"position",nt?"absolute":"fixed"),D(T,"zIndex","100000"),D(T,"pointerEvents","none"),E.ghost=T,e.appendChild(T),D(T,"transform-origin",un/parseInt(T.style.width)*100+"% "+dn/parseInt(T.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,l=e.dataTransfer,a=n.options;if(ue("dragStart",this,{evt:e}),E.eventCanceled){this._onDrop();return}ue("setupClone",this),E.eventCanceled||(Y=En(p),Y.removeAttribute("id"),Y.draggable=!1,Y.style["will-change"]="",this._hideClone(),fe(Y,this.options.chosenClass,!1),E.clone=Y),n.cloneId=it(function(){ue("clone",n),!E.eventCanceled&&(n.options.removeCloneOnHide||$.insertBefore(Y,p),n._hideClone(),se({sortable:n,name:"clone"}))}),!t&&fe(p,a.dragClass,!0),t?(ct=!0,n._loopId=setInterval(n._emulateDragOver,50)):(I(document,"mouseup",n._onDrop),I(document,"touchend",n._onDrop),I(document,"touchcancel",n._onDrop),l&&(l.effectAllowed="move",a.setData&&a.setData.call(n,l,p)),A(document,"drop",n),D(p,"transform","translateZ(0)")),Me=!0,n._dragStartId=it(n._dragStarted.bind(n,t,e)),A(document,"selectstart",n),Re=!0,window.getSelection().removeAllRanges(),Ye&&D(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,l,a,i,r=this.options,u=r.group,d=E.active,f=et===u,m=r.sort,k=oe||d,N,O=this,P=!1;if(Nt)return;function ae(J,Ae){ue(J,O,_e({evt:e,isOwner:f,axis:N?"vertical":"horizontal",revert:i,dragRect:l,targetRect:a,canSort:m,fromSortable:k,target:n,completed:K,onMove:function(Pe,b){return ot($,t,p,l,Pe,G(Pe),e,b)},changed:Z},Ae))}function re(){ae("dragOverAnimationCapture"),O.captureAnimationState(),O!==k&&k.captureAnimationState()}function K(J){return ae("dragOverCompleted",{insertion:J}),J&&(f?d._hideClone():d._showClone(O),O!==k&&(fe(p,oe?oe.options.ghostClass:d.options.ghostClass,!1),fe(p,r.ghostClass,!0)),oe!==O&&O!==E.active?oe=O:O===E.active&&oe&&(oe=null),k===O&&(O._ignoreWhileAnimating=n),O.animateAll(function(){ae("dragOverAnimationComplete"),O._ignoreWhileAnimating=null}),O!==k&&(k.animateAll(),k._ignoreWhileAnimating=null)),(n===p&&!p.animated||n===t&&!n.animated)&&(Fe=null),!r.dragoverBubble&&!e.rootEl&&n!==document&&(p.parentNode[ce]._isOutsideThisEl(e.target),!J&&Oe(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),P=!0}function Z(){pe=me(p),ke=me(p,r.draggable),se({sortable:O,name:"change",toEl:t,newIndex:pe,newDraggableIndex:ke,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=be(n,r.draggable,t,!0),ae("dragOver"),E.eventCanceled)return P;if(p.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||O._ignoreWhileAnimating===n)return K(!1);if(ct=!1,d&&!r.disabled&&(f?m||(i=H!==$):oe===this||(this.lastPutMode=et.checkPull(this,d,p,e))&&u.checkPut(this,d,p,e))){if(N=this._getDirection(e,n)==="vertical",l=G(p),ae("dragOverValid"),E.eventCanceled)return P;if(i)return H=$,re(),this._hideClone(),ae("revert"),E.eventCanceled||(Ie?$.insertBefore(p,Ie):$.appendChild(p)),K(!0);var ee=Xt(t,r.draggable);if(!ee||po(e,N,this)&&!ee.animated){if(ee===p)return K(!1);if(ee&&t===e.target&&(n=ee),n&&(a=G(n)),ot($,t,p,l,n,a,e,!!n)!==!1)return re(),ee&&ee.nextSibling?t.insertBefore(p,ee.nextSibling):t.appendChild(p),H=t,Z(),K(!0)}else if(ee&&fo(e,N,this)){var ge=Ue(t,0,r,!0);if(ge===p)return K(!1);if(n=ge,a=G(n),ot($,t,p,l,n,a,e,!1)!==!1)return re(),t.insertBefore(p,ge),H=t,Z(),K(!0)}else if(n.parentNode===t){a=G(n);var te=0,q,C=p.parentNode!==t,v=!ro(p.animated&&p.toRect||l,n.animated&&n.toRect||a,N),w=N?"top":"left",g=rn(n,"top","top")||rn(p,"top","top"),s=g?g.scrollTop:void 0;Fe!==n&&(q=a[w],We=!1,tt=!v&&r.invertSwap||C),te=mo(e,n,a,N,v?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,tt,Fe===n);var x;if(te!==0){var j=me(p);do j-=te,x=H.children[j];while(x&&(D(x,"display")==="none"||x===T))}if(te===0||x===n)return K(!1);Fe=n,ze=te;var V=n.nextElementSibling,ie=!1;ie=te===1;var L=ot($,t,p,l,n,a,e,ie);if(L!==!1)return(L===1||L===-1)&&(ie=L===1),Nt=!0,setTimeout(co,30),re(),ie&&!V?t.appendChild(p):n.parentNode.insertBefore(p,ie?V:n),g&&Dn(g,0,s-g.scrollTop),H=p.parentNode,q!==void 0&&!tt&&(rt=Math.abs(q-G(n)[w])),Z(),K(!0)}if(t.contains(p))return K(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){I(document,"mousemove",this._onTouchMove),I(document,"touchmove",this._onTouchMove),I(document,"pointermove",this._onTouchMove),I(document,"dragover",Oe),I(document,"mousemove",Oe),I(document,"touchmove",Oe)},_offUpEvents:function(){var e=this.el.ownerDocument;I(e,"mouseup",this._onDrop),I(e,"touchend",this._onDrop),I(e,"pointerup",this._onDrop),I(e,"pointercancel",this._onDrop),I(e,"touchcancel",this._onDrop),I(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(pe=me(p),ke=me(p,n.draggable),ue("drop",this,{evt:e}),H=p&&p.parentNode,pe=me(p),ke=me(p,n.draggable),E.eventCanceled){this._nulling();return}Me=!1,tt=!1,We=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ft(this.cloneId),Ft(this._dragStartId),this.nativeDraggable&&(I(document,"drop",this),I(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ye&&D(document.body,"user-select",""),D(p,"transform",""),e&&(Re&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),T&&T.parentNode&&T.parentNode.removeChild(T),($===H||oe&&oe.lastPutMode!=="clone")&&Y&&Y.parentNode&&Y.parentNode.removeChild(Y),p&&(this.nativeDraggable&&I(p,"dragend",this),kt(p),p.style["will-change"]="",Re&&!Me&&fe(p,oe?oe.options.ghostClass:this.options.ghostClass,!1),fe(p,this.options.chosenClass,!1),se({sortable:this,name:"unchoose",toEl:H,newIndex:null,newDraggableIndex:null,originalEvent:e}),$!==H?(pe>=0&&(se({rootEl:H,name:"add",toEl:H,fromEl:$,originalEvent:e}),se({sortable:this,name:"remove",toEl:H,originalEvent:e}),se({rootEl:H,name:"sort",toEl:H,fromEl:$,originalEvent:e}),se({sortable:this,name:"sort",toEl:H,originalEvent:e})),oe&&oe.save()):pe!==Be&&pe>=0&&(se({sortable:this,name:"update",toEl:H,originalEvent:e}),se({sortable:this,name:"sort",toEl:H,originalEvent:e})),E.active&&((pe==null||pe===-1)&&(pe=Be,ke=He),se({sortable:this,name:"end",toEl:H,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ue("nulling",this),$=p=H=T=Ie=Y=at=Ce=xe=ve=Re=pe=ke=Be=He=Fe=ze=oe=et=E.dragged=E.ghost=E.clone=E.active=null,pt.forEach(function(e){e.checked=!0}),pt.length=Dt=Et=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":p&&(this._onDragOver(e),uo(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,l=0,a=n.length,i=this.options;l<a;l++)t=n[l],be(t,i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||go(t));return e},sort:function(e,t){var n={},l=this.el;this.toArray().forEach(function(a,i){var r=l.children[i];be(r,this.options.draggable,l,!1)&&(n[a]=r)},this),t&&this.captureAnimationState(),e.forEach(function(a){n[a]&&(l.removeChild(n[a]),l.appendChild(n[a]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return be(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var l=Ke.modifyOption(this,e,t);typeof l<"u"?n[e]=l:n[e]=t,e==="group"&&Tn(n)},destroy:function(){ue("destroy",this);var e=this.el;e[ce]=null,I(e,"mousedown",this._onTapStart),I(e,"touchstart",this._onTapStart),I(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(I(e,"dragover",this),I(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ft.splice(ft.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ce){if(ue("hideClone",this),E.eventCanceled)return;D(Y,"display","none"),this.options.removeCloneOnHide&&Y.parentNode&&Y.parentNode.removeChild(Y),Ce=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ce){if(ue("showClone",this),E.eventCanceled)return;p.parentNode==$&&!this.options.group.revertClone?$.insertBefore(Y,p):Ie?$.insertBefore(Y,Ie):$.appendChild(Y),this.options.group.revertClone&&this.animate(p,Y),D(Y,"display",""),Ce=!1}}};function uo(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function ot(o,e,t,n,l,a,i,r){var u,d=o[ce],f=d.options.onMove,m;return window.CustomEvent&&!Ee&&!Ge?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=o,u.dragged=t,u.draggedRect=n,u.related=l||e,u.relatedRect=a||G(e),u.willInsertAfter=r,u.originalEvent=i,o.dispatchEvent(u),f&&(m=f.call(d,u,i)),m}function kt(o){o.draggable=!1}function co(){Nt=!1}function fo(o,e,t){var n=G(Ue(t.el,0,t.options,!0)),l=Sn(t.el,t.options,T),a=10;return e?o.clientX<l.left-a||o.clientY<n.top&&o.clientX<n.right:o.clientY<l.top-a||o.clientY<n.bottom&&o.clientX<n.left}function po(o,e,t){var n=G(Xt(t.el,t.options.draggable)),l=Sn(t.el,t.options,T),a=10;return e?o.clientX>l.right+a||o.clientY>n.bottom&&o.clientX>n.left:o.clientY>l.bottom+a||o.clientX>n.right&&o.clientY>n.top}function mo(o,e,t,n,l,a,i,r){var u=n?o.clientY:o.clientX,d=n?t.height:t.width,f=n?t.top:t.left,m=n?t.bottom:t.right,k=!1;if(!i){if(r&&rt<d*l){if(!We&&(ze===1?u>f+d*a/2:u<m-d*a/2)&&(We=!0),We)k=!0;else if(ze===1?u<f+rt:u>m-rt)return-ze}else if(u>f+d*(1-l)/2&&u<m-d*(1-l)/2)return ho(e)}return k=k||i,k&&(u<f+d*a/2||u>m-d*a/2)?u>f+d/2?1:-1:0}function ho(o){return me(p)<me(o)?1:-1}function go(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function vo(o){pt.length=0;for(var e=o.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&pt.push(n)}}function it(o){return setTimeout(o,0)}function Ft(o){return clearTimeout(o)}gt&&A(document,"touchmove",function(o){(E.active||Me)&&o.cancelable&&o.preventDefault()});E.utils={on:A,off:I,css:D,find:_n,is:function(e,t){return!!be(e,t,e,!1)},extend:Qn,throttle:wn,closest:be,toggleClass:fe,clone:En,index:me,nextTick:it,cancelNextTick:Ft,detectDirection:Cn,getChild:Ue,expando:ce};E.get=function(o){return o[ce]};E.mount=function(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(E.utils=_e(_e({},E.utils),n.utils)),Ke.mount(n)})};E.create=function(o,e){return new E(o,e)};E.version=qn;var W=[],$e,Mt,Bt=!1,Ct,Tt,mt,Xe;function bo(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?A(document,"dragover",this._handleAutoScroll):this.options.supportPointer?A(document,"pointermove",this._handleFallbackAutoScroll):n.touches?A(document,"touchmove",this._handleFallbackAutoScroll):A(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):(I(document,"pointermove",this._handleFallbackAutoScroll),I(document,"touchmove",this._handleFallbackAutoScroll),I(document,"mousemove",this._handleFallbackAutoScroll)),fn(),st(),Zn()},nulling:function(){mt=Mt=$e=Bt=Xe=Ct=Tt=null,W.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var l=this,a=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(a,i);if(mt=t,n||this.options.forceAutoScrollFallback||Ge||Ee||Ye){Vt(t,this.options,r,n);var u=Te(r,!0);Bt&&(!Xe||a!==Ct||i!==Tt)&&(Xe&&fn(),Xe=setInterval(function(){var d=Te(document.elementFromPoint(a,i),!0);d!==u&&(u=d,st()),Vt(t,l.options,d,n)},10),Ct=a,Tt=i)}else{if(!this.options.bubbleScroll||Te(r,!0)===ye()){st();return}Vt(t,this.options,Te(r,!1),!1)}}},De(o,{pluginName:"scroll",initializeByDefault:!0})}function st(){W.forEach(function(o){clearInterval(o.pid)}),W=[]}function fn(){clearInterval(Xe)}var Vt=wn(function(o,e,t,n){if(e.scroll){var l=(o.touches?o.touches[0]:o).clientX,a=(o.touches?o.touches[0]:o).clientY,i=e.scrollSensitivity,r=e.scrollSpeed,u=ye(),d=!1,f;Mt!==t&&(Mt=t,st(),$e=e.scroll,f=e.scrollFn,$e===!0&&($e=Te(t,!0)));var m=0,k=$e;do{var N=k,O=G(N),P=O.top,ae=O.bottom,re=O.left,K=O.right,Z=O.width,ee=O.height,ge=void 0,te=void 0,q=N.scrollWidth,C=N.scrollHeight,v=D(N),w=N.scrollLeft,g=N.scrollTop;N===u?(ge=Z<q&&(v.overflowX==="auto"||v.overflowX==="scroll"||v.overflowX==="visible"),te=ee<C&&(v.overflowY==="auto"||v.overflowY==="scroll"||v.overflowY==="visible")):(ge=Z<q&&(v.overflowX==="auto"||v.overflowX==="scroll"),te=ee<C&&(v.overflowY==="auto"||v.overflowY==="scroll"));var s=ge&&(Math.abs(K-l)<=i&&w+Z<q)-(Math.abs(re-l)<=i&&!!w),x=te&&(Math.abs(ae-a)<=i&&g+ee<C)-(Math.abs(P-a)<=i&&!!g);if(!W[m])for(var j=0;j<=m;j++)W[j]||(W[j]={});(W[m].vx!=s||W[m].vy!=x||W[m].el!==N)&&(W[m].el=N,W[m].vx=s,W[m].vy=x,clearInterval(W[m].pid),(s!=0||x!=0)&&(d=!0,W[m].pid=setInterval((function(){n&&this.layer===0&&E.active._onTouchMove(mt);var V=W[this.layer].vy?W[this.layer].vy*r:0,ie=W[this.layer].vx?W[this.layer].vx*r:0;typeof f=="function"&&f.call(E.dragged.parentNode[ce],ie,V,o,mt,W[this.layer].el)!=="continue"||Dn(W[this.layer].el,ie,V)}).bind({layer:m}),24))),m++}while(e.bubbleScroll&&k!==u&&(k=Te(k,!1)));Bt=d}},30),On=function(e){var t=e.originalEvent,n=e.putSortable,l=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(t){var d=n||a;r();var f=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,m=document.elementFromPoint(f.clientX,f.clientY);u(),d&&!d.el.contains(m)&&(i("spill"),this.onSpill({dragEl:l,putSortable:n}))}};function Yt(){}Yt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var l=Ue(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(t,l):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:On};De(Yt,{pluginName:"revertOnSpill"});function jt(){}jt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,l=n||this.sortable;l.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),l.animateAll()},drop:On};De(jt,{pluginName:"removeOnSpill"});E.mount(new bo);E.mount(jt,Yt);const yo=o=>new Promise(e=>{ht("designById",{id:o}).then(t=>{const n=t.data,l=ut(n.listData),a=ut(n.data),i=An(n.dict);e({tableData:l,searchData:a,dict:i,source:n.source,name:n.name})})}),_o=o=>new Promise(e=>{ht("designList",{extend:{pageSize:20},query:{name:o,type:1}}).then(n=>{e(n.data.list)})}),xt=o=>new Promise(e=>{ht("designById",{id:o}).then(t=>{const n=ut(t.data.data),l=[];n.list.forEach(a=>{if(["input","select"].includes(a.type)){const i=Pn(a);delete i.customRules,l.push(i)}}),e({data:Lt(n),defaultSearch:l})})}),wo=["txt","title","table","component","upload","button","tinymce","inputSlot","flex"],Lt=o=>{const e=[];return o==null||o.list.forEach(t=>{var n;if(t.type==="grid"||t.type==="tabs")t.columns.forEach(l=>{Lt(l)});else if(["card","div"].includes(t.type))Lt(t);else if(!wo.includes(t.type)&&t.name){const l=t.config.help;e.push({prop:t.name,label:(n=t.formItem)==null?void 0:n.label,help:l})}}),e},pn=Ut({__name:"operateBtn",props:mn({position:{default:"top"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const e=o,t=hn(o,"modelValue"),n=Se([]),l=Se([]),a=Rt(()=>[{label:"新增",key:"add",show:e.position==="top"},{label:"编辑",key:"edit",show:!0},{label:"查看",key:"detail",show:e.position==="left"},{label:"删除",key:"del",show:!0},{label:"导出",key:"export",show:e.position==="top"}].filter(u=>u.show)),i=a.value.map(u=>u.key);Nn(()=>t.value,u=>{u!=null&&u.length&&(n.value=[],l.value=[],u.forEach(d=>{d.key&&i.includes(d.key)&&(n.value.push(d.key),l.value.push(d.key))}))},{deep:!0,immediate:!0});const r=u=>{const d=u.filter(f=>!l.value.includes(f));if(d.length)t.value.push({key:d[0]});else{const f=l.value.filter(m=>!u.includes(m));t.value=t.value.filter(m=>m.key!==f[0])}l.value=u};return(u,d)=>{const f=U("el-option"),m=U("el-select");return _(),R(m,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=k=>n.value=k),multiple:"",onChange:r},{default:h(()=>[(_(!0),F(Q,null,he(a.value,k=>(_(),R(f,{key:k.key,label:k.label,value:k.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}}),Do={class:"sidebar-tools"},Eo={class:"h3"},So=["onClick"],ko=["onClick"],Co=Ut({__name:"controlAttr",props:{tabsName:{},tabsNameModifiers:{}},emits:mn(["changeEvent"],["update:tabsName"]),setup(o,{expose:e,emit:t}){const n=t,l=Jt("tableData",{}),a=Jt("currentObj"),i=hn(o,"tabsName"),r=Ot({formSourceList:[],tagCustomList:[],replaceValueList:[],replaceValueType:0}),u=["switch","image","tag","link","datetime","date","buttons","string","text"],d=[{label:"年-月-日",value:"{yyyy}-{mm}-{dd}"},{label:"年-月-日 时:分:秒",value:"{yyyy}-{mm}-{dd} {h}:{i}:{s}"},{label:"x年x月x日",value:"{yyyy}年{mm}月{dd}日"},{label:"x年x月x日 时:分:秒",value:"{yyyy}年{mm}月{dd}日 {h}:{i}:{s}"},{label:"时:分:秒",value:"{h}:{i}:{s}"},{label:"年-月-日 时:分:秒 星期",value:"{yyyy}:{mm}:{dd} {h}:{i}:{s} 星期{w}"}],f=["primary","success","warning","danger","info"],m=g=>{a.value.config={},delete a.value.replaceValue,delete a.value.timeFormat,delete a.value.buttons,delete a.value.custom,["tag","text"].includes(g)?r.tagCustomList=[{label:"primary",value:""}]:g==="buttons"&&(a.value.buttons=[])},k=g=>{if(!g)return{};const s={};for(const x of g)s[x.value]=x.label;return s},N=()=>{r.tagCustomList.push({label:"primary",value:""})},O=g=>{r.tagCustomList.splice(g,1)},P=()=>{var g;(g=a.value)!=null&&g.custom||(a.value.custom={}),a.value.custom=k(r.tagCustomList)},ae=()=>{r.replaceValueList.push({label:"",value:""})},re=g=>{r.replaceValueList.splice(g,1)},K=g=>{g===1?(r.replaceValueList=[{label:"",value:""}],a.value.replaceValue={}):a.value.replaceValue=""},Z=()=>{a.value.replaceValue=k(r.replaceValueList)},ee=g=>{C(g)},ge=Rt(()=>{var g;return[{label:"所属表单",placeholder:"请选择所属表单",value:parseInt(l.value.config.formId)||"",key:"formId",type:"select",options:r.formSourceList,clearable:!0,filterable:!0,remote:!0,remoteMethod:ee},{label:"数据列表名称",placeholder:"保存的数据列表名称",value:l.value.config.name,key:"name"},{label:"数据添加编辑打开方式",placeholder:"默认新页面打开",value:l.value.config.openType,type:"select",options:[{label:"弹窗",value:"dialog"},{label:"新页面",value:"page"}],key:"openType",clearable:!0},{label:"窗口宽度",placeholder:"弹窗宽度",value:l.value.config.dialogWidth,type:"input",key:"dialogWidth",hide:l.value.config.openType!=="dialog"},{label:"横向滚动固定在底部",value:l.value.config.fixedBottomScroll,key:"fixedBottomScroll",type:"select",placeholder:"默认开启",options:[{label:"启用",value:!0},{label:"禁用",value:!1}],clearable:!0},{label:"列显示隐藏设置",value:l.value.config.columnsSetting,key:"columnsSetting",type:"select",placeholder:"默认开启",options:[{label:"启用",value:!0},{label:"禁用",value:!1}],clearable:!0},{label:"操作按钮设置",type:"operate"},{label:"可折叠查询表单",value:l.value.config.expand,key:"expand",type:"switch"},{label:"查询跳转页面",value:l.value.config.searchJump,key:"searchJump",type:"switch"},{label:"操作列按钮下拉",value:l.value.config.operateDropdown,key:"operateDropdown",type:"input",placeholder:"大于设定个数的以下拉形式显示"},{label:"分页设置",value:l.value.config.pageSize,key:"pageSize",type:"input",placeholder:"每页分多少条"},{label:"查询排序",value:l.value.config.orderSort,key:"orderSort",type:"input",placeholder:"查询排序，id desc"},{label:"开启侧栏树",value:(g=l.value.treeData)==null?void 0:g.show,key:"tree",type:"switch"}]}),te=(g,s)=>{var x;if(g.key==="tree"){l.value.treeData||(l.value.treeData={}),l.value.treeData.show=s;return}g.key==="formId"&&(!g.value&&((x=l.value.config)==null?void 0:x.openType)==="dialog"&&delete l.value.config.openType,n("changeEvent",{type:"formId",value:g.value})),l.value.config[g.key]=g.value},q=g=>{n("changeEvent",{type:"openDrawer",value:g})},C=g=>{_o(g).then(s=>{r.formSourceList=s})},v=g=>{if(!g)return[];const s=[];for(const x in g)s.push({value:x,label:g[x]});return s};return e({rowChange:()=>{["tag","text"].includes(a.value.render)&&(console.log("currentObj.render"),Object.keys(a.value.custom).length&&(r.tagCustomList=v(a.value.custom)),a.value.replaceValue&&typeof a.value.replaceValue=="object"&&(r.replaceValueList=v(a.value.replaceValue),r.replaceValueType=1))}}),gn(()=>{C()}),(g,s)=>{const x=U("el-option"),j=U("el-select"),V=U("el-form-item"),ie=U("el-switch"),L=U("el-input"),J=U("el-button"),Ae=U("el-tab-pane"),qe=U("el-tabs"),Pe=U("el-form");return _(),F("div",Do,[c(Pe,{size:"small",class:"form"},{default:h(()=>[c(qe,{modelValue:i.value,"onUpdate:modelValue":s[32]||(s[32]=b=>i.value=b)},{default:h(()=>[c(Ae,{label:"字段属性",name:"first"},{default:h(()=>[It(B("div",null,[B("div",Eo,[B("h3",null,At(y(a).label),1),s[33]||(s[33]=X(" 列设置 "))]),c(V,{label:"渲染模式"},{default:h(()=>[c(j,{modelValue:y(a).render,"onUpdate:modelValue":s[0]||(s[0]=b=>y(a).render=b),onChange:m},{default:h(()=>[(_(),F(Q,null,he(u,b=>c(x,{key:b,value:b,label:b},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1}),y(a).render==="switch"?(_(),F(Q,{key:0},[c(V,{label:"inline-prompt"},{default:h(()=>[c(ie,{modelValue:y(a).config.inlinePrompt,"onUpdate:modelValue":s[1]||(s[1]=b=>y(a).config.inlinePrompt=b)},null,8,["modelValue"])]),_:1}),c(V,{label:"打开时描述"},{default:h(()=>[c(L,{modelValue:y(a).config.activeText,"onUpdate:modelValue":s[2]||(s[2]=b=>y(a).config.activeText=b),placeholder:"打开时的文字描述"},null,8,["modelValue"])]),_:1}),c(V,{label:"关闭时描述"},{default:h(()=>[c(L,{modelValue:y(a).config.inactiveText,"onUpdate:modelValue":s[3]||(s[3]=b=>y(a).config.inactiveText=b),placeholder:"关闭时的文字描述"},null,8,["modelValue"])]),_:1}),c(V,{label:"状态为on时的值"},{default:h(()=>[c(L,{modelValue:y(a).config.activeValue,"onUpdate:modelValue":s[4]||(s[4]=b=>y(a).config.activeValue=b),placeholder:"状态为on时的值"},null,8,["modelValue"])]),_:1}),c(V,{label:"状态为off时的值"},{default:h(()=>[c(L,{modelValue:y(a).config.inactiveValue,"onUpdate:modelValue":s[5]||(s[5]=b=>y(a).config.inactiveValue=b),placeholder:"状态为off时的值"},null,8,["modelValue"])]),_:1})],64)):de("",!0),y(a).render==="image"?(_(),F(Q,{key:1},[c(V,{label:"图片宽度"},{default:h(()=>[c(L,{modelValue:y(a).config.width,"onUpdate:modelValue":s[6]||(s[6]=b=>y(a).config.width=b),placeholder:"请输入图片宽度，单位px"},null,8,["modelValue"])]),_:1}),c(V,{label:"图片高度"},{default:h(()=>[c(L,{modelValue:y(a).config.height,"onUpdate:modelValue":s[7]||(s[7]=b=>y(a).config.height=b),placeholder:"请输入图片高度，单位px"},null,8,["modelValue"])]),_:1})],64)):de("",!0),["tag","text"].includes(y(a).render)?(_(),F(Q,{key:2},[c(V,{label:"值设置类型",style:{"margin-bottom":"0"}},{default:h(()=>[(_(!0),F(Q,null,he(r.tagCustomList,(b,S)=>(_(),F("div",{key:S,style:{"margin-bottom":"10px",display:"flex","align-items":"center"}},[c(L,{modelValue:b.value,"onUpdate:modelValue":ne=>b.value=ne,placeholder:"对应的值",onChange:P},{append:h(()=>[c(j,{modelValue:b.label,"onUpdate:modelValue":ne=>b.label=ne,style:{width:"90px"},onChange:P},{default:h(()=>[(_(),F(Q,null,he(f,ne=>c(x,{key:ne,label:ne,value:ne},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),B("i",{style:{"margin-left":"10px"},class:"icon-del",onClick:ne=>O(S)},null,8,So)]))),128))]),_:1}),c(V,{class:"flex-end"},{default:h(()=>[It(c(J,{type:"primary",onClick:N},{default:h(()=>s[34]||(s[34]=[X(" 新增值设置类型 ")])),_:1},512),[[Qt,r.tagCustomList.length<f.length]])]),_:1}),c(V,{label:"值替换数据"},{default:h(()=>[c(j,{modelValue:r.replaceValueType,"onUpdate:modelValue":s[8]||(s[8]=b=>r.replaceValueType=b),onChange:K},{default:h(()=>[c(x,{label:"使用字典",value:0}),c(x,{label:"自定义",value:1})]),_:1},8,["modelValue"])]),_:1}),r.replaceValueType===0?(_(),R(V,{key:0,label:"字典类型key"},{default:h(()=>[c(L,{modelValue:y(a).replaceValue,"onUpdate:modelValue":s[9]||(s[9]=b=>y(a).replaceValue=b),placeholder:"请输入字典类型key"},null,8,["modelValue"])]),_:1})):(_(),F(Q,{key:1},[c(V,{label:"值替换数据"},{default:h(()=>[(_(!0),F(Q,null,he(r.replaceValueList,(b,S)=>(_(),F("div",{key:b.value,style:{"margin-bottom":"10px",display:"flex","align-items":"center"}},[c(L,{modelValue:b.value,"onUpdate:modelValue":ne=>b.value=ne,placeholder:"对应的值",onChange:Z},null,8,["modelValue","onUpdate:modelValue"]),c(L,{modelValue:b.label,"onUpdate:modelValue":ne=>b.label=ne,placeholder:"替换的值",onChange:Z},null,8,["modelValue","onUpdate:modelValue"]),B("i",{style:{"margin-left":"10px"},class:"icon-del",onClick:ne=>re(S)},null,8,ko)]))),128))]),_:1}),c(V,{class:"flex-end"},{default:h(()=>[c(J,{type:"primary",onClick:ae},{default:h(()=>s[35]||(s[35]=[X(" 新增值替换数据 ")])),_:1})]),_:1})],64))],64)):de("",!0),y(a).render==="link"?(_(),F(Q,{key:3},[c(V,{label:"显示类型"},{default:h(()=>[c(j,{modelValue:y(a).config.type,"onUpdate:modelValue":s[10]||(s[10]=b=>y(a).config.type=b)},{default:h(()=>[(_(),F(Q,null,he(f,b=>c(x,{key:b,label:b,value:b},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),c(V,{label:"是否带下划线"},{default:h(()=>[c(ie,{modelValue:y(a).config.underline,"onUpdate:modelValue":s[11]||(s[11]=b=>y(a).config.underline=b)},null,8,["modelValue"])]),_:1}),c(V,{label:"打开方式"},{default:h(()=>[c(j,{modelValue:y(a).config.target,"onUpdate:modelValue":s[12]||(s[12]=b=>y(a).config.target=b)},{default:h(()=>[c(x,{value:"_blank"},{default:h(()=>s[36]||(s[36]=[X(" _blank ")])),_:1}),c(x,{value:"_parent"},{default:h(()=>s[37]||(s[37]=[X(" _parent ")])),_:1}),c(x,{value:"_self"},{default:h(()=>s[38]||(s[38]=[X(" _self ")])),_:1}),c(x,{value:"_top"},{default:h(()=>s[39]||(s[39]=[X(" _top ")])),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):de("",!0),["datetime","date"].includes(y(a).render)?(_(),R(V,{key:4,label:"显示格式"},{default:h(()=>[c(j,{modelValue:y(a).timeFormat,"onUpdate:modelValue":s[13]||(s[13]=b=>y(a).timeFormat=b)},{default:h(()=>[(_(),F(Q,null,he(d,(b,S)=>c(x,{key:S,label:b.label,value:b.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})):de("",!0),y(a).render==="buttons"?(_(),F(Q,{key:5},[c(V,{label:"按钮设置"},{default:h(()=>[c(pn,{modelValue:y(a).buttons,"onUpdate:modelValue":s[14]||(s[14]=b=>y(a).buttons=b),position:"right"},null,8,["modelValue"])]),_:1}),c(V,{class:"flex-end"},{default:h(()=>[c(J,{type:"primary",onClick:s[15]||(s[15]=b=>q("buttons"))},{default:h(()=>s[40]||(s[40]=[X(" 添加设置更多按钮 ")])),_:1})]),_:1})],64)):de("",!0),c(V,null,{default:h(()=>[y(a).render?(_(),R(J,{key:0,type:"primary",onClick:s[16]||(s[16]=b=>q("renderFormatter"))},{default:h(()=>s[41]||(s[41]=[X(" renderFormatter ")])),_:1})):de("",!0),c(J,{type:"primary",onClick:s[17]||(s[17]=b=>q("columns"))},{default:h(()=>s[42]||(s[42]=[X(" 设置表格列 ")])),_:1})]),_:1})],512),[[Qt,Object.keys(y(a)).length]])]),_:1}),c(Ae,{label:"数据列表配置",name:"second"},{default:h(()=>{var b;return[(_(!0),F(Q,null,he(ge.value.filter(S=>!S.hide),(S,ne)=>(_(),R(V,{key:ne,label:S.label},{default:h(()=>[S.type==="select"?(_(),R(j,Pt({key:0,modelValue:S.value,"onUpdate:modelValue":z=>S.value=z,ref_for:!0},S,{options:"",onChange:z=>te(S)}),{default:h(()=>[(_(!0),F(Q,null,he(S.options,z=>(_(),R(x,{key:z.label||z.name,label:z.label||z.name,value:y(Fn)(z.value??z.id)},null,8,["label","value"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue","onChange"])):S.type==="switch"?(_(),R(ie,{key:1,modelValue:S.value,"onUpdate:modelValue":z=>S.value=z,onInput:z=>te(S,z)},null,8,["modelValue","onUpdate:modelValue","onInput"])):S.type==="operate"?(_(),R(pn,{key:2,modelValue:y(l).controlBtn,"onUpdate:modelValue":s[18]||(s[18]=z=>y(l).controlBtn=z)},null,8,["modelValue"])):(_(),R(L,{key:3,modelValue:S.value,"onUpdate:modelValue":z=>S.value=z,placeholder:S.placeholder,onInput:z=>te(S)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"]))]),_:2},1032,["label"]))),128)),(b=y(l).treeData)!=null&&b.show?(_(),F(Q,{key:0},[c(V,{label:"树标识名称"},{default:h(()=>[c(L,{modelValue:y(l).treeData.name,"onUpdate:modelValue":s[19]||(s[19]=S=>y(l).treeData.name=S),placeholder:"树标识名称"},null,8,["modelValue"])]),_:1}),c(V,{label:"树列表接口URL"},{default:h(()=>[c(L,{modelValue:y(l).treeData.requestUrl,"onUpdate:modelValue":s[20]||(s[20]=S=>y(l).treeData.requestUrl=S),placeholder:"树列表数据接口URL"},null,8,["modelValue"])]),_:1}),c(V,{class:"event-btn"},{default:h(()=>[c(J,{type:"primary",onClick:s[21]||(s[21]=S=>q("treeProp"))},{default:h(()=>s[43]||(s[43]=[X(" 编辑侧栏树属性 ")])),_:1}),c(J,{type:"primary",onClick:s[22]||(s[22]=S=>q("treeBefore"))},{default:h(()=>s[44]||(s[44]=[X(" 树before事件 ")])),_:1}),c(J,{type:"primary",onClick:s[23]||(s[23]=S=>q("treeAfter"))},{default:h(()=>s[45]||(s[45]=[X(" 树after事件 ")])),_:1})]),_:1})],64)):de("",!0),c(V,{class:"event-btn"},{default:h(()=>[c(J,{type:"primary",onClick:s[24]||(s[24]=S=>q("tableConfig"))},{default:h(()=>s[46]||(s[46]=[X(" 编辑表格属性 ")])),_:1})]),_:1}),s[49]||(s[49]=B("div",{class:"h3"},[B("h3",null,"接口数据事件")],-1)),c(V,{label:"主键"},{default:h(()=>[c(L,{modelValue:y(l).pk,"onUpdate:modelValue":s[25]||(s[25]=S=>y(l).pk=S),placeholder:"列表主键"},null,8,["modelValue"])]),_:1}),c(V,{label:"列表数据请求URL"},{default:h(()=>[c(L,{modelValue:y(l).apiKey.list,"onUpdate:modelValue":s[26]||(s[26]=S=>y(l).apiKey.list=S),placeholder:"一般不需要填写，使用默认值"},null,8,["modelValue"])]),_:1}),c(V,{label:"删除列表数据URL"},{default:h(()=>[c(L,{modelValue:y(l).apiKey.del,"onUpdate:modelValue":s[27]||(s[27]=S=>y(l).apiKey.del=S),placeholder:"一般不需要填写，使用默认值"},null,8,["modelValue"])]),_:1}),c(V,{label:"编辑保存状态URL"},{default:h(()=>[c(L,{modelValue:y(l).apiKey.edit,"onUpdate:modelValue":s[28]||(s[28]=S=>y(l).apiKey.edit=S),placeholder:"一般不需要填写，使用默认值"},null,8,["modelValue"])]),_:1}),c(V,{label:"导出列表URL"},{default:h(()=>[c(L,{modelValue:y(l).apiKey.export,"onUpdate:modelValue":s[29]||(s[29]=S=>y(l).apiKey.export=S),placeholder:"一般不需要填写，使用默认值"},null,8,["modelValue"])]),_:1}),c(V,{class:"event-btn"},{default:h(()=>[c(J,{type:"primary",onClick:s[30]||(s[30]=S=>q("before"))},{default:h(()=>s[47]||(s[47]=[X(" before事件 ")])),_:1}),c(J,{type:"primary",onClick:s[31]||(s[31]=S=>q("after"))},{default:h(()=>s[48]||(s[48]=[X(" after事件 ")])),_:1})]),_:1})]}),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),To={class:"main-body"},Vo={class:"header"},xo={class:"field"},Oo={class:"table-field-list"},Io={class:"list"},Ao={class:"main-form main-table"},Po={key:1,class:"tip"},No={class:"control-btn"},Fo={key:0,class:"tip"},Mo={class:"control-other"},Bo={key:0,class:"tip"},Lo=["onClick"],Uo=["innerHTML"],Ro=["onClick"],$o={key:4},Xo=Ut({__name:"index",setup(o){Mn().changeBreadcrumb([{label:"设计管理"},{label:"列表页设计"}]);const t=Se(),n=Se(),l=Bn().query,a=Ln(),i=Ot({searchData:{},loading:!1,attrObj:{},config:{},previewVisible:!1,tabsName:"second",formFieldList:[],dict:{},refreshTable:!0}),r=Se({tableProps:{},columns:[],config:{openType:"page",fixedBottomScroll:!0,columnsSetting:!0,expand:!0},apiKey:{},controlBtn:[]}),u=Se();tn("tableData",r);const d=Se({});tn("currentObj",d);const f=Ot({visible:!1,title:"",direction:"ltr",content:"",codeType:"",type:""}),m=({type:C,value:v})=>{C==="formId"?xt(v).then(({data:w})=>{i.formFieldList=w}):C==="openDrawer"&&re(v)},k=()=>{f.visible=!1,f.content="",f.codeType="",f.title="",f.type=""},N=Rt(()=>{var w;const C={label:"表单字段",options:i.formFieldList},v=[{label:"其他字段",options:[{label:"多选",type:"selection"},{label:"序号",type:"index",width:"70px"},{label:"操作"}]}];return(w=i.formFieldList)!=null&&w.length&&v.unshift(C),v}),O=C=>{r.value.columns.forEach((v,w)=>{v.prop===C.prop&&r.value.columns.splice(w,1)})},P=(C,v)=>{if(v){let w=!1;r.value.columns.forEach(g=>{(g.prop&&g.prop===C.prop||g.type&&g.type===C.type)&&(w=!0)}),w||r.value.columns.push(C)}else r.value.columns.forEach((w,g)=>{w.prop===C.prop&&r.value.columns.splice(g,1)})},ae=C=>{switch(C){case"del":r.value=JSON.parse(u.value),i.selectField=[],d.value={};break;case"eye":i.previewVisible=!0;break;case"json":re("json");break;case"vue":t.value.openTable(r.value);break;case"save":q();break}},re=C=>{var j,V;const v="";let w,g="",s=!1,x="ltr";switch(C){case"json":w=r.value,x="rtl";break;case"tableConfig":g="el-table的相关属性",w=r.value.tableProps||{};break;case"before":case"after":w=(r.value.events||{})[C],w||(w=Ze(C+"Type","list"),s=!0);break;case"treeProp":w=r.value.treeData||{},Object.keys(w).length===1&&(w={show:!0,treeProps:{},name:"唯一标识",method:"post"}),g="更多参数详见ak-list组件";break;case"treeBefore":w=(j=r.value.treeData)==null?void 0:j.before,g=yt.before,w||(w=Ze("beforeType","tree"),s=!0);break;case"treeAfter":w=(V=r.value.treeData)==null?void 0:V.after,g=yt.after,w||(w=Ze("afterType","tree"),s=!0);break;case"buttons":w=d.value.buttons||[],g="可设置多个操作按钮，可使用内置key=edit/del快速设置按钮";break;case"controlBtn":w=r.value.controlBtn,g="操作按钮列表，可使用内置key=add/edit/del/export快速设置按钮";break;case"columns":w=d.value||[],g="支持el-table-column所有属性";break;case"renderFormatter":w=d.value.renderFormatter,w||(w=Ze("renderFormatter"),s=!0),g="渲染前对字段值的预处理方法，需返回新值";break}switch(v){case"json":w=Yn(w);break;default:s||(w=bt(w,!0))}f.visible=!0,f.direction=x,f.title=g||yt[C],f.content=w,f.codeType=v,f.type=C},K=C=>{const v=ut(C);switch(f.type){case"json":r.value=v;break;case"treeProp":r.value.treeData=v;break;case"buttons":d.value.buttons=v;break;case"controlBtn":r.value.controlBtn=v;break;case"before":case"after":r.value.events||(r.value.events={}),r.value.events[f.type]=v;break;case"tableConfig":r.value.tableProps=v;break;case"treeBefore":r.value.treeData.before=v;break;case"treeAfter":r.value.treeData.after=v;break;case"columns":d.value=v;break;case"renderFormatter":d.value.renderFormatter=v;break}k()},Z=Se(),ee=C=>{d.value=C,i.tabsName="first",Z.value.rowChange()},ge=()=>{if(!l.id){Qe.error("请先保存设计的列表");return}a.push({path:"/design/form",query:{id:l.id,type:"search",redirect:`/design/list?id=${l.id}`}})},te=()=>{const C=n.value.querySelector(".el-table__header-wrapper tr");E.create(C,{animation:180,delay:0,onEnd:v=>{const w=r.value.columns[v.oldIndex];r.value.columns.splice(v.oldIndex,1),r.value.columns.splice(v.newIndex,0,w),i.refreshTable=!1,vt(()=>{i.refreshTable=!0,vt(()=>{te()})})}})},q=()=>{const{formId:C,name:v}=r.value.config,{list:w,del:g}=r.value.apiKey;if(!C&&(!w||!g))return Qe.error("请选择所属表单或配置接口url");const s={listData:bt(r.value),data:bt(i.searchData)||"{}",source:C,name:v||"未命名列表",type:2};let x="designSave";l.id?(Object.assign(s,{id:l.id}),x="designEdit"):s.status=1,i.loading=!0,ht(x,s).then(()=>{Qe({message:"保存成功！",type:"success"}),a.push({path:"/design/list/list"}),i.loading=!1}).catch(j=>{Qe.error(j.message||"保存异常"),i.loading=!1})};return gn(()=>{u.value=JSON.stringify(r.value),vt(()=>{te()}),l.id&&yo(l.id).then(({tableData:C,searchData:v,source:w,name:g})=>{r.value=C,i.searchData=v,C.config.formId&&xt(w).then(({data:s})=>{i.formFieldList=s}),r.value.config.name=g}),l.form&&(r.value.config.formId=l.form,xt(l.form).then(({data:C,defaultSearch:v})=>{r.value.columns=C,i.formFieldList=JSON.parse(JSON.stringify(C)),r.value.controlBtn=[{key:"add"},{key:"del"}],r.value.columns.push({label:"操作",render:"buttons",config:{},buttons:[{key:"edit"},{key:"del",render:"confirm",popConfirm:{title:"确认删除该记录吗？",confirmButtonText:"确认",cancelButtonText:"取消",confirmButtonType:"danger"}}]}),i.searchData={list:v,form:{size:"default"},config:{submitCancel:!0}}}))}),(C,v)=>{var z,Ht,zt,Wt,Gt,Kt,qt;const w=U("el-button"),g=U("el-checkbox"),s=U("el-popover"),x=U("ak-form"),j=U("el-divider"),V=U("el-button-group"),ie=U("el-tooltip"),L=U("el-switch"),J=U("el-image"),Ae=U("el-tag"),qe=U("el-table-column"),Pe=U("el-table"),b=U("ak-list"),S=U("el-dialog"),ne=Un("loading");return _(),F("div",null,[It((_(),F("div",{ref_key:"container",ref:n,class:"design-container design-table"},[B("div",To,[B("div",Vo,[B("div",xo,[c(s,{placement:"bottom",width:420,trigger:"hover"},{reference:h(()=>[c(w,{type:"primary",plain:"",size:"small"},{default:h(()=>v[4]||(v[4]=[X(" 添加表格列字段 ")])),_:1})]),default:h(()=>[B("div",Oo,[(_(!0),F(Q,null,he(N.value,(M,Ve)=>(_(),F("div",{key:Ve,class:"item"},[B("h3",null,At(M.label),1),B("div",Io,[(_(!0),F(Q,null,he(M.options,Je=>(_(),R(g,{key:Je.prop,label:Je.label,onChange:In=>P(Je,In)},null,8,["label","onChange"]))),128))])]))),128))])]),_:1})]),c(jn,{onClick:ae})]),B("div",Ao,[B("div",{class:"search-box",title:"条件查询搜索区域，单击可编辑",onClick:ge},[(Ht=(z=i.searchData)==null?void 0:z.list)!=null&&Ht.length?(_(),R(x,{key:0,"operate-type":"search",data:i.searchData,"request-url":""},null,8,["data"])):(_(),F("div",Po," 条件查询搜索区域，单击可编辑 "))]),c(j,{"border-style":"dashed"}),B("div",No,[B("div",{class:"btn-group",title:"单击可编辑",onClick:v[0]||(v[0]=M=>re("controlBtn"))},[((Wt=(zt=r.value)==null?void 0:zt.controlBtn)==null?void 0:Wt.length)===0||!((Gt=r.value)!=null&&Gt.controlBtn)?(_(),F("div",Fo," 操作按钮区域，点击可添加如新增、删除 ")):(_(),R(Zt,{key:1,position:"top",buttons:y(en)((Kt=r.value)==null?void 0:Kt.controlBtn),row:{}},null,8,["buttons"]))]),B("div",Mo,[c(V,null,{default:h(()=>{var M,Ve;return[(M=r.value.config)!=null&&M.expand?(_(),R(w,{key:0,circle:"",icon:"Search",title:"展开/收起筛选"})):de("",!0),((Ve=r.value.config)==null?void 0:Ve.columnsSetting)!==!1?(_(),R(w,{key:1,circle:"",icon:"SetUp",title:"设置列显示隐藏"})):de("",!0)]}),_:1})])]),(qt=r.value.columns)!=null&&qt.length?de("",!0):(_(),F("div",Bo," 表格列设置区域，可从左上角 添加表格列字段 选择已有列或直接从上方工具栏 生成脚本预览 编辑 ")),i.refreshTable?(_(),R(Pe,Pt({key:1},r.value.tableProps||{},{ref:"tableEl",data:[{}]}),{default:h(()=>[(_(!0),F(Q,null,he(r.value.columns,M=>(_(),R(qe,Pt({key:M.prop||M.label,ref_for:!0},M),Rn({header:h(Ve=>[X(At(Ve.column.label)+" ",1),B("i",{class:"icon-close",onClick:Je=>O(M)},null,8,Lo),M.help?(_(),R(ie,{key:0,placement:"top"},{content:h(()=>[B("span",{innerHTML:M.help},null,8,Uo)]),default:h(()=>[v[5]||(v[5]=B("i",{class:"icon-help"},null,-1))]),_:2},1024)):de("",!0)]),_:2},[M.type!=="index"?{name:"default",fn:h(()=>[M.type==="selection"?(_(),R(g,{key:0})):(_(),F("div",{key:1,onClick:$n(Ve=>ee(M),["stop"])},[M.render==="switch"?(_(),R(L,{key:0})):M.render==="image"?(_(),R(J,{key:1,style:Xn({width:M.config.width,height:M.config.height})},null,8,["style"])):M.render==="tag"?(_(),R(Ae,{key:2},{default:h(()=>v[6]||(v[6]=[X(" 设置 ")])),_:1})):M.render==="buttons"?(_(),R(Zt,{key:3,class:"btn-group",position:"demo",buttons:y(en)(M.buttons,"right"),row:{}},null,8,["buttons"])):(_(),F("span",$o,"设置"))],8,Ro))]),key:"0"}:void 0]),1040))),128))]),_:1},16)):de("",!0),v[7]||(v[7]=B("div",{class:"table-tip"},[X(" 操作提示："),B("br"),X(" *从数据列表配置中选择 所属表单"),B("br"),X(" *从左上角 添加表格字段 选择预设字段"),B("br"),X(" *可拖动表头字段移动调整表头字段排列顺序"),B("br"),X(" *可通过顶部工具栏 生成脚本预览 查看或编辑添加自定义字段 ")],-1))])]),c(Co,{ref_key:"controlAttrEl",ref:Z,"tabs-name":i.tabsName,"onUpdate:tabsName":v[1]||(v[1]=M=>i.tabsName=M),onChangeEvent:m},null,8,["tabs-name"])])),[[ne,i.loading]]),c(zn,{modelValue:f.visible,"onUpdate:modelValue":v[2]||(v[2]=M=>f.visible=M),title:f.title,direction:f.direction,content:f.content,"code-type":f.codeType,onBeforeClose:k,onConfirm:K},null,8,["modelValue","title","direction","content","code-type"]),c(Hn,{ref_key:"vueFileEl",ref:t},null,512),c(S,{modelValue:i.previewVisible,"onUpdate:modelValue":v[3]||(v[3]=M=>i.previewVisible=M),title:"预览",fullscreen:!0},{default:h(()=>[i.previewVisible?(_(),R(b,{key:0,data:r.value,"search-data":i.searchData},null,8,["data","search-data"])):de("",!0)]),_:1},8,["modelValue"])])}}});typeof nn=="function"&&nn(Xo);export{Xo as default};
