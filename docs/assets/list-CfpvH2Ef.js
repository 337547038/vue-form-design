import{d as h,G as _,l as a,c as k,j as o,w as v,r as c,u as x,o as V,H as w,q as D}from"./index-CbbnYBXf.js";const E=h({__name:"list",setup(I){const s=x(),l=_({visible:!1}),n=a(),r=a(),p=a({columns:[{label:"勾选",type:"selection"},{prop:"id",label:"ID",width:"60px"},{prop:"name",label:"名称",width:"150px"},{prop:"category",label:"分类",render:"tag",replaceValue:"sys-screen"},{prop:"status",label:"状态",replaceValue:"sys-status",render:"tag",custom:{0:"info",1:"success"}},{prop:"creatUserId",label:"创建人",render:"text",replaceValue:"creatUser",config:{}},{prop:"creatDate",label:"创建时间",width:200,render:"datetime",config:{}},{label:"操作",prop:"control",width:"240px",fixed:"right",render:"buttons",buttons:[{label:"编辑",type:"primary",click:e=>{i(e)},attr:{text:!0}},{label:"设置",type:"primary",click:e=>{l.visible=!0,D(()=>{n.value.setValue(e)})},attr:{text:!0}},{label:"查看",type:"primary",click:e=>{const{href:t}=s.resolve({path:"/design/screen/show/"+e.id});window.open(t)},attr:{text:!0}},{label:"删除",key:"del",type:"danger",icon:"",attr:{text:!0}}]}],controlBtn:[{label:"新增大屏",icon:"plus",type:"primary",click:()=>{i({})}},{label:"删除",key:"del",type:"danger",icon:"delete"}],config:{}}),i=e=>{s.push({path:"/design/screen",query:{id:e.id}})},d=a({list:[{type:"input",control:{modelValue:"",placeholder:"请输入大屏名称"},config:{},name:"name",formItem:{label:"名称"}}],form:{labelWidth:"",class:"",size:"default"},config:{submitCancel:!0}}),u=a({list:[{type:"input",control:{modelValue:""},config:{},name:"name",formItem:{label:"名称"}},{type:"select",control:{modelValue:""},options:[],config:{optionsType:2,optionsFun:"sys-screen"},name:"category",formItem:{label:"分类"}},{type:"select",control:{modelValue:""},options:[],config:{optionsType:1,optionsFun:"roleList",method:"post",label:"name",value:"id",help:"哪些角色可以查看"},name:"roleId",formItem:{label:"权限角色"}},{type:"select",control:{modelValue:""},options:[],config:{optionsType:2,optionsFun:"sys-status"},name:"status",formItem:{label:"启用状态"}}],form:{labelWidth:"140px",class:"",size:"default",name:"formDialog"},config:{source:"",submitCancel:!0}}),m=(e,t)=>{t&&(l.visible=!1,r.value.getListData())},f=e=>{e==="reset"&&(l.visible=!1)};return(e,t)=>{const b=c("ak-list"),y=c("el-dialog");return V(),k("div",null,[o(b,{ref_key:"tableListEl",ref:r,"api-key":{list:"designList",del:"designDelete"},"search-data":d.value,data:p.value,query:{type:4}},null,8,["search-data","data"]),o(y,{modelValue:l.visible,"onUpdate:modelValue":t[0]||(t[0]=g=>l.visible=g),title:"设置",width:"480px","destroy-on-close":""},{default:v(()=>[o(w,{ref_key:"formEl",ref:n,data:u.value,"operate-type":"edit","submit-url":"designEdit",after:m,onBtnClick:f},null,8,["data"])]),_:1},8,["modelValue"])])}}});export{E as default};
