import{_ as Se,a as xe,b as Ne}from"./vueFile.vue_vue_type_script_setup_true_lang.054de381.js";import{e as de,r as le,B as De,l as te,a as D,o as r,c as m,m as p,i as k,F as $,f as R,g as F,w as a,d as C,t as re,p as w,b as e,C as ge,D as Ue,G as $e,H as _e,s as Ce,z as Be,I as Fe,n as Ae,v as Le,J as Ie,E as H,k as ae,u as Te,y as Oe,L as Pe,x as Re,_ as ye,q as qe}from"./index.e9042b8a.js";import{s as Y,o as ee}from"./form.d7b94745.js";const ie=[{label:"\u6807\u7B7E1",value:"value1"},{label:"\u6807\u7B7E2",value:"value2"},{label:"\u6807\u7B7E3",value:"value3"}],ue={type:"fixed",source:0,request:"get",sourceFun:""},Ee=[{title:"\u57FA\u7840\u5B57\u6BB5",children:[{type:"input",label:"\u5355\u884C\u6587\u672C",icon:"input",control:{modelValue:""},config:{}},{type:"textarea",label:"\u591A\u884C\u6587\u672C",icon:"textarea",control:{modelValue:""},config:{}},{type:"radio",label:"\u5355\u9009\u6846\u7EC4",icon:"radio",control:{modelValue:""},options:ie,config:ue},{type:"checkbox",label:"\u591A\u9009\u6846\u7EC4",icon:"checkbox",control:{modelValue:[]},options:ie,config:ue},{type:"select",label:"\u4E0B\u62C9\u9009\u62E9\u6846",icon:"select",control:{modelValue:[],appendToBody:!0},options:ie,config:ue},{type:"datePicker",label:"\u65E5\u671F\u9009\u62E9\u5668",icon:"date",control:{modelValue:"",type:"date"},config:{}},{type:"timePicker",label:"\u65F6\u95F4\u9009\u62E9\u5668",icon:"time",control:{modelValue:""},config:{}},{type:"colorPicker",label:"\u53D6\u8272\u5668",icon:"color",control:{modelValue:""},config:{}},{type:"switch",label:"\u5F00\u5173",icon:"switch",control:{modelValue:!1},config:{}},{type:"inputNumber",label:"\u8BA1\u6570\u5668",icon:"number",control:{modelValue:""},config:{}},{type:"cascader",label:"\u7EA7\u8054\u9009\u62E9\u5668",icon:"cascader",control:{modelValue:[]},options:[],config:ue},{type:"rate",label:"\u8BC4\u5206",icon:"rate",control:{modelValue:""},config:{}},{type:"slider",label:"\u6ED1\u5757",icon:"slider",control:{modelValue:""},config:{}},{type:"txt",label:"\u6587\u5B57",icon:"text",control:{modelValue:""},config:{}},{type:"title",label:"\u6807\u9898",icon:"title",control:{modelValue:"\u6807\u9898"},config:{}}]},{title:"\u9AD8\u7EA7\u5B57\u6BB5",children:[{type:"table",label:"\u5B50\u8868",icon:"table",list:[],tableData:[],control:{border:!0},config:{}},{type:"component",label:"\u81EA\u5B9A\u4E49\u7EC4\u4EF6",icon:"component",control:{modelValue:""},config:{}},{type:"upload",label:"\u56FE\u7247/\u6587\u4EF6",icon:"image",control:{modelValue:[]},config:{}},{type:"tinymce",label:"tinymce\u5BCC\u6587\u672C",icon:"tinymce",control:{modelValue:""},config:{}}]},{title:"\u5E03\u5C40\u5B57\u6BB5",children:[{type:"grid",label:"\u683C\u6805\u5E03\u5C40",icon:"grid",columns:[{attr:{span:12},list:[]},{attr:{span:12},list:[]}],control:{},config:{}},{type:"tabs",label:"\u6807\u7B7E\u9875",icon:"tabs",columns:[{label:"Tab1",list:[]}],control:{},config:{}},{type:"card",label:"\u5361\u7247\u5E03\u5C40",icon:"card",list:[],control:{},config:{},item:{}},{type:"divider",label:"\u5206\u5272\u7EBF",icon:"divider",control:{},config:{}},{type:"div",label:"div\u5BB9\u5668",icon:"div",control:{},config:{},list:[]}]}],ze={class:"components-list"},He={key:0},Ke=k("div",{class:"title"},"\u5DF2\u6709\u8868\u5355\u5B57\u6BB5",-1),Je={class:"content"},Me={class:"title"},We=["title"],Ge=de({__name:"dragControl",props:{formData:{default:()=>({list:[],form:{}})},searchData:{default:()=>[]},searchDesign:{type:Boolean,default:!1}},emits:["update:searchData"],setup(X,{emit:K}){const B=X,S=le(B.searchData);De(()=>B.searchData,y=>{S.value=y});const A=te(()=>B.searchDesign?Ee.slice(0,1):Ee),o=y=>JSON.parse(JSON.stringify(y)),P=(y,x)=>{if(x){const b=JSON.parse(JSON.stringify(y));delete b.rules,delete b.customRules,S.value.push(b)}else B.searchData.forEach((b,L)=>{b.name===y.name&&S.value.splice(L,1)});K("update:searchData",S.value)},f=y=>{let x=!1;return B.searchData.forEach(b=>{b.name===y&&(x=!0)}),x},u=te(()=>{const y=[];return q(B.formData.list,y),y}),Q=["txt","title","table","component","upload"],q=(y,x)=>{y&&y.forEach(b=>{b.type==="grid"||b.type==="tabs"?b.columns.forEach(L=>{q(L.list,x)}):b.type==="card"?q(b.list,x):Q.indexOf(b.type)===-1&&x.push(b)})};return(y,x)=>{var L;const b=D("el-checkbox");return r(),m("div",ze,[X.searchDesign&&((L=p(u))==null?void 0:L.length)?(r(),m("div",He,[Ke,k("div",Je,[(r(!0),m($,null,R(p(u),I=>(r(),F(b,{key:I.name,checked:f(I.name),onChange:z=>P(I,z)},{default:a(()=>[C(re(I.item.label),1)]),_:2},1032,["checked","onChange"]))),128))])])):w("",!0),(r(!0),m($,null,R(p(A),(I,z)=>(r(),m("div",{key:z},[k("div",Me,re(I.title),1),e(p(Ue),{itemKey:"key123",tag:"ul",modelValue:I.children,"onUpdate:modelValue":c=>I.children=c,group:{name:"form",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:o},{item:a(({element:c})=>[k("li",{class:ge([c.type])},[k("i",{class:ge(`icon-${c.icon}`)},null,2),k("span",{title:c.label},re(c.label),9,We)],2)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))])}}}),Qe={class:"sidebar-tools"},je=k("h3",null,"\u901A\u7528\u5C5E\u6027",-1),Xe=C("="),Ye=C("\u9690\u85CF(\u9ED8\u8BA4)"),Ze=C("\u7981\u7528"),eu=k("h3",null,"\u6807\u7B7E\u914D\u7F6E\u9879",-1),uu=["onClick"],lu=C("\u589E\u52A0\u6807\u7B7E"),tu={key:2},au=k("h3",null,"\u9009\u9879\u914D\u7F6E",-1),ou={key:0},nu=["onClick"],su=C("\u65B0\u589E"),ru=C("\u52A8\u6001\u9009\u9879"),iu=C("\u6570\u636E\u6E90"),du=C("\u65B9\u6CD5\u51FD\u6570 "),cu=C("\u63A5\u53E3\u5B57\u5178 "),pu=k("h3",null,"\u6821\u9A8C\u8BBE\u7F6E",-1),mu={key:0},fu=["onClick"],hu=C("\u5FEB\u901F\u6DFB\u52A0"),vu=C("\u7F16\u5199\u6821\u9A8C\u89C4\u5219 "),bu=C("\u5FC5\u586B "),gu={key:4},Fu=k("h3",null,"\u5176\u4ED6\u5C5E\u6027",-1),yu=C("\u6DFB\u52A0\u5C5E\u6027 "),Eu=C("\u6DFB\u52A0\u65F6\u83B7\u53D6\u8BF7\u6C42 "),Du=C("\u7F16\u8F91\u8868\u5355\u6837\u5F0F "),_u=de({__name:"formControlAttr",props:{formData:null},emits:["openDialog","update:formData"],setup(X,{emit:K}){var ce,pe,me,fe;const B=X,S=$e(B.formData,"form"),A=le(B.formData.config||{}),o=_e(),P=Ce(),f=Be({formAttr:[{label:"\u6570\u636E\u6E90",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90",value:S.value.formId,type:"select",options:[],key:"dataSource",hide:P.query.type==="search"},{label:"\u8868\u5355\u540D\u79F0",value:S.value.title,key:"title",hide:P.query.type==="search"},{label:"\u8868\u5355\u6807\u8BC6",value:S.value.name,key:"name"},{label:"\u8868\u5355\u6807\u7B7E\u5BBD\u5EA6",value:S.value.labelWidth,placeholder:"\u8868\u5355label\u5BBD\uFF0C\u5982180px",key:"labelWidth"},{label:"\u8868\u5355\u6837\u5F0F\u540D\u79F0",value:S.value.class,placeholder:"\u989D\u5916\u6DFB\u52A0\u7684\u8868\u5355class\u7C7B\u540D",key:"class"},{label:"\u7EC4\u4EF6\u5C3A\u5BF8",value:S.value.size,type:"select",key:"size",options:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},{label:"\u63D0\u4EA4\u6309\u94AE",value:(pe=(ce=A.value)==null?void 0:ce.formBtn)==null?void 0:pe.confirm,placeholder:"\u63D0\u4EA4\u6309\u94AE\u6587\u6848\uFF0C\u7A7A\u4E0D\u663E\u793A",path:"formBtn",key:"confirm"},{label:"\u53D6\u6D88\u8FD4\u56DE\u6309\u94AE",value:(fe=(me=A.value)==null?void 0:me.formBtn)==null?void 0:fe.cancel,placeholder:"\u53D6\u6D88\u8FD4\u56DE\u6309\u94AE\u6587\u6848\uFF0C\u7A7A\u4E0D\u663E\u793A",path:"formBtn",key:"cancel"}],dataSourceList:{},customRulesList:[...Fe,{type:"rules",label:"\u81EA\u5B9A\u4E49\u6B63\u5219"},{type:"methods",label:"\u81EA\u5B9A\u4E49\u65B9\u6CD5"}],isSearch:P.query.type==="search",attrList:[]}),u=te(()=>o.controlAttr);De(()=>u.value,t=>{var n;t&&((n=Object.keys(t))==null?void 0:n.length)>0?Q():f.attrList=[]});const Q=()=>{const{control:t={},className:n="",type:d,name:V,config:E={},item:h={},attr:v={}}=u.value;let U=!1;if(d==="table"){const _=u.value&&u.value.list;_&&_.length>0&&(U=_[0].type==="index")}f.attrList=[{label:"\u81EA\u5B9A\u4E49Class",value:n,placeholder:"\u6837\u5F0F\u7C7B\u540D",path:"config.className"},{label:"\u5B57\u6BB5\u6807\u8BC6",value:V,type:Object.keys(f.dataSourceList).length>0?"select":"text",placeholder:"\u5B57\u6BB5\u552F\u4E00\u6807\u8BC6\uFF0C\u5BF9\u5E94\u6570\u636E\u5E93",dict:f.dataSourceList,path:"name",vHide:["grid","tabs","card","title","gridChild","tableColumn","divider","txt","div"],eventName:"filedNameKey"},{label:"\u5360\u4F4D\u5185\u5BB9",value:t.placeholder,placeholder:"placeholder",path:"control.placeholder",vShow:["password","input","textarea","select","date","number","datePicker","tinymce","timePicker"]},{label:"label\u503C",value:h.label,path:"item.label",vHide:["table","grid","tabs","title","gridChild","div","inputSlot"]},{label:"\u9690\u85CFlabel",value:h.showLabel,path:"item.showLabel",type:"switch",vHide:["table","grid","tabs","title","gridChild","divider","card","div","inputSlot"]},{label:"\u5E2E\u52A9\u4FE1\u606F",value:E.help,path:"config.help",vHide:["table","grid","tabs","gridChild","divider","div","inputSlot"]},{label:"\u8868\u5355\u6805\u683C",value:E.span,placeholder:"\u8868\u5355\u533A\u57DF\u6805\u683C\u5BBD",path:"config.span",vHide:["table","grid","gridChild","divider"],isNum:!0},{label:"\u6587\u672C\u503C",value:t.modelValue,placeholder:"\u652F\u6301html",path:"control.modelValue",vShow:["txt"],inputStyle:"textarea"},{label:"\u8BBE\u4E3A\u5BC6\u7801",value:d,type:"select",dict:{\u6587\u672C:"input",\u5BC6\u7801:"password"},path:"type",vShow:["input","password"],vIf:f.isSearch},{label:"\u6587\u672C\u57DF\u9AD8\u5EA6",value:t.rows,placeholder:"\u8F93\u5165\u6846\u884C\u6570",path:"control.rows",vShow:["textarea"],isNum:!0},{label:"\u524D\u7F00",value:E.prepend,placeholder:"\u6587\u672C\u524D\u7F00",path:"config.prepend",vShow:["input","password"]},{label:"\u540E\u7F00",value:E.append,placeholder:"\u6587\u672C\u540E\u7F00",path:"config.append",vShow:["input","password"]},{label:"\u662F\u5426\u591A\u9009",value:t.multiple,path:"control.multiple",type:"switch",vShow:["select"],eventName:"selectMultiple"},{label:"\u662F\u5426\u7981\u7528",value:t.disabled,path:"control.disabled",type:"switch",vShow:["input","password","textarea","radio","checkbox","select","date","switch","number","cascader","upload","rate","tinymce"],vIf:f.isSearch},{label:"\u662F\u5426\u7981\u7528\u7F16\u8F91",value:E.editDisabled,path:"config.editDisabled",type:"switch",vShow:["input","password","textarea","radio","checkbox","select","date","switch","number","cascader","upload"],vIf:f.isSearch},{label:"\u6DFB\u52A0\u9875\u9690\u85CF",value:E.disabledAdd,path:"config.disabledAdd",type:"switch",vIf:f.isSearch,vHide:["inputSlot"]},{label:"\u7F16\u8F91\u9875\u9690\u85CF",value:E.disabledEdit,path:"config.disabledEdit",type:"switch",vIf:f.isSearch,vHide:["inputSlot"]},{label:"\u8BE6\u60C5\u9875\u9690\u85CF",value:E.disabledDetail,path:"config.disabledDetail",type:"switch",vIf:f.isSearch,vHide:["inputSlot"]},{label:"\u8BBE\u4E3AInput\u8F93\u5165\u6846\u7684\u524D/\u540E\u7F00",value:d==="inputSlot",path:"",type:"switch",vShow:["select","inputSlot"],eventName:"setInputSlot"},{label:"\u6807\u9898",value:t.modelValue,path:"control.modelValue",vShow:["title"]},{label:"\u5360\u636E\u7684\u5217\u6570span",value:v.span,path:"attr.span",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5DE6\u4FA7\u7684\u95F4\u9694\u683C\u6570offset",value:v.offset,path:"attr.offset",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5411\u53F3\u79FB\u52A8\u683C\u6570push",value:v.push,path:"attr.push",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5411\u5DE6\u79FB\u52A8\u683C\u6570pull",value:v.pull,path:"attr.pull",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5E8F\u53F7\u5217",value:U,type:"switch",vShow:["table"],eventName:"tableColumn1"},{label:"\u7EC4\u4EF6\u540D",value:E.template,placeholder:"\u5168\u5C40\u6CE8\u518C\u7684\u7EC4\u4EF6\u540D\u79F0",path:"config.componentName",vShow:["component"]},{label:"\u4E0A\u4F20\u5730\u5740",value:t.action,placeholder:"\u56FE\u7247/\u6587\u4EF6\u4E0A\u4F20\u5730\u5740",path:"control.action",vShow:["upload"]},{label:"\u6587\u4EF6\u5B57\u6BB5\u540D",value:t.name,placeholder:"\u4E0A\u4F20\u7684\u6587\u4EF6\u5B57\u6BB5\u540D",path:"control.name",vShow:["upload"]},{label:"\u5217\u8868\u7C7B\u578B",value:t.listType,type:"select",dict:{text:"text",picture:"picture","picture-card":"picture-card"},path:"control.listType",vShow:["upload"]},{label:"\u63D0\u793A\u6587\u5B57",value:E.tip,placeholder:"\u63D0\u793A\u8BF4\u660E\u6587\u5B57",path:"config.tip",vShow:["upload"]},{label:"\u6309\u94AE\u6587\u672C",value:E.btnText,placeholder:"\u4E0A\u4F20\u6309\u94AE\u6587\u672C",path:"config.btnText",vShow:["upload"]},{label:"direction",type:"select",dict:{horizontal:"horizontal",vertical:"vertical"},value:t.direction,path:"control.direction",vShow:["divider"]},{label:"border-style",value:t.borderStyle,path:"control.borderStyle",vShow:["divider"]},{label:"content-position",type:"select",dict:{left:"left",right:"right",center:"center"},value:t.contentPosition,path:"control.contentPosition",vShow:["divider"]},{label:"\u6700\u5C0F\u503C",value:t.min,path:"control.min",vShow:["slider"],eventName:"formatNumber",isNum:!0},{label:"\u6700\u5927\u503C",value:t.max,path:"control.max",vShow:["rate","slider"],eventName:"formatNumber",isNum:!0},{label:"\u6B65\u957F",value:t.step,path:"control.step",vShow:["slider"],eventName:"formatNumber",isNum:!0},{label:"type",value:t.type,path:"control.type",vShow:["datePicker"],type:"select",placeholder:"\u663E\u793A\u7C7B\u578B",dict:{year:"year",month:"month",date:"date",datetime:"datetime",week:"week",datetimerange:"datetimerange",daterange:"daterange",monthrange:"monthrange"}},{label:"format",value:t.format,path:"control.format",vShow:["datePicker","timePicker"],placeholder:"\u663E\u793A\u5728\u8F93\u5165\u6846\u4E2D\u7684\u683C\u5F0F"},{label:"color-format",value:t.colorFormat,path:"control.colorFormat",type:"select",placeholder:"\u5199\u5165 v-model \u7684\u989C\u8272\u7684\u683C\u5F0F",dict:{hsl:"hsl",hsv:"hsv",hex:"hex",rgb:"rgb"},vShow:["colorPicker"]},{label:"\u6587\u672C\u9AD8\u5EA6",value:t.height,path:"control.height",placeholder:"\u6587\u672C\u9AD8\u5EA6(\u9884\u89C8\u67E5\u770B\u6548\u679C)",vShow:["tinymce"]},{label:"\u6587\u672C\u5BBD\u5EA6",value:t.width,path:"control.width",placeholder:"\u6587\u672C\u5BBD\u5EA6(\u9884\u89C8\u67E5\u770B\u6548\u679C)",vShow:["tinymce"]},{label:"\u56FE\u7247\u4E0A\u4F20\u5730\u5740",value:t.imgUrl,path:"control.imgUrl",placeholder:"\u56FE\u7247\u4E0A\u4F20\u5730\u5740",vShow:["tinymce"]},{label:"\u9644\u4EF6\u4E0A\u4F20\u5730\u5740",value:t.blobUrl,path:"control.blobUrl",placeholder:"\u9644\u4EF6\u4E0A\u4F20\u5730\u5740",vShow:["tinymce"]},{label:"\u663E\u793A\u6A21\u5F0F",value:E.style,path:"config.style",placeholder:"\u663E\u793A\u98CE\u683C(\u9884\u89C8\u67E5\u770B\u6548\u679C)",type:"select",dict:{default:"default",simple:"simple"},vShow:["tinymce"]}],f.attrList=f.attrList.filter(_=>{let J=!0;return _.vShow&&(J=_.vShow.indexOf(d)!==-1),_.vHide&&(J=_.vHide.indexOf(d)===-1),_.vIf&&(J=!1),J})},q=(t,n)=>{switch(t.eventName){case"selectMultiple":n?u.value.control.modelValue=[]:u.value.control.modelValue="";break;case"tableColumn1":i(n);break;case"formatNumber":break;case"filedNameKey":for(const d in f.dataSourceList)if(f.dataSourceList[d]===n){u.value.item.label=d,u.value.name=n;return}break;case"setInputSlot":n?(u.value.type="inputSlot",u.value.item.showLabel=!0,H.success(`\u8BF7\u5728\u5BF9\u5E94\u7684Input\u8F93\u5165\u6846\u5C5E\u6027\u524D\u540E\u7F00\u8BBE\u7F6Ekey:${u.value.name}`)):(u.value.type="select",u.value.item.showLabel=!1),Q();break}if(t.path){const d=t.isNum?parseInt(n):n;t.path&&y(u.value,t.path,d)}},y=(t,n,d)=>{let V=t;const E=n.split(".");let h=0;for(h;h<E.length-1;h++){const _=E[h];if(_ in V)V=V[_];else throw new Error(`${_} is undefined`)}const v=E[h],U=V[E[h]];return d!==void 0&&(V[v]=d),{obj:V,key:v,value:U}},x=(t,n)=>{n==="tabs"?u.value.columns.splice(t,1):u.value.options.splice(t,1)},b=t=>{u.value.type==="cascader"?L():t==="tabs"?u.value.columns.push({label:"\u6807\u7B7E\u540D\u79F0",list:[]}):u.value.options.push({label:"",value:""})},L=()=>{let t=u.value.control;u.value.type==="cascader"&&(t=u.value.options),K("openDialog",t,n=>{u.value.type==="cascader"?u.value.options=n:(u.value.control={},Object.assign(u.value.control,n))})},I=t=>{var n;(n=u.value.item)!=null&&n.rules||(u.value.item.rules=[]),t?u.value.item.rules.push({required:!0,message:"\u5FC5\u586B\u9879",trigger:"change"}):u.value.item.rules.splice(0,1)},z=()=>{var t,n;(t=u.value.item)!=null&&t.rules||(u.value.item.rules=[]),K("openDialog",(n=u.value.item)==null?void 0:n.rules,d=>{Object.assign(u.value.item.rules,d)})},c=(t,n)=>{if(t&&t.length===0||Object.keys(u.value).length===0)return!1;const d=t.indexOf(u.value.type);return n?d!==-1:d===-1},i=t=>{const n={name:"index",type:"index",item:{label:"\u5E8F\u53F7"},control:{},config:{}};t?u.value.list.unshift(n):u.value.list.splice(0,1)},g=te(()=>{var n;const t=u.value&&((n=u.value.item)==null?void 0:n.rules);return t&&t.length>0}),T=()=>{u.value.customRules||(u.value.customRules=[]),u.value.customRules.push({type:"required",message:"\u5FC5\u586B\u9879",trigger:"blur"})},oe=t=>{u.value.customRules&&u.value.customRules.splice(t,1)},ne=()=>{var t;K("openDialog",((t=B.formData.config)==null?void 0:t.style)||"","css")},O=t=>{const n=t||P.query.formId;n&&ae("formFiled",{id:n}).then(d=>{d.data.code===200&&d.data.data.forEach(V=>{f.dataSourceList[V.label]=V.name})}).catch(d=>{console.log(d)}),P.query.type!=="search"&&ae("datasource").then(d=>{f.formAttr[0].options=d.data.data})},se=(t,n)=>{switch(t.key==="dataSource"&&(O(t.value),o.setActiveKey(""),o.setControlAttr({})),t.key){case"confirm":case"cancel":case"addLoad":t.key==="addLoad"?A.value.addLoad=n:(A.value.submitBtn||(A.value.submitBtn={}),A.value.submitBtn[t.key]=t.value),K("update:formData",Object.assign(B.formData,{config:A.value}));break;default:S.value[t.key]=t.value}},Ve=t=>{switch(t){case 0:return"\u6570\u636E\u6E90\u63A5\u53E3URL";case 1:return"\u65B9\u6CD5\u540D\u79F0";case 2:return"\u5B57\u5178key\uFF0C\u9ED8\u8BA4\u4E3A\u5B57\u6BB5\u6807\u8BC6"}return""},ke=(t,n)=>{const d=Fe.filter(V=>V.type===n);d&&d.length&&(t.message=d[0].message)};return O(),(t,n)=>{const d=D("el-option"),V=D("el-select"),E=D("el-switch"),h=D("el-input"),v=D("el-form-item"),U=D("el-col"),_=D("el-radio"),J=D("el-radio-group"),j=D("el-button"),Z=D("el-tab-pane"),M=D("QuestionFilled"),W=D("el-icon"),G=D("el-tooltip"),he=D("el-tabs"),we=D("el-checkbox"),ve=D("el-form");return r(),m("div",Qe,[e(he,{modelValue:"first"},{default:a(()=>[e(Z,{label:"\u5B57\u6BB5\u5C5E\u6027",name:"first"},{default:a(()=>[e(ve,{size:"small",class:"form"},{default:a(()=>[je,(r(!0),m($,null,R(f.attrList,(l,N)=>(r(),F(v,{key:N,label:l.label},{default:a(()=>[l.type==="select"?(r(),F(V,{key:0,placeholder:l.placeholder,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,filterable:l.path==="name","allow-create":l.path==="name",onChange:s=>q(l,s)},{default:a(()=>[(r(!0),m($,null,R(l.dict,(s,be)=>(r(),F(d,{key:s,value:s,label:l.path==="name"?`${be}(${s})`:be},null,8,["value","label"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","filterable","allow-create","onChange"])):l.type==="switch"?(r(),F(E,{key:1,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,onChange:s=>q(l,s)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(r(),F(h,{key:2,type:l.inputStyle,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,placeholder:l.placeholder,onChange:s=>q(l,s)},null,8,["type","modelValue","onUpdate:modelValue","placeholder","onChange"]))]),_:2},1032,["label"]))),128)),p(u).config?(r(),m($,{key:0},[e(v,{label:"\u8054\u52A8\u6761\u4EF6"},{default:a(()=>[e(U,{span:9},{default:a(()=>[e(h,{placeholder:"\u6807\u8BC6\u540D\u79F0",modelValue:p(u).config.linkKey,"onUpdate:modelValue":n[0]||(n[0]=l=>p(u).config.linkKey=l)},null,8,["modelValue"])]),_:1}),e(U,{span:2,offset:1},{default:a(()=>[Xe]),_:1}),e(U,{span:9,offset:1},{default:a(()=>[e(h,{placeholder:"\u5173\u8054\u503C",modelValue:p(u).config.linkValue,"onUpdate:modelValue":n[1]||(n[1]=l=>p(u).config.linkValue=l)},null,8,["modelValue"])]),_:1})]),_:1}),c(["input","textarea","radio","checkbox","select","date","switch","number","cascader","slider","datePicker","timePicker","colorPicker","inputNumber","rate"],!0)?Ae((r(),F(v,{key:0,label:"\u8054\u52A8\u7ED3\u679C"},{default:a(()=>[e(J,{class:"option-radio",modelValue:p(u).config.linkResult,"onUpdate:modelValue":n[2]||(n[2]=l=>p(u).config.linkResult=l)},{default:a(()=>[e(_,{label:"hidden"},{default:a(()=>[Ye]),_:1}),e(_,{label:"disabled"},{default:a(()=>[Ze]),_:1})]),_:1},8,["modelValue"])]),_:1},512)),[[Le,p(u).config.linkKey]]):w("",!0)],64)):w("",!0),c(["tabs"],!0)?(r(),m($,{key:1},[eu,(r(!0),m($,null,R(p(u).columns,(l,N)=>(r(),F(v,{key:N},{default:a(()=>[e(U,{span:12},{default:a(()=>[e(h,{placeholder:"\u6807\u7B7E\u914D\u7F6E\u9879",modelValue:l.label,"onUpdate:modelValue":s=>l.label=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(U,{span:2,offset:1},{default:a(()=>[k("i",{class:"icon-del",onClick:s=>x(N,"tabs")},null,8,uu)]),_:2},1024)]),_:2},1024))),128)),e(v,null,{default:a(()=>[e(j,{onClick:n[3]||(n[3]=l=>b("tabs"))},{default:a(()=>[lu]),_:1})]),_:1})],64)):w("",!0),c(["radio","select","checkbox","cascader","inputSlot"],!0)?(r(),m("div",tu,[au,c("select",!0)?(r(),F(v,{key:0,label:"\u6DFB\u52A0\u5168\u90E8\u9879"},{default:a(()=>[e(h,{placeholder:"\u8BF7\u8F93\u5165\u5168\u90E8\u9879\u6587\u6848",modelValue:p(u).config.addAll,"onUpdate:modelValue":n[4]||(n[4]=l=>p(u).config.addAll=l)},null,8,["modelValue"])]),_:1})):w("",!0),e(he,{modelValue:p(u).config.type,"onUpdate:modelValue":n[9]||(n[9]=l=>p(u).config.type=l)},{default:a(()=>[e(Z,{label:"\u56FA\u5B9A\u9009\u9879",name:"fixed"},{default:a(()=>[p(u).type!=="cascader"?(r(),m("div",ou,[(r(!0),m($,null,R(p(u).options,(l,N)=>(r(),F(v,{key:N},{default:a(()=>[e(U,{span:10},{default:a(()=>[e(h,{placeholder:"\u9009\u9879\u6807\u7B7E",modelValue:l.label,"onUpdate:modelValue":s=>l.label=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(U,{span:10,offset:1},{default:a(()=>[e(h,{placeholder:"\u9009\u9879\u503C",modelValue:l.value,"onUpdate:modelValue":s=>l.value=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(U,{span:2,offset:1},{default:a(()=>[k("i",{class:"icon-del",onClick:s=>x(N)},null,8,nu)]),_:2},1024)]),_:2},1024))),128))])):w("",!0),e(v,null,{default:a(()=>[e(j,{onClick:b},{default:a(()=>[su]),_:1})]),_:1})]),_:1}),e(Z,{name:"async"},{label:a(()=>[e(G,{content:"\u9009\u7528\u52A8\u6001\u9009\u9879\u65F6\u8BF7\u5220\u9664\u56FA\u5B9A\u9009\u9879\u6570\u636E",placement:"top"},{default:a(()=>[k("span",null,[ru,e(W,null,{default:a(()=>[e(M)]),_:1})])]),_:1})]),default:a(()=>[e(J,{class:"option-radio",modelValue:p(u).config.source,"onUpdate:modelValue":n[5]||(n[5]=l=>p(u).config.source=l),onChange:n[6]||(n[6]=l=>p(u).config.sourceFun="")},{default:a(()=>[e(_,{label:0},{default:a(()=>[iu]),_:1}),e(_,{label:1},{default:a(()=>[du,e(G,{content:"\u9002\u7528\u4E8E\u5BFC\u51FA\u4E3A\u5355\u72EC\u7684vue\u6587\u4EF6\uFF0C\u5728\u5F53\u524D\u6587\u4EF6\u4F7F\u7528provide\u5F62\u5F0F\u5C06\u65B9\u6CD5\u4F20\u9012",placement:"top"},{default:a(()=>[e(W,null,{default:a(()=>[e(M)]),_:1})]),_:1})]),_:1}),e(_,{label:2},{default:a(()=>[cu,e(G,{content:"\u4ECE\u5F53\u524D\u6570\u636E\u63A5\u53E3dict\u91CC\u5339\u914D\uFF0C\u53EF\u51CF\u5C11\u8BF7\u6C42\u6570\uFF0C\u5B9E\u9645\u9879\u76EE\u4E5F\u4E0D\u662F\u6BCF\u4E2A\u9009\u9879\u90FD\u6709\u5355\u72EC\u7684\u63A5\u53E3\u3002\u6B64\u8BBE\u7F6E\u9700\u8981\u5F00\u542F\u8868\u5355\u5C5E\u6027-\u6DFB\u52A0\u65F6\u83B7\u53D6\u8BF7\u6C42",placement:"top"},{default:a(()=>[e(W,null,{default:a(()=>[e(M)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(v,null,{default:a(()=>[e(h,{modelValue:p(u).config.sourceFun,"onUpdate:modelValue":n[8]||(n[8]=l=>p(u).config.sourceFun=l),placeholder:Ve(p(u).config.source)},Ie({_:2},[p(u).config.source?void 0:{name:"prepend",fn:a(()=>[e(V,{modelValue:p(u).config.request,"onUpdate:modelValue":n[7]||(n[7]=l=>p(u).config.request=l),style:{width:"80px"}},{default:a(()=>[e(d,{label:"get",value:"get"}),e(d,{label:"post",value:"post"})]),_:1},8,["modelValue"])])}]),1032,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):w("",!0),!f.isSearch&&c(["txt","title","table","grid","tabs","card","switch","gridChild","tableColumn","divider","div"])?(r(),m($,{key:3},[pu,c(["input","password","component"],!0)?(r(),m("div",mu,[(r(!0),m($,null,R(p(u).customRules,(l,N)=>(r(),F(v,{key:l.type},{default:a(()=>[e(h,{modelValue:l.message,"onUpdate:modelValue":s=>l.message=s,placeholder:"\u6821\u9A8C\u63D0\u793A\u4FE1\u606F"},{prepend:a(()=>[e(V,{modelValue:l.type,"onUpdate:modelValue":s=>l.type=s,style:{width:"80px"},onChange:s=>ke(l,s)},{default:a(()=>[(r(!0),m($,null,R(f.customRulesList,s=>(r(),F(d,{key:s.type,label:s.label,value:s.type},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),append:a(()=>[k("i",{class:"icon-del",onClick:s=>oe(N)},null,8,fu)]),_:2},1032,["modelValue","onUpdate:modelValue"]),l.type==="rules"?(r(),F(h,{key:0,placeholder:"\u6B63\u5219\u8868\u8FBE\u5F0F",modelValue:l.rules,"onUpdate:modelValue":s=>l.rules=s},null,8,["modelValue","onUpdate:modelValue"])):w("",!0),l.type==="methods"?(r(),F(h,{key:1,placeholder:"\u65B9\u6CD5\u540D\u79F0",modelValue:l.methods,"onUpdate:modelValue":s=>l.methods=s},null,8,["modelValue","onUpdate:modelValue"])):w("",!0)]),_:2},1024))),128)),e(v,null,{default:a(()=>[e(j,{onClick:T},{default:a(()=>[hu]),_:1}),e(j,{onClick:z},{default:a(()=>[vu,e(G,{content:"\u53EF\u53C2\u8003UI\u7EC4\u4EF6\u8868\u5355\u6821\u9A8C\uFF0C<a href='https://element-plus.gitee.io/zh-CN/component/form.html#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C' target='_blank' style='color:red'>\u8BE6\u60C5\u70B9\u51FB</a>",placement:"top","raw-content":""},{default:a(()=>[e(W,null,{default:a(()=>[e(M)]),_:1})]),_:1})]),_:1})]),_:1})])):(r(),F(v,{key:1},{default:a(()=>{var l,N;return[e(we,{modelValue:p(g),onChange:I},{default:a(()=>[bu]),_:1},8,["modelValue"]),((l=p(u).item)==null?void 0:l.rules)&&((N=p(u).item)==null?void 0:N.rules[0])?(r(),F(h,{key:0,placeholder:"\u81EA\u5B9A\u4E49\u5FC5\u586B\u9519\u8BEF\u63D0\u793A",modelValue:p(u).item.rules[0].message,"onUpdate:modelValue":n[10]||(n[10]=s=>p(u).item.rules[0].message=s)},null,8,["modelValue"])):w("",!0)]}),_:1}))],64)):w("",!0),c(["grid","card","gridChild","divider","div"])?(r(),m("div",gu,[Fu,e(j,{size:"small",onClick:L},{default:a(()=>[yu,e(G,{content:"\u53EF\u6DFB\u52A0\u5F53\u524D\u7EC4\u4EF6\u6240\u6709prop\u5C5E\u6027",placement:"top"},{default:a(()=>[e(W,null,{default:a(()=>[e(M)]),_:1})]),_:1})]),_:1})])):w("",!0)]),_:1})]),_:1}),e(Z,{label:"\u8868\u5355\u5C5E\u6027",name:"second"},{default:a(()=>[e(ve,{size:"small",class:"form"},{default:a(()=>[(r(!0),m($,null,R(f.formAttr.filter(l=>!l.hide),(l,N)=>(r(),F(v,{label:l.label,key:N},{default:a(()=>[l.type==="select"?(r(),F(V,{key:0,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,placeholder:l.placeholder,onChange:s=>se(l)},{default:a(()=>[(r(!0),m($,null,R(l.options,s=>(r(),F(d,{label:s.label||s.name,key:s.label||s.name,value:s.value||s.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])):(r(),F(h,{key:1,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,placeholder:l.placeholder,onChange:s=>se(l)},null,8,["modelValue","onUpdate:modelValue","placeholder","onChange"]))]),_:2},1032,["label"]))),128)),e(v,null,{label:a(()=>[Eu,e(G,{content:"\u65B0\u589E\u8868\u5355\u6570\u636E\u65F6\uFF0C\u4ECE\u63A5\u53E3\u83B7\u53D6\u65B0\u589E\u521D\u59CB\u6570\u636E",placement:"top"},{default:a(()=>[e(W,null,{default:a(()=>[e(M)]),_:1})]),_:1})]),default:a(()=>[e(E,{modelValue:A.value.addLoad,"onUpdate:modelValue":n[11]||(n[11]=l=>A.value.addLoad=l),onChange:n[12]||(n[12]=l=>se({key:"addLoad"},l))},null,8,["modelValue"])]),_:1}),e(v,null,{default:a(()=>[e(j,{onClick:ne},{default:a(()=>[Du,e(G,{content:"\u5F53\u524D\u8868\u5355\u5E94\u7528\u9875\u7684\u6837\u5F0F\uFF0C\u7C7B\u4F3C\u4E8E.vue\u6587\u4EF6\u4E2D\u7684<style scoped>\u4E2D\u7684\u6837\u5F0F",placement:"top"},{default:a(()=>[e(W,null,{default:a(()=>[e(M)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),Cu={class:"design-container"},Bu={class:"main-body"},Au={class:"main-form"},Vu={key:0,class:"empty-tips"},ku={key:0,id:"editJson"},wu={class:"dialog-footer"},Su=C(" \u786E\u5B9A "),xu={class:"dialog-footer"},Nu=C(" \u63D0\u4EA4 "),Uu=C(" \u53D6\u6D88 "),Tu=de({__name:"index",setup(X){var z;Te().changeBreadcrumb([{label:"\u7CFB\u7EDF\u5DE5\u5177"},{label:"\u8868\u5355\u8BBE\u8BA1"}]);const B=_e(),S=Oe(),A=Ce(),o=Be({formData:{list:[],form:{labelWidth:"",class:"",size:"default",name:"form"+new Date().getTime(),formId:A.query.formId||""}},visibleDialog:!1,dialogType:"",editor:{},loading:!1,drawerDirection:"rtl",formDataPreview:{},previewVisible:!1,searchDesign:((z=A.query)==null?void 0:z.type)==="search",formDataList:{},formDataTemp:{}}),P=le(),f=()=>{const c=A.query.id;c&&(o.loading=!0,ae("getFormById",{id:c}).then(i=>{if(i.data.code===200){const g=i.data.data;o.searchDesign?(g.searchData&&(o.formData=Y(g.searchData)),o.formDataList=Y(g.formData),o.formDataTemp=g):g.formData&&(o.formData=Y(g.formData))}o.loading=!1}).catch(i=>{H.info(i.data||"\u52A0\u8F7D\u5F02\u5E38"),o.loading=!1}))},u=c=>{switch(o.dialogType="",c){case"del":o.formData.list=[],B.setActiveKey(""),B.setControlAttr({});break;case"eye":B.setActiveKey(""),B.setControlAttr({}),o.previewVisible=!0;let i=ee(o.formData);const g=o.formData.form.name,T=new RegExp(`get${g}ControlByName`,"g");i=i.replace(T,`getPreview${g}ControlByName`),o.formDataPreview=Y(i),o.formDataPreview.form.name=`Preview${g}`;break;case"json":y(o.formData);break;case"save":q();break;case"vue":P.value.open(o.formData);break;case"import":y({});break}},Q=()=>{try{const c=o.editor.getValue();let i=c;o.dialogType!=="css"&&(i=Y(c)),typeof o.dialogType=="function"?o.dialogType(i):o.dialogType==="css"?(o.formData.config||(o.formData.config={}),o.formData.config.style=i):o.formData=i,o.visibleDialog=!1}catch{}},q=()=>{var g;const c=o.formData.form.title;if(!c){H.error("\u8BF7\u5207\u6362\u5230\u8868\u5355\u5C5E\u6027\u8F93\u5165\u8868\u5355\u540D\u79F0\uFF01");return}const i={searchData:o.formDataTemp.searchData,tableData:o.formDataTemp.tableData,formData:ee(o.formData),id:A.query.id,formId:((g=o.formData.form)==null?void 0:g.formId)||A.query.formId,name:c,type:1};o.searchDesign&&Object.assign(i,{searchData:ee(o.formData),formData:o.formDataTemp.formData}),o.loading=!0,ae("saveForm",i).then(T=>{T.data.code===200?(H({message:"\u4FDD\u5B58\u6210\u529F\uFF01",type:"success"}),S.push({path:"/designform/formlist"})):H.error(T.data),o.loading=!1}).catch(T=>{H.info(T.data||"\u4FDD\u5B58\u5F02\u5E38"),o.loading=!1}),A.query.id||window.sessionStorage.removeItem("formMenuList"),B.setActiveKey(""),B.setControlAttr({})},y=(c,i)=>{o.drawerDirection=i?"ltr":"rtl",o.dialogType=i,o.visibleDialog=!0;let g=ee(c,!0);i==="css"&&(g=c);const T=i==="css"?"css":"";qe(()=>{o.editor=Ne(g,"",T)})},x=c=>{b(),c()},b=()=>{o.visibleDialog=!1,o.dialogType=""},L=le(),I=()=>{L.value.validate((c,i)=>{if(c)H.success("\u6821\u9A8C\u901A\u8FC7"),console.log(i);else return H.error("\u6821\u9A8C\u4E0D\u901A\u8FC7"),!1})};return f(),Pe(()=>{Object.keys(o.editor).length!==0&&(o.editor.destroy(),o.editor.container.remove())}),(c,i)=>{const g=D("el-button"),T=D("el-drawer"),oe=D("el-dialog"),ne=Re("loading");return r(),m("div",Cu,[e(Ge,{formData:o.formDataList,searchData:o.formData.list,"onUpdate:searchData":i[0]||(i[0]=O=>o.formData.list=O),searchDesign:o.searchDesign},null,8,["formData","searchData","searchDesign"]),k("div",Bu,[e(Se,{onClick:u}),Ae((r(),m("div",Au,[o.formData.list.length===0?(r(),m("div",Vu," \u4ECE\u5DE6\u4FA7\u62D6\u62FD\u6765\u6DFB\u52A0\u5B57\u6BB5 ")):w("",!0),e(ye,{type:4,formData:o.formData},null,8,["formData"])])),[[ne,o.loading]])]),e(_u,{formData:o.formData,"onUpdate:formData":i[1]||(i[1]=O=>o.formData=O),onOpenDialog:y},null,8,["formData"]),e(T,{modelValue:o.visibleDialog,"onUpdate:modelValue":i[2]||(i[2]=O=>o.visibleDialog=O),size:"60%",direction:o.drawerDirection,"custom-class":"json-dialog","append-to-body":!0,"before-close":x},{default:a(()=>[o.visibleDialog?(r(),m("div",ku)):w("",!0),k("div",wu,[e(g,{type:"primary",size:"small",onClick:Q},{default:a(()=>[Su]),_:1})])]),_:1},8,["modelValue","direction"]),o.searchDesign?w("",!0):(r(),F(xe,{key:0,ref_key:"vueFileEl",ref:P},null,512)),e(oe,{modelValue:o.previewVisible,"onUpdate:modelValue":i[4]||(i[4]=O=>o.previewVisible=O),title:"\u9884\u89C8",fullscreen:!0},{footer:a(()=>[k("div",xu,[e(g,{size:"small",type:"primary",onClick:I},{default:a(()=>[Nu]),_:1}),e(g,{size:"small",onClick:i[3]||(i[3]=O=>o.previewVisible=!1)},{default:a(()=>[Uu]),_:1})])]),default:a(()=>[o.previewVisible?(r(),F(ye,{key:0,"form-data":o.formDataPreview,type:1,ref_key:"previewForm",ref:L},null,8,["form-data"])):w("",!0)]),_:1},8,["modelValue"])])}}});export{Tu as default};
