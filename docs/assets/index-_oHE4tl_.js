import{d as y,l as o,B as E,p as I,r as k,c as L,o as V,j as x,f as _,A as q,L as C,k as N,u as B,y as M,E as T,q as z,D,ah as v,z as b}from"./index-CYQNA_yI.js";const F=["src"],U=y({__name:"code",props:{placeholder:{default:""}},emits:["update:modelValue","focus"],setup(S,{emit:f}){const m=f,s=o(""),r=o(),n=o("");E(()=>s.value,()=>{m("update:modelValue",s.value)});const l=()=>{m("focus",n.value,u)},u=()=>{q("getCaptcha",{}).then(c=>{const{base64:a,codeId:d}=c.data;r.value="data:image/png;base64,"+a,n.value=d}).catch(()=>{})};return I(()=>{u()}),(c,a)=>{const d=k("el-input");return V(),L("div",null,[x(d,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),placeholder:c.placeholder,onFocus:l},null,8,["modelValue","placeholder"]),_("img",{src:r.value,class:"img",alt:"",onClick:u},null,8,F)])}}}),$=C(U,[["__scopeId","data-v-f1c46c5a"]]),j={class:"login"},A={class:"main"},R=y({__name:"index",setup(S){const f=o(),m=N(),s=B(),r=M(),n=o(),l=o(),u=o({list:[{type:"input",control:{prefixIcon:"User",modelValue:"admin",placeholder:"请输入登录账号"},config:{},name:"userName",formItem:{label:"用户名",hideLabel:!0},customRules:[{type:"required",message:"请输入登录账号",trigger:"blur"}]},{type:"password",control:{prefixIcon:"Lock",modelValue:"123456",placeholder:"请输入密码"},config:{},name:"password",formItem:{label:"密码",hideLabel:!0},customRules:[{type:"required",message:"请输入密码",trigger:"blur"}]},{type:"component",control:{modelValue:"",placeholder:"请输入验证码",onFocus:(e,t)=>{n.value=e,l.value=t}},config:{componentName:T($)},name:"code",formItem:{label:"验证码",hideLabel:!0},customRules:[{type:"required",message:"请输入验证码",trigger:"blur"}]},{type:"button",control:{label:"登录",type:"primary",key:"submit"}}],form:{size:"default"},config:{}}),c=e=>(e.codeId=n.value,e),a=(e,t)=>{t?(m.setLoginInfo(e,!0),d().then(()=>{const i=r.query.redirect?r.query.redirect:"/";z(()=>{s.push({path:i})})})):l.value&&l.value()},d=()=>new Promise(e=>{q("userMenuList",{query:{status:1,navShow:1},extend:{sort:"sort asc"}}).then(t=>{const i=t.data?.list||[],h=[],g=[];i.forEach(p=>{p.path&&h.push(p.path),p.type!==2&&g.push(p)});const w=D(g);v("formMenuList",w,0),v("resources",h,0),e({})})});return I(()=>{}),(e,t)=>{const i=k("ak-form");return V(),L("div",j,[_("div",A,[t[0]||(t[0]=_("h3",null,"后台管理系统",-1)),x(i,{ref_key:"formEl",ref:f,"submit-url":"loginSubmit",after:a,data:u.value,before:c},null,8,["data"])])])}}});typeof b=="function"&&b(R);const P=C(R,[["__scopeId","data-v-a4ce7aaf"]]);export{P as default};
