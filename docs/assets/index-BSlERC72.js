import{d as R,u as E,r as o,c as b,o as l,a as K,F as x,b as s,w as e,e as k,f as p,g as B,n as M,t as S,h as w,i as Q,j as n,k as N,l as U,m as L,p as W,q as D,s as X,v as Y,K as Z}from"./index-DJZwJYaM.js";const ee=""+new URL("logo-CPmPqqKk.png",import.meta.url).href,ne=R({__name:"menuItem",props:{data:{default:()=>[]}},setup(F){const d=E(),u=a=>{if(a.indexOf("api/swagger")!==-1)window.location.href=a;else{const m={};if((a==null?void 0:a.indexOf("?"))!==-1){const i=a.split("?")[1],g=new URLSearchParams(i);for(const[_,c]of g.entries())m[_]=c}d.push({path:a,query:m})}};return(a,m)=>{const i=o("el-icon"),g=o("menu-item",!0),_=o("el-sub-menu"),c=o("el-menu-item");return l(!0),b(x,null,K(a.data,(t,C)=>(l(),b(x,{key:C},[t.children?(l(),s(_,{key:0,index:t.path||t.name},{title:e(()=>[t.elIcon?(l(),s(i,{key:0},{default:e(()=>[(l(),s(B(t.elIcon)))]),_:2},1024)):k("",!0),t.icon?(l(),b("i",{key:1,class:M(`icon ${t.icon}`)},null,2)):k("",!0),p("span",null,S(t.name),1)]),default:e(()=>[t.children.length?(l(),s(g,{key:0,data:t.children},null,8,["data"])):k("",!0)]),_:2},1032,["index"])):(l(),s(c,{key:1,index:t.path||t.name,onClick:r=>u(t.path)},{default:e(()=>[t.elIcon?(l(),s(i,{key:0},{default:e(()=>[(l(),s(B(t.elIcon)))]),_:2},1024)):k("",!0),t.icon?(l(),b("i",{key:1,class:M(`icon ${t.icon}`)},null,2)):k("",!0),p("span",null,S(t.name),1)]),_:2},1032,["index","onClick"]))],64))),128)}}}),oe=R({__name:"menu",props:{collapse:{type:Boolean}},setup(F){const d=w(()=>Q("formMenuList",!0)),u=()=>{};return(a,m)=>{const i=o("el-menu");return l(),s(i,{collapse:a.collapse,"active-text-color":"#ffd04b","background-color":"rgb(48 65 86)","text-color":"#fff",onSelect:u},{default:e(()=>[n(ne,{data:d.value},null,8,["data"])]),_:1},8,["collapse"])}}}),le={class:"comm-header-tool"},te={class:"header-right"},ae={class:"header-avatar",style:{cursor:"pointer"}},se={class:"name"},ce=R({__name:"header",emits:["click"],setup(F,{emit:d}){const u=N(),a=E(),m=w(()=>u==null?void 0:u.breadcrumb),i=w(()=>u==null?void 0:u.collapseMenu),g=d,_=U({name:"admin",avatar:""}),c=C=>{C==="collapse"&&u.setCollapseMenu(!i.value),g("click",C)},t=()=>{u.logout(a)};return(C,r)=>{const q=o("Fold"),$=o("Expand"),f=o("el-icon"),y=o("el-breadcrumb-item"),h=o("el-breadcrumb"),V=o("RefreshRight"),A=o("FullScreen"),O=o("el-avatar"),P=o("arrow-down"),j=o("User"),I=o("el-dropdown-item"),z=o("Setting"),T=o("CircleClose"),G=o("el-dropdown-menu"),H=o("el-dropdown");return l(),b(x,null,[n(f,{class:"collapse-icon",onClick:r[0]||(r[0]=v=>c("collapse"))},{default:e(()=>[i.value?(l(),s($,{key:1})):(l(),s(q,{key:0}))]),_:1}),n(h,{separator:"/",class:"breadcrumb"},{default:e(()=>[n(y,{to:{path:"/"}},{default:e(()=>r[3]||(r[3]=[L(" 首页 ")])),_:1}),(l(!0),b(x,null,K(m.value,(v,J)=>(l(),b(x,{key:J},[v.path?(l(),s(y,{key:0,to:{path:v.path}},{default:e(()=>[L(S(v.label||v.name),1)]),_:2},1032,["to"])):(l(),s(y,{key:1},{default:e(()=>[L(S(v.label||v.name),1)]),_:2},1024))],64))),128))]),_:1}),p("div",le,[n(f,{title:"刷新页面",onClick:r[1]||(r[1]=v=>c("refresh"))},{default:e(()=>[n(V)]),_:1}),n(f,{title:"全屏"},{default:e(()=>[n(A,{onClick:r[2]||(r[2]=v=>c("fullScreen"))})]),_:1})]),p("div",te,[n(H,null,{dropdown:e(()=>[n(G,null,{default:e(()=>[n(I,null,{default:e(()=>[n(f,null,{default:e(()=>[n(j)]),_:1}),r[4]||(r[4]=p("span",{class:"title"},"个人中心",-1))]),_:1}),n(I,null,{default:e(()=>[n(f,null,{default:e(()=>[n(z)]),_:1}),r[5]||(r[5]=p("span",{class:"title"},"设置",-1))]),_:1}),n(I,{onClick:t},{default:e(()=>[n(f,null,{default:e(()=>[n(T)]),_:1}),r[6]||(r[6]=p("span",{class:"title"},"退出登录",-1))]),_:1})]),_:1})]),default:e(()=>[p("div",ae,[n(O,{class:"avatar",size:"small",shape:"circle",src:_.value.avatar},null,8,["src"]),p("span",se,S(_.value.name),1),n(f,{class:"el-icon--right"},{default:e(()=>[n(P)]),_:1})])]),_:1})])],64)}}}),ue=R({__name:"index",setup(F){const d=N(),u=w(()=>d.collapseMenu),a=U(!1),m=w({get:()=>d.reloadFlag,set:()=>{d.setReloadRouter()}}),i=_=>{_==="fullScreen"&&(a.value=!a.value),_==="refresh"&&(m.value=!1,D(()=>{m.value=!0}))},g=w(()=>{const _=d==null?void 0:d.tabs;if(_){const c=[];return _.forEach(t=>{c.push(t.name)}),c}return[]});return W(()=>{D(()=>{d.getDict()})}),(_,c)=>{const t=o("el-aside"),C=o("el-header"),r=o("router-view"),q=o("el-main"),$=o("el-container"),f=o("Close"),y=o("el-icon");return l(),s($,{class:"common-layout"},{default:e(()=>[a.value?k("",!0):(l(),s(t,{key:0,width:u.value?"44px":"180px",class:"common-sidebar"},{default:e(()=>[p("div",{class:"logo",onClick:c[0]||(c[0]=h=>_.$router.push({path:"/"}))},[c[2]||(c[2]=p("img",{src:ee,alt:""},null,-1)),X(p("span",null,"AK低代码快速开发平台",512),[[Y,!u.value]])]),n(oe,{collapse:u.value},null,8,["collapse"])]),_:1},8,["width"])),n($,{class:"overflow-scroll"},{default:e(()=>[a.value?k("",!0):(l(),s(C,{key:0,class:"common-header"},{default:e(()=>[n(ce,{onClick:i})]),_:1})),n(q,{class:"common-main"},{default:e(()=>[m.value?(l(),s(r,{key:0},{default:e(({Component:h})=>[(l(),s(Z,{include:g.value},[(l(),s(B(h)))],1032,["include"]))]),_:1})):k("",!0)]),_:1})]),_:1}),a.value?(l(),s(y,{key:1,class:"quit-full",title:"退出全屏",onClick:c[1]||(c[1]=h=>i("fullScreen"))},{default:e(()=>[n(f)]),_:1})):k("",!0)]),_:1})}}});export{ue as default};
