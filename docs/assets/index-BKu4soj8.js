import{d as I,l as o,B as N,p as k,c as L,j as V,f as _,A as x,r as q,o as C,L as R,k as B,E as M,u as T,y as z,q as D,D as F,ah as b,z as y}from"./index-CbbnYBXf.js";const U=["src"],$=I({__name:"code",props:{placeholder:{}},emits:["update:modelValue","focus"],setup(w,{emit:f}){const m=f,s=o(""),r=o(),n=o("");N(()=>s.value,()=>{m("update:modelValue",s.value)});const l=()=>{m("focus",n.value,u)},u=()=>{x("getCaptcha",{}).then(c=>{const{base64:a,codeId:d}=c.data;r.value="data:image/png;base64,"+a,n.value=d}).catch(()=>{})};return k(()=>{u()}),(c,a)=>{const d=q("el-input");return C(),L("div",null,[V(d,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),placeholder:c.placeholder,onFocus:l},null,8,["modelValue","placeholder"]),_("img",{src:r.value,class:"img",alt:"",onClick:u},null,8,U)])}}}),j=R($,[["__scopeId","data-v-fe05778a"]]),A={class:"login"},K={class:"main"},S=I({__name:"index",setup(w){const f=o(),m=B(),s=T(),r=z(),n=o(),l=o(),u=o({list:[{type:"input",control:{prefixIcon:"User",modelValue:"admin",placeholder:"请输入登录账号"},config:{},name:"userName",formItem:{label:"用户名",hideLabel:!0},customRules:[{type:"required",message:"请输入登录账号",trigger:"blur"}]},{type:"password",control:{prefixIcon:"Lock",modelValue:"123456",placeholder:"请输入密码"},config:{},name:"password",formItem:{label:"密码",hideLabel:!0},customRules:[{type:"required",message:"请输入密码",trigger:"blur"}]},{type:"component",control:{modelValue:"",placeholder:"请输入验证码",onFocus:(e,t)=>{n.value=e,l.value=t}},config:{componentName:M(j)},name:"code",formItem:{label:"验证码",hideLabel:!0},customRules:[{type:"required",message:"请输入验证码",trigger:"blur"}]},{type:"button",control:{label:"登录",type:"primary",key:"submit"}}],form:{size:"default"},config:{}}),c=e=>(e.codeId=n.value,e),a=(e,t)=>{t?(m.setLoginInfo(e,!0),d().then(()=>{const i=r.query.redirect?r.query.redirect:"/";D(()=>{s.push({path:i})})})):l.value&&l.value()},d=()=>new Promise(e=>{x("userMenuList",{query:{status:1,navShow:1},extend:{sort:"sort asc"}}).then(t=>{var v;const i=((v=t.data)==null?void 0:v.list)||[],h=[],g=[];i.forEach(p=>{p.path&&h.push(p.path),p.type!==2&&g.push(p)});const E=F(g);b("formMenuList",E,0),b("resources",h,0),e({})})});return k(()=>{}),(e,t)=>{const i=q("ak-form");return C(),L("div",A,[_("div",K,[t[0]||(t[0]=_("h3",null,"后台管理系统",-1)),V(i,{ref_key:"formEl",ref:f,"submit-url":"loginSubmit",after:a,data:u.value,before:c},null,8,["data"])])])}}});typeof y=="function"&&y(S);const G=R(S,[["__scopeId","data-v-a4ce7aaf"]]);export{G as default};
