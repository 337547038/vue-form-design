import{d as g,v as _,h as p,r as D,I as h,e as v,o as y,z as I,a as b,c as k,l as C,u as B,S as i,q as E,D as S,V as q,B as x,m as F,E as j,C as R}from"./index-ea7eee8a.js";const T={style:{"min-height":"300px"}},M=g({__name:"form",setup(U){const d=_(),r=p().query,c=R(),n=D(),e=h({formData:{list:[],form:{},config:{}},dict:{},formId:r.form,id:r.id,loading:!0}),f=v(()=>r.id?2:1),m=()=>{if(!e.formId)return i.error("非法操作."),!1;const t={id:e.formId};E("designById",t).then(a=>{var s;const o=a.data;o&&Object.keys(o).length&&(e.formData=S(o.data),e.dict=q(o.dict),(r.id||(s=e.formData.config)!=null&&s.addLoad)&&n.value.getData({formId:e.formId,id:r.id}),d.changeBreadcrumb([{label:"内容管理"},{label:o.name}])),x(()=>{e.loading=!1})}).catch(a=>{e.loading=!1,i.error(a.message||"非法操作..")})},l=t=>(t.formId=e.formId,t.id=r.id,t),u=t=>{t==="success"&&c.go(-1)};return y(()=>{m()}),(t,a)=>{const o=F("ak-form"),s=j("loading");return I((b(),k("div",T,[C(o,{ref_key:"formEl",ref:n,formData:e.formData,type:B(f),dict:e.dict,requestUrl:"getFormContent",addUrl:"saveFormContent",editUrl:"editFormContent",beforeSubmit:l,afterSubmit:u},null,8,["formData","type","dict"])])),[[s,e.loading]])}}});export{M as default};
