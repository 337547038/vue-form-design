import{i as g,y as _,l as p,D as y,r as D,J as v,j as b,o as h,b as I,E as k,A as C,c as E,d as j,g as x,u as B,W as i,v as F,G as S,Y as q,C as R}from"./index-96eddb90.js";const T={style:{"min-height":"300px"}},M=g({__name:"form",setup(U){const d=_(),r=p().query,c=y(),n=D(),e=v({formData:{list:[],form:{},config:{}},dict:{},formId:r.form,id:r.id,loading:!0}),f=b(()=>r.id?2:1),m=()=>{if(!e.formId)return i.error("非法操作."),!1;const t={id:e.formId};F("designById",t).then(a=>{var s;const o=a.data;o&&Object.keys(o).length&&(e.formData=S(o.data),e.dict=q(o.dict),(r.id||(s=e.formData.config)!=null&&s.addLoad)&&n.value.getData({formId:e.formId,id:r.id}),d.changeBreadcrumb([{label:"内容管理"},{label:o.name}])),R(()=>{e.loading=!1})}).catch(a=>{e.loading=!1,i.error(a.message||"非法操作..")})},l=t=>(t.formId=e.formId,t.id=r.id,t),u=t=>{t==="success"&&c.go(-1)};return h(()=>{m()}),(t,a)=>{const o=I("ak-form"),s=k("loading");return C((E(),j("div",T,[x(o,{ref_key:"formEl",ref:n,formData:e.formData,type:B(f),dict:e.dict,requestUrl:"getFormContent",addUrl:"saveFormContent",editUrl:"editFormContent",beforeSubmit:l,afterSubmit:u},null,8,["formData","type","dict"])])),[[s,e.loading]])}}});export{M as default};
