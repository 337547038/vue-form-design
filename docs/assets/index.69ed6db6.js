import{d as ue,r as q,a as ee,b as ge,o as d,h as $,w as u,p as l,u as S,a5 as Fe,c as w,e as te,F as H,m as g,k as X,y as j,B as me,q as C,D as _e,H as ae,N as Ee,t as Q,l as N,a6 as ce,Q as ve,I as ke,z as be,A as Ce,n as oe,_ as we,U as xe,O as Be,s as se,f as re,Y as Ae,X as de,g as pe,E as ie,J as De,i as $e,C as Se}from"./index.ae153a4c.js";import{_ as Ve,a as Te}from"./vueFile.vue_vue_type_script_setup_true_lang.26e92c5e.js";import{_ as Ie}from"./aceDrawer.vue_vue_type_script_setup_true_lang.938e7e60.js";const Le=["bg.jpg","head_bg.png"],Ue=[],Re=[],ne={bg:Le,border:Ue,img:Re},ze=j("\u4E0A\u4F20"),Oe={class:"img-list"},je=["onClick"],Xe=["src"],Ye={key:0},qe=ue({__name:"upload",emits:["click"],setup(R,{expose:T,emit:p}){const e=q(!1),s=q(),x=q("bg"),V=ee(()=>{if(!ne)return[];const r=[];for(const c in ne)r.push(c);return r}),v=ee(()=>x.value.name==="upload"?[]:ne?ne[x.value]:[]),f=ee(()=>`./static/screen/${x.value}/`),I=r=>{e.value=!1,p("click",f.value+r,s.value)},E=r=>{x.value="upload",me(()=>{v.value.unshift(r.path)})};return T({open:(r,c)=>{e.value=!0,s.value=c,r?x.value=r:x.value=V.value[0]}}),ge(()=>{}),(r,c)=>{const M=C("el-button"),h=C("el-upload"),L=C("el-tab-pane"),z=C("el-tabs"),le=C("el-dialog");return d(),$(le,{modelValue:e.value,"onUpdate:modelValue":c[1]||(c[1]=W=>e.value=W),width:"800px",title:"\u9009\u62E9\u4E0A\u4F20\u56FE\u7247"},{default:u(()=>{var W;return[l(h,{action:S(Fe),"on-success":E,"show-file-list":!1},{default:u(()=>[l(M,{type:"primary"},{default:u(()=>[ze]),_:1})]),_:1},8,["action"]),l(z,{modelValue:x.value,"onUpdate:modelValue":c[0]||(c[0]=U=>x.value=U)},{default:u(()=>[(d(!0),w(H,null,te(S(V),U=>(d(),$(L,{label:U,name:U,key:U},null,8,["label","name"]))),128)),l(L,{label:"\u4E0A\u4F20",name:"upload"})]),_:1},8,["modelValue"]),g("div",Oe,[g("ul",null,[(d(!0),w(H,null,te(S(v),U=>(d(),w("li",{key:U,onClick:P=>I(U)},[g("img",{src:S(f)+U,alt:""},null,8,Xe)],8,je))),128))]),(W=S(v))!=null&&W.length?X("",!0):(d(),w("p",Ye," \u6682\u65E0\u76F8\u5173\u7D20\u6750\u8D44\u6E90 "))])]}),_:1},8,["modelValue"])}}});const Me=_e(qe,[["__scopeId","data-v-7ebb50b6"]]),Ke={key:0},Ne=j("\u9009\u62E9\u56FE\u7247"),We=j("\u56FE\u8868\u7F16\u8F91"),Pe=j("\u7F16\u8F91\u66F4\u591A\u5185\u8054\u6837\u5F0F"),He=j("\u8868\u683C\u5C5E\u6027"),Je=j("Table-column"),Qe=j("\u9759\u6001"),Ze=j("\u52A8\u6001"),Ge=j("\u7F16\u8F91\u6570\u636E"),el=g("h3",null,"\u63A5\u53E3\u6570\u636E\u5904\u7406\u4E8B\u4EF6",-1),ll=j("beforeRequest"),tl=j("afterResponse"),ol=j("\u4E0A\u4F20"),ul=j("\u7F16\u8F91\u6837\u5F0F"),nl=ue({__name:"configControl",props:{config:null},emits:["update:config","openDrawer","update"],setup(R,{expose:T,emit:p}){const e=R,s=q({}),x=q(),V=ee(()=>s.value.type),v=i=>{p("update:config",Object.assign({},e.config,i))},f=ae({bgColor:"",bgLinear:"",bgAngle:0,bgUpload:"",bgSelect:""});Ee(()=>e.config,i=>{if(!Object.keys(s.value).length){const t=i.background||"";if(t.indexOf("url")!==-1){const B=new RegExp("(?<=url\\()(.*?)(?=\\))","g"),A=t.match(B);Object.assign(f,{bgUpload:A,bgSelect:3})}else if(t.indexOf("linear")!==-1){const A=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,(?![^(]*\))(?![^"']*["'](?:[^"']*["'][^"']*["'])*[^"']*$)/);Object.assign(f,{bgColor:A[1].trim(),bgLinear:A[2].trim(),bgAngle:Number(A[0].replace("deg","")),bgSelect:2})}else Object.assign(f,{bgColor:t,bgSelect:1})}},{immediate:!0});const I=()=>{let i="";switch(f.bgSelect){case 1:i=f.bgColor;break;case 2:i=`linear-gradient(${f.bgAngle}deg, ${f.bgColor}, ${f.bgLinear})`;break;case 3:i=`url(${f.bgUpload})`;break}E("background",i)},E=(i,t)=>{v({[i]:t})},b=i=>{s.value=i},r=ee(()=>{var i,t,B,A;if(Object.keys(s.value).length){const{config:_={},position:O,type:Z}=s.value;return[{type:"group",title:"\u4F4D\u7F6E\u4FE1\u606F"},{type:"number",label:"width",value:O.width,placeholder:"\u8BF7\u8F93\u5165\u5BBD\u5EA6",key:"width",path:"position"},{type:"number",label:"height",value:O.height,placeholder:"\u8BF7\u8F93\u5165\u9AD8\u5EA6",key:"height",path:"position"},{type:"number",label:"left",value:O.left||0,placeholder:"\u56FE\u5C42\u4F4D\u7F6E",key:"left",path:"position"},{type:"number",label:"top",value:O.top||0,key:"top",path:"position"},{type:"number",label:"zIndex",value:O.zIndex,placeholder:"\u8BF7\u8F93\u5165\u5C42\u7EA7",key:"zIndex",path:"position"},{type:"group",title:"\u5C5E\u6027\u4FE1\u606F"},{type:"switch",label:"\u9501\u5B9A",value:_.lock,key:"lock"},{type:"switch",label:"\u9690\u85CF",value:O.display,key:"display",path:"position"},{label:"\u6837\u5F0F\u7C7B\u540D",placeholder:"\u65B9\u4FBF\u5F15\u7528\u4E2A\u6027\u5316\u6837\u5F0F",value:_.class,key:"class"},{label:"\u6587\u672C\u5185\u5BB9",placeholder:"\u8BF7\u8F93\u5165\u6587\u672C\u5185\u5BB9",value:_.text,key:"text",vShow:["text"]},{type:"select",label:"\u6EDA\u52A8\u65B9\u5411",placeholder:"\u8BF7\u9009\u62E9\u6EDA\u52A8\u65B9\u5411",value:_.direction,key:"direction",vShow:["sText"],options:{left:"\u4ECE\u5DE6\u5230\u53F3",right:"\u4ECE\u53F3\u5230\u5DE6",top:"\u4ECE\u4E0A\u5230\u4E0B",bottom:"\u4ECE\u4E0B\u5230\u4E0A"}},{type:"number",label:"\u6EDA\u52A8\u901F\u5EA6",placeholder:"\u6EDA\u52A8\u901F\u5EA6\uFF0C\u6570\u5B57\u8D8A\u5927\u901F\u5EA6\u8D8A\u6162",value:_.speed,key:"speed",vShow:["sText"]},{type:"number",label:"\u6EDA\u52A8\u6B65\u957F",placeholder:"\u6BCF\u5355\u4F4D\u65F6\u95F4\u6EDA\u52A8\u7684\u8DDD\u79BB\uFF0C\u9ED8\u8BA41",value:_.step,key:"step",vShow:["sText"]},{type:"textarea",label:"\u6587\u672C\u5185\u5BB9",placeholder:"\u8BF7\u8F93\u5165\u6587\u672C\u5185\u5BB9\uFF0C\u652F\u6301html",value:_.text,key:"text",vShow:["sText"]},{label:"\u5B57\u4F53\u5927\u5C0F",placeholder:"\u6587\u672C\u5B57\u4F53\u5927\u5C0F,\u598214px",value:(i=_.style)==null?void 0:i.fontSize,key:"fontSize",path:"style",vShow:["text","clock"]},{label:"\u8FB9\u6846",placeholder:"\u59821px solid #000",value:(t=_.style)==null?void 0:t.border,key:"border",path:"style",vShow:["border"]},{type:"color",label:"\u80CC\u666F\u989C\u8272",value:(B=_.style)==null?void 0:B.background,key:"background",path:"style",vShow:["border"]},{type:"color",label:"\u5B57\u4F53\u989C\u8272",value:(A=_.style)==null?void 0:A.color,key:"color",path:"style",vShow:["text","clock"]},{type:"select",label:"\u65F6\u95F4\u683C\u5F0F",value:_.dateTime,key:"dateTime",allowCreate:!0,filterable:!0,placeholder:"\u9009\u62E9\u6216\u521B\u5EFA\u65F6\u95F4\u683C\u5F0F",vShow:["clock"],options:{"{y}-{m}-{d}":"{y}-{m}-{d}","{h}:{i}:{s}":"{h}:{i}:{s}","{y}-{m}-{d} {h}:{i}:{s}":"{y}-{m}-{d} {h}:{i}:{s}","{y}\u5E74{m}\u6708{d}\u65E5 {h}:{i}:{s} \u661F\u671F{w}":"{y}\u5E74{m}\u6708{d}\u65E5 {h}:{i}:{s} \u661F\u671F{w}"}},{label:"\u7EC4\u4EF6\u540D\u79F0",value:_.component,placeholder:"\u5168\u5C40\u6CE8\u518C\u7684\u7EC4\u4EF6\u540D\u79F0",key:"component",vShow:["component"]},{type:"switch",label:"\u662F\u5426\u8F6E\u64AD",value:_.carousel,key:"carousel",vShow:["table"]},{type:"number",label:"\u6EDA\u52A8\u901F\u5EA6",placeholder:"\u5F00\u542F\u8F6E\u64AD\u6709\u6548",value:_.speed,key:"speed",vShow:["table"]}].filter(y=>{let o=!0;return y.vShow&&(o=y.vShow.includes(Z)),y.vHide&&(o=!y.vHide.includes(Z)),o})}return[]}),c=(i,t)=>{var B;i.type==="number"&&(t=parseInt(t)),i.path==="position"?s.value.position[i.key]=t:i.path==="style"?((B=s.value.config)!=null&&B.style||(s.value.config.style={}),s.value.config.style[i.key]=t):s.value.config[i.key]=t,["zIndex","display","lock"].includes(i.key)&&p("update")},M=(i,t)=>{x.value.open(i,t)},h=(i,t)=>{switch(t){case"screenBg":f.bgUpload=i,I();break;case"src":s.value.config.src=i;break}},L=()=>{p("openDrawer",{codeType:"css",type:"css",title:"\u5F53\u524D\u5E94\u7528\u9875\u7684\u6837\u5F0F\uFF0C\u7C7B\u4F3C\u4E8E.vue\u6587\u4EF6\u4E2D\u7684style scoped\u4E2D\u7684\u6837\u5F0F"})},z=()=>{p("openDrawer",{content:s.value.option,title:"\u53EF\u53C2\u8003echarts\u76F8\u5173\u4F8B\u5B50\u7F16\u8F91",callback:i=>{s.value.option=i}})},le=()=>{var i;p("openDrawer",{codeType:"json",content:((i=s.value.config)==null?void 0:i.style)||{},title:"\u53EF\u8F93\u5165\u66F4\u591A\u7684css\u6837\u5F0F\uFF0C\u987B\u4E3Ajson\u683C\u5F0F",callback:t=>{s.value.config.style=t}})},W=()=>{var i;p("openDrawer",{codeType:"json",content:((i=s.value.config)==null?void 0:i.props)||{},title:"\u652F\u6301\u6240\u6709\u8868\u683Cprops\u5C5E\u6027\uFF0C\u53EF\u53C2\u8003el-table\u3002json\u683C\u5F0F",callback:t=>{s.value.config.props=t}})},U=()=>{let i=s.value.columns;(!i||!i.length)&&(i=[{prop:"",label:""}]),p("openDrawer",{codeType:"json",content:i,title:"\u8868\u683C\u5217\u8BBE\u7F6E\uFF0C\u53EF\u53C2\u8003table-column\u5C5E\u6027",callback:t=>{s.value.columns=t}})},P=i=>{let t=s.value.events&&s.value.events[i];t||(i==="beforeRequest"?t=B=>(console.log("beforeRequest",B),B):t=(B,A)=>(console.log("afterResponse",B,A),A)),p("openDrawer",{content:t,title:i==="beforeRequest"?"\u8FD9\u91CC\u53EF\u5904\u7406\u8BF7\u6C42\u524D\u7684\u53C2\u6570\uFF0C\u8FD4\u56DE\u76F8\u5E94\u53C2\u6570\u7ED9\u63A5\u53E3":"\u63A5\u53E3\u6570\u636E\u5904\u7406\u3002\u4E5F\u53EF\u4E3A\u5B57\u7B26\u4E32\uFF0C\u5982opt=formatTest",callback:B=>{s.value.events||(s.value.events={}),s.value.events[i]=B}})},F=()=>{V.value==="table"?p("openDrawer",{content:s.value.option,title:"\u8868\u683C\u5217\u8868\u6570\u636E\u3002\u6839\u636E\u8BBE\u5B9A\u7684table-column\u5217\u6570\u636E\u8BBE\u7F6E\u5BF9\u5E94\u7684\u6570\u636E",callback:i=>{s.value.option=i}}):z()};return T({setCurrent:b}),(i,t)=>{var J;const B=C("el-switch"),A=C("el-color-picker"),_=C("el-input"),O=C("el-option"),Z=C("el-select"),y=C("el-form-item"),o=C("el-button"),n=C("el-form"),m=C("el-tab-pane"),D=C("el-radio"),Y=C("el-radio-group"),G=C("el-tabs"),k=C("el-slider");return d(),w("div",{class:N(["main-right",{lock:(J=s.value.config)==null?void 0:J.lock}])},[Object.keys(s.value).length?(d(),$(G,{key:0,class:"tabs","model-value":"screen"},{default:u(()=>[l(m,{label:"\u4F4D\u7F6E\u5C5E\u6027",name:"screen"},{default:u(()=>[l(n,{size:"small"},{default:u(()=>[(d(!0),w(H,null,te(S(r),(a,he)=>(d(),$(y,{label:a.label,key:he},{default:u(()=>[a.type==="group"?(d(),w("h3",Ke,Q(a.title),1)):a.type==="switch"?(d(),$(B,{key:1,"model-value":a.value,onChange:K=>c(a,K),class:N([a.key])},null,8,["model-value","onChange","class"])):a.type==="color"?(d(),$(A,{key:2,"show-alpha":"",onChange:K=>c(a,K),"model-value":a.value},null,8,["onChange","model-value"])):a.type==="textarea"?(d(),$(_,{key:3,type:"textarea",placeholder:a.placeholder,onChange:K=>c(a,K),"model-value":a.value},null,8,["placeholder","onChange","model-value"])):a.type==="select"?(d(),$(Z,{key:4,allowCreate:a.allowCreate,filterable:a.filterable,placeholder:a.placeholder,onChange:K=>c(a,K),"model-value":a.value},{default:u(()=>[(d(!0),w(H,null,te(a.options,(K,ye)=>(d(),$(O,{key:K,label:K,value:ye},null,8,["label","value"]))),128))]),_:2},1032,["allowCreate","filterable","placeholder","onChange","model-value"])):(d(),$(_,{key:5,placeholder:a.placeholder,"model-value":a.value,onInput:K=>c(a,K)},null,8,["placeholder","model-value","onInput"]))]),_:2},1032,["label"]))),128)),["image","background"].includes(S(V))?(d(),$(y,{key:0,class:"upload-image"},{default:u(()=>[l(_,{placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",modelValue:s.value.config.src,"onUpdate:modelValue":t[0]||(t[0]=a=>s.value.config.src=a)},null,8,["modelValue"]),l(o,{type:"primary",onClick:t[1]||(t[1]=a=>M(S(V)==="image"?"img":"bg","src"))},{default:u(()=>[Ne]),_:1})]),_:1})):X("",!0),["line","bar","pie","echarts"].includes(S(V))?(d(),$(y,{key:1},{default:u(()=>[l(o,{type:"primary",onClick:z},{default:u(()=>[We]),_:1})]),_:1})):X("",!0),["text","sText","image","background","border","clock"].includes(S(V))?(d(),$(y,{key:2},{default:u(()=>[l(o,{type:"primary",onClick:le},{default:u(()=>[Pe]),_:1})]),_:1})):X("",!0),["table"].includes(S(V))?(d(),$(y,{key:3},{default:u(()=>[l(o,{type:"primary",onClick:W},{default:u(()=>[He]),_:1}),l(o,{type:"primary",onClick:U},{default:u(()=>[Je]),_:1})]),_:1})):X("",!0)]),_:1})]),_:1}),l(m,{label:"\u6570\u636E",name:"data"},{default:u(()=>[["line","bar","pie","echarts","text","sText","table"].includes(S(V))?(d(),$(n,{key:0,size:"small"},{default:u(()=>[l(y,{label:"\u6570\u636E\u7C7B\u578B"},{default:u(()=>[l(Y,{modelValue:s.value.config.optionsType,"onUpdate:modelValue":t[2]||(t[2]=a=>s.value.config.optionsType=a)},{default:u(()=>[l(D,{label:0},{default:u(()=>[Qe]),_:1}),l(D,{label:1},{default:u(()=>[Ze]),_:1})]),_:1},8,["modelValue"])]),_:1}),s.value.config.optionsType===0&&!["text","sText"].includes(S(V))?(d(),$(y,{key:0},{default:u(()=>[l(o,{type:"primary",onClick:F},{default:u(()=>[Ge]),_:1})]),_:1})):X("",!0),s.value.config.optionsType===1?(d(),w(H,{key:1},[l(y,null,{default:u(()=>[l(_,{modelValue:s.value.config.requestUrl,"onUpdate:modelValue":t[4]||(t[4]=a=>s.value.config.requestUrl=a),placeholder:"\u63A5\u53E3URL\u6216api\u4E2D\u7684key"},{prepend:u(()=>[l(Z,{modelValue:s.value.config.method,"onUpdate:modelValue":t[3]||(t[3]=a=>s.value.config.method=a),style:{width:"60px"}},{default:u(()=>[l(O,{label:"get",value:"get"}),l(O,{label:"post",value:"post"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(y,null,{default:u(()=>[el]),_:1}),l(y,null,{default:u(()=>[l(o,{onClick:t[5]||(t[5]=a=>P("beforeRequest"))},{default:u(()=>[ll]),_:1})]),_:1}),l(y,null,{default:u(()=>[l(o,{onClick:t[6]||(t[6]=a=>P("afterResponse"))},{default:u(()=>[tl]),_:1})]),_:1})],64)):X("",!0)]),_:1})):X("",!0)]),_:1})]),_:1})):(d(),$(G,{key:1,class:"tabs","model-value":"screen"},{default:u(()=>[l(m,{label:"\u5927\u5C4F\u914D\u7F6E",name:"screen"},{default:u(()=>[l(n,{size:"small"},{default:u(()=>[l(y,{label:"\u5927\u5C4F\u5BBD\u5EA6"},{default:u(()=>[l(_,{placeholder:"\u8BF7\u8F93\u5165\u5927\u5C4F\u5BBD\u5EA6","model-value":R.config.width,onInput:t[7]||(t[7]=a=>E("width",a))},null,8,["model-value"])]),_:1}),l(y,{label:"\u5927\u5C4F\u9AD8\u5EA6"},{default:u(()=>[l(_,{placeholder:"\u8BF7\u8F93\u5165\u5927\u5C4F\u9AD8\u5EA6","model-value":R.config.height,onInput:t[8]||(t[8]=a=>E("height",a))},null,8,["model-value"])]),_:1}),l(y,{class:"color-picker",label:"\u4E3B\u8272"},{default:u(()=>[l(A,{"show-alpha":"",onChange:t[9]||(t[9]=a=>E("primary",a)),"model-value":R.config.primary},null,8,["model-value"])]),_:1}),l(y,{label:"\u80CC\u666F"},{default:u(()=>[l(Z,{modelValue:f.bgSelect,"onUpdate:modelValue":t[10]||(t[10]=a=>f.bgSelect=a),onChange:I},{default:u(()=>[l(O,{value:1,label:"\u80CC\u666F\u8272"}),l(O,{value:2,label:"\u6E10\u53D8\u8272"}),l(O,{value:3,label:"\u80CC\u666F\u56FE"})]),_:1},8,["modelValue"])]),_:1}),f.bgSelect!==3?(d(),$(y,{key:0,class:"color-picker"},{default:u(()=>[l(A,{"show-alpha":"",modelValue:f.bgColor,"onUpdate:modelValue":t[11]||(t[11]=a=>f.bgColor=a),onChange:I},null,8,["modelValue"])]),_:1})):X("",!0),f.bgSelect===2?(d(),w(H,{key:1},[l(y,{class:"color-picker"},{default:u(()=>[l(A,{"show-alpha":"",modelValue:f.bgLinear,"onUpdate:modelValue":t[12]||(t[12]=a=>f.bgLinear=a),onChange:I},null,8,["modelValue"])]),_:1}),l(y,{label:"\u6E10\u53D8\u89D2\u5EA6"},{default:u(()=>[l(k,{modelValue:f.bgAngle,"onUpdate:modelValue":t[13]||(t[13]=a=>f.bgAngle=a),max:360,onChange:I},null,8,["modelValue"])]),_:1})],64)):X("",!0),f.bgSelect===3?(d(),$(y,{key:2,class:"upload-image"},{default:u(()=>[l(_,{placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",modelValue:f.bgUpload,"onUpdate:modelValue":t[14]||(t[14]=a=>f.bgUpload=a),onChange:I},null,8,["modelValue"]),l(o,{type:"primary",onClick:t[15]||(t[15]=a=>M("bg","screenBg"))},{default:u(()=>[ol]),_:1})]),_:1})):X("",!0),l(y,null,{default:u(()=>[l(o,{onClick:L},{default:u(()=>[ul]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})),l(Me,{ref_key:"uploadImageEl",ref:x,onClick:h},null,512)],2)}}}),al={class:"main-left"},sl={class:"components-list scroll"},il={class:"title"},cl=["title"],rl={class:"scroll layer-list"},dl=["onClick"],pl=["onClick"],fl=["onClick"],gl=g("i",{class:"icon-del"},null,-1),ml=ue({__name:"controlLeft",props:{active:null},emits:["update","update:active"],setup(R,{expose:T,emit:p}){const e={line:["\u6298\u7EBF\u56FE","line"],bar:["\u67F1\u72B6\u56FE","bar"],pie:["\u997C\u56FE","pie"],echarts:["\u901A\u7528\u56FE\u8868",""],table:["\u8868\u683C","table"],text:["\u6587\u672C","text2"],sText:["\u6EDA\u52A8\u6587\u672C","stext"],image:["\u56FE\u7247","image"],background:["\u80CC\u666F","image"],border:["\u8FB9\u6846","border"],clock:["\u5F53\u524D\u65F6\u95F4","time"],component:["\u81EA\u5B9A\u4E49","component"]},s=q([]),x=q([{label:"\u56FE\u8868",children:[{type:"line",label:e.line[0],icon:e.line[1],position:{width:400,height:300},option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[150,230,224,218,135,147,260],type:"line"}]}},{type:"bar",label:e.bar[0],icon:e.bar[1],position:{width:400,height:300},option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[120,200,150,80,70,110,130],type:"bar"}]}},{type:"pie",label:e.pie[0],icon:e.pie[1],position:{width:300,height:300},option:{series:[{type:"pie",radius:"50%",data:[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:300,name:"Video Ads"}]}]}},{type:"echarts",label:e.echarts[0],icon:e.echarts[1],position:{width:400,height:300},option:{}}]},{label:"\u8868\u683C",children:[{type:"table",label:e.table[0],icon:e.table[1],position:{width:500,height:300},option:[],columns:[]}]},{label:"\u8F85\u52A9",children:[{type:"text",label:e.text[0],icon:e.text[1],position:{width:100,height:30},config:{text:"\u6587\u672C\u5185\u5BB9"}},{type:"sText",label:e.sText[0],icon:e.sText[1],position:{width:100,height:30},config:{text:"\u6EDA\u52A8\u6587\u672C\u5185\u5BB9"}},{type:"image",label:e.image[0],icon:e.image[1],position:{width:100,height:50},config:{src:""}},{type:"background",label:e.background[0],icon:e.background[1],position:{width:100,height:50},config:{src:""}},{type:"border",label:e.border[0],icon:e.border[1],position:{width:100,height:100},config:{style:{border:"1px solid #fff"}}}]},{label:"\u5176\u4ED6",children:[{type:"clock",label:e.clock[0],icon:e.clock[1],position:{width:150,height:30}}]},{label:"\u81EA\u5B9A\u4E49\u7EC4\u4EF6",children:[{type:"component",label:e.component[0],icon:e.component[1],position:{width:200,height:200},config:{}}]}]),V=E=>ke(E),v=E=>{const b=E.newIndex,r=s.value.length;console.log("dragEnd",b);let c;b+1===r?c=0:c=s.value[b+1].zIndex||0,s.value[b].zIndex=c+1,p("update","zIndex",s.value[b].index,c+1)},f=(E,b)=>{let r=!1;switch(b){case"display":r=!E.display,E.display=r;break;case"lock":r=!E.lock,E.lock=r;break;case"active":p("update:active",E.index);break}p("update",b,E.index,r)};return T({setLayer:E=>{const b=[];E.forEach((r,c)=>{b.push({label:e[r.type][0],icon:e[r.type][1],zIndex:r.position.zIndex||0,display:r.position.display,lock:r.config.lock,index:c})}),s.value=b.sort((r,c)=>c.zIndex-r.zIndex)}}),(E,b)=>{const r=C("el-tab-pane"),c=C("el-popconfirm"),M=C("el-tabs");return d(),w("div",al,[l(M,{"model-value":"component",class:"tabs"},{default:u(()=>[l(r,{label:"\u7EC4\u4EF6",name:"component"},{default:u(()=>[g("div",sl,[(d(!0),w(H,null,te(x.value,(h,L)=>(d(),w("div",{key:L},[g("div",il,Q(h.label),1),l(S(ce),{itemKey:"label",tag:"ul",modelValue:h.children,"onUpdate:modelValue":z=>h.children=z,group:{name:"form",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:V},{item:u(({element:z})=>[g("li",{class:N([z.type])},[g("i",{class:N(`icon-${z.icon}`)},null,2),g("span",{title:z.label},Q(z.label),9,cl)],2)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))])]),_:1}),l(r,{label:"\u56FE\u5C42",name:"layer"},{default:u(()=>[g("div",rl,[l(S(ce),ve({itemKey:"itemKey",tag:"ul","ghost-class":"ghost",list:s.value,animation:"300"},{group:{pull:!1}},{onSort:v}),{item:u(({element:h})=>[g("li",{class:N({active:R.active===h.index,lock:h.lock,display:h.display})},[g("span",{onClick:L=>f(h,"active")},[g("i",{class:N(`icon-${h.icon}`)},null,2),j(" "+Q(h.label),1)],8,dl),g("i",{onClick:L=>f(h,"display"),class:N(["icon",[h.display?"icon-eye-close":"icon-eye"]])},null,10,pl),g("i",{onClick:L=>f(h,"lock"),class:N(["icon",[h.lock?"icon-lock":"icon-lock-open"]])},null,10,fl),l(c,{title:"\u786E\u8BA4\u5220\u9664",onConfirm:L=>f({index:h.index},"del")},{reference:u(()=>[gl]),_:2},1032,["onConfirm"])],2)]),_:1},16,["list"])])]),_:1})]),_:1})])}}}),vl=["onMousedown"],fe=ue({__name:"ruler",props:{direction:{default:"h"},scale:null,offset:null,showRuler:{type:Boolean},showLine:{type:Boolean}},setup(R){const T=R,p=ae({leftTop:0,moveFlag:!1,moveLine:!1,line:[]}),e=ee(()=>T.direction==="h"?{borderLeft:"1px dotted #409eff",display:p.moveFlag?"block":"none",left:p.leftTop+"px"}:{borderTop:"1px dotted #409eff",display:p.moveFlag?"block":"none",top:p.leftTop+"px"}),s=ee(()=>{const b=T.direction==="h"?1920:1080;let r=[];for(let c=0;c<b;c=c+100)r.push(c);return r}),x=b=>parseInt(`${b/T.scale*100}`),V=()=>{p.moveFlag=!0,document.onmousemove=b=>{if(!p.moveFlag)return;const r=parseInt(`${b.pageX-T.offset[0]}`),c=parseInt(`${b.pageY-T.offset[1]}`);p.leftTop=T.direction==="h"?r:c},document.onmouseup=function(){f()}},v=()=>{!p.moveFlag||p.line.includes(p.leftTop)||p.line.push(p.leftTop)},f=()=>{p.moveFlag=!1,document.onmousemove=null,document.onmouseup=null},I=b=>T.direction==="h"?{left:b+"px"}:{top:b+"px"},E=(b,r,c)=>{p.moveLine=!0;const M=c.pageX-r,h=c.pageY-r;document.onmousemove=L=>{if(!p.moveLine)return;const z=parseInt(`${L.pageX-M}`),le=parseInt(`${L.pageY-h}`),W=T.direction==="h"?z:le;W<0?p.line.splice(b,1):p.line[b]=W},document.onmouseup=function(){p.moveLine=!1,f()}};return(b,r)=>(d(),w("div",null,[be(g("div",{class:N(["screen-ruler",`ruler-${R.direction}`]),onMouseenter:V,onMouseleave:f,onMousedown:v},[(d(!0),w(H,null,te(S(s),c=>(d(),w("span",{key:c},Q(x(c)),1))),128))],34),[[Ce,R.showRuler]]),R.showLine?(d(),w(H,{key:0},[g("div",{class:N(["ruler-line",R.direction]),style:oe(S(e))},[g("span",null,Q(x(p.leftTop-20)),1)],6),(d(!0),w(H,null,te(p.line,(c,M)=>(d(),w("div",{class:N(["ruler-line",R.direction]),key:c,style:oe(I(c)),onMousedown:h=>E(M,c,h)},[g("span",null,Q(x(c-20)),1)],46,vl))),128))],64)):X("",!0)]))}});const bl={class:"container-screen"},hl={class:"main-box"},yl={key:0,class:"no-date"},Fl={class:"design-footer"},_l={class:"offset"},El={class:"center"},kl={class:"item"},Cl=g("label",{class:"label"},"\u6807\u5C3A",-1),wl={class:"item"},xl=g("label",{class:"label"},"\u53C2\u8003\u7EBF",-1),Bl={class:"item slider"},Al=g("label",{class:"label"},"\u7F29\u653E\u6BD4\u4F8B",-1),Dl={class:"item"},$l=j("\u81EA\u9002\u5E94 "),Il=ue({__name:"index",setup(R){const T=$e(),p=Se(),e=ae({showLine:!0,scale:100,autoScale:100,ruler:!0,widthLeft:"",widthRight:"",offset:[],translateX:0,translateY:0,moveFlag:!1,loading:!1,isEye:!1,active:null}),s=q(),x=q(),V=q(),v=q({list:[],config:{width:"1920px",height:"1080px",background:"#000",style:"",primary:"#409eff"}}),f=ee(()=>{const{width:o,height:n,background:m,primary:D}=v.value.config,Y=e.scale/100,G=e.translateX,k=e.translateY;return{width:o,height:n,background:m,transform:`scale(${Y}) translate(${G}px,${k}px)`,color:D}}),I=()=>{e.active=null,U({})},E=(o,n)=>{e.active=n,U(o)},b=o=>{v.value.list.splice(o,1),I(),P()},r=q({100:{style:{}}}),c=o=>{o==="left"?(e.widthLeft===""?e.widthLeft="0px":e.widthLeft="",setTimeout(()=>{L()},500)):e.widthRight===""?e.widthRight="0px":e.widthRight=""},M=()=>{e.scale=e.autoScale,e.translateX=0,e.translateY=0},h=q(),L=()=>{me(()=>{const o=h.value.offsetWidth,n=parseInt(v.value.config.width);if(o&&n){const D=parseInt(`${o/n*100}`);e.autoScale=D}const m=h.value.getBoundingClientRect();e.offset[1]=m.top+(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),e.offset[0]=m.left+(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0)})},z=o=>{e.moveFlag=!0;const n=e.scale/100,m=o.pageX-e.translateX*n,D=o.pageY-e.translateY*n;document.onmousemove=Y=>{!e.moveFlag||(e.translateX=parseInt(`${(Y.pageX-m)/n}`),e.translateY=parseInt(`${(Y.pageY-D)/n}`))},document.onmouseup=function(){e.moveFlag=!1,document.onmousemove=null}},le=o=>{o.preventDefault()},W=o=>{const n=o.newIndex,m=v.value.list[n];delete m.label,delete m.icon;const{pageX:D,pageY:Y}=o.originalEvent;m.position||(m.position={}),m.config||(m.config={}),m.position.left=parseInt(`${D-e.offset[0]-e.translateX}`),m.position.top=parseInt(`${Y-e.offset[1]-e.translateY}`),e.active=n,U(m),P()},U=o=>{s.value.setCurrent(o)},P=()=>{x.value.setLayer(v.value.list)},F=ae({visible:!1,title:"",direction:"",content:"",codeType:"",callback:""}),i=()=>{A()},t=o=>{try{if(typeof F.callback=="function"){const n=F.codeType==="json"?Be(o):se(o);F.callback(n)}else switch(F.type){case"css":v.value.config.style=o,re("screenStyle",o,!0);break;case"json":v.value=se(o),P();break}A()}catch{}},B=o=>{const{type:n,direction:m,codeType:D,title:Y,callback:G,content:k}=o;F.direction=m||"ltr",F.type=n,F.codeType=D||"",F.title=Y?`\u63D0\u793A\uFF1A${Y}`:"",F.visible=!0,F.callback=G;let J=D==="json"?Ae(k,!0):de(k,!0);switch(n){case"css":J=v.value.config.style||"";break}F.content=J},A=()=>{F.visible=!1,F.type="",F.title="",F.codeType="",F.callback="",F.content=""},_=o=>{switch(o){case"del":v.value.list=[],I(),P();break;case"eye":e.isEye=!0;break;case"json":B({type:"json",content:v.value,title:"\u53EF\u7F16\u8F91\u4FEE\u6539\u6216\u5C06\u5DF2\u751F\u6210\u7684\u811A\u672C\u7C98\u8D34\u8FDB\u6765"});break;case"vue":V.value.openScreen(v.value);break;case"save":O();break}},O=()=>{let o={data:de(v.value),name:"\u672A\u547D\u540D\u53EF\u89C6\u5316\u5927\u5C4F",type:4},n="designSave";const m=T.query.id;m&&(Object.assign(o,{id:m}),delete o.name,n="designEdit"),e.loading=!0,pe(n,o).then(D=>{ie({message:D.message||"\u4FDD\u5B58\u6210\u529F\uFF01",type:"success"}),m||p.push({path:"/design/dataScreen/list"}),e.loading=!1}).catch(D=>{ie.error(D.message||"\u4FDD\u5B58\u5F02\u5E38"),e.loading=!1}),I()},Z=()=>{const o=T.query.id;!o||(e.loading=!0,pe("designById",{id:o}).then(n=>{const m=n.data;v.value=se(m.data),e.loading=!1,P(),v.value.config.style&&re("screenStyle",v.value.config.style,!0)}).catch(n=>{ie.error(n.message||"\u52A0\u8F7D\u5F02\u5E38"),e.loading=!1}))},y=(o,n,m)=>{switch(o){case"display":case"zIndex":v.value.list[n].position[o]=m;break;case"lock":v.value.list[n].config[o]=m;break;case"del":return b(n)}U(v.value.list[n])};return ge(()=>{L(),Z()}),(o,n)=>{const m=C("el-switch"),D=C("el-slider"),Y=C("el-button"),G=De("loading");return be((d(),w("div",bl,[e.isEye?(d(),w("i",{key:0,class:"icon-close close-preview",onClick:n[0]||(n[0]=k=>e.isEye=!1)})):X("",!0),l(ml,{style:oe({width:e.widthLeft}),ref_key:"controlLeftEl",ref:x,active:e.active,"onUpdate:active":n[1]||(n[1]=k=>e.active=k),onUpdate:y},null,8,["style","active"]),g("div",hl,[l(Ve,{onClick:_}),g("div",{class:"design-box",ref_key:"designBoxEl",ref:h},[l(fe,{scale:e.scale,offset:e.offset,"show-ruler":e.ruler,"show-line":e.showLine},null,8,["scale","offset","show-ruler","show-line"]),l(fe,{scale:e.scale,offset:e.offset,"show-ruler":e.ruler,"show-line":e.showLine,direction:"v"},null,8,["scale","offset","show-ruler","show-line"]),g("div",{onMousedown:z,class:N(["design-canvas",{preview:e.isEye}]),style:oe(S(f)),onClick:I,onContextmenu:le},[l(S(ce),ve({itemKey:"id",list:v.value.list,name:"fade",class:"drag"},{group:"form",animation:200,handle:".none"},{onAdd:W}),{item:u(({element:k,index:J})=>[l(we,{data:k,onClick:xe(a=>E(k,J),["stop"]),type:0,current:J===e.active,onDelClick:a=>b(J)},null,8,["data","onClick","current","onDelClick"])]),_:1},16,["list"])],38),v.value.list.length?X("",!0):(d(),w("div",yl,"\u8BF7\u4ECE\u5DE6\u5219\u7EC4\u4EF6\u680F\u62D6\u52A8\u7EC4\u4EF6\u5230\u8BBE\u8BA1\u533A\u57DF"))],512),g("div",Fl,[g("i",{class:"icon-menu icon",onClick:n[2]||(n[2]=k=>c("left"))}),g("div",_l,Q(e.translateX)+","+Q(e.translateY),1),g("div",El,[g("div",kl,[Cl,l(m,{size:"small",modelValue:e.ruler,"onUpdate:modelValue":n[3]||(n[3]=k=>e.ruler=k)},null,8,["modelValue"])]),g("div",wl,[xl,l(m,{size:"small",modelValue:e.showLine,"onUpdate:modelValue":n[4]||(n[4]=k=>e.showLine=k)},null,8,["modelValue"])]),g("div",Bl,[Al,l(D,{"show-stops":"",max:200,min:20,size:"small",marks:r.value,modelValue:e.scale,"onUpdate:modelValue":n[5]||(n[5]=k=>e.scale=k)},null,8,["marks","modelValue"])]),g("div",Dl,[l(Y,{type:"primary",link:"",onClick:M},{default:u(()=>[$l]),_:1})])]),g("i",{class:"icon-menu icon",onClick:n[6]||(n[6]=k=>c())})])]),l(nl,{style:oe({width:e.widthRight}),config:v.value.config,"onUpdate:config":n[7]||(n[7]=k=>v.value.config=k),onOpenDrawer:B,onUpdate:P,ref_key:"configEl",ref:s},null,8,["style","config"]),l(Ie,{modelValue:F.visible,"onUpdate:modelValue":n[8]||(n[8]=k=>F.visible=k),title:F.title,direction:F.direction,content:F.content,"code-type":F.codeType,onBeforeClose:i,onConfirm:t},null,8,["modelValue","title","direction","content","code-type"]),l(Te,{ref_key:"vueFileEl",ref:V},null,512)])),[[G,e.loading]])}}});export{Il as default};
