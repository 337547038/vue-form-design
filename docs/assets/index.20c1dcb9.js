import{f as h,q as k,r as i,C as T,y as A,c as y,o as C,a as r,b as q,d as x,l as S,e as a,w as c,u as N,aa as I,s as L,V as R,G as U,n as j}from"./index.2b72f3d0.js";const z={class:"design-flow-container"},G={class:"tools"},M=L("\u4FDD\u5B58"),W=h({__name:"index",setup(O){k().changeBreadcrumb([{label:"\u7CFB\u7EDF\u5DE5\u5177"},{label:"\u6D41\u7A0B\u8BBE\u8BA1"}]);const d=i(),l=i(),f=T(),m=A(),n=i(f.query.tabs||"info"),_=i({list:[{type:"input",control:{modelValue:"",placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0"},config:{},name:"name",item:{label:"\u6D41\u7A0B\u540D\u79F0"},customRules:[{type:"required",message:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0",trigger:"blur"}]},{type:"select",control:{modelValue:"",appendToBody:!0},options:[],config:{optionsType:1,optionsFun:"designList",method:"post",label:"name",value:"id",beforeRequest:e=>(e.type=1,e)},name:"source",item:{label:"\u6D41\u7A0B\u8868\u5355",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u8868\u5355",trigger:"blur"}]}},{type:"switch",control:{modelValue:1,activeValue:1,inactiveValue:0},options:[],config:{optionsType:2},name:"status",item:{label:"\u72B6\u6001"}},{type:"component",control:{modelValue:"",colorPicker:!0},config:{componentName:"DiyIconfont"},name:"icon",item:{label:"\u6D41\u7A0B\u56FE\u6807"}},{type:"select",control:{modelValue:"",appendToBody:!0},options:[],config:{optionsType:2,optionsFun:"flow"},name:"category",item:{label:"\u6240\u5728\u5206\u7EC4"}},{type:"select",control:{modelValue:"",appendToBody:!0},options:[],config:{optionsType:1,optionsFun:"roleList",label:"name",value:"id"},name:"roleId",item:{label:"\u89D2\u8272\u6743\u9650",showLabel:!1}},{type:"textarea",control:{modelValue:""},config:{span:24},name:"remark",item:{label:"\u5907\u6CE8\u8BF4\u660E",showLabel:!1}}],form:{class:"form-row-2",labelWidth:"110px",size:"default"}}),t=y(()=>f.query.id),g=y(()=>t.value?2:1),B=e=>{e.paneName},v=()=>{d.value.submit()},D=e=>{var o,u,s;return t.value&&(e.id=t.value),e.icon&&(e.icon=(o=e.icon)==null?void 0:o.join(",")),e.type=3,(u=l.value)!=null&&u.getValue&&(e.data=R((s=l.value)==null?void 0:s.getValue())),e},F=e=>(e.icon&&(e.icon=e.icon.split(",")),l.value.setValue(U(e.data)),e),V=(e,o)=>{if(e==="success")if(n.value==="info"){if(n.value="flow",!t.value){const u=o.data.insertId;m.push({path:"/design/flow",query:{id:u,tabs:"flow"}}),j(()=>{p()})}}else m.push({path:"/design/flow/list"})},p=()=>{t.value&&d.value.getData({id:t.value})};return C(()=>{p()}),(e,o)=>{const u=r("el-button"),s=r("ak-form"),b=r("el-tab-pane"),w=r("el-tabs");return q(),x("div",z,[S("div",G,[a(u,{type:"primary",onClick:v},{default:c(()=>[M]),_:1})]),a(w,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=E=>n.value=E),class:"flow-tabs",onTabClick:B},{default:c(()=>[a(b,{label:"\u57FA\u7840\u4FE1\u606F",name:"info",class:"tabs-info"},{default:c(()=>[a(s,{ref_key:"formEl",ref:d,formData:_.value,type:N(g),addUrl:"designSave",editUrl:"designEdit",requestUrl:"designById",beforeSubmit:D,afterSubmit:V,afterResponse:F},null,8,["formData","type"])]),_:1}),a(b,{label:"\u5BA1\u6279\u6D41\u7A0B",name:"flow"},{default:c(()=>[a(I,{ref_key:"flowEl",ref:l},null,512)]),_:1})]),_:1},8,["modelValue"])])}}});export{W as default};
