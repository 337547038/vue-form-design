import{x as mt,D as ut,Y as In,d as Ut,a1 as pn,a2 as hn,l as Se,h as Bt,G as An,r as B,o as _,b as R,w as m,c as F,a as me,F as Q,O as Kt,L as xt,p as mn,i as c,s as Ot,v as qt,C as y,g as L,t as It,m as X,f as de,a3 as At,a4 as Pn,k as Nn,A as Fn,u as Mn,U as Jt,q as vt,B as Ln,a5 as Qt,a6 as Zt,a7 as Un,X as Bn,z as Rn,a0 as en,$ as $n,P as Qe,E as tn}from"./index-CDYjrzCG.js";import{_ as Xn,a as Yn,b as Ze,g as bt}from"./aceTooptip-BYJtI7gJ.js";import{_ as jn}from"./aceDrawer.vue_vue_type_script_setup_true_lang-B7k-_fcU.js";/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function nn(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable})),t.push.apply(t,n)}return t}function _e(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nn(Object(t),!0).forEach(function(n){Hn(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):nn(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function at(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?at=function(e){return typeof e}:at=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(o)}function Hn(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function Ee(){return Ee=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ee.apply(this,arguments)}function zn(o,e){if(o==null)return{};var t={},n=Object.keys(o),a,l;for(l=0;l<n.length;l++)a=n[l],!(e.indexOf(a)>=0)&&(t[a]=o[a]);return t}function Wn(o,e){if(o==null)return{};var t=zn(o,e),n,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(o);for(a=0;a<l.length;a++)n=l[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(o,n)&&(t[n]=o[n])}return t}var Gn="1.15.2";function we(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var De=we(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ge=we(/Edge/i),on=we(/firefox/i),Ye=we(/safari/i)&&!we(/chrome/i)&&!we(/android/i),gn=we(/iP(ad|od|hone)/i),vn=we(/chrome/i)&&we(/android/i),bn={capture:!1,passive:!1};function N(o,e,t){o.addEventListener(e,t,!De&&bn)}function A(o,e,t){o.removeEventListener(e,t,!De&&bn)}function dt(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function Kn(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function be(o,e,t,n){if(o){t=t||document;do{if(e!=null&&(e[0]===">"?o.parentNode===t&&dt(o,e):dt(o,e))||n&&o===t)return o;if(o===t)break}while(o=Kn(o))}return null}var an=/\s+/g;function ce(o,e,t){if(o&&e)if(o.classList)o.classList[t?"add":"remove"](e);else{var n=(" "+o.className+" ").replace(an," ").replace(" "+e+" "," ");o.className=(n+(t?" "+e:"")).replace(an," ")}}function E(o,e,t){var n=o&&o.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(t=o.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function Ue(o,e){var t="";if(typeof o=="string")t=o;else do{var n=E(o,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(o=o.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(t)}function yn(o,e,t){if(o){var n=o.getElementsByTagName(e),a=0,l=n.length;if(t)for(;a<l;a++)t(n[a],a);return n}return[]}function ye(){var o=document.scrollingElement;return o||document.documentElement}function G(o,e,t,n,a){if(!(!o.getBoundingClientRect&&o!==window)){var l,i,r,s,u,f,h;if(o!==window&&o.parentNode&&o!==ye()?(l=o.getBoundingClientRect(),i=l.top,r=l.left,s=l.bottom,u=l.right,f=l.height,h=l.width):(i=0,r=0,s=window.innerHeight,u=window.innerWidth,f=window.innerHeight,h=window.innerWidth),(e||t)&&o!==window&&(a=a||o.parentNode,!De))do if(a&&a.getBoundingClientRect&&(E(a,"transform")!=="none"||t&&E(a,"position")!=="static")){var k=a.getBoundingClientRect();i-=k.top+parseInt(E(a,"border-top-width")),r-=k.left+parseInt(E(a,"border-left-width")),s=i+l.height,u=r+l.width;break}while(a=a.parentNode);if(n&&o!==window){var P=Ue(a||o),O=P&&P.a,I=P&&P.d;P&&(i/=I,r/=O,h/=O,f/=I,s=i+f,u=r+h)}return{top:i,left:r,bottom:s,right:u,width:h,height:f}}}function ln(o,e,t){for(var n=Te(o,!0),a=G(o)[e];n;){var l=G(n)[t],i=void 0;if(i=a>=l,!i)return n;if(n===ye())break;n=Te(n,!1)}return!1}function Be(o,e,t,n){for(var a=0,l=0,i=o.children;l<i.length;){if(i[l].style.display!=="none"&&i[l]!==D.ghost&&(n||i[l]!==D.dragged)&&be(i[l],t.draggable,o,!1)){if(a===e)return i[l];a++}l++}return null}function Rt(o,e){for(var t=o.lastElementChild;t&&(t===D.ghost||E(t,"display")==="none"||e&&!dt(t,e));)t=t.previousElementSibling;return t||null}function he(o,e){var t=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==D.clone&&(!e||dt(o,e))&&t++;return t}function rn(o){var e=0,t=0,n=ye();if(o)do{var a=Ue(o),l=a.a,i=a.d;e+=o.scrollLeft*l,t+=o.scrollTop*i}while(o!==n&&(o=o.parentNode));return[e,t]}function qn(o,e){for(var t in o)if(o.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===o[t][n])return Number(t)}return-1}function Te(o,e){if(!o||!o.getBoundingClientRect)return ye();var t=o,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var a=E(t);if(t.clientWidth<t.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return ye();if(n||e)return t;n=!0}}while(t=t.parentNode);return ye()}function Jn(o,e){if(o&&e)for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o}function yt(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var je;function _n(o,e){return function(){if(!je){var t=arguments,n=this;t.length===1?o.call(n,t[0]):o.apply(n,t),je=setTimeout(function(){je=void 0},e)}}}function Qn(){clearTimeout(je),je=void 0}function wn(o,e,t){o.scrollLeft+=e,o.scrollTop+=t}function En(o){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):t?t(o).clone(!0)[0]:o.cloneNode(!0)}function Dn(o,e,t){var n={};return Array.from(o.children).forEach(function(a){var l,i,r,s;if(!(!be(a,e.draggable,o,!1)||a.animated||a===t)){var u=G(a);n.left=Math.min((l=n.left)!==null&&l!==void 0?l:1/0,u.left),n.top=Math.min((i=n.top)!==null&&i!==void 0?i:1/0,u.top),n.right=Math.max((r=n.right)!==null&&r!==void 0?r:-1/0,u.right),n.bottom=Math.max((s=n.bottom)!==null&&s!==void 0?s:-1/0,u.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var pe="Sortable"+new Date().getTime();function Zn(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(a){if(!(E(a,"display")==="none"||a===D.ghost)){o.push({target:a,rect:G(a)});var l=_e({},o[o.length-1].rect);if(a.thisAnimationDuration){var i=Ue(a,!0);i&&(l.top-=i.f,l.left-=i.e)}a.fromRect=l}})}},addAnimationState:function(n){o.push(n)},removeAnimationState:function(n){o.splice(qn(o,{target:n}),1)},animateAll:function(n){var a=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var l=!1,i=0;o.forEach(function(r){var s=0,u=r.target,f=u.fromRect,h=G(u),k=u.prevFromRect,P=u.prevToRect,O=r.rect,I=Ue(u,!0);I&&(h.top-=I.f,h.left-=I.e),u.toRect=h,u.thisAnimationDuration&&yt(k,h)&&!yt(f,h)&&(O.top-h.top)/(O.left-h.left)===(f.top-h.top)/(f.left-h.left)&&(s=to(O,k,P,a.options)),yt(h,f)||(u.prevFromRect=f,u.prevToRect=h,s||(s=a.options.animation),a.animate(u,O,h,s)),s&&(l=!0,i=Math.max(i,s),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},s),u.thisAnimationDuration=s)}),clearTimeout(e),l?e=setTimeout(function(){typeof n=="function"&&n()},i):typeof n=="function"&&n(),o=[]},animate:function(n,a,l,i){if(i){E(n,"transition",""),E(n,"transform","");var r=Ue(this.el),s=r&&r.a,u=r&&r.d,f=(a.left-l.left)/(s||1),h=(a.top-l.top)/(u||1);n.animatingX=!!f,n.animatingY=!!h,E(n,"transform","translate3d("+f+"px,"+h+"px,0)"),this.forRepaintDummy=eo(n),E(n,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),E(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){E(n,"transition",""),E(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},i)}}}}function eo(o){return o.offsetWidth}function to(o,e,t,n){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var Ne=[],_t={initializeByDefault:!0},Ke={mount:function(e){for(var t in _t)_t.hasOwnProperty(t)&&!(t in e)&&(e[t]=_t[t]);Ne.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ne.push(e)},pluginEvent:function(e,t,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var l=e+"Global";Ne.forEach(function(i){t[i.pluginName]&&(t[i.pluginName][l]&&t[i.pluginName][l](_e({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](_e({sortable:t},n)))})},initializePlugins:function(e,t,n,a){Ne.forEach(function(r){var s=r.pluginName;if(!(!e.options[s]&&!r.initializeByDefault)){var u=new r(e,t,e.options);u.sortable=e,u.options=e.options,e[s]=u,Ee(n,u.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var i=this.modifyOption(e,l,e.options[l]);typeof i<"u"&&(e.options[l]=i)}},getEventProperties:function(e,t){var n={};return Ne.forEach(function(a){typeof a.eventProperties=="function"&&Ee(n,a.eventProperties.call(t[a.pluginName],e))}),n},modifyOption:function(e,t,n){var a;return Ne.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[t]=="function"&&(a=l.optionListeners[t].call(e[l.pluginName],n))}),a}};function no(o){var e=o.sortable,t=o.rootEl,n=o.name,a=o.targetEl,l=o.cloneEl,i=o.toEl,r=o.fromEl,s=o.oldIndex,u=o.newIndex,f=o.oldDraggableIndex,h=o.newDraggableIndex,k=o.originalEvent,P=o.putSortable,O=o.extraEventProperties;if(e=e||t&&t[pe],!!e){var I,le=e.options,re="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!De&&!Ge?I=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(I=document.createEvent("Event"),I.initEvent(n,!0,!0)),I.to=i||t,I.from=r||t,I.item=a||t,I.clone=l,I.oldIndex=s,I.newIndex=u,I.oldDraggableIndex=f,I.newDraggableIndex=h,I.originalEvent=k,I.pullMode=P?P.lastPutMode:void 0;var K=_e(_e({},O),Ke.getEventProperties(n,e));for(var Z in K)I[Z]=K[Z];t&&t.dispatchEvent(I),le[re]&&le[re].call(e,I)}}var oo=["evt"],ue=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.evt,l=Wn(n,oo);Ke.pluginEvent.bind(D)(e,t,_e({dragEl:p,parentEl:H,ghostEl:C,rootEl:$,nextEl:Ie,lastDownEl:lt,cloneEl:Y,cloneHidden:Ce,dragStarted:Re,putSortable:oe,activeSortable:D.active,originalEvent:a,oldIndex:Le,oldDraggableIndex:He,newIndex:fe,newDraggableIndex:ke,hideGhostForTarget:Tn,unhideGhostForTarget:Vn,cloneNowHidden:function(){Ce=!0},cloneNowShown:function(){Ce=!1},dispatchSortableEvent:function(r){se({sortable:t,name:r,originalEvent:a})}},l))};function se(o){no(_e({putSortable:oe,cloneEl:Y,targetEl:p,rootEl:$,oldIndex:Le,oldDraggableIndex:He,newIndex:fe,newDraggableIndex:ke},o))}var p,H,C,$,Ie,lt,Y,Ce,Le,fe,He,ke,et,oe,Me=!1,ct=!1,ft=[],xe,ve,wt,Et,sn,un,Re,Fe,ze,We=!1,tt=!1,rt,ae,Dt=[],Pt=!1,pt=[],gt=typeof document<"u",nt=gn,dn=Ge||De?"cssFloat":"float",ao=gt&&!vn&&!gn&&"draggable"in document.createElement("div"),Sn=function(){if(gt){if(De)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),kn=function(e,t){var n=E(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),l=Be(e,0,t),i=Be(e,1,t),r=l&&E(l),s=i&&E(i),u=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+G(l).width,f=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+G(i).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&r.float&&r.float!=="none"){var h=r.float==="left"?"left":"right";return i&&(s.clear==="both"||s.clear===h)?"vertical":"horizontal"}return l&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||u>=a&&n[dn]==="none"||i&&n[dn]==="none"&&u+f>a)?"vertical":"horizontal"},lo=function(e,t,n){var a=n?e.left:e.top,l=n?e.right:e.bottom,i=n?e.width:e.height,r=n?t.left:t.top,s=n?t.right:t.bottom,u=n?t.width:t.height;return a===r||l===s||a+i/2===r+u/2},ro=function(e,t){var n;return ft.some(function(a){var l=a[pe].options.emptyInsertThreshold;if(!(!l||Rt(a))){var i=G(a),r=e>=i.left-l&&e<=i.right+l,s=t>=i.top-l&&t<=i.bottom+l;if(r&&s)return n=a}}),n},Cn=function(e){function t(l,i){return function(r,s,u,f){var h=r.options.group.name&&s.options.group.name&&r.options.group.name===s.options.group.name;if(l==null&&(i||h))return!0;if(l==null||l===!1)return!1;if(i&&l==="clone")return l;if(typeof l=="function")return t(l(r,s,u,f),i)(r,s,u,f);var k=(i?r:s).options.group.name;return l===!0||typeof l=="string"&&l===k||l.join&&l.indexOf(k)>-1}}var n={},a=e.group;(!a||at(a)!="object")&&(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},Tn=function(){!Sn&&C&&E(C,"display","none")},Vn=function(){!Sn&&C&&E(C,"display","")};gt&&!vn&&document.addEventListener("click",function(o){if(ct)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),ct=!1,!1},!0);var Oe=function(e){if(p){e=e.touches?e.touches[0]:e;var t=ro(e.clientX,e.clientY);if(t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[pe]._onDragOver(n)}}},io=function(e){p&&p.parentNode[pe]._isOutsideThisEl(e.target)};function D(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=Ee({},e),o[pe]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return kn(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,r){i.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:D.supportPointer!==!1&&"PointerEvent"in window&&!Ye,emptyInsertThreshold:5};Ke.initializePlugins(this,o,t);for(var n in t)!(n in e)&&(e[n]=t[n]);Cn(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:ao,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?N(o,"pointerdown",this._onTapStart):(N(o,"mousedown",this._onTapStart),N(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(N(o,"dragover",this),N(o,"dragenter",this)),ft.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ee(this,Zn())}D.prototype={constructor:D,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Fe=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,p):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,a=this.options,l=a.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,s=(r||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,f=a.filter;if(go(n),!p&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||a.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Ye&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=be(s,a.draggable,n,!1),!(s&&s.animated)&&lt!==s)){if(Le=he(s),He=he(s,a.draggable),typeof f=="function"){if(f.call(this,e,s,this)){se({sortable:t,rootEl:u,name:"filter",targetEl:s,toEl:n,fromEl:n}),ue("filter",t,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(h){if(h=be(u,h.trim(),n,!1),h)return se({sortable:t,rootEl:h,name:"filter",targetEl:s,fromEl:n,toEl:n}),ue("filter",t,{evt:e}),!0}),f)){l&&e.cancelable&&e.preventDefault();return}a.handle&&!be(u,a.handle,n,!1)||this._prepareDragStart(e,r,s)}}},_prepareDragStart:function(e,t,n){var a=this,l=a.el,i=a.options,r=l.ownerDocument,s;if(n&&!p&&n.parentNode===l){var u=G(n);if($=l,p=n,H=p.parentNode,Ie=p.nextSibling,lt=n,et=i.group,D.dragged=p,xe={target:p,clientX:(t||e).clientX,clientY:(t||e).clientY},sn=xe.clientX-u.left,un=xe.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,p.style["will-change"]="all",s=function(){if(ue("delayEnded",a,{evt:e}),D.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!on&&a.nativeDraggable&&(p.draggable=!0),a._triggerDragStart(e,t),se({sortable:a,name:"choose",originalEvent:e}),ce(p,i.chosenClass,!0)},i.ignore.split(",").forEach(function(f){yn(p,f.trim(),St)}),N(r,"dragover",Oe),N(r,"mousemove",Oe),N(r,"touchmove",Oe),N(r,"mouseup",a._onDrop),N(r,"touchend",a._onDrop),N(r,"touchcancel",a._onDrop),on&&this.nativeDraggable&&(this.options.touchStartThreshold=4,p.draggable=!0),ue("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ge||De))){if(D.eventCanceled){this._onDrop();return}N(r,"mouseup",a._disableDelayedDrag),N(r,"touchend",a._disableDelayedDrag),N(r,"touchcancel",a._disableDelayedDrag),N(r,"mousemove",a._delayedDragTouchMoveHandler),N(r,"touchmove",a._delayedDragTouchMoveHandler),i.supportPointer&&N(r,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(s,i.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){p&&St(p),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;A(e,"mouseup",this._disableDelayedDrag),A(e,"touchend",this._disableDelayedDrag),A(e,"touchcancel",this._disableDelayedDrag),A(e,"mousemove",this._delayedDragTouchMoveHandler),A(e,"touchmove",this._delayedDragTouchMoveHandler),A(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?N(document,"pointermove",this._onTouchMove):t?N(document,"touchmove",this._onTouchMove):N(document,"mousemove",this._onTouchMove):(N(p,"dragend",this),N($,"dragstart",this._onDragStart));try{document.selection?it(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Me=!1,$&&p){ue("dragStarted",this,{evt:t}),this.nativeDraggable&&N(document,"dragover",io);var n=this.options;!e&&ce(p,n.dragClass,!1),ce(p,n.ghostClass,!0),D.active=this,e&&this._appendGhost(),se({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ve){this._lastX=ve.clientX,this._lastY=ve.clientY,Tn();for(var e=document.elementFromPoint(ve.clientX,ve.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ve.clientX,ve.clientY),e!==t);)t=e;if(p.parentNode[pe]._isOutsideThisEl(e),t)do{if(t[pe]){var n=void 0;if(n=t[pe]._onDragOver({clientX:ve.clientX,clientY:ve.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Vn()}},_onTouchMove:function(e){if(xe){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,l=e.touches?e.touches[0]:e,i=C&&Ue(C,!0),r=C&&i&&i.a,s=C&&i&&i.d,u=nt&&ae&&rn(ae),f=(l.clientX-xe.clientX+a.x)/(r||1)+(u?u[0]-Dt[0]:0)/(r||1),h=(l.clientY-xe.clientY+a.y)/(s||1)+(u?u[1]-Dt[1]:0)/(s||1);if(!D.active&&!Me){if(n&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(C){i?(i.e+=f-(wt||0),i.f+=h-(Et||0)):i={a:1,b:0,c:0,d:1,e:f,f:h};var k="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");E(C,"webkitTransform",k),E(C,"mozTransform",k),E(C,"msTransform",k),E(C,"transform",k),wt=f,Et=h,ve=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!C){var e=this.options.fallbackOnBody?document.body:$,t=G(p,!0,nt,!0,e),n=this.options;if(nt){for(ae=e;E(ae,"position")==="static"&&E(ae,"transform")==="none"&&ae!==document;)ae=ae.parentNode;ae!==document.body&&ae!==document.documentElement?(ae===document&&(ae=ye()),t.top+=ae.scrollTop,t.left+=ae.scrollLeft):ae=ye(),Dt=rn(ae)}C=p.cloneNode(!0),ce(C,n.ghostClass,!1),ce(C,n.fallbackClass,!0),ce(C,n.dragClass,!0),E(C,"transition",""),E(C,"transform",""),E(C,"box-sizing","border-box"),E(C,"margin",0),E(C,"top",t.top),E(C,"left",t.left),E(C,"width",t.width),E(C,"height",t.height),E(C,"opacity","0.8"),E(C,"position",nt?"absolute":"fixed"),E(C,"zIndex","100000"),E(C,"pointerEvents","none"),D.ghost=C,e.appendChild(C),E(C,"transform-origin",sn/parseInt(C.style.width)*100+"% "+un/parseInt(C.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,l=n.options;if(ue("dragStart",this,{evt:e}),D.eventCanceled){this._onDrop();return}ue("setupClone",this),D.eventCanceled||(Y=En(p),Y.removeAttribute("id"),Y.draggable=!1,Y.style["will-change"]="",this._hideClone(),ce(Y,this.options.chosenClass,!1),D.clone=Y),n.cloneId=it(function(){ue("clone",n),!D.eventCanceled&&(n.options.removeCloneOnHide||$.insertBefore(Y,p),n._hideClone(),se({sortable:n,name:"clone"}))}),!t&&ce(p,l.dragClass,!0),t?(ct=!0,n._loopId=setInterval(n._emulateDragOver,50)):(A(document,"mouseup",n._onDrop),A(document,"touchend",n._onDrop),A(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",l.setData&&l.setData.call(n,a,p)),N(document,"drop",n),E(p,"transform","translateZ(0)")),Me=!0,n._dragStartId=it(n._dragStarted.bind(n,t,e)),N(document,"selectstart",n),Re=!0,Ye&&E(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,a,l,i,r=this.options,s=r.group,u=D.active,f=et===s,h=r.sort,k=oe||u,P,O=this,I=!1;if(Pt)return;function le(J,Ae){ue(J,O,_e({evt:e,isOwner:f,axis:P?"vertical":"horizontal",revert:i,dragRect:a,targetRect:l,canSort:h,fromSortable:k,target:n,completed:K,onMove:function(Pe,v){return ot($,t,p,a,Pe,G(Pe),e,v)},changed:Z},Ae))}function re(){le("dragOverAnimationCapture"),O.captureAnimationState(),O!==k&&k.captureAnimationState()}function K(J){return le("dragOverCompleted",{insertion:J}),J&&(f?u._hideClone():u._showClone(O),O!==k&&(ce(p,oe?oe.options.ghostClass:u.options.ghostClass,!1),ce(p,r.ghostClass,!0)),oe!==O&&O!==D.active?oe=O:O===D.active&&oe&&(oe=null),k===O&&(O._ignoreWhileAnimating=n),O.animateAll(function(){le("dragOverAnimationComplete"),O._ignoreWhileAnimating=null}),O!==k&&(k.animateAll(),k._ignoreWhileAnimating=null)),(n===p&&!p.animated||n===t&&!n.animated)&&(Fe=null),!r.dragoverBubble&&!e.rootEl&&n!==document&&(p.parentNode[pe]._isOutsideThisEl(e.target),!J&&Oe(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),I=!0}function Z(){fe=he(p),ke=he(p,r.draggable),se({sortable:O,name:"change",toEl:t,newIndex:fe,newDraggableIndex:ke,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=be(n,r.draggable,t,!0),le("dragOver"),D.eventCanceled)return I;if(p.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||O._ignoreWhileAnimating===n)return K(!1);if(ct=!1,u&&!r.disabled&&(f?h||(i=H!==$):oe===this||(this.lastPutMode=et.checkPull(this,u,p,e))&&s.checkPut(this,u,p,e))){if(P=this._getDirection(e,n)==="vertical",a=G(p),le("dragOverValid"),D.eventCanceled)return I;if(i)return H=$,re(),this._hideClone(),le("revert"),D.eventCanceled||(Ie?$.insertBefore(p,Ie):$.appendChild(p)),K(!0);var ee=Rt(t,r.draggable);if(!ee||fo(e,P,this)&&!ee.animated){if(ee===p)return K(!1);if(ee&&t===e.target&&(n=ee),n&&(l=G(n)),ot($,t,p,a,n,l,e,!!n)!==!1)return re(),ee&&ee.nextSibling?t.insertBefore(p,ee.nextSibling):t.appendChild(p),H=t,Z(),K(!0)}else if(ee&&co(e,P,this)){var ge=Be(t,0,r,!0);if(ge===p)return K(!1);if(n=ge,l=G(n),ot($,t,p,a,n,l,e,!1)!==!1)return re(),t.insertBefore(p,ge),H=t,Z(),K(!0)}else if(n.parentNode===t){l=G(n);var te=0,q,T=p.parentNode!==t,b=!lo(p.animated&&p.toRect||a,n.animated&&n.toRect||l,P),w=P?"top":"left",g=ln(n,"top","top")||ln(p,"top","top"),d=g?g.scrollTop:void 0;Fe!==n&&(q=l[w],We=!1,tt=!b&&r.invertSwap||T),te=po(e,n,l,P,b?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,tt,Fe===n);var x;if(te!==0){var j=he(p);do j-=te,x=H.children[j];while(x&&(E(x,"display")==="none"||x===C))}if(te===0||x===n)return K(!1);Fe=n,ze=te;var V=n.nextElementSibling,ie=!1;ie=te===1;var U=ot($,t,p,a,n,l,e,ie);if(U!==!1)return(U===1||U===-1)&&(ie=U===1),Pt=!0,setTimeout(uo,30),re(),ie&&!V?t.appendChild(p):n.parentNode.insertBefore(p,ie?V:n),g&&wn(g,0,d-g.scrollTop),H=p.parentNode,q!==void 0&&!tt&&(rt=Math.abs(q-G(n)[w])),Z(),K(!0)}if(t.contains(p))return K(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){A(document,"mousemove",this._onTouchMove),A(document,"touchmove",this._onTouchMove),A(document,"pointermove",this._onTouchMove),A(document,"dragover",Oe),A(document,"mousemove",Oe),A(document,"touchmove",Oe)},_offUpEvents:function(){var e=this.el.ownerDocument;A(e,"mouseup",this._onDrop),A(e,"touchend",this._onDrop),A(e,"pointerup",this._onDrop),A(e,"touchcancel",this._onDrop),A(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(fe=he(p),ke=he(p,n.draggable),ue("drop",this,{evt:e}),H=p&&p.parentNode,fe=he(p),ke=he(p,n.draggable),D.eventCanceled){this._nulling();return}Me=!1,tt=!1,We=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Nt(this.cloneId),Nt(this._dragStartId),this.nativeDraggable&&(A(document,"drop",this),A(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ye&&E(document.body,"user-select",""),E(p,"transform",""),e&&(Re&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),C&&C.parentNode&&C.parentNode.removeChild(C),($===H||oe&&oe.lastPutMode!=="clone")&&Y&&Y.parentNode&&Y.parentNode.removeChild(Y),p&&(this.nativeDraggable&&A(p,"dragend",this),St(p),p.style["will-change"]="",Re&&!Me&&ce(p,oe?oe.options.ghostClass:this.options.ghostClass,!1),ce(p,this.options.chosenClass,!1),se({sortable:this,name:"unchoose",toEl:H,newIndex:null,newDraggableIndex:null,originalEvent:e}),$!==H?(fe>=0&&(se({rootEl:H,name:"add",toEl:H,fromEl:$,originalEvent:e}),se({sortable:this,name:"remove",toEl:H,originalEvent:e}),se({rootEl:H,name:"sort",toEl:H,fromEl:$,originalEvent:e}),se({sortable:this,name:"sort",toEl:H,originalEvent:e})),oe&&oe.save()):fe!==Le&&fe>=0&&(se({sortable:this,name:"update",toEl:H,originalEvent:e}),se({sortable:this,name:"sort",toEl:H,originalEvent:e})),D.active&&((fe==null||fe===-1)&&(fe=Le,ke=He),se({sortable:this,name:"end",toEl:H,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ue("nulling",this),$=p=H=C=Ie=Y=lt=Ce=xe=ve=Re=fe=ke=Le=He=Fe=ze=oe=et=D.dragged=D.ghost=D.clone=D.active=null,pt.forEach(function(e){e.checked=!0}),pt.length=wt=Et=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":p&&(this._onDragOver(e),so(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,a=0,l=n.length,i=this.options;a<l;a++)t=n[a],be(t,i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||mo(t));return e},sort:function(e,t){var n={},a=this.el;this.toArray().forEach(function(l,i){var r=a.children[i];be(r,this.options.draggable,a,!1)&&(n[l]=r)},this),t&&this.captureAnimationState(),e.forEach(function(l){n[l]&&(a.removeChild(n[l]),a.appendChild(n[l]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return be(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var a=Ke.modifyOption(this,e,t);typeof a<"u"?n[e]=a:n[e]=t,e==="group"&&Cn(n)},destroy:function(){ue("destroy",this);var e=this.el;e[pe]=null,A(e,"mousedown",this._onTapStart),A(e,"touchstart",this._onTapStart),A(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(A(e,"dragover",this),A(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ft.splice(ft.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ce){if(ue("hideClone",this),D.eventCanceled)return;E(Y,"display","none"),this.options.removeCloneOnHide&&Y.parentNode&&Y.parentNode.removeChild(Y),Ce=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ce){if(ue("showClone",this),D.eventCanceled)return;p.parentNode==$&&!this.options.group.revertClone?$.insertBefore(Y,p):Ie?$.insertBefore(Y,Ie):$.appendChild(Y),this.options.group.revertClone&&this.animate(p,Y),E(Y,"display",""),Ce=!1}}};function so(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function ot(o,e,t,n,a,l,i,r){var s,u=o[pe],f=u.options.onMove,h;return window.CustomEvent&&!De&&!Ge?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=e,s.from=o,s.dragged=t,s.draggedRect=n,s.related=a||e,s.relatedRect=l||G(e),s.willInsertAfter=r,s.originalEvent=i,o.dispatchEvent(s),f&&(h=f.call(u,s,i)),h}function St(o){o.draggable=!1}function uo(){Pt=!1}function co(o,e,t){var n=G(Be(t.el,0,t.options,!0)),a=Dn(t.el,t.options,C),l=10;return e?o.clientX<a.left-l||o.clientY<n.top&&o.clientX<n.right:o.clientY<a.top-l||o.clientY<n.bottom&&o.clientX<n.left}function fo(o,e,t){var n=G(Rt(t.el,t.options.draggable)),a=Dn(t.el,t.options,C),l=10;return e?o.clientX>a.right+l||o.clientY>n.bottom&&o.clientX>n.left:o.clientY>a.bottom+l||o.clientX>n.right&&o.clientY>n.top}function po(o,e,t,n,a,l,i,r){var s=n?o.clientY:o.clientX,u=n?t.height:t.width,f=n?t.top:t.left,h=n?t.bottom:t.right,k=!1;if(!i){if(r&&rt<u*a){if(!We&&(ze===1?s>f+u*l/2:s<h-u*l/2)&&(We=!0),We)k=!0;else if(ze===1?s<f+rt:s>h-rt)return-ze}else if(s>f+u*(1-a)/2&&s<h-u*(1-a)/2)return ho(e)}return k=k||i,k&&(s<f+u*l/2||s>h-u*l/2)?s>f+u/2?1:-1:0}function ho(o){return he(p)<he(o)?1:-1}function mo(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function go(o){pt.length=0;for(var e=o.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&pt.push(n)}}function it(o){return setTimeout(o,0)}function Nt(o){return clearTimeout(o)}gt&&N(document,"touchmove",function(o){(D.active||Me)&&o.cancelable&&o.preventDefault()});D.utils={on:N,off:A,css:E,find:yn,is:function(e,t){return!!be(e,t,e,!1)},extend:Jn,throttle:_n,closest:be,toggleClass:ce,clone:En,index:he,nextTick:it,cancelNextTick:Nt,detectDirection:kn,getChild:Be};D.get=function(o){return o[pe]};D.mount=function(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(D.utils=_e(_e({},D.utils),n.utils)),Ke.mount(n)})};D.create=function(o,e){return new D(o,e)};D.version=Gn;var W=[],$e,Ft,Mt=!1,kt,Ct,ht,Xe;function vo(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?N(document,"dragover",this._handleAutoScroll):this.options.supportPointer?N(document,"pointermove",this._handleFallbackAutoScroll):n.touches?N(document,"touchmove",this._handleFallbackAutoScroll):N(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?A(document,"dragover",this._handleAutoScroll):(A(document,"pointermove",this._handleFallbackAutoScroll),A(document,"touchmove",this._handleFallbackAutoScroll),A(document,"mousemove",this._handleFallbackAutoScroll)),cn(),st(),Qn()},nulling:function(){ht=Ft=$e=Mt=Xe=kt=Ct=null,W.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var a=this,l=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(l,i);if(ht=t,n||this.options.forceAutoScrollFallback||Ge||De||Ye){Tt(t,this.options,r,n);var s=Te(r,!0);Mt&&(!Xe||l!==kt||i!==Ct)&&(Xe&&cn(),Xe=setInterval(function(){var u=Te(document.elementFromPoint(l,i),!0);u!==s&&(s=u,st()),Tt(t,a.options,u,n)},10),kt=l,Ct=i)}else{if(!this.options.bubbleScroll||Te(r,!0)===ye()){st();return}Tt(t,this.options,Te(r,!1),!1)}}},Ee(o,{pluginName:"scroll",initializeByDefault:!0})}function st(){W.forEach(function(o){clearInterval(o.pid)}),W=[]}function cn(){clearInterval(Xe)}var Tt=_n(function(o,e,t,n){if(e.scroll){var a=(o.touches?o.touches[0]:o).clientX,l=(o.touches?o.touches[0]:o).clientY,i=e.scrollSensitivity,r=e.scrollSpeed,s=ye(),u=!1,f;Ft!==t&&(Ft=t,st(),$e=e.scroll,f=e.scrollFn,$e===!0&&($e=Te(t,!0)));var h=0,k=$e;do{var P=k,O=G(P),I=O.top,le=O.bottom,re=O.left,K=O.right,Z=O.width,ee=O.height,ge=void 0,te=void 0,q=P.scrollWidth,T=P.scrollHeight,b=E(P),w=P.scrollLeft,g=P.scrollTop;P===s?(ge=Z<q&&(b.overflowX==="auto"||b.overflowX==="scroll"||b.overflowX==="visible"),te=ee<T&&(b.overflowY==="auto"||b.overflowY==="scroll"||b.overflowY==="visible")):(ge=Z<q&&(b.overflowX==="auto"||b.overflowX==="scroll"),te=ee<T&&(b.overflowY==="auto"||b.overflowY==="scroll"));var d=ge&&(Math.abs(K-a)<=i&&w+Z<q)-(Math.abs(re-a)<=i&&!!w),x=te&&(Math.abs(le-l)<=i&&g+ee<T)-(Math.abs(I-l)<=i&&!!g);if(!W[h])for(var j=0;j<=h;j++)W[j]||(W[j]={});(W[h].vx!=d||W[h].vy!=x||W[h].el!==P)&&(W[h].el=P,W[h].vx=d,W[h].vy=x,clearInterval(W[h].pid),(d!=0||x!=0)&&(u=!0,W[h].pid=setInterval((function(){n&&this.layer===0&&D.active._onTouchMove(ht);var V=W[this.layer].vy?W[this.layer].vy*r:0,ie=W[this.layer].vx?W[this.layer].vx*r:0;typeof f=="function"&&f.call(D.dragged.parentNode[pe],ie,V,o,ht,W[this.layer].el)!=="continue"||wn(W[this.layer].el,ie,V)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&k!==s&&(k=Te(k,!1)));Mt=u}},30),xn=function(e){var t=e.originalEvent,n=e.putSortable,a=e.dragEl,l=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var u=n||l;r();var f=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(f.clientX,f.clientY);s(),u&&!u.el.contains(h)&&(i("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function $t(){}$t.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=Be(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:xn};Ee($t,{pluginName:"revertOnSpill"});function Xt(){}Xt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,a=n||this.sortable;a.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),a.animateAll()},drop:xn};Ee(Xt,{pluginName:"removeOnSpill"});D.mount(new vo);D.mount(Xt,$t);const bo=o=>new Promise(e=>{mt("designById",{id:o}).then(t=>{const n=t.data,a=ut(n.listData),l=ut(n.data),i=In(n.dict);e({tableData:a,searchData:l,dict:i,source:n.source})})}),yo=o=>new Promise(e=>{mt("designList",{extend:{pageSize:20},query:{name:o,type:1}}).then(n=>{e(n.data.list)})}),Vt=o=>new Promise(e=>{mt("designById",{id:o}).then(t=>{const n=ut(t.data.data);e(Lt(n))})}),_o=["txt","title","table","component","upload","button","tinymce","inputSlot","flex"],Lt=o=>{const e=[];return o==null||o.list.forEach(t=>{var n;if(t.type==="grid"||t.type==="tabs")t.columns.forEach(a=>{Lt(a)});else if(["card","div"].includes(t.type))Lt(t);else if(!_o.includes(t.type)&&t.name){const a=t.config.help;e.push({prop:t.name,label:(n=t.formItem)==null?void 0:n.label,...a})}}),e},fn=Ut({__name:"operateBtn",props:pn({position:{default:"top"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const e=o,t=hn(o,"modelValue"),n=Se([]),a=Se([]),l=Bt(()=>[{label:"新增",key:"add",show:e.position==="top"},{label:"编辑",key:"edit",show:!0},{label:"查看",key:"detail",show:e.position==="left"},{label:"删除",key:"del",show:!0},{label:"导出",key:"export",show:e.position==="top"}].filter(s=>s.show)),i=l.value.map(s=>s.key);An(()=>t.value,s=>{s!=null&&s.length&&(n.value=[],a.value=[],s.forEach(u=>{u.key&&i.includes(u.key)&&(n.value.push(u.key),a.value.push(u.key))}))},{deep:!0,immediate:!0});const r=s=>{const u=s.filter(f=>!a.value.includes(f));if(u.length)t.value.push({key:u[0]});else{const f=a.value.filter(h=>!s.includes(h));t.value=t.value.filter(h=>h.key!==f[0])}a.value=s};return(s,u)=>{const f=B("el-option"),h=B("el-select");return _(),R(h,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=k=>n.value=k),multiple:"",onChange:r},{default:m(()=>[(_(!0),F(Q,null,me(l.value,k=>(_(),R(f,{key:k.key,label:k.label,value:k.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}}),wo={class:"sidebar-tools"},Eo={class:"h3"},Do=["onClick"],So=["onClick"],ko=L("div",{class:"h3"},[L("h3",null,"接口数据事件")],-1),Co=Ut({__name:"controlAttr",props:{tabsName:{},tabsNameModifiers:{}},emits:pn(["changeEvent"],["update:tabsName"]),setup(o,{expose:e,emit:t}){const n=t,a=Kt("tableData",{}),l=Kt("currentObj"),i=hn(o,"tabsName"),r=xt({formSourceList:[],tagCustomList:[],replaceValueList:[],replaceValueType:0}),s=["switch","image","tag","link","datetime","date","buttons","string","text"],u=[{label:"年-月-日",value:"{yyyy}-{mm}-{dd}"},{label:"年-月-日 时:分:秒",value:"{yyyy}-{mm}-{dd} {h}:{i}:{s}"},{label:"x年x月x日",value:"{yyyy}年{mm}月{dd}日"},{label:"x年x月x日 时:分:秒",value:"{yyyy}年{mm}月{dd}日 {h}:{i}:{s}"},{label:"时:分:秒",value:"{h}:{i}:{s}"},{label:"年-月-日 时:分:秒 星期",value:"{yyyy}:{mm}:{dd} {h}:{i}:{s} 星期{w}"}],f=["primary","success","warning","danger","info"],h=g=>{l.value.config={},delete l.value.replaceValue,delete l.value.timeFormat,delete l.value.buttons,delete l.value.custom,["tag","text"].includes(g)?r.tagCustomList=[{label:"primary",value:""}]:g==="buttons"&&(l.value.buttons=[])},k=g=>{if(!g)return{};const d={};for(const x of g)d[x.value]=x.label;return d},P=()=>{r.tagCustomList.push({label:"primary",value:""})},O=g=>{r.tagCustomList.splice(g,1)},I=()=>{var g;(g=l.value)!=null&&g.custom||(l.value.custom={}),l.value.custom=k(r.tagCustomList)},le=()=>{r.replaceValueList.push({label:"",value:""})},re=g=>{r.replaceValueList.splice(g,1)},K=g=>{g===1?(r.replaceValueList=[{label:"",value:""}],l.value.replaceValue={}):l.value.replaceValue=""},Z=()=>{l.value.replaceValue=k(r.replaceValueList)},ee=g=>{T(g)},ge=Bt(()=>{var g;return[{label:"所属表单",placeholder:"请选择所属表单",value:parseInt(a.value.config.formId)||"",key:"formId",type:"select",options:r.formSourceList,clearable:!0,filterable:!0,remote:!0,remoteMethod:ee},{label:"数据列表名称",placeholder:"保存的数据列表名称",value:a.value.config.name,key:"name"},{label:"数据添加编辑打开方式",placeholder:"默认新页面打开",value:a.value.config.openType,type:"select",options:[{label:"弹窗",value:"dialog"},{label:"新页面",value:"page"}],key:"openType",clearable:!0},{label:"窗口宽度",placeholder:"弹窗宽度",value:a.value.config.dialogWidth,type:"input",key:"dialogWidth",hide:a.value.config.openType!=="dialog"},{label:"横向滚动固定在底部",value:a.value.config.fixedBottomScroll,key:"fixedBottomScroll",type:"select",placeholder:"默认开启",options:[{label:"启用",value:!0},{label:"禁用",value:!1}],clearable:!0},{label:"列显示隐藏设置",value:a.value.config.columnsSetting,key:"columnsSetting",type:"select",placeholder:"默认开启",options:[{label:"启用",value:!0},{label:"禁用",value:!1}],clearable:!0},{label:"操作按钮设置",type:"operate"},{label:"可折叠查询表单",value:a.value.config.expand,key:"expand",type:"switch"},{label:"查询跳转页面",value:a.value.config.searchJump,key:"searchJump",type:"switch"},{label:"操作列按钮下拉",value:a.value.config.operateDropdown,key:"operateDropdown",type:"input",placeholder:"大于设定个数的以下拉形式显示"},{label:"分页设置",value:a.value.config.pageSize,key:"pageSize",type:"input",placeholder:"每页分多少条"},{label:"查询排序",value:a.value.config.orderSort,key:"orderSort",type:"input",placeholder:"查询排序，id desc"},{label:"开启侧栏树",value:(g=a.value.treeData)==null?void 0:g.show,key:"tree",type:"switch"}]}),te=(g,d)=>{var x;if(g.key==="tree"){a.value.treeData||(a.value.treeData={}),a.value.treeData.show=d;return}g.key==="formId"&&(!g.value&&((x=a.value.config)==null?void 0:x.openType)==="dialog"&&delete a.value.config.openType,n("changeEvent",{type:"formId",value:g.value})),a.value.config[g.key]=g.value},q=g=>{n("changeEvent",{type:"openDrawer",value:g})},T=g=>{yo(g).then(d=>{r.formSourceList=d})},b=g=>{if(!g)return[];const d=[];for(const x in g)d.push({value:x,label:g[x]});return d};return e({rowChange:()=>{["tag","text"].includes(l.value.render)&&(console.log("currentObj.render"),Object.keys(l.value.custom).length&&(r.tagCustomList=b(l.value.custom)),l.value.replaceValue&&typeof l.value.replaceValue=="object"&&(r.replaceValueList=b(l.value.replaceValue),r.replaceValueType=1))}}),mn(()=>{T()}),(g,d)=>{const x=B("el-option"),j=B("el-select"),V=B("el-form-item"),ie=B("el-switch"),U=B("el-input"),J=B("el-button"),Ae=B("el-tab-pane"),qe=B("el-tabs"),Pe=B("el-form");return _(),F("div",wo,[c(Pe,{size:"small",class:"form"},{default:m(()=>[c(qe,{modelValue:i.value,"onUpdate:modelValue":d[32]||(d[32]=v=>i.value=v)},{default:m(()=>[c(Ae,{label:"字段属性",name:"first"},{default:m(()=>[Ot(L("div",null,[L("div",Eo,[L("h3",null,It(y(l).label),1),X(" 列设置 ")]),c(V,{label:"渲染模式"},{default:m(()=>[c(j,{modelValue:y(l).render,"onUpdate:modelValue":d[0]||(d[0]=v=>y(l).render=v),onChange:h},{default:m(()=>[(_(),F(Q,null,me(s,v=>c(x,{key:v,value:v,label:v},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1}),y(l).render==="switch"?(_(),F(Q,{key:0},[c(V,{label:"inline-prompt"},{default:m(()=>[c(ie,{modelValue:y(l).config.inlinePrompt,"onUpdate:modelValue":d[1]||(d[1]=v=>y(l).config.inlinePrompt=v)},null,8,["modelValue"])]),_:1}),c(V,{label:"打开时描述"},{default:m(()=>[c(U,{modelValue:y(l).config.activeText,"onUpdate:modelValue":d[2]||(d[2]=v=>y(l).config.activeText=v),placeholder:"打开时的文字描述"},null,8,["modelValue"])]),_:1}),c(V,{label:"关闭时描述"},{default:m(()=>[c(U,{modelValue:y(l).config.inactiveText,"onUpdate:modelValue":d[3]||(d[3]=v=>y(l).config.inactiveText=v),placeholder:"关闭时的文字描述"},null,8,["modelValue"])]),_:1}),c(V,{label:"状态为on时的值"},{default:m(()=>[c(U,{modelValue:y(l).config.activeValue,"onUpdate:modelValue":d[4]||(d[4]=v=>y(l).config.activeValue=v),placeholder:"状态为on时的值"},null,8,["modelValue"])]),_:1}),c(V,{label:"状态为off时的值"},{default:m(()=>[c(U,{modelValue:y(l).config.inactiveValue,"onUpdate:modelValue":d[5]||(d[5]=v=>y(l).config.inactiveValue=v),placeholder:"状态为off时的值"},null,8,["modelValue"])]),_:1})],64)):de("",!0),y(l).render==="image"?(_(),F(Q,{key:1},[c(V,{label:"图片宽度"},{default:m(()=>[c(U,{modelValue:y(l).config.width,"onUpdate:modelValue":d[6]||(d[6]=v=>y(l).config.width=v),placeholder:"请输入图片宽度，单位px"},null,8,["modelValue"])]),_:1}),c(V,{label:"图片高度"},{default:m(()=>[c(U,{modelValue:y(l).config.height,"onUpdate:modelValue":d[7]||(d[7]=v=>y(l).config.height=v),placeholder:"请输入图片高度，单位px"},null,8,["modelValue"])]),_:1})],64)):de("",!0),["tag","text"].includes(y(l).render)?(_(),F(Q,{key:2},[c(V,{label:"值设置类型",style:{"margin-bottom":"0"}},{default:m(()=>[(_(!0),F(Q,null,me(r.tagCustomList,(v,S)=>(_(),F("div",{style:{"margin-bottom":"10px",display:"flex","align-items":"center"},key:S},[c(U,{modelValue:v.value,"onUpdate:modelValue":ne=>v.value=ne,placeholder:"对应的值",onChange:I},{append:m(()=>[c(j,{modelValue:v.label,"onUpdate:modelValue":ne=>v.label=ne,style:{width:"90px"},onChange:I},{default:m(()=>[(_(),F(Q,null,me(f,ne=>c(x,{key:ne,label:ne,value:ne},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),L("i",{style:{"margin-left":"10px"},class:"icon-del",onClick:ne=>O(S)},null,8,Do)]))),128))]),_:1}),c(V,{class:"flex-end"},{default:m(()=>[Ot(c(J,{type:"primary",onClick:P},{default:m(()=>[X("新增值设置类型")]),_:1},512),[[qt,r.tagCustomList.length<f.length]])]),_:1}),c(V,{label:"值替换数据"},{default:m(()=>[c(j,{modelValue:r.replaceValueType,"onUpdate:modelValue":d[8]||(d[8]=v=>r.replaceValueType=v),onChange:K},{default:m(()=>[c(x,{label:"使用字典",value:0}),c(x,{label:"自定义",value:1})]),_:1},8,["modelValue"])]),_:1}),r.replaceValueType===0?(_(),R(V,{key:0,label:"字典类型key"},{default:m(()=>[c(U,{placeholder:"请输入字典类型key",modelValue:y(l).replaceValue,"onUpdate:modelValue":d[9]||(d[9]=v=>y(l).replaceValue=v)},null,8,["modelValue"])]),_:1})):(_(),F(Q,{key:1},[c(V,{label:"值替换数据"},{default:m(()=>[(_(!0),F(Q,null,me(r.replaceValueList,(v,S)=>(_(),F("div",{key:v.value,style:{"margin-bottom":"10px",display:"flex","align-items":"center"}},[c(U,{placeholder:"对应的值",modelValue:v.value,"onUpdate:modelValue":ne=>v.value=ne,onChange:Z},null,8,["modelValue","onUpdate:modelValue"]),c(U,{placeholder:"替换的值",modelValue:v.label,"onUpdate:modelValue":ne=>v.label=ne,onChange:Z},null,8,["modelValue","onUpdate:modelValue"]),L("i",{style:{"margin-left":"10px"},class:"icon-del",onClick:ne=>re(S)},null,8,So)]))),128))]),_:1}),c(V,{class:"flex-end"},{default:m(()=>[c(J,{onClick:le,type:"primary"},{default:m(()=>[X("新增值替换数据")]),_:1})]),_:1})],64))],64)):de("",!0),y(l).render==="link"?(_(),F(Q,{key:3},[c(V,{label:"显示类型"},{default:m(()=>[c(j,{modelValue:y(l).config.type,"onUpdate:modelValue":d[10]||(d[10]=v=>y(l).config.type=v)},{default:m(()=>[(_(),F(Q,null,me(f,v=>c(x,{key:v,label:v,value:v},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),c(V,{label:"是否带下划线"},{default:m(()=>[c(ie,{modelValue:y(l).config.underline,"onUpdate:modelValue":d[11]||(d[11]=v=>y(l).config.underline=v)},null,8,["modelValue"])]),_:1}),c(V,{label:"打开方式"},{default:m(()=>[c(j,{modelValue:y(l).config.target,"onUpdate:modelValue":d[12]||(d[12]=v=>y(l).config.target=v)},{default:m(()=>[c(x,{value:"_blank"},{default:m(()=>[X("_blank")]),_:1}),c(x,{value:"_parent"},{default:m(()=>[X("_parent")]),_:1}),c(x,{value:"_self"},{default:m(()=>[X("_self")]),_:1}),c(x,{value:"_top"},{default:m(()=>[X("_top")]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):de("",!0),["datetime","date"].includes(y(l).render)?(_(),R(V,{key:4,label:"显示格式"},{default:m(()=>[c(j,{modelValue:y(l).timeFormat,"onUpdate:modelValue":d[13]||(d[13]=v=>y(l).timeFormat=v)},{default:m(()=>[(_(),F(Q,null,me(u,(v,S)=>c(x,{key:S,label:v.label,value:v.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})):de("",!0),y(l).render==="buttons"?(_(),F(Q,{key:5},[c(V,{label:"按钮设置"},{default:m(()=>[c(fn,{modelValue:y(l).buttons,"onUpdate:modelValue":d[14]||(d[14]=v=>y(l).buttons=v),position:"right"},null,8,["modelValue"])]),_:1}),c(V,{class:"flex-end"},{default:m(()=>[c(J,{type:"primary",onClick:d[15]||(d[15]=v=>q("buttons"))},{default:m(()=>[X("添加设置更多按钮")]),_:1})]),_:1})],64)):de("",!0),c(V,null,{default:m(()=>[y(l).render?(_(),R(J,{key:0,type:"primary",onClick:d[16]||(d[16]=v=>q("renderFormatter"))},{default:m(()=>[X("renderFormatter")]),_:1})):de("",!0),c(J,{type:"primary",onClick:d[17]||(d[17]=v=>q("columns"))},{default:m(()=>[X("设置表格列")]),_:1})]),_:1})],512),[[qt,Object.keys(y(l)).length]])]),_:1}),c(Ae,{label:"数据列表配置",name:"second"},{default:m(()=>{var v;return[(_(!0),F(Q,null,me(ge.value.filter(S=>!S.hide),(S,ne)=>(_(),R(V,{label:S.label,key:ne},{default:m(()=>[S.type==="select"?(_(),R(j,At({key:0,modelValue:S.value,"onUpdate:modelValue":z=>S.value=z,ref_for:!0},S,{options:"",onChange:z=>te(S)}),{default:m(()=>[(_(!0),F(Q,null,me(S.options,z=>(_(),R(x,{label:z.label||z.name,key:z.label||z.name,value:y(Pn)(z.value??z.id)},null,8,["label","value"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue","onChange"])):S.type==="switch"?(_(),R(ie,{key:1,modelValue:S.value,"onUpdate:modelValue":z=>S.value=z,onInput:z=>te(S,z)},null,8,["modelValue","onUpdate:modelValue","onInput"])):S.type==="operate"?(_(),R(fn,{key:2,modelValue:y(a).controlBtn,"onUpdate:modelValue":d[18]||(d[18]=z=>y(a).controlBtn=z)},null,8,["modelValue"])):(_(),R(U,{key:3,modelValue:S.value,"onUpdate:modelValue":z=>S.value=z,placeholder:S.placeholder,onInput:z=>te(S)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"]))]),_:2},1032,["label"]))),128)),(v=y(a).treeData)!=null&&v.show?(_(),F(Q,{key:0},[c(V,{label:"树标识名称"},{default:m(()=>[c(U,{modelValue:y(a).treeData.name,"onUpdate:modelValue":d[19]||(d[19]=S=>y(a).treeData.name=S),placeholder:"树标识名称"},null,8,["modelValue"])]),_:1}),c(V,{label:"树列表接口URL"},{default:m(()=>[c(U,{modelValue:y(a).treeData.requestUrl,"onUpdate:modelValue":d[20]||(d[20]=S=>y(a).treeData.requestUrl=S),placeholder:"树列表数据接口URL"},null,8,["modelValue"])]),_:1}),c(V,{class:"event-btn"},{default:m(()=>[c(J,{type:"primary",onClick:d[21]||(d[21]=S=>q("treeProp"))},{default:m(()=>[X("编辑侧栏树属性 ")]),_:1}),c(J,{type:"primary",onClick:d[22]||(d[22]=S=>q("treeBefore"))},{default:m(()=>[X("树before事件 ")]),_:1}),c(J,{type:"primary",onClick:d[23]||(d[23]=S=>q("treeAfter"))},{default:m(()=>[X("树after事件 ")]),_:1})]),_:1})],64)):de("",!0),c(V,{class:"event-btn"},{default:m(()=>[c(J,{type:"primary",onClick:d[24]||(d[24]=S=>q("tableConfig"))},{default:m(()=>[X("编辑表格属性 ")]),_:1})]),_:1}),ko,c(V,{label:"主键"},{default:m(()=>[c(U,{placeholder:"列表主键",modelValue:y(a).pk,"onUpdate:modelValue":d[25]||(d[25]=S=>y(a).pk=S)},null,8,["modelValue"])]),_:1}),c(V,{label:"列表数据请求URL"},{default:m(()=>[c(U,{placeholder:"一般不需要填写，使用默认值",modelValue:y(a).apiKey.list,"onUpdate:modelValue":d[26]||(d[26]=S=>y(a).apiKey.list=S)},null,8,["modelValue"])]),_:1}),c(V,{label:"删除列表数据URL"},{default:m(()=>[c(U,{placeholder:"一般不需要填写，使用默认值",modelValue:y(a).apiKey.del,"onUpdate:modelValue":d[27]||(d[27]=S=>y(a).apiKey.del=S)},null,8,["modelValue"])]),_:1}),c(V,{label:"编辑保存状态URL"},{default:m(()=>[c(U,{placeholder:"一般不需要填写，使用默认值",modelValue:y(a).apiKey.edit,"onUpdate:modelValue":d[28]||(d[28]=S=>y(a).apiKey.edit=S)},null,8,["modelValue"])]),_:1}),c(V,{label:"导出列表URL"},{default:m(()=>[c(U,{placeholder:"一般不需要填写，使用默认值",modelValue:y(a).apiKey.export,"onUpdate:modelValue":d[29]||(d[29]=S=>y(a).apiKey.export=S)},null,8,["modelValue"])]),_:1}),c(V,{class:"event-btn"},{default:m(()=>[c(J,{type:"primary",onClick:d[30]||(d[30]=S=>q("before"))},{default:m(()=>[X("before事件 ")]),_:1}),c(J,{type:"primary",onClick:d[31]||(d[31]=S=>q("after"))},{default:m(()=>[X("after事件 ")]),_:1})]),_:1})]}),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),To={class:"main-body"},Vo={class:"header"},xo={class:"field"},Oo={class:"table-field-list"},Io={class:"list"},Ao={class:"main-form main-table"},Po={key:1,class:"tip"},No={class:"control-btn"},Fo={key:0,class:"tip"},Mo={class:"control-other"},Lo={key:0,class:"tip"},Uo=["onClick"],Bo=["innerHTML"],Ro=L("i",{class:"icon-help"},null,-1),$o=["onClick"],Xo={key:4},Yo=L("div",{class:"table-tip"},[X(" 操作提示："),L("br"),X(" *从数据列表配置中选择 所属表单"),L("br"),X(" *从左上角 添加表格字段 选择预设字段"),L("br"),X(" *可拖动表头字段移动调整表头字段排列顺序"),L("br"),X(" *可通过顶部工具栏 生成脚本预览 查看或编辑添加自定义字段 ")],-1),jo=Ut({__name:"index",setup(o){Nn().changeBreadcrumb([{label:"设计管理"},{label:"列表页设计"}]);const t=Se(),n=Se(),a=Fn().query,l=Mn(),i=xt({searchData:{},loading:!1,attrObj:{},config:{},previewVisible:!1,tabsName:"second",formFieldList:[],dict:{},refreshTable:!0}),r=Se({tableProps:{},columns:[],config:{openType:"page",fixedBottomScroll:!0,columnsSetting:!0,expand:!0},apiKey:{},controlBtn:[]}),s=Se();Jt("tableData",r);const u=Se({});Jt("currentObj",u);const f=xt({visible:!1,title:"",direction:"ltr",content:"",codeType:"",type:""}),h=({type:T,value:b})=>{T==="formId"?Vt(b).then(w=>{i.formFieldList=w}):T==="openDrawer"&&re(b)},k=()=>{f.visible=!1,f.content="",f.codeType="",f.title="",f.type=""},P=Bt(()=>{var w;const T={label:"表单字段",options:i.formFieldList},b=[{label:"其他字段",options:[{label:"多选",type:"selection"},{label:"序号",type:"index",width:"70px"},{label:"操作"}]}];return(w=i.formFieldList)!=null&&w.length&&b.unshift(T),b}),O=T=>{r.value.columns.forEach((b,w)=>{b.prop===T.prop&&r.value.columns.splice(w,1)})},I=(T,b)=>{if(b){let w=!1;r.value.columns.forEach(g=>{(g.prop&&g.prop===T.prop||g.type&&g.type===T.type)&&(w=!0)}),w||r.value.columns.push(T)}else r.value.columns.forEach((w,g)=>{w.prop===T.prop&&r.value.columns.splice(g,1)})},le=T=>{switch(T){case"del":r.value=JSON.parse(s.value),i.selectField=[],u.value={};break;case"eye":i.previewVisible=!0;break;case"json":re("json");break;case"vue":t.value.openTable(r.value);break;case"save":q();break}},re=T=>{var j,V;const b="";let w,g="",d=!1,x="ltr";switch(T){case"json":w=r.value,x="rtl";break;case"tableConfig":g="el-table的相关属性",w=r.value.tableProps||{};break;case"before":case"after":w=(r.value.events||{})[T],w||(w=Ze(T),d=!0);break;case"treeProp":w=r.value.treeData||{},Object.keys(w).length===1&&(w={show:!0,treeProps:{},name:"唯一标识",method:"post"}),g="更多参数详见ak-list组件";break;case"treeBefore":w=(j=r.value.treeData)==null?void 0:j.before,g=bt.before,w||(w=Ze("before"),d=!0);break;case"treeAfter":w=(V=r.value.treeData)==null?void 0:V.after,g=bt.after,w||(w=Ze("after"),d=!0);break;case"buttons":w=u.value.buttons||[],g="可设置多个操作按钮，可使用内置key=edit/del快速设置按钮";break;case"controlBtn":w=r.value.controlBtn,g="操作按钮列表，可使用内置key=add/edit/del/export快速设置按钮";break;case"columns":w=u.value||[],g="支持el-table-column所有属性";break;case"renderFormatter":w=u.value.renderFormatter,w||(w=Ze("renderFormatter"),d=!0),g="渲染前对字段值的预处理方法，需返回新值";break}switch(b){case"json":w=$n(w);break;default:d||(w=en(w,!0))}f.visible=!0,f.direction=x,f.title=g||bt[T],f.content=w,f.codeType=b,f.type=T},K=T=>{const b=ut(T);switch(f.type){case"json":r.value=b;break;case"treeProp":r.value.treeData=b;break;case"buttons":u.value.buttons=b;break;case"controlBtn":r.value.controlBtn=b;break;case"before":case"after":r.value.events||(r.value.events={}),r.value.events[f.type]=b;break;case"tableConfig":r.value.tableProps=b;break;case"treeBefore":r.value.treeData.before=b;break;case"treeAfter":r.value.treeData.after=b;break;case"columns":u.value=b;break;case"renderFormatter":u.value.renderFormatter=b;break}k()},Z=Se(),ee=T=>{u.value=T,i.tabsName="first",Z.value.rowChange()},ge=()=>{if(!a.id){Qe.error("请先保存设计的列表");return}l.push({path:"/design/form",query:{id:a.id,type:"search",redirect:`/design/list?id=${a.id}`}})},te=()=>{const T=n.value.querySelector(".el-table__header-wrapper tr");D.create(T,{animation:180,delay:0,onEnd:b=>{const w=r.value.columns[b.oldIndex];r.value.columns.splice(b.oldIndex,1),r.value.columns.splice(b.newIndex,0,w),i.refreshTable=!1,vt(()=>{i.refreshTable=!0,vt(()=>{te()})})}})},q=()=>{const{formId:T,name:b}=r.value.config,{list:w,del:g}=r.value.apiKey;if(!T&&(!w||!g))return Qe.error("请选择所属表单或配置接口url");const d={listData:en(r.value),data:"{}",source:T,name:b||"未命名列表",type:2};let x="designSave";a.id?(Object.assign(d,{id:a.id}),x="designEdit"):d.status=1,i.loading=!0,mt(x,d).then(()=>{Qe({message:"保存成功！",type:"success"}),l.push({path:"/design/list/list"}),i.loading=!1}).catch(j=>{Qe.error(j.message||"保存异常"),i.loading=!1})};return mn(()=>{s.value=JSON.stringify(r.value),vt(()=>{te()}),a.id&&bo(a.id).then(({tableData:T,searchData:b,dict:w,source:g})=>{r.value=T,i.searchData=b,T.config.formId&&Vt(g).then(d=>{i.formFieldList=d})}),a.form&&(r.value.config.formId=a.form,Vt(a.form).then(T=>{r.value.columns=T}))}),(T,b)=>{var z,Yt,jt,Ht,zt,Wt,Gt;const w=B("el-button"),g=B("el-checkbox"),d=B("el-popover"),x=B("ak-form"),j=B("el-divider"),V=B("el-button-group"),ie=B("el-tooltip"),U=B("el-switch"),J=B("el-image"),Ae=B("el-tag"),qe=B("el-table-column"),Pe=B("el-table"),v=B("ak-list"),S=B("el-dialog"),ne=Ln("loading");return _(),F("div",null,[Ot((_(),F("div",{class:"design-container design-table",ref_key:"container",ref:n},[L("div",To,[L("div",Vo,[L("div",xo,[c(d,{placement:"bottom",width:420,trigger:"hover"},{reference:m(()=>[c(w,{type:"primary",plain:"",size:"small"},{default:m(()=>[X("添加表格列字段 ")]),_:1})]),default:m(()=>[L("div",Oo,[(_(!0),F(Q,null,me(P.value,(M,Ve)=>(_(),F("div",{class:"item",key:Ve},[L("h3",null,It(M.label),1),L("div",Io,[(_(!0),F(Q,null,me(M.options,Je=>(_(),R(g,{label:Je.label,key:Je.prop,onChange:On=>I(Je,On)},null,8,["label","onChange"]))),128))])]))),128))])]),_:1})]),c(Xn,{onClick:le})]),L("div",Ao,[L("div",{class:"search-box",onClick:ge,title:"条件查询搜索区域，单击可编辑"},[(Yt=(z=i.searchData)==null?void 0:z.list)!=null&&Yt.length?(_(),R(x,{key:0,"is-search":"",data:i.searchData,"request-url":""},null,8,["data"])):(_(),F("div",Po,"条件查询搜索区域，单击可编辑"))]),c(j,{"border-style":"dashed"}),L("div",No,[L("div",{class:"btn-group",onClick:b[0]||(b[0]=M=>re("controlBtn")),title:"单击可编辑"},[((Ht=(jt=r.value)==null?void 0:jt.controlBtn)==null?void 0:Ht.length)===0||!((zt=r.value)!=null&&zt.controlBtn)?(_(),F("div",Fo," 操作按钮区域，点击可添加如新增、删除 ")):(_(),R(Zt,{key:1,position:"top",buttons:y(Qt)((Wt=r.value)==null?void 0:Wt.controlBtn),row:{}},null,8,["buttons"]))]),L("div",Mo,[c(V,null,{default:m(()=>{var M,Ve;return[(M=r.value.config)!=null&&M.expand?(_(),R(w,{key:0,circle:"",icon:"Search",title:"展开/收起筛选"})):de("",!0),((Ve=r.value.config)==null?void 0:Ve.columnsSetting)!==!1?(_(),R(w,{key:1,circle:"",icon:"SetUp",title:"设置列显示隐藏"})):de("",!0)]}),_:1})])]),(Gt=r.value.columns)!=null&&Gt.length?de("",!0):(_(),F("div",Lo," 表格列设置区域，可从左上角 添加表格列字段 选择已有列或直接从上方工具栏 生成脚本预览 编辑 ")),i.refreshTable?(_(),R(Pe,At({key:1,data:[{}]},r.value.tableProps||{},{ref:"tableEl"}),{default:m(()=>[(_(!0),F(Q,null,me(r.value.columns,M=>(_(),R(qe,At({key:M.prop||M.label,ref_for:!0},M),Un({header:m(Ve=>[X(It(Ve.column.label)+" ",1),L("i",{class:"icon-close",onClick:Je=>O(M)},null,8,Uo),M.help?(_(),R(ie,{key:0,placement:"top"},{content:m(()=>[L("span",{innerHTML:M.help},null,8,Bo)]),default:m(()=>[Ro]),_:2},1024)):de("",!0)]),_:2},[M.type!=="index"?{name:"default",fn:m(()=>[M.type==="selection"?(_(),R(g,{key:0})):(_(),F("div",{key:1,onClick:Bn(Ve=>ee(M),["stop"])},[M.render==="switch"?(_(),R(U,{key:0})):M.render==="image"?(_(),R(J,{key:1,style:Rn({width:M.config.width,height:M.config.height})},null,8,["style"])):M.render==="tag"?(_(),R(Ae,{key:2},{default:m(()=>[X("设置")]),_:1})):M.render==="buttons"?(_(),R(Zt,{key:3,class:"btn-group",position:"demo",buttons:y(Qt)(M.buttons,"right"),row:{}},null,8,["buttons"])):(_(),F("span",Xo,"设置"))],8,$o))]),key:"0"}:void 0]),1040))),128))]),_:1},16)):de("",!0),Yo])]),c(Co,{onChangeEvent:h,tabsName:i.tabsName,"onUpdate:tabsName":b[1]||(b[1]=M=>i.tabsName=M),ref_key:"controlAttrEl",ref:Z},null,8,["tabsName"])])),[[ne,i.loading]]),c(jn,{modelValue:f.visible,"onUpdate:modelValue":b[2]||(b[2]=M=>f.visible=M),title:f.title,direction:f.direction,content:f.content,"code-type":f.codeType,onBeforeClose:k,onConfirm:K},null,8,["modelValue","title","direction","content","code-type"]),c(Yn,{ref_key:"vueFileEl",ref:t},null,512),c(S,{modelValue:i.previewVisible,"onUpdate:modelValue":b[3]||(b[3]=M=>i.previewVisible=M),title:"预览",fullscreen:!0},{default:m(()=>[i.previewVisible?(_(),R(v,{key:0,data:r.value,"search-data":i.searchData},null,8,["data","search-data"])):de("",!0)]),_:1},8,["modelValue"])])}}});typeof tn=="function"&&tn(jo);export{jo as default};
