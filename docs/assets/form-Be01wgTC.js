import{d as h,k,A as D,u as b,l as B,L as C,h as c,p as E,r as I,B as x,s as F,o as T,c as j,i as q,P as u,x as O,D as d,E as f}from"./index-CDYjrzCG.js";const R={style:{"min-height":"300px"}},L=h({__name:"form",setup(M){const m=k(),l=D(),g=b(),i=B(),a=C({formData:{list:[],form:{},config:{}},dict:{},loading:!0}),n=c(()=>l.query.id),o=c(()=>l.query.form),p=c(()=>n.value?"edit":"add"),v=()=>{if(!o.value)return u.error("非法操作."),!1;const e={id:o.value};O("designById",e).then(r=>{const t=r.data;if(t&&Object.keys(t).length){const s=d(t.data);s&&Object.keys(s).length&&(a.formData=d(t.data)),n.value&&i.value.getData({formId:o.value,id:n.value}),m.changeBreadcrumb([{label:"内容管理"},{label:t.name}])}a.loading=!1}).catch(r=>{a.loading=!1,u.error(r.message||"非法操作..")})},_=e=>(e.formId=o.value,e),y=e=>{e==="success"&&g.go(-1)};return E(()=>{v()}),(e,r)=>{const t=I("ak-form"),s=x("loading");return F((T(),j("div",R,[q(t,{ref_key:"formEl",ref:i,data:a.formData,operateType:p.value,"api-key":{get:"getFormContent",add:"saveFormContent",edit:"editFormContent"},before:_,params:{formId:o.value.value},after:y},null,8,["data","operateType","params"])])),[[s,a.loading]])}}});typeof f=="function"&&f(L);export{L as default};
