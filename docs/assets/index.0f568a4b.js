import{_ as Ue,a as Re}from"./vueFile.vue_vue_type_script_setup_true_lang.337f403d.js";import{e as ve,A as fe,o as s,c as f,i as k,F as N,f as H,d as b,t as se,C as Ce,p as B,r as ie,D as Pe,l as ae,a as w,m as c,g as F,w as a,b as t,G as Le,H as Ie,I as xe,s as $e,J as ke,L as Te,M as be,E as ee,k as he,u as Oe,z as qe,N as ze,x as je,n as He,_ as Ae,y as Z,O as Ee,P as le,Q as Fe,q as Ke,R as Me,S as we,U as Ve}from"./index.f2a8992f.js";const ge=[{label:"\u6807\u7B7E1",value:"value1"},{label:"\u6807\u7B7E2",value:"value2"},{label:"\u6807\u7B7E3",value:"value3"}],me={type:"fixed",source:0,request:"get",sourceFun:""},Se=[{title:"\u57FA\u7840\u5B57\u6BB5",children:[{type:"input",label:"\u5355\u884C\u6587\u672C",icon:"input",control:{modelValue:""},config:{}},{type:"textarea",label:"\u591A\u884C\u6587\u672C",icon:"textarea",control:{modelValue:""},config:{}},{type:"radio",label:"\u5355\u9009\u6846\u7EC4",icon:"radio",control:{modelValue:""},options:ge,config:me},{type:"checkbox",label:"\u591A\u9009\u6846\u7EC4",icon:"checkbox",control:{modelValue:[]},options:ge,config:me},{type:"select",label:"\u4E0B\u62C9\u9009\u62E9\u6846",icon:"select",control:{modelValue:"",appendToBody:!0},options:ge,config:me},{type:"datePicker",label:"\u65E5\u671F\u9009\u62E9\u5668",icon:"date",control:{modelValue:"",type:"date"},config:{}},{type:"timePicker",label:"\u65F6\u95F4\u9009\u62E9\u5668",icon:"time",control:{modelValue:""},config:{}},{type:"colorPicker",label:"\u53D6\u8272\u5668",icon:"color",control:{modelValue:""},config:{}},{type:"switch",label:"\u5F00\u5173",icon:"switch",control:{modelValue:!1},config:{}},{type:"inputNumber",label:"\u8BA1\u6570\u5668",icon:"number",control:{modelValue:0},config:{}},{type:"cascader",label:"\u7EA7\u8054\u9009\u62E9\u5668",icon:"cascader",control:{modelValue:[]},options:[],config:me},{type:"rate",label:"\u8BC4\u5206",icon:"rate",control:{modelValue:0},config:{}},{type:"slider",label:"\u6ED1\u5757",icon:"slider",control:{modelValue:0},config:{}},{type:"treeSelect",label:"\u6811\u5F62\u63A7\u4EF6",icon:"tree2",control:{modelValue:"",data:[],renderAfterExpand:!1},config:{}},{type:"txt",label:"\u6587\u5B57",icon:"text",control:{modelValue:""},config:{}},{type:"title",label:"\u6807\u9898",icon:"title",control:{modelValue:"\u6807\u9898"},config:{}}]},{title:"\u9AD8\u7EA7\u5B57\u6BB5",children:[{type:"table",label:"\u5B50\u8868",icon:"table",list:[],tableData:[],control:{border:!0},config:{}},{type:"component",label:"\u81EA\u5B9A\u4E49\u7EC4\u4EF6",icon:"component",control:{modelValue:""},config:{}},{type:"upload",label:"\u56FE\u7247/\u6587\u4EF6",icon:"image",control:{modelValue:[]},config:{}},{type:"tinymce",label:"tinymce\u5BCC\u6587\u672C",icon:"tinymce",control:{modelValue:""},config:{}}]},{title:"\u5E03\u5C40\u5B57\u6BB5",children:[{type:"grid",label:"\u683C\u6805\u5E03\u5C40",icon:"grid",columns:[{attr:{span:12},list:[]},{attr:{span:12},list:[]}],control:{},config:{}},{type:"tabs",label:"\u6807\u7B7E\u9875",icon:"tabs",columns:[{label:"Tab1",list:[]}],control:{},config:{}},{type:"card",label:"\u5361\u7247\u5E03\u5C40",icon:"card",list:[],control:{},config:{},item:{}},{type:"flex",label:"\u5F39\u6027\u5E03\u5C40",icon:"flex",list:[],tableData:[],control:{},config:{}},{type:"divider",label:"\u5206\u5272\u7EBF",icon:"divider",control:{},config:{}},{type:"div",label:"div\u5BB9\u5668",icon:"div",control:{},config:{},list:[]}]}],Je=""+new URL("test.c644ce60.png",import.meta.url).href,We=Je,Qe="\u6F14\u793Atest",Ge={list:[{type:"input",control:{modelValue:""},config:{},name:"input1663920706618",item:{label:"\u5355\u884C\u6587\u672C",showLabel:!1}}],form:{labelWidth:"",class:"",size:"default",name:"form1663920704871"},config:{title:"form1663920704871",formId:""}},Xe=Object.freeze(Object.defineProperty({__proto__:null,imgPath:We,title:Qe,formData:Ge},Symbol.toStringTag,{value:"Module"})),Ye=""+new URL("test2.ab129ef2.png",import.meta.url).href,Ze=Ye,eu="\u6F14\u793Atest2",uu={list:[{type:"input",control:{modelValue:""},config:{},name:"input",item:{label:"\u5355\u884C\u6587\u672C",showLabel:!1}},{type:"radio",control:{modelValue:""},options:[{label:"\u6807\u7B7E1",value:"value1"},{label:"\u6807\u7B7E2",value:"value2"},{label:"\u6807\u7B7E3",value:"value3"}],config:{type:"fixed",source:0,request:"get",sourceFun:""},name:"radio1667180102980",item:{label:"\u5355\u9009\u6846\u7EC4",showLabel:!1}},{type:"checkbox",control:{modelValue:[]},options:[{label:"\u6807\u7B7E1",value:"value1"},{label:"\u6807\u7B7E2",value:"value2"},{label:"\u6807\u7B7E3",value:"value3"}],config:{type:"fixed",source:0,request:"get",sourceFun:""},name:"checkbox1667180107698",item:{label:"\u591A\u9009\u6846\u7EC4",showLabel:!1}},{type:"select",control:{modelValue:"",appendToBody:!0},options:[{label:"\u6807\u7B7E1",value:"value1"},{label:"\u6807\u7B7E2",value:"value2"},{label:"\u6807\u7B7E3",value:"value3"}],config:{type:"fixed",source:0,request:"get",sourceFun:""},name:"select1667180110029",item:{label:"\u4E0B\u62C9\u9009\u62E9\u6846",showLabel:!1}},{type:"datePicker",control:{modelValue:"",type:"date"},config:{},name:"datePicker1667180115571",item:{label:"\u65E5\u671F\u9009\u62E9\u5668",showLabel:!1}},{type:"switch",control:{modelValue:!1},config:{},name:"switch1667180126483",item:{label:"\u5F00\u5173",showLabel:!1}}],form:{labelWidth:"",class:"",size:"default",name:"form1663920704871"},config:{title:"form1663920704871",formId:""}},tu=Object.freeze(Object.defineProperty({__proto__:null,imgPath:Ze,title:eu,formData:uu},Symbol.toStringTag,{value:"Module"})),lu={key:0,class:"no-date"},au={key:1,class:"list"},ou=["onClick"],nu=["src"],su=ve({__name:"template",emits:["click"],setup(ue,{expose:z,emit:V}){const E=fe({visible:!1,list:[]}),S=()=>{E.visible=!0,n()},n=()=>{const e=Object.assign({"../template/test.ts":Xe,"../template/test2.ts":tu});console.log(e),E.list=[],Object.keys(e).forEach(L=>{const R=e[L];E.list.push({imgPath:R.imgPath,title:R.title,formData:R.formData})})},h=e=>{V("click",e.formData),E.visible=!1};return z({open:S}),(e,L)=>E.visible?(s(),f("div",{key:0,class:Ce(["use-template",{active:E.visible}])},[k("span",{class:"close icon-close",onClick:L[0]||(L[0]=R=>E.visible=!1)}),E.list.length===0?(s(),f("div",lu,"\u6682\u65E0\u53EF\u7528\u6A21\u677F")):(s(),f("div",au,[(s(!0),f(N,null,H(E.list,(R,J)=>(s(),f("div",{class:"item",key:J,onClick:v=>h(R)},[k("img",{src:R.imgPath},null,8,nu),b(se(R.title),1)],8,ou))),128))]))],2)):B("",!0)}}),iu={class:"components-list"},ru={key:0},cu=k("div",{class:"title"},"\u5DF2\u6709\u8868\u5355\u5B57\u6BB5",-1),du={class:"content"},pu={class:"title"},mu=["title"],fu=ve({__name:"dragControl",props:{formData:{default:()=>({list:[],form:{}})},searchData:{default:()=>[]},searchDesign:{type:Boolean,default:!1}},emits:["update:searchData","click"],setup(ue,{emit:z}){const V=ue,E=ie(V.searchData);Pe(()=>V.searchData,y=>{E.value=y});const S=ae(()=>V.searchDesign?Se.slice(0,1):Se),n=y=>JSON.parse(JSON.stringify(y)),h=(y,U)=>{if(U){const g=JSON.parse(JSON.stringify(y));delete g.rules,delete g.customRules,E.value.push(g)}else V.searchData.forEach((g,K)=>{g.name===y.name&&E.value.splice(K,1)});z("update:searchData",E.value)},e=y=>{let U=!1;return V.searchData.forEach(g=>{g.name===y&&(U=!0)}),U},L=ae(()=>{const y=[];return J(V.formData.list,y),y}),R=["txt","title","table","component","upload"],J=(y,U)=>{y&&y.forEach(g=>{g.type==="grid"||g.type==="tabs"?g.columns.forEach(K=>{J(K.list,U)}):g.type==="card"?J(g.list,U):R.indexOf(g.type)===-1&&U.push(g)})},v=ie(),W=()=>{v.value.open()},oe=y=>{z("click",y)};return(y,U)=>{var K;const g=w("el-checkbox");return s(),f("div",iu,[ue.searchDesign&&((K=c(L))==null?void 0:K.length)?(s(),f("div",ru,[cu,k("div",du,[(s(!0),f(N,null,H(c(L),I=>(s(),F(g,{key:I.name,checked:e(I.name),onChange:p=>h(I,p)},{default:a(()=>[b(se(I.item.label),1)]),_:2},1032,["checked","onChange"]))),128))])])):B("",!0),(s(!0),f(N,null,H(c(S),(I,p)=>(s(),f("div",{key:p},[k("div",pu,[b(se(I.title)+" ",1),p===0&&!ue.searchDesign?(s(),f("div",{key:0,class:"template",onClick:W},"\u4F7F\u7528\u6A21\u677F")):B("",!0)]),t(c(Le),{itemKey:"key123",tag:"ul",modelValue:I.children,"onUpdate:modelValue":r=>I.children=r,group:{name:"form",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:n},{item:a(({element:r})=>[k("li",{class:Ce([r.type])},[k("i",{class:Ce(`icon-${r.icon}`)},null,2),k("span",{title:r.label},se(r.label),9,mu)],2)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128)),t(su,{ref_key:"useTemplateEl",ref:v,onClick:oe},null,512)])}}}),hu={class:"sidebar-tools"},vu=k("h3",null,"\u901A\u7528\u5C5E\u6027",-1),bu=b("\u9690\u85CF(\u9ED8\u8BA4)"),Eu=b("\u7981\u7528"),Fu=k("h3",null,"\u6807\u7B7E\u914D\u7F6E\u9879",-1),gu=["onClick"],Cu=b("\u589E\u52A0\u6807\u7B7E"),Du={key:2},yu=k("h3",null,"\u9009\u9879\u914D\u7F6E",-1),_u={key:0},Bu=["onClick"],ku=b("\u52A8\u6001\u9009\u9879"),Au=b("\u6570\u636E\u6E90"),wu=b("\u65B9\u6CD5\u51FD\u6570 "),Vu=b("\u63A5\u53E3\u5B57\u5178 "),Su=b("\u8BF7\u6C42\u9644\u52A0\u53C2\u6570 "),xu=b("\u8BF7\u6C42\u7ED3\u679C\u5904\u7406\u4E8B\u4EF6 "),$u=k("h3",null,"\u6821\u9A8C\u8BBE\u7F6E",-1),Nu={key:0},Uu=["onClick"],Ru=b("\u5FEB\u901F\u6DFB\u52A0"),Pu=b("\u7F16\u5199\u6821\u9A8C\u89C4\u5219 "),Lu=b("\u5FC5\u586B "),Iu={key:4},Tu=k("h3",null,"\u5176\u4ED6\u5C5E\u6027",-1),Ou=b("\u7F16\u8F91\u5C5E\u6027 "),qu=b("\u6DFB\u52A0\u65F6\u83B7\u53D6\u8BF7\u6C42 "),zu=b("\u7F16\u8F91\u8868\u5355\u6837\u5F0F "),ju=b("\u8BBE\u7F6E\u6570\u636E\u5B57\u5178 "),Hu=k("h3",null,"\u63A5\u53E3\u6570\u636E\u4E8B\u4EF6",-1),Ku=b("beforeRequest "),Mu=b("afterResponse "),Ju=b("beforeSubmit "),Wu=b("afterSubmit "),Qu=ve({__name:"formControlAttr",props:{formData:null,formConfig:{default:()=>({})}},emits:["openDialog","update:formData","update:formConfig"],setup(ue,{emit:z}){const V=ue,{formConfig:E,formData:S}=Ie(V),n=xe(),h=$e(),e=ae(()=>n.controlAttr),L=ie([]),R=ae(()=>{const o=v.isSearch;return[{label:"\u8868\u5355\u540D\u79F0",value:E.value.title,key:"title",hide:o,path:"config"},{label:"\u6570\u636E\u6E90",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90",value:be(E.value.formId),type:"select",options:L.value,key:"formId",hide:o||!L.value.length,path:"config"},{label:"\u8868\u5355\u6807\u8BC6",value:S.value.name,key:"name"},{label:"\u8868\u5355\u6807\u7B7E\u5BBD\u5EA6",value:S.value.labelWidth,placeholder:"\u8868\u5355label\u5BBD\uFF0C\u5982180px",key:"labelWidth"},{label:"\u8868\u5355\u6837\u5F0F\u540D\u79F0",value:S.value.class,placeholder:"\u989D\u5916\u6DFB\u52A0\u7684\u8868\u5355class\u7C7B\u540D",key:"class"},{label:"\u5B57\u6BB5\u540D\u540E\u6DFB\u52A0\u5192\u53F7",value:S.value.showColon,key:"showColon",type:"switch"},{label:"\u7EC4\u4EF6\u5C3A\u5BF8",value:S.value.size,type:"select",key:"size",options:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},{label:"\u63D0\u4EA4\u6309\u94AE",value:E.value.confirm,placeholder:o?"\u67E5\u8BE2\u6309\u94AE\u6587\u6848":"\u63D0\u4EA4\u6309\u94AE\u6587\u6848\uFF0C\u7A7A\u4E0D\u663E\u793A",key:"confirm",path:"config"},{label:"\u53D6\u6D88\u8FD4\u56DE\u6309\u94AE",value:E.value.cancel,placeholder:o?"\u53D6\u6D88\u67E5\u8BE2\u6587\u6848":"\u53D6\u6D88\u8FD4\u56DE\u6309\u94AE\u6587\u6848\uFF0C\u7A7A\u4E0D\u663E\u793A",path:"config",key:"cancel"},{label:"\u7B5B\u9009\u6761\u4EF6\u5C55\u5F00/\u6536\u8D77",value:E.value.expand,type:"switch",path:"config",key:"expand",hide:!o}]}),J=ae(()=>{if(Object.keys(e.value).length){const{control:o={},type:l,name:d,config:m={},item:A={},attr:C={}}=e.value;let D=!1;if(l==="table"){const $=e.value&&e.value.list;$&&$.length>0&&(D=$[0].type==="index")}return[{label:"\u81EA\u5B9A\u4E49Class",value:m.className,placeholder:"\u6837\u5F0F\u7C7B\u540D",path:"config.className"},{label:"\u5B57\u6BB5\u6807\u8BC6",value:d,type:Object.keys(v.dataSourceList).length>0?"select":"text",placeholder:"\u5B57\u6BB5\u552F\u4E00\u6807\u8BC6\uFF0C\u5BF9\u5E94\u6570\u636E\u5E93",dict:v.dataSourceList,path:"name",vHide:["grid","tabs","card","title","gridChild","tableColumn","divider","txt","div"],eventName:"filedNameKey"},{label:"\u5360\u4F4D\u5185\u5BB9",value:o.placeholder,placeholder:"placeholder",path:"control.placeholder",vShow:["password","input","textarea","select","date","number","datePicker","tinymce","timePicker","treeSelect"]},{label:"label\u503C",value:A.label,path:"item.label",vHide:["table","grid","tabs","title","gridChild","div","inputSlot","flex"]},{label:"\u9690\u85CFlabel",value:A.showLabel,path:"item.showLabel",type:"switch",vHide:["table","grid","tabs","title","gridChild","divider","card","div","inputSlot","flex"]},{label:"\u5E2E\u52A9\u4FE1\u606F",value:m.help,path:"config.help",vHide:["table","grid","tabs","gridChild","divider","div","inputSlot","flex"]},{label:"\u8868\u5355\u6805\u683C",value:m.span,placeholder:"\u8868\u5355\u533A\u57DF\u6805\u683C\u5BBD",path:"config.span",vHide:["table","grid","gridChild","divider"],isNum:!0},{label:"\u6587\u672C\u503C",value:o.modelValue,placeholder:"\u652F\u6301html",path:"control.modelValue",vShow:["txt"],inputStyle:"textarea"},{label:"\u8BBE\u4E3A\u5BC6\u7801",value:l,type:"select",dict:{\u6587\u672C:"input",\u5BC6\u7801:"password"},path:"type",vShow:["input","password"],vIf:v.isSearch},{label:"\u6587\u672C\u57DF\u9AD8\u5EA6",value:o.rows,placeholder:"\u8F93\u5165\u6846\u884C\u6570",path:"control.rows",vShow:["textarea"],isNum:!0},{label:"\u524D\u7F00",value:m.prepend,placeholder:"\u6587\u672C\u524D\u7F00",path:"config.prepend",vShow:["input","password"]},{label:"\u540E\u7F00",value:m.append,placeholder:"\u6587\u672C\u540E\u7F00",path:"config.append",vShow:["input","password"]},{label:"\u72B6\u6001\u6253\u5F00\u65F6\u7684\u503C",value:o.activeValue,placeholder:"\u72B6\u6001\u6253\u5F00\u65F6\u7684\u503C",path:"control.activeValue",vShow:["switch"],isNum:!0},{label:"\u72B6\u6001\u5173\u95ED\u65F6\u7684\u503C",value:o.inactiveValue,placeholder:"\u72B6\u6001\u5173\u95ED\u65F6\u7684\u503C",path:"control.inactiveValue",vShow:["switch"],isNum:!0},{label:"\u589E\u52A0\u6309\u94AE\u6587\u6848",value:m.add,path:"config.add",type:"text",vShow:["flex","table"]},{label:"\u5220\u9664\u6309\u94AE\u6587\u6848",value:m.delete,path:"config.delete",type:"text",vShow:["flex","table"]},{label:"\u662F\u5426\u591A\u9009",value:o.multiple,path:"control.multiple",type:"switch",vShow:["select","treeSelect"],eventName:"selectMultiple"},{label:"\u662F\u5426\u7981\u7528",value:o.disabled,path:"control.disabled",type:"switch",vShow:["input","password","textarea","radio","checkbox","select","date","switch","number","cascader","upload","rate","tinymce","treeSelect"],vIf:v.isSearch},{label:"\u662F\u5426\u7981\u7528\u7F16\u8F91",value:m.editDisabled,path:"config.editDisabled",type:"switch",vShow:["input","password","textarea","radio","checkbox","select","date","switch","number","cascader","upload","treeSelect"],vIf:v.isSearch},{label:"\u6DFB\u52A0\u9875\u9690\u85CF",value:m.disabledAdd,path:"config.disabledAdd",type:"switch",vIf:v.isSearch,vHide:["inputSlot"]},{label:"\u7F16\u8F91\u9875\u9690\u85CF",value:m.disabledEdit,path:"config.disabledEdit",type:"switch",vIf:v.isSearch,vHide:["inputSlot"]},{label:"\u8BE6\u60C5\u9875\u9690\u85CF",value:m.disabledDetail,path:"config.disabledDetail",type:"switch",vIf:v.isSearch,vHide:["inputSlot"]},{label:"\u8BBE\u4E3AInput\u8F93\u5165\u6846\u7684\u524D/\u540E\u7F00",value:l==="inputSlot",path:"",type:"switch",vShow:["select","inputSlot"],eventName:"setInputSlot"},{label:"\u6807\u9898",value:o.modelValue,path:"control.modelValue",vShow:["title"]},{label:"\u5360\u636E\u7684\u5217\u6570span",value:C.span,path:"attr.span",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5DE6\u4FA7\u7684\u95F4\u9694\u683C\u6570offset",value:C.offset,path:"attr.offset",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5411\u53F3\u79FB\u52A8\u683C\u6570push",value:C.push,path:"attr.push",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5411\u5DE6\u79FB\u52A8\u683C\u6570pull",value:C.pull,path:"attr.pull",vShow:["gridChild"],eventName:"formatNumber",isNum:!0},{label:"\u5E8F\u53F7\u5217",value:D,type:"switch",vShow:["table"],eventName:"tableColumn1"},{label:"\u7EC4\u4EF6\u540D",value:m.template,placeholder:"\u5168\u5C40\u6CE8\u518C\u7684\u7EC4\u4EF6\u540D\u79F0",path:"config.componentName",vShow:["component"]},{label:"\u4E0A\u4F20\u5730\u5740",value:o.action,placeholder:"\u56FE\u7247/\u6587\u4EF6\u4E0A\u4F20\u5730\u5740,\u53EF\u4E0D\u586B\u6709\u9ED8\u8BA4\u503C",path:"control.action",vShow:["upload"]},{label:"\u6587\u4EF6\u5B57\u6BB5\u540D",value:o.name,placeholder:"\u4E0A\u4F20\u7684\u6587\u4EF6\u5B57\u6BB5\u540D,\u9ED8\u8BA4file",path:"control.name",vShow:["upload"]},{label:"\u5217\u8868\u7C7B\u578B",value:o.listType,type:"select",dict:{text:"text",picture:"picture","picture-card":"picture-card"},path:"control.listType",vShow:["upload"]},{label:"\u63D0\u793A\u6587\u5B57",value:m.tip,placeholder:"\u63D0\u793A\u8BF4\u660E\u6587\u5B57",path:"config.tip",vShow:["upload"]},{label:"\u6309\u94AE\u6587\u672C",value:m.btnText,placeholder:"\u4E0A\u4F20\u6309\u94AE\u6587\u672C",path:"config.btnText",vShow:["upload"]},{label:"direction",type:"select",dict:{horizontal:"horizontal",vertical:"vertical"},value:o.direction,path:"control.direction",vShow:["divider"]},{label:"border-style",value:o.borderStyle,path:"control.borderStyle",vShow:["divider"]},{label:"content-position",type:"select",dict:{left:"left",right:"right",center:"center"},value:o.contentPosition,path:"control.contentPosition",vShow:["divider"]},{label:"\u6700\u5C0F\u503C",value:o.min,path:"control.min",vShow:["slider"],eventName:"formatNumber",isNum:!0},{label:"\u6700\u5927\u503C",value:o.max,path:"control.max",vShow:["rate","slider"],eventName:"formatNumber",isNum:!0},{label:"\u6B65\u957F",value:o.step,path:"control.step",vShow:["slider"],eventName:"formatNumber",isNum:!0},{label:"type",value:o.type,path:"control.type",vShow:["datePicker"],type:"select",placeholder:"\u663E\u793A\u7C7B\u578B",dict:{year:"year",month:"month",date:"date",datetime:"datetime",week:"week",datetimerange:"datetimerange",daterange:"daterange",monthrange:"monthrange"}},{label:"format",value:o.format,path:"control.format",vShow:["datePicker","timePicker"],placeholder:"\u663E\u793A\u5728\u8F93\u5165\u6846\u4E2D\u7684\u683C\u5F0F"},{label:"color-format",value:o.colorFormat,path:"control.colorFormat",type:"select",placeholder:"\u5199\u5165 v-model \u7684\u989C\u8272\u7684\u683C\u5F0F",dict:{hsl:"hsl",hsv:"hsv",hex:"hex",rgb:"rgb"},vShow:["colorPicker"]},{label:"\u6587\u672C\u9AD8\u5EA6",value:o.height,path:"control.height",placeholder:"\u6587\u672C\u9AD8\u5EA6(\u9884\u89C8\u67E5\u770B\u6548\u679C)",vShow:["tinymce"]},{label:"\u6587\u672C\u5BBD\u5EA6",value:o.width,path:"control.width",placeholder:"\u6587\u672C\u5BBD\u5EA6(\u9884\u89C8\u67E5\u770B\u6548\u679C)",vShow:["tinymce"]},{label:"\u56FE\u7247\u4E0A\u4F20\u5730\u5740",value:o.imgUrl,path:"control.imgUrl",placeholder:"\u56FE\u7247\u4E0A\u4F20\u5730\u5740",vShow:["tinymce"]},{label:"\u9644\u4EF6\u4E0A\u4F20\u5730\u5740",value:o.blobUrl,path:"control.blobUrl",placeholder:"\u9644\u4EF6\u4E0A\u4F20\u5730\u5740",vShow:["tinymce"]},{label:"\u663E\u793A\u6A21\u5F0F",value:m.style,path:"config.style",placeholder:"\u663E\u793A\u98CE\u683C(\u9884\u89C8\u67E5\u770B\u6548\u679C)",type:"select",dict:{default:"default",simple:"simple"},vShow:["tinymce"]}].filter($=>{let M=!0;return $.vShow&&(M=$.vShow.includes(l)),$.vHide&&(M=!$.vHide.includes(l)),$.vIf&&(M=!1),M})}else return[]}),v=fe({dataSourceList:{},customRulesList:[...ke,{type:"rules",label:"\u81EA\u5B9A\u4E49\u6B63\u5219"},{type:"methods",label:"\u81EA\u5B9A\u4E49\u65B9\u6CD5"}],isSearch:h.query.type==="search",tooltip:{css:"\u5F53\u524D\u8868\u5355\u5E94\u7528\u9875\u7684\u6837\u5F0F\uFF0C\u7C7B\u4F3C\u4E8E.vue\u6587\u4EF6\u4E2D\u7684<style scoped>\u4E2D\u7684\u6837\u5F0F</style>",dict:"\u6570\u636E\u5B57\u5178\uFF0C\u7528\u4E8E\u5339\u914D\u591A\u9009\u7EC4\u3001\u4E0B\u62C9\u9009\u62E9\u7B49\uFF0C\u63D0\u4F9B\u52A8\u6001\u83B7\u53D6Options\u63A5\u53E3\u5B57\u5178\u6570\u636E\uFF0C\u4E00\u822C\u4E0D\u8BBE\u7F6E\uFF0C\u4ECE\u63A5\u53E3dict\u83B7\u53D6\u3002\u683C\u5F0F\uFF1A{0:'\u7537',1:'\u5973'}",rules:"\u53EF\u53C2\u8003UI\u7EC4\u4EF6\u8868\u5355\u6821\u9A8C\uFF0C<a href='https://element-plus.gitee.io/zh-CN/component/form.html#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C' target='_blank' style='color:red'>\u8BE6\u60C5\u70B9\u51FB</a>",props:"\u53EF\u6DFB\u52A0\u5F53\u524D\u7EC4\u4EF6\u6240\u6709prop\u5C5E\u6027\u53CA\u4E8B\u4EF6\u65B9\u6CD5"}}),W=(o,l)=>{switch(o.eventName){case"selectMultiple":l?e.value.control.modelValue=[]:e.value.control.modelValue="";break;case"tableColumn1":r(l);break;case"formatNumber":break;case"filedNameKey":for(const d in v.dataSourceList)if(v.dataSourceList[d]===l){e.value.item&&(e.value.item.label=d),e.value.name=l;return}break;case"setInputSlot":l?(e.value.type="inputSlot",e.value.item.showLabel=!0,ee.success(`\u8BF7\u5728\u5BF9\u5E94\u7684Input\u8F93\u5165\u6846\u5C5E\u6027\u524D\u540E\u7F00\u8BBE\u7F6Ekey:${e.value.name}`)):(e.value.type="select",e.value.item.showLabel=!1);break}if(o.path){const d=o.isNum?be(l):l;o.path&&oe(e.value,o.path,d)}},oe=(o,l,d)=>{let m=o;const A=l.split(".");let C=0;for(C;C<A.length-1;C++){const $=A[C];if($ in m)m=m[$];else throw new Error(`${$} is undefined`)}const D=A[C],Q=m[A[C]];return d!==void 0&&(m[D]=d),{obj:m,key:D,value:Q}},y=(o,l)=>{l==="tabs"?e.value.columns.splice(o,1):e.value.options.splice(o,1)},U=o=>{e.value.type==="cascader"?g("cascader"):e.value.type==="treeSelect"?g("treeSelect","\u7F16\u8F91\u7EC4\u4EF6\u4E0B\u62C9\u9009\u9879\u6570\u636E"):o==="tabs"?e.value.columns.push({label:"\u6807\u7B7E\u540D\u79F0",list:[]}):e.value.options.push({label:"",value:""})},g=(o,l)=>{let d=e.value.control;switch(o){case"treeSelect":d=e.value.control.data;break;case"cascader":d=e.value.options;break;case"optionsParams":d=e.value.config.beforeRequest;break;case"optionsResult":d=e.value.config.afterResponse;break}z("openDialog",{content:d,title:l,type:o,direction:"ltr",callback:A=>{switch(o){case"treeSelect":e.value.control.data=A;break;case"cascader":e.value.options=A;break;case"optionsParams":e.value.config.beforeRequest=A;break;case"optionsResult":e.value.config.afterResponse=A;break;default:e.value.control={},Object.assign(e.value.control,A)}}})},K=o=>{var l;(l=e.value.item)!=null&&l.rules||(e.value.item.rules=[]),o?e.value.item.rules.push({required:!0,message:"\u5FC5\u586B\u9879",trigger:"change"}):e.value.item.rules.splice(0,1)},I=o=>{var d,m;(d=e.value.item)!=null&&d.rules||(e.value.item.rules=[]);const l={content:(m=e.value.item)==null?void 0:m.rules,title:o,direction:"ltr",callback:A=>{Object.assign(e.value.item.rules,A)}};z("openDialog",l)},p=(o,l)=>{if(o&&o.length===0||Object.keys(e.value).length===0)return!1;const d=o.indexOf(e.value.type);return l?d!==-1:d===-1},r=o=>{const l={name:"index",type:"index",item:{label:"\u5E8F\u53F7"},control:{},config:{}};o?e.value.list.unshift(l):e.value.list.splice(0,1)},_=ae(()=>{var l;const o=e.value&&((l=e.value.item)==null?void 0:l.rules);return o&&o.length>0}),O=()=>{e.value.customRules||(e.value.customRules=[]),e.value.customRules.push({type:"required",message:"\u5FC5\u586B\u9879",trigger:"blur"})},j=o=>{e.value.customRules&&e.value.customRules.splice(o,1)},ne=o=>{z("openDialog",{codeType:"css",direction:"ltr",type:"css",title:o})},x=o=>{z("openDialog",{type:"dict",direction:"ltr",codeType:"json",title:o})},q=o=>{const l=o||h.query.formId;l&&he("formFiled",{id:l}).then(d=>{d.data.code===200&&d.data.data.forEach(m=>{v.dataSourceList[m.label]=m.name})}).catch(d=>{console.log(d)}),h.query.type!=="search"&&he("datasource").then(d=>{L.value=d.data.data})},te=(o,l)=>{o.key==="formId"&&(q(o.value),n.setActiveKey(""),n.setControlAttr({})),o.path==="config"?E.value[o.key]=o.value||l:S.value[o.key]=o.value},re=o=>{switch(o){case 0:return"\u6570\u636E\u6E90\u63A5\u53E3URL";case 1:return"\u65B9\u6CD5\u540D\u79F0";case 2:return"\u5B57\u5178key\uFF0C\u9ED8\u8BA4\u4E3A\u5B57\u6BB5\u6807\u8BC6"}return""},ce=(o,l)=>{const d=ke.filter(m=>m.type===l);d&&d.length&&(o.message=d[0].message)},De=(o,l)=>{g(o,l)},de=(o,l)=>{z("openDialog",{type:o,title:l,direction:"ltr"})};return q(),(o,l)=>{const d=w("el-option"),m=w("el-select"),A=w("el-switch"),C=w("el-input"),D=w("el-form-item"),Q=w("el-radio"),$=w("el-radio-group"),M=w("el-col"),T=w("el-button"),pe=w("el-tab-pane"),G=w("QuestionFilled"),X=w("el-icon"),Y=w("el-tooltip"),ye=w("el-tabs"),Ne=w("el-checkbox"),_e=w("el-form");return s(),f("div",hu,[t(ye,{modelValue:"first"},{default:a(()=>[t(pe,{label:"\u5B57\u6BB5\u914D\u7F6E",name:"first"},{default:a(()=>[t(_e,{size:"small",class:"form"},{default:a(()=>[vu,(s(!0),f(N,null,H(c(J),(u,P)=>(s(),F(D,{key:P,label:u.label},{default:a(()=>[u.type==="select"?(s(),F(m,{key:0,placeholder:u.placeholder,modelValue:u.value,"onUpdate:modelValue":i=>u.value=i,filterable:u.path==="name","allow-create":u.path==="name",onChange:i=>W(u,i)},{default:a(()=>[(s(!0),f(N,null,H(u.dict,(i,Be)=>(s(),F(d,{key:i,value:i,label:u.path==="name"?`${Be}(${i})`:Be},null,8,["value","label"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","filterable","allow-create","onChange"])):u.type==="switch"?(s(),F(A,{key:1,modelValue:u.value,"onUpdate:modelValue":i=>u.value=i,onChange:i=>W(u,i)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(s(),F(C,{key:2,type:u.inputStyle,modelValue:u.value,"onUpdate:modelValue":i=>u.value=i,placeholder:u.placeholder,onInput:i=>W(u,i)},null,8,["type","modelValue","onUpdate:modelValue","placeholder","onInput"]))]),_:2},1032,["label"]))),128)),c(e).config?(s(),f(N,{key:0},[t(D,{label:"\u8054\u52A8\u6761\u4EF6"},{default:a(()=>[t(A,{modelValue:c(e).config.linkKey,"onUpdate:modelValue":l[0]||(l[0]=u=>c(e).config.linkKey=u)},null,8,["modelValue"])]),_:1}),c(e).config.linkKey?(s(),f(N,{key:0},[t(D,null,{default:a(()=>[t(C,{type:"textarea",modelValue:c(e).config.linkValue,"onUpdate:modelValue":l[1]||(l[1]=u=>c(e).config.linkValue=u),placeholder:"\u8868\u8FBE\u5F0F\u5982: $.input>1 $\u8868\u793A\u4E3A\u5F53\u524D\u8868\u5355\u6570\u636E\uFF0Cinput\u4E3A\u5B57\u6BB5\u6807\u8BC6"},null,8,["modelValue"])]),_:1}),p(["input","textarea","radio","checkbox","select","date","switch","number","cascader","slider","datePicker","timePicker","colorPicker","inputNumber","rate","treeSelect"],!0)?(s(),F(D,{key:0,label:"\u8054\u52A8\u7ED3\u679C"},{default:a(()=>[t($,{class:"option-radio",modelValue:c(e).config.linkResult,"onUpdate:modelValue":l[2]||(l[2]=u=>c(e).config.linkResult=u)},{default:a(()=>[t(Q,{label:"hidden"},{default:a(()=>[bu]),_:1}),t(Q,{label:"disabled"},{default:a(()=>[Eu]),_:1})]),_:1},8,["modelValue"])]),_:1})):B("",!0)],64)):B("",!0)],64)):B("",!0),p(["tabs"],!0)?(s(),f(N,{key:1},[Fu,(s(!0),f(N,null,H(c(e).columns,(u,P)=>(s(),F(D,{key:P},{default:a(()=>[t(M,{span:12},{default:a(()=>[t(C,{placeholder:"\u6807\u7B7E\u914D\u7F6E\u9879",modelValue:u.label,"onUpdate:modelValue":i=>u.label=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(M,{span:2,offset:1},{default:a(()=>[k("i",{class:"icon-del",onClick:i=>y(P,"tabs")},null,8,gu)]),_:2},1024)]),_:2},1024))),128)),t(D,null,{default:a(()=>[t(T,{onClick:l[3]||(l[3]=u=>U("tabs"))},{default:a(()=>[Cu]),_:1})]),_:1})],64)):B("",!0),p(["radio","select","checkbox","cascader","inputSlot","treeSelect"],!0)?(s(),f("div",Du,[yu,p("select",!0)?(s(),F(D,{key:0,label:"\u6DFB\u52A0\u5168\u90E8\u9879"},{default:a(()=>[t(C,{placeholder:"\u8BF7\u8F93\u5165\u5168\u90E8\u9879\u6587\u6848",modelValue:c(e).config.addAll,"onUpdate:modelValue":l[4]||(l[4]=u=>c(e).config.addAll=u)},null,8,["modelValue"])]),_:1})):B("",!0),t(ye,{modelValue:c(e).config.type,"onUpdate:modelValue":l[11]||(l[11]=u=>c(e).config.type=u)},{default:a(()=>[t(pe,{label:"\u56FA\u5B9A\u9009\u9879",name:"fixed"},{default:a(()=>[c(e).type!=="cascader"?(s(),f("div",_u,[(s(!0),f(N,null,H(c(e).options,(u,P)=>(s(),F(D,{key:P},{default:a(()=>[t(M,{span:10},{default:a(()=>[t(C,{placeholder:"\u9009\u9879\u6807\u7B7E",modelValue:u.label,"onUpdate:modelValue":i=>u.label=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(M,{span:10,offset:1},{default:a(()=>[t(C,{placeholder:"\u9009\u9879\u503C",modelValue:u.value,"onUpdate:modelValue":i=>u.value=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(M,{span:2,offset:1},{default:a(()=>[k("i",{class:"icon-del",onClick:i=>y(P)},null,8,Bu)]),_:2},1024)]),_:2},1024))),128))])):B("",!0),t(D,null,{default:a(()=>[t(T,{onClick:U},{default:a(()=>[b(se(c(e).type==="cascader"?"\u7F16\u8F91":"\u65B0\u589E"),1)]),_:1})]),_:1})]),_:1}),t(pe,{name:"async"},{label:a(()=>[t(Y,{content:"\u9009\u7528\u52A8\u6001\u9009\u9879\u65F6\u8BF7\u5220\u9664\u56FA\u5B9A\u9009\u9879\u6570\u636E",placement:"top"},{default:a(()=>[k("span",null,[ku,t(X,null,{default:a(()=>[t(G)]),_:1})])]),_:1})]),default:a(()=>[t($,{class:"option-radio",modelValue:c(e).config.source,"onUpdate:modelValue":l[5]||(l[5]=u=>c(e).config.source=u),onChange:l[6]||(l[6]=u=>c(e).config.sourceFun="")},{default:a(()=>[t(Q,{label:0},{default:a(()=>[Au]),_:1}),t(Q,{label:1},{default:a(()=>[wu,t(Y,{content:"\u9002\u7528\u4E8E\u5BFC\u51FA\u4E3A\u5355\u72EC\u7684vue\u6587\u4EF6\uFF0C\u5728\u5F53\u524D\u6587\u4EF6\u4F7F\u7528provide\u5F62\u5F0F\u5C06\u65B9\u6CD5\u4F20\u9012",placement:"top"},{default:a(()=>[t(X,null,{default:a(()=>[t(G)]),_:1})]),_:1})]),_:1}),t(Q,{label:2},{default:a(()=>[Vu,t(Y,{content:"\u4ECE\u5F53\u524D\u6570\u636E\u63A5\u53E3dict\u91CC\u5339\u914D\uFF0C\u53EF\u51CF\u5C11\u8BF7\u6C42\u6570\uFF0C\u5B9E\u9645\u9879\u76EE\u4E5F\u4E0D\u662F\u6BCF\u4E2A\u9009\u9879\u90FD\u6709\u5355\u72EC\u7684\u63A5\u53E3\u3002\u6B64\u8BBE\u7F6E\u9700\u8981\u5F00\u542F\u8868\u5355\u5C5E\u6027-\u6DFB\u52A0\u65F6\u83B7\u53D6\u8BF7\u6C42",placement:"top"},{default:a(()=>[t(X,null,{default:a(()=>[t(G)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(D,null,{default:a(()=>[t(C,{modelValue:c(e).config.sourceFun,"onUpdate:modelValue":l[8]||(l[8]=u=>c(e).config.sourceFun=u),placeholder:re(c(e).config.source)},Te({_:2},[c(e).config.source?void 0:{name:"prepend",fn:a(()=>[t(m,{modelValue:c(e).config.request,"onUpdate:modelValue":l[7]||(l[7]=u=>c(e).config.request=u),style:{width:"80px"}},{default:a(()=>[t(d,{label:"get",value:"get"}),t(d,{label:"post",value:"post"})]),_:1},8,["modelValue"])])}]),1032,["modelValue","placeholder"])]),_:1}),c(e).config.source===0?(s(),F(D,{key:0},{default:a(()=>[t(T,{onClick:l[9]||(l[9]=u=>De("optionsParams","\u8BF7\u6C42\u524D\u5904\u7406\u4E8B\u4EF6"))},{default:a(()=>[Su]),_:1}),t(T,{onClick:l[10]||(l[10]=u=>De("optionsResult"))},{default:a(()=>[xu]),_:1})]),_:1})):B("",!0)]),_:1})]),_:1},8,["modelValue"])])):B("",!0),!v.isSearch&&p(["txt","title","table","grid","tabs","card","switch","gridChild","tableColumn","divider","div"])?(s(),f(N,{key:3},[$u,p(["input","password","component"],!0)?(s(),f("div",Nu,[(s(!0),f(N,null,H(c(e).customRules,(u,P)=>(s(),F(D,{key:u.type},{default:a(()=>[t(C,{modelValue:u.message,"onUpdate:modelValue":i=>u.message=i,placeholder:"\u6821\u9A8C\u63D0\u793A\u4FE1\u606F"},{prepend:a(()=>[t(m,{modelValue:u.type,"onUpdate:modelValue":i=>u.type=i,style:{width:"80px"},onChange:i=>ce(u,i)},{default:a(()=>[(s(!0),f(N,null,H(v.customRulesList,i=>(s(),F(d,{key:i.type,label:i.label,value:i.type},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),append:a(()=>[k("i",{class:"icon-del",onClick:i=>j(P)},null,8,Uu)]),_:2},1032,["modelValue","onUpdate:modelValue"]),u.type==="rules"?(s(),F(C,{key:0,placeholder:"\u6B63\u5219\u8868\u8FBE\u5F0F",modelValue:u.rules,"onUpdate:modelValue":i=>u.rules=i},null,8,["modelValue","onUpdate:modelValue"])):B("",!0),u.type==="methods"?(s(),F(C,{key:1,placeholder:"\u65B9\u6CD5\u540D\u79F0",modelValue:u.methods,"onUpdate:modelValue":i=>u.methods=i},null,8,["modelValue","onUpdate:modelValue"])):B("",!0)]),_:2},1024))),128)),t(D,null,{default:a(()=>[t(T,{onClick:O},{default:a(()=>[Ru]),_:1}),t(T,{onClick:l[12]||(l[12]=u=>I(v.tooltip.rules))},{default:a(()=>[Pu,t(Y,{content:v.tooltip.rules,placement:"top","raw-content":""},{default:a(()=>[t(X,null,{default:a(()=>[t(G)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1})])):(s(),F(D,{key:1},{default:a(()=>{var u,P;return[t(Ne,{modelValue:c(_),onChange:K},{default:a(()=>[Lu]),_:1},8,["modelValue"]),((u=c(e).item)==null?void 0:u.rules)&&((P=c(e).item)==null?void 0:P.rules[0])?(s(),F(C,{key:0,placeholder:"\u81EA\u5B9A\u4E49\u5FC5\u586B\u9519\u8BEF\u63D0\u793A",modelValue:c(e).item.rules[0].message,"onUpdate:modelValue":l[13]||(l[13]=i=>c(e).item.rules[0].message=i)},null,8,["modelValue"])):B("",!0)]}),_:1}))],64)):B("",!0),p(["grid","card","gridChild","divider","div"])?(s(),f("div",Iu,[Tu,t(T,{size:"small",onClick:l[14]||(l[14]=u=>g("",v.tooltip.props))},{default:a(()=>[Ou,t(Y,{content:v.tooltip.props,placement:"top"},{default:a(()=>[t(X,null,{default:a(()=>[t(G)]),_:1})]),_:1},8,["content"])]),_:1})])):B("",!0)]),_:1})]),_:1}),t(pe,{label:"\u8868\u5355\u914D\u7F6E",name:"second"},{default:a(()=>[t(_e,{size:"small",class:"form"},{default:a(()=>[(s(!0),f(N,null,H(c(R).filter(u=>!u.hide),(u,P)=>(s(),F(D,{label:u.label,key:P},{default:a(()=>[u.type==="select"?(s(),F(m,{key:0,modelValue:u.value,"onUpdate:modelValue":i=>u.value=i,placeholder:u.placeholder,onChange:i=>te(u)},{default:a(()=>[(s(!0),f(N,null,H(u.options,i=>(s(),F(d,{label:i.label||i.name,key:i.label||i.name,value:c(be)(i.value||i.id)},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])):u.type==="switch"?(s(),F(A,{key:1,modelValue:u.value,"onUpdate:modelValue":i=>u.value=i,onInput:i=>te(u)},null,8,["modelValue","onUpdate:modelValue","onInput"])):(s(),F(C,{key:2,modelValue:u.value,"onUpdate:modelValue":i=>u.value=i,placeholder:u.placeholder,onInput:i=>te(u)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"]))]),_:2},1032,["label"]))),128)),v.isSearch?B("",!0):(s(),F(D,{key:0},{label:a(()=>[qu,t(Y,{content:"\u65B0\u589E\u8868\u5355\u6570\u636E\u65F6\uFF0C\u4ECE\u63A5\u53E3\u83B7\u53D6\u65B0\u589E\u521D\u59CB\u6570\u636E",placement:"top"},{default:a(()=>[t(X,null,{default:a(()=>[t(G)]),_:1})]),_:1})]),default:a(()=>[t(A,{modelValue:c(E).addLoad,"onUpdate:modelValue":l[15]||(l[15]=u=>c(E).addLoad=u),onChange:l[16]||(l[16]=u=>te({key:"addLoad",path:"config"},u))},null,8,["modelValue"])]),_:1})),t(D,null,{default:a(()=>[t(T,{onClick:l[17]||(l[17]=u=>ne(v.tooltip.css))},{default:a(()=>[zu,t(Y,{content:v.tooltip.css,placement:"top"},{default:a(()=>[t(X,null,{default:a(()=>[t(G)]),_:1})]),_:1},8,["content"])]),_:1}),t(T,{onClick:l[18]||(l[18]=u=>x(v.tooltip.dict))},{default:a(()=>[ju,t(Y,{content:v.tooltip.dict,placement:"top"},{default:a(()=>[t(X,null,{default:a(()=>[t(G)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),v.isSearch?B("",!0):(s(),f(N,{key:1},[Hu,t(D,{class:"event-btn"},{default:a(()=>[t(T,{onClick:l[19]||(l[19]=u=>de("beforeRequest","\u83B7\u53D6\u8868\u5355\u521D\u59CB\u6570\u636E\u524D\u4E8B\u4EF6\uFF0C\u53EF\u4FEE\u6539\u8BF7\u6C42\u53C2\u6570"))},{default:a(()=>[Ku]),_:1}),t(T,{onClick:l[20]||(l[20]=u=>de("afterResponse","\u83B7\u53D6\u8868\u5355\u521D\u59CB\u6570\u636E\u540E\u4E8B\u4EF6\uFF0C\u53EF\u5BF9\u8BF7\u6C42\u8FD4\u56DE\u6570\u636E\u8FDB\u884C\u5904\u7406"))},{default:a(()=>[Mu]),_:1}),t(T,{onClick:l[21]||(l[21]=u=>de("beforeSubmit","\u8868\u5355\u6570\u636E\u63D0\u4EA4\u524D\u4E8B\u4EF6\uFF0C\u53EF\u5BF9\u63D0\u4EA4\u6570\u636E\u8FDB\u884C\u5904\u7406"))},{default:a(()=>[Ju]),_:1}),t(T,{onClick:l[22]||(l[22]=u=>de("afterSubmit","\u8868\u5355\u6570\u636E\u63D0\u4EA4\u6210\u529F\u4E8B\u4EF6"))},{default:a(()=>[Wu]),_:1})]),_:1})],64))]),_:1})]),_:1})]),_:1})])}}}),Gu={class:"design-container"},Xu={class:"main-body"},Yu={class:"main-form"},Zu={key:0,class:"empty-tips"},et=["innerHTML"],ut={key:0,id:"editJson"},tt={class:"dialog-footer"},lt=b(" \u786E\u5B9A "),at={class:"dialog-footer"},ot=b(" \u63D0\u4EA4 "),nt=b(" \u53D6\u6D88 "),rt=ve({__name:"index",setup(ue){var I;Oe().changeBreadcrumb([{label:"\u7CFB\u7EDF\u5DE5\u5177"},{label:"\u8868\u5355\u8BBE\u8BA1"}]);const V=xe(),E=qe(),S=$e(),n=fe({formData:{list:[],form:{labelWidth:"",class:"",size:"default",name:"form"+new Date().getTime()},config:{title:"form"+new Date().getTime(),formId:S.query.formId||""}},editor:{},loading:!1,formDataPreview:{},previewVisible:!1,searchDesign:((I=S.query)==null?void 0:I.type)==="search",formDataList:{},formDataTemp:{},formDict:{}}),h=fe({visible:!1,type:"",title:"",codeType:"",direction:"ltr",callback:""}),e=ie(),L=()=>{const p=S.query.id;p&&(n.loading=!0,he("getFormById",{id:p}).then(r=>{if(r.data.code===200){const _=r.data.data;n.searchDesign?(_.searchData&&(n.formData=Z(_.searchData)),n.formDataList=Z(_.formData),n.formDataTemp=_):_.formData&&(n.formData=Z(_.formData)),n.formDict=Ee(_.dict)}n.loading=!1}).catch(r=>{ee.error(r.data.message||"\u52A0\u8F7D\u5F02\u5E38"),n.loading=!1}))},R=p=>{switch(p){case"del":n.formData.list=[],V.setActiveKey(""),V.setControlAttr({});break;case"eye":V.setActiveKey(""),V.setControlAttr({}),n.previewVisible=!0;let r=le(n.formData);const _=n.formData.form.name,O=new RegExp(`get${_}ControlByName`,"g");r=r.replace(O,`getPreview${_}ControlByName`),n.formDataPreview=Z(r),n.formDataPreview.form.name=`Preview${_}`;break;case"json":W({direction:"rtl",content:n.formData,title:"\u53EF\u7F16\u8F91\u4FEE\u6539\u6216\u5C06\u5DF2\u751F\u6210\u7684\u811A\u672C\u7C98\u8D34\u8FDB\u6765"});break;case"save":v();break;case"vue":e.value.open(n.formData);break}},J=()=>{try{const p=n.editor.getValue();if(typeof h.callback=="function"){const r=h.codeType==="json"?Ee(p):Z(p);h.callback(r)}else switch(h.type){case"css":n.formData.config||(n.formData.config={}),n.formData.config.style=p;break;case"dict":n.formDict=Ee(p);break;case"beforeRequest":case"beforeSubmit":case"afterResponse":case"afterSubmit":n.formData.events||(n.formData.events={}),n.formData.events[n.dialogType]=Z(p);break;default:n.formData=Z(p)}h.visible=!1}catch{}},v=()=>{var _,O;const p=(_=n.formData.config)==null?void 0:_.title;if(!n.searchDesign&&!p){ee.error("\u8BF7\u5207\u6362\u5230\u8868\u5355\u5C5E\u6027\u8F93\u5165\u8868\u5355\u540D\u79F0\uFF01");return}const r=Object.assign({},n.formDataTemp,{formData:le(n.formData),id:S.query.id,formId:((O=n.formData.config)==null?void 0:O.formId)||S.query.formId,name:p,type:1,dict:Fe(n.formDict)});n.searchDesign&&Object.assign(r,{searchData:le(n.formData),formData:n.formDataTemp.formData}),n.loading=!0,he("saveForm",r).then(j=>{j.data.code===200?(ee({message:"\u4FDD\u5B58\u6210\u529F\uFF01",type:"success"}),E.push({path:"/designform/formlist"})):ee.error(j.data.message),n.loading=!1}).catch(j=>{ee.error(j.data.message||"\u4FDD\u5B58\u5F02\u5E38"),n.loading=!1}),S.query.id||window.sessionStorage.removeItem("formMenuList"),V.setActiveKey(""),V.setControlAttr({})},W=p=>{var te;const{type:r,direction:_,codeType:O,title:j,callback:ne,content:x}=p;h.direction=_,h.type=r,h.codeType=O||"",h.title=j?`\u63D0\u793A\uFF1A${j}`:"",h.visible=!0,h.callback=ne;let q=O==="json"?Fe(x,!0):le(x,!0);switch(r){case"css":q=((te=n.formData.config)==null?void 0:te.style)||"";break;case"dict":q=Fe(n.formDict,!0);break;case"beforeRequest":case"beforeSubmit":const re=n.formData.events||{};re[r]?q=le(re[r],!0):q=Ve;break;case"afterResponse":case"afterSubmit":const ce=n.formData.events||{};ce[r]?q=le(ce[r],!0):q=we;break;case"optionsParams":x||(q=Ve);break;case"optionsResult":x||(q=we);break}Ke(()=>{n.editor=Me(q,"",O)})},oe=p=>{y(),p()},y=()=>{h.visible=!1,h.type="",h.title="",h.codeType="",h.callback=""},U=ie(),g=()=>{U.value.validate((p,r)=>{if(p)ee.success("\u6821\u9A8C\u901A\u8FC7"),console.log(r);else return ee.error("\u6821\u9A8C\u4E0D\u901A\u8FC7"),!1})},K=p=>{n.formData=Z(le(p))};return L(),ze(()=>{Object.keys(n.editor).length!==0&&(n.editor.destroy(),n.editor.container.remove())}),(p,r)=>{const _=w("el-button"),O=w("el-drawer"),j=w("el-dialog"),ne=je("loading");return s(),f("div",Gu,[t(fu,{formData:n.formDataList,searchData:n.formData.list,"onUpdate:searchData":r[0]||(r[0]=x=>n.formData.list=x),searchDesign:n.searchDesign,onClick:K},null,8,["formData","searchData","searchDesign"]),k("div",Xu,[t(Ue,{onClick:R}),He((s(),f("div",Yu,[n.formData.list.length===0?(s(),f("div",Zu," \u4ECE\u5DE6\u4FA7\u62D6\u62FD\u6765\u6DFB\u52A0\u5B57\u6BB5 ")):B("",!0),t(Ae,{type:4,formData:n.formData,dict:n.formDict},null,8,["formData","dict"])])),[[ne,n.loading]])]),t(Qu,{formData:n.formData.form,"onUpdate:formData":r[1]||(r[1]=x=>n.formData.form=x),formConfig:n.formData.config,"onUpdate:formConfig":r[2]||(r[2]=x=>n.formData.config=x),onOpenDialog:W},null,8,["formData","formConfig"]),t(O,{modelValue:h.visible,"onUpdate:modelValue":r[3]||(r[3]=x=>h.visible=x),size:"60%",title:h.title,direction:h.direction,"custom-class":"ace-dialog","append-to-body":!0,"before-close":oe},{header:a(()=>[k("div",{innerHTML:h.title},null,8,et)]),default:a(()=>[h.visible?(s(),f("div",ut)):B("",!0),k("div",tt,[t(_,{type:"primary",size:"small",onClick:J},{default:a(()=>[lt]),_:1})])]),_:1},8,["modelValue","title","direction"]),n.searchDesign?B("",!0):(s(),F(Re,{key:0,ref_key:"vueFileEl",ref:e},null,512)),t(j,{modelValue:n.previewVisible,"onUpdate:modelValue":r[5]||(r[5]=x=>n.previewVisible=x),title:"\u9884\u89C8",fullscreen:!0},{footer:a(()=>[k("div",at,[t(_,{size:"small",type:"primary",onClick:g},{default:a(()=>[ot]),_:1}),t(_,{size:"small",onClick:r[4]||(r[4]=x=>n.previewVisible=!1)},{default:a(()=>[nt]),_:1})])]),default:a(()=>[n.previewVisible?(s(),F(Ae,{key:0,"form-data":n.formDataPreview,dict:n.formDict,type:1,ref_key:"previewForm",ref:U},null,8,["form-data","dict"])):B("",!0)]),_:1},8,["modelValue"])])}}});export{rt as default};
